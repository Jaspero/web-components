import{c as W,S as X,i as Y,f as C,s as Z,a as _,e as m,b as H,d as q,t as z,g as p,h as g,o as E,n as k,j as v,k as ee,w as te,l as $,m as T,p as A,q as N,r as re,u as B,v as le,H as ne}from"./svelte.js";import"./index2.js";import{g as se}from"./json-pointer.js";function oe(n){_(n,"svelte-1qrhj85",".table-card.svelte-1qrhj85{background-color:var(--background-primary);border-radius:.25rem;box-shadow:0 3px 12px rgba(0,0,0,.16)}.table-container.svelte-1qrhj85{overflow-x:auto;width:100%}table.svelte-1qrhj85{width:100%}th.svelte-1qrhj85,td.svelte-1qrhj85{text-align:left;white-space:nowrap;font-size:.75rem;font-weight:normal;padding:.5rem;border-bottom:1px solid rgba(0,0,0,.16)}th.svelte-1qrhj85{opacity:.75}.table-actions.svelte-1qrhj85{padding:1rem}.load-button.svelte-1qrhj85{display:flex;justify-content:center;align-items:center;border-radius:.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;background-color:var(--primary-color);color:var(--text-on-primary);-webkit-user-select:none;-moz-user-select:none;user-select:none}.load-button.svelte-1qrhj85:disabled{opacity:.5}.load-button.loading.svelte-1qrhj85{pointer-events:none}.spinner.svelte-1qrhj85{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;border-radius:50%;width:1rem;height:1rem;margin-right:.5rem;animation:svelte-1qrhj85-spin 1s linear infinite}@keyframes svelte-1qrhj85-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}")}function D(n,l,r){const t=n.slice();return t[13]=l[r],t[15]=r,t}function F(n,l,r){const t=n.slice();return t[16]=l[r],t}function G(n,l,r){const t=n.slice();return t[16]=l[r],t}function I(n){let l,r=$(n[1]),t=[];for(let e=0;e<r.length;e+=1)t[e]=K(G(n,r,e));return{c(){l=m("tr");for(let e=0;e<t.length;e+=1)t[e].c()},m(e,s){p(e,l,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(l,null)},p(e,s){if(s&67){r=$(e[1]);let o;for(o=0;o<r.length;o+=1){const a=G(e,r,o);t[o]?t[o].p(a,s):(t[o]=K(a),t[o].c(),t[o].m(l,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=r.length}},d(e){e&&v(l),T(t,e)}}}function J(n){let l,r=n[0].direction==="asc"?"\u2191":"\u2193",t;return{c(){l=m("span"),t=N(r)},m(e,s){p(e,l,s),g(l,t)},p(e,s){s&1&&r!==(r=e[0].direction==="asc"?"\u2191":"\u2193")&&re(t,r)},d(e){e&&v(l)}}}function K(n){var l;let r,t,e=n[16].label+"",s,o,a,u,h=((l=n[0])==null?void 0:l.key)===n[16].key&&J(n);function w(){return n[10](n[16])}return{c(){r=m("th"),t=m("span"),s=H(),h&&h.c(),o=H(),q(r,"class","svelte-1qrhj85"),z(r,"sortable",n[16].sortable)},m(i,d){p(i,r,d),g(r,t),t.innerHTML=e,g(r,s),h&&h.m(r,null),g(r,o),a||(u=E(r,"click",w),a=!0)},p(i,d){var y;n=i,d&2&&e!==(e=n[16].label+"")&&(t.innerHTML=e),((y=n[0])==null?void 0:y.key)===n[16].key?h?h.p(n,d):(h=J(n),h.c(),h.m(r,o)):h&&(h.d(1),h=null),d&2&&z(r,"sortable",n[16].sortable)},d(i){i&&v(r),h&&h.d(),a=!1,u()}}}function O(n){let l,r=$(n[4]),t=[];for(let e=0;e<r.length;e+=1)t[e]=Q(D(n,r,e));return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=A()},m(e,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,s);p(e,l,s)},p(e,s){if(s&306){r=$(e[4]);let o;for(o=0;o<r.length;o+=1){const a=D(e,r,o);t[o]?t[o].p(a,s):(t[o]=Q(a),t[o].c(),t[o].m(l.parentNode,l))}for(;o<t.length;o+=1)t[o].d(1);t.length=r.length}},d(e){e&&v(l),T(t,e)}}}function ae(n){return{c:k,m:k,p:k,d:k}}function ce(n){let l,r=n[19]+"",t;return{c(){l=new ne(!1),t=A(),l.a=t},m(e,s){l.m(r,e,s),p(e,t,s)},p(e,s){s&18&&r!==(r=e[19]+"")&&l.p(r)},d(e){e&&(v(t),l.d())}}}function ie(n){return{c:k,m:k,p:k,d:k}}function P(n){let l,r,t,e,s={ctx:n,current:null,token:null,hasCatch:!1,pending:ie,then:ce,catch:ae,value:19};B(r=n[5](n[16],n[13],n[15]),s);function o(...a){return n[11](n[13],n[15],n[16],...a)}return{c(){l=m("td"),s.block.c(),q(l,"class","svelte-1qrhj85")},m(a,u){p(a,l,u),s.block.m(l,s.anchor=null),s.mount=()=>l,s.anchor=null,t||(e=E(l,"click",o),t=!0)},p(a,u){n=a,s.ctx=n,u&18&&r!==(r=n[5](n[16],n[13],n[15]))&&B(r,s)||le(s,n,u)},d(a){a&&v(l),s.block.d(),s.token=null,s=null,t=!1,e()}}}function Q(n){let l,r,t=$(n[1]),e=[];for(let s=0;s<t.length;s+=1)e[s]=P(F(n,t,s));return{c(){l=m("tr");for(let s=0;s<e.length;s+=1)e[s].c();r=H()},m(s,o){p(s,l,o);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,null);g(l,r)},p(s,o){if(o&306){t=$(s[1]);let a;for(a=0;a<t.length;a+=1){const u=F(s,t,a);e[a]?e[a].p(u,o):(e[a]=P(u),e[a].c(),e[a].m(l,r))}for(;a<e.length;a+=1)e[a].d(1);e.length=t.length}},d(s){s&&v(l),T(e,s)}}}function de(n){let l;return{c(){l=N("Load More")},m(r,t){p(r,l,t)},d(r){r&&v(l)}}}function ue(n){let l,r;return{c(){l=m("span"),r=N(`
        Loading`),q(l,"class","spinner svelte-1qrhj85")},m(t,e){p(t,l,e),p(t,r,e)},d(t){t&&(v(l),v(r))}}}function he(n){let l,r,t,e,s,o,a,u,h,w,i=n[1]&&I(n),d=n[4]&&O(n);function y(c,f){return c[2]?ue:de}let x=y(n),b=x(n);return{c(){l=m("div"),r=m("div"),t=m("table"),i&&i.c(),e=H(),d&&d.c(),s=H(),o=m("div"),a=m("button"),b.c(),q(t,"class","svelte-1qrhj85"),q(r,"class","table-container svelte-1qrhj85"),q(a,"class","load-button svelte-1qrhj85"),a.disabled=u=!n[3],z(a,"loading",n[2]),q(o,"class","table-actions svelte-1qrhj85"),q(l,"class","table-card svelte-1qrhj85")},m(c,f){p(c,l,f),g(l,r),g(r,t),i&&i.m(t,null),g(t,e),d&&d.m(t,null),g(l,s),g(l,o),g(o,a),b.m(a,null),h||(w=E(a,"click",n[7]),h=!0)},p(c,[f]){c[1]?i?i.p(c,f):(i=I(c),i.c(),i.m(t,e)):i&&(i.d(1),i=null),c[4]?d?d.p(c,f):(d=O(c),d.c(),d.m(t,null)):d&&(d.d(1),d=null),x!==(x=y(c))&&(b.d(1),b=x(c),b&&(b.c(),b.m(a,null))),f&8&&u!==(u=!c[3])&&(a.disabled=u),f&4&&z(a,"loading",c[2])},i:k,o:k,d(c){c&&v(l),i&&i.d(),d&&d.d(),b.d(),h=!1,w()}}}function fe(n,l,r){let{headers:t=[]}=l,{sort:e}=l,{service:s}=l,o=!0,a=!1,u=[];const h=ee();async function w(c,f,j){const{key:M,fallback:U,pipes:S}=c;let L;try{L=se(f,M)}catch{return U||""}if(!S)return L;for(const V of S)L=await V(L,f,j);return L}async function i(c){const{sortable:f}=c;if(!f)return;r(2,o=!0),r(0,e={key:c.key,direction:e?.key===c.key&&e.direction==="asc"?"desc":"asc"});const j=await s.get(e);r(4,u=j.rows),r(3,a=j.hasMore),r(2,o=!1)}async function d(){r(2,o=!0);const c=await s.loadMore(e);r(4,u=[...u,...c.rows]),r(3,a=c.hasMore),r(2,o=!1)}function y(c,f,j,M){h("rowClick",{row:c,index:f,header:j,originalEvent:M})}te(async()=>{const c=await s.get(e);r(4,u=c.rows),r(3,a=c.hasMore),r(2,o=!1)});const x=c=>i(c),b=(c,f,j,M)=>y(c,f,j,M);return n.$$set=c=>{"headers"in c&&r(1,t=c.headers),"sort"in c&&r(0,e=c.sort),"service"in c&&r(9,s=c.service)},[e,t,o,a,u,w,i,d,y,s,x,b]}class R extends X{constructor(l){super(),Y(this,l,fe,he,Z,{headers:1,sort:0,service:9},oe)}get headers(){return this.$$.ctx[1]}set headers(l){this.$$set({headers:l}),C()}get sort(){return this.$$.ctx[0]}set sort(l){this.$$set({sort:l}),C()}get service(){return this.$$.ctx[9]}set service(l){this.$$set({service:l}),C()}}customElements.define("jp-async-table",W(R,{headers:{},sort:{},service:{}},[],[],!1));export{R as default};
