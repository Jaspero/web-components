import{c as oe,S as re,i as se,f as H,s as ae,a as le,e as b,b as L,d as v,t as T,g as f,h as w,o as S,n as E,j as h,k as ie,w as ce,q as U,l as B,m as q,p as de,r as ge,u as N,v as ue}from"./svelte.js";import"./index2.js";import{g as me}from"./json-pointer.js";function pe(r){le(r,"svelte-4zgzc5",".table-card.svelte-4zgzc5{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-4zgzc5{overflow-x:auto;width:100%}table.svelte-4zgzc5{width:100%}th.svelte-4zgzc5,td.svelte-4zgzc5{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-4zgzc5{opacity:0.75}.cell.svelte-4zgzc5{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-actions.svelte-4zgzc5{padding:1rem}.table-header.svelte-4zgzc5{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-4zgzc5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-4zgzc5{background-color:var(--background-secondary);color:var(--text-on-secondary)}.load-button.svelte-4zgzc5{background-color:var(--primary-color);color:var(--text-on-primary)}.load-button.svelte-4zgzc5:disabled{opacity:0.5}.load-button.loading.svelte-4zgzc5{pointer-events:none}.spinner.svelte-4zgzc5{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:1rem;height:1rem;margin-right:0.5rem;-webkit-animation:svelte-4zgzc5-spin 1s linear infinite;-moz-animation:svelte-4zgzc5-spin 1s linear infinite;-o-animation:svelte-4zgzc5-spin 1s linear infinite;animation:svelte-4zgzc5-spin 1s linear infinite}@-webkit-keyframes svelte-4zgzc5-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-4zgzc5-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-4zgzc5-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-4zgzc5-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}function O(r,e,t){const n=r.slice();return n[19]=e[t],n[21]=t,n}function _(r,e,t){const n=r.slice();return n[22]=e[t],n}function F(r,e,t){const n=r.slice();return n[22]=e[t],n}function G(r){let e,t,n=r[1]&&I(),o=r[2]&&J(r);return{c(){e=b("div"),n&&n.c(),t=L(),o&&o.c(),v(e,"class","table-header svelte-4zgzc5")},m(s,a){f(s,e,a),n&&n.m(e,null),w(e,t),o&&o.m(e,null)},p(s,a){s[1]?n||(n=I(),n.c(),n.m(e,t)):n&&(n.d(1),n=null),s[2]?o?o.p(s,a):(o=J(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(s){s&&h(e),n&&n.d(),o&&o.d()}}}function I(r){let e;return{c(){e=b("button"),e.textContent="Arrange Columns",v(e,"type","button"),v(e,"class","table-button settings-button svelte-4zgzc5")},m(t,n){f(t,e,n)},d(t){t&&h(e)}}}function J(r){let e,t,n,o;return{c(){e=U(`\xA0
        `),t=b("button"),t.textContent="Export",v(t,"type","button"),v(t,"class","table-button settings-button svelte-4zgzc5"),T(t,"loading",r[6])},m(s,a){f(s,e,a),f(s,t,a),n||(o=S(t,"click",r[12]),n=!0)},p(s,a){a&64&&T(t,"loading",s[6])},d(s){s&&(h(e),h(t)),n=!1,o()}}}function K(r){let e,t=B(r[7]),n=[];for(let o=0;o<t.length;o+=1)n[o]=V(F(r,t,o));return{c(){e=b("tr");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,s){f(o,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(o,s){if(s&641){t=B(o[7]);let a;for(a=0;a<t.length;a+=1){const l=F(o,t,a);n[a]?n[a].p(l,s):(n[a]=V(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(o){o&&h(e),q(n,o)}}}function Q(r){let e,t=r[0].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=b("span"),n=U(t)},m(o,s){f(o,e,s),w(e,n)},p(o,s){s&1&&t!==(t=o[0].direction==="asc"?"\u2191":"\u2193")&&ge(n,t)},d(o){o&&h(e)}}}function V(r){var e;let t,n,o=r[22].label+"",s,a,l,d,c=((e=r[0])==null?void 0:e.key)===r[22].key&&Q(r);function x(){return r[16](r[22])}return{c(){t=b("th"),n=b("span"),s=L(),c&&c.c(),a=L(),v(t,"class","svelte-4zgzc5"),T(t,"sortable",r[22].sortable)},m(z,g){f(z,t,g),w(t,n),n.innerHTML=o,w(t,s),c&&c.m(t,null),w(t,a),l||(d=S(t,"click",x),l=!0)},p(z,g){var m;r=z,g&128&&o!==(o=r[22].label+"")&&(n.innerHTML=o),((m=r[0])==null?void 0:m.key)===r[22].key?c?c.p(r,g):(c=Q(r),c.c(),c.m(t,a)):c&&(c.d(1),c=null),g&128&&T(t,"sortable",r[22].sortable)},d(z){z&&h(t),c&&c.d(),l=!1,d()}}}function W(r){let e,t=B(r[5]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Y(O(r,t,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=de()},m(o,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,s);f(o,e,s)},p(o,s){if(s&2464){t=B(o[5]);let a;for(a=0;a<t.length;a+=1){const l=O(o,t,a);n[a]?n[a].p(l,s):(n[a]=Y(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(o){o&&h(e),q(n,o)}}}function be(r){return{c:E,m:E,p:E,d:E}}function fe(r){let e,t=r[25]+"";return{c(){e=b("span"),v(e,"class","cell svelte-4zgzc5")},m(n,o){f(n,e,o),e.innerHTML=t},p(n,o){o&160&&t!==(t=n[25]+"")&&(e.innerHTML=t)},d(n){n&&h(e)}}}function he(r){return{c:E,m:E,p:E,d:E}}function X(r){let e,t,n,o,s={ctx:r,current:null,token:null,hasCatch:!1,pending:he,then:fe,catch:be,value:25};N(t=r[8](r[22],r[19],r[21]),s);function a(...l){return r[17](r[19],r[21],r[22],...l)}return{c(){e=b("td"),s.block.c(),v(e,"class","svelte-4zgzc5")},m(l,d){f(l,e,d),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,n||(o=S(e,"click",a),n=!0)},p(l,d){r=l,s.ctx=r,d&160&&t!==(t=r[8](r[22],r[19],r[21]))&&N(t,s)||ue(s,r,d)},d(l){l&&h(e),s.block.d(),s.token=null,s=null,n=!1,o()}}}function Y(r){let e,t,n=B(r[7]),o=[];for(let s=0;s<n.length;s+=1)o[s]=X(_(r,n,s));return{c(){e=b("tr");for(let s=0;s<o.length;s+=1)o[s].c();t=L()},m(s,a){f(s,e,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null);w(e,t)},p(s,a){if(a&2464){n=B(s[7]);let l;for(l=0;l<n.length;l+=1){const d=_(s,n,l);o[l]?o[l].p(d,a):(o[l]=X(d),o[l].c(),o[l].m(e,t))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(s){s&&h(e),q(o,s)}}}function ze(r){let e;return{c(){e=U("Load More")},m(t,n){f(t,e,n)},d(t){t&&h(e)}}}function ve(r){let e,t;return{c(){e=b("span"),t=U(`
        Loading`),v(e,"class","spinner svelte-4zgzc5")},m(n,o){f(n,e,o),f(n,t,o)},d(n){n&&(h(e),h(t))}}}function we(r){let e,t,n,o,s,a,l,d,c,x,z,g=(r[1]||r[2])&&G(r),m=r[7]&&K(r),p=r[5]&&W(r);function P(u,y){return u[3]?ve:ze}let A=P(r),k=A(r);return{c(){e=b("div"),g&&g.c(),t=L(),n=b("div"),o=b("table"),m&&m.c(),s=L(),p&&p.c(),a=L(),l=b("div"),d=b("button"),k.c(),v(o,"class","svelte-4zgzc5"),v(n,"class","table-container svelte-4zgzc5"),v(d,"class","table-button load-button svelte-4zgzc5"),d.disabled=c=!r[4],T(d,"loading",r[3]),v(l,"class","table-actions svelte-4zgzc5"),v(e,"class","table-card svelte-4zgzc5")},m(u,y){f(u,e,y),g&&g.m(e,null),w(e,t),w(e,n),w(n,o),m&&m.m(o,null),w(o,s),p&&p.m(o,null),w(e,a),w(e,l),w(l,d),k.m(d,null),x||(z=S(d,"click",r[10]),x=!0)},p(u,[y]){u[1]||u[2]?g?g.p(u,y):(g=G(u),g.c(),g.m(e,t)):g&&(g.d(1),g=null),u[7]?m?m.p(u,y):(m=K(u),m.c(),m.m(o,s)):m&&(m.d(1),m=null),u[5]?p?p.p(u,y):(p=W(u),p.c(),p.m(o,null)):p&&(p.d(1),p=null),A!==(A=P(u))&&(k.d(1),k=A(u),k&&(k.c(),k.m(d,null))),y&16&&c!==(c=!u[4])&&(d.disabled=c),y&8&&T(d,"loading",u[3])},i:E,o:E,d(u){u&&h(e),g&&g.d(),m&&m.d(),p&&p.d(),k.d(),x=!1,z()}}}function xe(r,e,t){let{showArrangingColumns:n=!0}=e,{showExport:o=!0}=e,{headers:s=[]}=e,{sort:a}=e,{service:l}=e,{getData:d=async()=>{const i=await l.get(a);t(5,z=i.rows),t(4,x=i.hasMore),t(3,c=!1)}}=e,c=!0,x=!1,z=[],g=!1,m;const p=ie();async function P(i,$,C){const{key:j,fallback:D,pipes:R}=i;let M;try{M=me($,j)}catch{return D||""}if(!R)return M;for(const ne of R)M=await ne(M,$,C);return M}async function A(i){const{sortable:$}=i;if(!$)return;t(3,c=!0),t(0,a={key:i.key,direction:a?.key===i.key&&a.direction==="asc"?"desc":"asc"});const C=await l.get(a);t(5,z=C.rows),t(4,x=C.hasMore),t(3,c=!1)}async function k(){t(3,c=!0);const i=await l.loadMore(a);t(5,z=[...z,...i.rows]),t(4,x=i.hasMore),t(3,c=!1)}function u(i,$,C,j){p("rowClick",{row:i,index:$,header:C,originalEvent:j})}async function y(){t(6,g=!0);const i=await l.export(),$=await Promise.all(i.map(async(D,R)=>(await Promise.all(m.map(M=>P(M,D,R)))).map(M=>`"${M||""}"`).join(","))),C=new Blob([[m.map(D=>D.label).map(D=>`"${D}"`).join(","),...$].join(`
`)],{type:"text/csv"}),j=document.createElement("a");j.href=URL.createObjectURL(C),j.download="export.csv",j.click(),t(6,g=!1)}ce(async()=>{await d()});const ee=i=>A(i),te=(i,$,C,j)=>u(i,$,C,j);return r.$$set=i=>{"showArrangingColumns"in i&&t(1,n=i.showArrangingColumns),"showExport"in i&&t(2,o=i.showExport),"headers"in i&&t(13,s=i.headers),"sort"in i&&t(0,a=i.sort),"service"in i&&t(14,l=i.service),"getData"in i&&t(15,d=i.getData)},r.$$.update=()=>{r.$$.dirty&8192&&t(7,m=s.filter(i=>!i.disabled))},[a,n,o,c,x,z,g,m,P,A,k,u,y,s,l,d,ee,te]}class Z extends re{constructor(e){super(),se(this,e,xe,we,ae,{showArrangingColumns:1,showExport:2,headers:13,sort:0,service:14,getData:15},pe)}get showArrangingColumns(){return this.$$.ctx[1]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),H()}get showExport(){return this.$$.ctx[2]}set showExport(e){this.$$set({showExport:e}),H()}get headers(){return this.$$.ctx[13]}set headers(e){this.$$set({headers:e}),H()}get sort(){return this.$$.ctx[0]}set sort(e){this.$$set({sort:e}),H()}get service(){return this.$$.ctx[14]}set service(e){this.$$set({service:e}),H()}get getData(){return this.$$.ctx[15]}set getData(e){this.$$set({getData:e}),H()}}try{customElements.define("jp-async-table",oe(Z,{showArrangingColumns:{type:"Boolean"},showExport:{type:"Boolean"},headers:{},sort:{},service:{},getData:{}},[],[],!1));}catch{};export{Z as default};
