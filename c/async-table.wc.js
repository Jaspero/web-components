import{c as W,S as X,i as Y,f as j,s as Z,a as _,e as k,b as H,q as E,d as $,t as L,g as b,h as m,o as C,n as p,j as w,k as ee,w as te,l as x,m as T,p as N,r as ne,u as S,v as le,H as se}from"./svelte.js";import"./index2.js";import{g as re}from"./json-pointer.js";function oe(r){_(r,"svelte-1k9rhyu",".table-container.svelte-1k9rhyu{border-radius:0.5rem;border:1px solid var(--border-primary)}table.svelte-1k9rhyu{width:100%}tr.svelte-1k9rhyu{width:100%}tr.svelte-1k9rhyu:nth-child(2n - 1){background-color:var(--background-tertiary)}th.svelte-1k9rhyu{padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;text-align:left}td.svelte-1k9rhyu{padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;text-align:left}")}function z(r,l,t){const n=r.slice();return n[13]=l[t],n[15]=t,n}function A(r,l,t){const n=r.slice();return n[16]=l[t],n}function B(r,l,t){const n=r.slice();return n[16]=l[t],n}function D(r){let l,t=x(r[1]),n=[];for(let e=0;e<t.length;e+=1)n[e]=G(B(r,t,e));return{c(){l=k("tr");for(let e=0;e<n.length;e+=1)n[e].c();$(l,"class","svelte-1k9rhyu")},m(e,s){b(e,l,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(l,null)},p(e,s){if(s&67){t=x(e[1]);let o;for(o=0;o<t.length;o+=1){const c=B(e,t,o);n[o]?n[o].p(c,s):(n[o]=G(c),n[o].c(),n[o].m(l,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(e){e&&w(l),T(n,e)}}}function F(r){let l,t=r[0].direction==="asc"?"\u2191":"\u2193",n;return{c(){l=k("span"),n=E(t)},m(e,s){b(e,l,s),m(l,n)},p(e,s){s&1&&t!==(t=e[0].direction==="asc"?"\u2191":"\u2193")&&ne(n,t)},d(e){e&&w(l)}}}function G(r){var l;let t,n,e=r[16].label+"",s,o,c,u,h=((l=r[0])==null?void 0:l.key)===r[16].key&&F(r);function f(){return r[10](r[16])}return{c(){t=k("th"),n=k("span"),s=H(),h&&h.c(),o=H(),$(t,"class","svelte-1k9rhyu"),L(t,"sortable",r[16].sortable)},m(i,d){b(i,t,d),m(t,n),n.innerHTML=e,m(t,s),h&&h.m(t,null),m(t,o),c||(u=C(t,"click",f),c=!0)},p(i,d){var g;r=i,d&2&&e!==(e=r[16].label+"")&&(n.innerHTML=e),((g=r[0])==null?void 0:g.key)===r[16].key?h?h.p(r,d):(h=F(r),h.c(),h.m(t,o)):h&&(h.d(1),h=null),d&2&&L(t,"sortable",r[16].sortable)},d(i){i&&w(t),h&&h.d(),c=!1,u()}}}function I(r){let l,t=x(r[4]),n=[];for(let e=0;e<t.length;e+=1)n[e]=K(z(r,t,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();l=N()},m(e,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,s);b(e,l,s)},p(e,s){if(s&306){t=x(e[4]);let o;for(o=0;o<t.length;o+=1){const c=z(e,t,o);n[o]?n[o].p(c,s):(n[o]=K(c),n[o].c(),n[o].m(l.parentNode,l))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(e){e&&w(l),T(n,e)}}}function ce(r){return{c:p,m:p,p,d:p}}function ae(r){let l,t=r[19]+"",n;return{c(){l=new se(!1),n=N(),l.a=n},m(e,s){l.m(t,e,s),b(e,n,s)},p(e,s){s&18&&t!==(t=e[19]+"")&&l.p(t)},d(e){e&&(w(n),l.d())}}}function ie(r){return{c:p,m:p,p,d:p}}function J(r){let l,t,n,e,s={ctx:r,current:null,token:null,hasCatch:!1,pending:ie,then:ae,catch:ce,value:19};S(t=r[5](r[16],r[13],r[15]),s);function o(){return r[11](r[13],r[15],r[16])}return{c(){l=k("td"),s.block.c(),$(l,"class","svelte-1k9rhyu")},m(c,u){b(c,l,u),s.block.m(l,s.anchor=null),s.mount=()=>l,s.anchor=null,n||(e=C(l,"click",o),n=!0)},p(c,u){r=c,s.ctx=r,u&18&&t!==(t=r[5](r[16],r[13],r[15]))&&S(t,s)||le(s,r,u)},d(c){c&&w(l),s.block.d(),s.token=null,s=null,n=!1,e()}}}function K(r){let l,t,n=x(r[1]),e=[];for(let s=0;s<n.length;s+=1)e[s]=J(A(r,n,s));return{c(){l=k("tr");for(let s=0;s<e.length;s+=1)e[s].c();t=H(),$(l,"class","svelte-1k9rhyu")},m(s,o){b(s,l,o);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,null);m(l,t)},p(s,o){if(o&306){n=x(s[1]);let c;for(c=0;c<n.length;c+=1){const u=A(s,n,c);e[c]?e[c].p(u,o):(e[c]=J(u),e[c].c(),e[c].m(l,t))}for(;c<e.length;c+=1)e[c].d(1);e.length=n.length}},d(s){s&&w(l),T(e,s)}}}function ue(r){let l,t,n,e,s,o,c,u,h,f=r[1]&&D(r),i=r[4]&&I(r);return{c(){l=k("div"),t=k("table"),f&&f.c(),n=H(),i&&i.c(),e=H(),s=k("button"),o=E("Load More"),$(t,"class","svelte-1k9rhyu"),s.disabled=c=!r[3],L(s,"loading",r[2]),$(l,"class","overflow-x-auto table-container svelte-1k9rhyu")},m(d,g){b(d,l,g),m(l,t),f&&f.m(t,null),m(t,n),i&&i.m(t,null),m(l,e),m(l,s),m(s,o),u||(h=C(s,"click",r[7]),u=!0)},p(d,[g]){d[1]?f?f.p(d,g):(f=D(d),f.c(),f.m(t,n)):f&&(f.d(1),f=null),d[4]?i?i.p(d,g):(i=I(d),i.c(),i.m(t,null)):i&&(i.d(1),i=null),g&8&&c!==(c=!d[3])&&(s.disabled=c),g&4&&L(s,"loading",d[2])},i:p,o:p,d(d){d&&w(l),f&&f.d(),i&&i.d(),u=!1,h()}}}function de(r,l,t){let{headers:n=[]}=l,{sort:e}=l,{service:s}=l,o=!0,c=!1,u=[];const h=ee();async function f(a,v,y){const{key:R,fallback:U,pipes:q}=a;let M;try{M=re(v,R)}catch{return U||""}if(!q)return M;for(const V of q)M=await V(M,v,y);return M}async function i(a){const{sortable:v}=a;if(!v)return;t(2,o=!0),t(0,e={key:a.key,direction:e?.key===a.key&&e.direction==="asc"?"desc":"asc"});const y=await s.get(e);t(4,u=y.rows),t(3,c=y.hasMore),t(2,o=!1)}async function d(){t(2,o=!0);const a=await s.loadMore(e);t(4,u=[...u,...a.rows]),t(3,c=a.hasMore),t(2,o=!1)}function g(a,v,y){h("rowClick",{row:a,index:v,header:y})}te(async()=>{const a=await s.get(e);t(4,u=a.rows),t(3,c=a.hasMore),t(2,o=!1)});const P=a=>i(a),Q=(a,v,y)=>g(a,v,y);return r.$$set=a=>{"headers"in a&&t(1,n=a.headers),"sort"in a&&t(0,e=a.sort),"service"in a&&t(9,s=a.service)},[e,n,o,c,u,f,i,d,g,s,P,Q]}class O extends X{constructor(l){super(),Y(this,l,de,ue,Z,{headers:1,sort:0,service:9},oe)}get headers(){return this.$$.ctx[1]}set headers(l){this.$$set({headers:l}),j()}get sort(){return this.$$.ctx[0]}set sort(l){this.$$set({sort:l}),j()}get service(){return this.$$.ctx[9]}set service(l){this.$$set({service:l}),j()}}customElements.define("jp-async-table",W(O,{headers:{},sort:{},service:{}},[],[],!1));export{O as default};
