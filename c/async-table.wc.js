import{c as xe,S as we,i as ze,f as O,s as ke,a as ye,e as b,b as H,d as m,m as B,g as h,h as y,o as L,n as E,j as v,k as $e,x as Ce,l as G,t as U,p as R,q as I,r as De,y as q,u as Se,v as K,w as Ee}from"./svelte.js";import"./index2.js";import{g as Ae}from"./json-pointer.js";function Me(o){ye(o,"svelte-1ud1rfz",".table-card.svelte-1ud1rfz{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-1ud1rfz{overflow-x:auto;width:100%}table.svelte-1ud1rfz{width:100%}th.svelte-1ud1rfz,td.svelte-1ud1rfz{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-1ud1rfz{opacity:0.75}.cell.svelte-1ud1rfz{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-actions.svelte-1ud1rfz{padding:1rem;display:flex;justify-content:space-between}.table-header.svelte-1ud1rfz{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-1ud1rfz{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-1ud1rfz{background-color:var(--background-secondary);color:var(--text-on-secondary)}.load-button.svelte-1ud1rfz{background-color:var(--primary-color);color:var(--text-on-primary)}.load-button.svelte-1ud1rfz:disabled{opacity:0.5}.load-button.loading.svelte-1ud1rfz{pointer-events:none}.spinner.svelte-1ud1rfz{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:1rem;height:1rem;margin-right:0.5rem;-webkit-animation:svelte-1ud1rfz-spin 1s linear infinite;-moz-animation:svelte-1ud1rfz-spin 1s linear infinite;-o-animation:svelte-1ud1rfz-spin 1s linear infinite;animation:svelte-1ud1rfz-spin 1s linear infinite}@-webkit-keyframes svelte-1ud1rfz-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-1ud1rfz-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-1ud1rfz-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-1ud1rfz-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}function Q(o,e,r){const n=o.slice();return n[32]=e[r],n[34]=r,n}function V(o,e,r){const n=o.slice();return n[35]=e[r],n}function W(o,e,r){const n=o.slice();return n[35]=e[r],n[34]=r,n}function X(o){let e,r,n=o[1]&&Y(o),t=o[2]&&Z(o);return{c(){e=b("div"),n&&n.c(),r=H(),t&&t.c(),m(e,"class","table-header svelte-1ud1rfz")},m(a,s){h(a,e,s),n&&n.m(e,null),y(e,r),t&&t.m(e,null)},p(a,s){a[1]?n?n.p(a,s):(n=Y(a),n.c(),n.m(e,r)):n&&(n.d(1),n=null),a[2]?t?t.p(a,s):(t=Z(a),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(a){a&&v(e),n&&n.d(),t&&t.d()}}}function Y(o){let e;function r(a,s){return a[10]?je:Le}let n=r(o),t=n(o);return{c(){t.c(),e=G()},m(a,s){t.m(a,s),h(a,e,s)},p(a,s){n===(n=r(a))&&t?t.p(a,s):(t.d(1),t=n(a),t&&(t.c(),t.m(e.parentNode,e)))},d(a){a&&v(e),t.d(a)}}}function je(o){let e,r,n;return{c(){e=b("button"),e.textContent="Finish Arranging",m(e,"type","button"),m(e,"class","table-button settings-button svelte-1ud1rfz")},m(t,a){h(t,e,a),r||(n=L(e,"click",o[19]),r=!0)},p:E,d(t){t&&v(e),r=!1,n()}}}function Le(o){let e,r,n;return{c(){e=b("button"),e.textContent="Arrange Columns",m(e,"type","button"),m(e,"class","table-button settings-button svelte-1ud1rfz")},m(t,a){h(t,e,a),r||(n=L(e,"click",o[18]),r=!0)},p:E,d(t){t&&v(e),r=!1,n()}}}function Z(o){let e,r,n,t;return{c(){e=U(`\xA0
        `),r=b("button"),r.textContent="Export",m(r,"type","button"),m(r,"class","table-button settings-button svelte-1ud1rfz"),B(r,"loading",o[8])},m(a,s){h(a,e,s),h(a,r,s),n||(t=L(r,"click",o[17]),n=!0)},p(a,s){s[0]&256&&B(r,"loading",a[8])},d(a){a&&(v(e),v(r)),n=!1,t()}}}function ee(o){let e,r=R(o[9]),n=[];for(let t=0;t<r.length;t+=1)n[t]=re(W(o,r,t));return{c(){e=b("tr");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,a){h(t,e,a);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(t,a){if(a[0]&7348737){r=R(t[9]);let s;for(s=0;s<r.length;s+=1){const i=W(t,r,s);n[s]?n[s].p(i,a):(n[s]=re(i),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(t){t&&v(e),I(n,t)}}}function te(o){let e,r=o[0].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=b("span"),n=U(r)},m(t,a){h(t,e,a),y(e,n)},p(t,a){a[0]&1&&r!==(r=t[0].direction==="asc"?"\u2191":"\u2193")&&Se(n,r)},d(t){t&&v(e)}}}function re(o){var e;let r,n,t=o[35].label+"",a,s,i,d;function A(...x){return o[26](o[35],...x)}let g=((e=o[0])==null?void 0:e.key)===o[35].key&&te(o);function C(){return o[27](o[35])}return{c(){r=b("th"),n=b("span"),a=H(),g&&g.c(),s=H(),m(n,"draggable","true"),m(n,"tabindex","-1"),m(n,"role","button"),m(n,"aria-label","Drag handle"),m(r,"data-index",o[34]),m(r,"class","svelte-1ud1rfz"),B(r,"sortable",o[35].sortable)},m(x,u){h(x,r,u),y(r,n),n.innerHTML=t,y(r,a),g&&g.m(r,null),y(r,s),i||(d=[L(n,"dragstart",A),L(r,"click",C),L(r,"drop",o[22]),L(r,"dragover",o[21])],i=!0)},p(x,u){var f;o=x,u[0]&512&&t!==(t=o[35].label+"")&&(n.innerHTML=t),((f=o[0])==null?void 0:f.key)===o[35].key?g?g.p(o,u):(g=te(o),g.c(),g.m(r,s)):g&&(g.d(1),g=null),u[0]&512&&B(r,"sortable",o[35].sortable)},d(x){x&&v(r),g&&g.d(),i=!1,De(d)}}}function ne(o){let e,r=R(o[7]),n=[];for(let t=0;t<r.length;t+=1)n[t]=ae(Q(o,r,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=G()},m(t,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,a);h(t,e,a)},p(t,a){if(a[0]&37504){r=R(t[7]);let s;for(s=0;s<r.length;s+=1){const i=Q(t,r,s);n[s]?n[s].p(i,a):(n[s]=ae(i),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(t){t&&v(e),I(n,t)}}}function Ne(o){return{c:E,m:E,p:E,d:E}}function Pe(o){let e,r=o[38]+"";return{c(){e=b("span"),m(e,"class","cell svelte-1ud1rfz")},m(n,t){h(n,e,t),e.innerHTML=r},p(n,t){t[0]&640&&r!==(r=n[38]+"")&&(e.innerHTML=r)},d(n){n&&v(e)}}}function Te(o){return{c:E,m:E,p:E,d:E}}function oe(o){let e,r,n,t,a={ctx:o,current:null,token:null,hasCatch:!1,pending:Te,then:Pe,catch:Ne,value:38};K(r=o[12](o[35],o[32],o[34]),a);function s(...i){return o[28](o[32],o[34],o[35],...i)}return{c(){e=b("td"),a.block.c(),m(e,"class","svelte-1ud1rfz")},m(i,d){h(i,e,d),a.block.m(e,a.anchor=null),a.mount=()=>e,a.anchor=null,n||(t=L(e,"click",s),n=!0)},p(i,d){o=i,a.ctx=o,d[0]&640&&r!==(r=o[12](o[35],o[32],o[34]))&&K(r,a)||Ee(a,o,d)},d(i){i&&v(e),a.block.d(),a.token=null,a=null,n=!1,t()}}}function ae(o){let e,r,n=R(o[9]),t=[];for(let a=0;a<n.length;a+=1)t[a]=oe(V(o,n,a));return{c(){e=b("tr");for(let a=0;a<t.length;a+=1)t[a].c();r=H()},m(a,s){h(a,e,s);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null);y(e,r)},p(a,s){if(s[0]&37504){n=R(a[9]);let i;for(i=0;i<n.length;i+=1){const d=V(a,n,i);t[i]?t[i].p(d,s):(t[i]=oe(d),t[i].c(),t[i].m(e,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=n.length}},d(a){a&&v(e),I(t,a)}}}function He(o){let e;return{c(){e=U("Load More")},m(r,n){h(r,e,n)},d(r){r&&v(e)}}}function Oe(o){let e,r;return{c(){e=b("span"),r=U(`
        Loading`),m(e,"class","spinner svelte-1ud1rfz")},m(n,t){h(n,e,t),h(n,r,t)},d(n){n&&(v(e),v(r))}}}function se(o){let e,r,n;return{c(){e=b("jp-select"),q(e,"label","Page Size"),q(e,"options",o[11]),q(e,"value",o[4])},m(t,a){h(t,e,a),r||(n=L(e,"value",o[16]),r=!0)},p(t,a){a[0]&16&&q(e,"value",t[4])},d(t){t&&v(e),r=!1,n()}}}function Be(o){let e,r,n,t,a,s,i,d,A,g,C,x,u=(o[1]||o[2])&&X(o),f=o[9]&&ee(o),p=o[7]&&ne(o);function N(c,D){return c[5]?Oe:He}let P=N(o),k=P(o),z=o[3].length>1&&se(o);return{c(){e=b("div"),u&&u.c(),r=H(),n=b("div"),t=b("table"),f&&f.c(),a=H(),p&&p.c(),s=H(),i=b("div"),d=b("button"),k.c(),g=H(),z&&z.c(),m(t,"class","svelte-1ud1rfz"),m(n,"class","table-container svelte-1ud1rfz"),m(d,"class","table-button load-button svelte-1ud1rfz"),d.disabled=A=!o[6],B(d,"loading",o[5]),m(i,"class","table-actions svelte-1ud1rfz"),m(e,"class","table-card svelte-1ud1rfz")},m(c,D){h(c,e,D),u&&u.m(e,null),y(e,r),y(e,n),y(n,t),f&&f.m(t,null),y(t,a),p&&p.m(t,null),y(e,s),y(e,i),y(i,d),k.m(d,null),y(i,g),z&&z.m(i,null),C||(x=L(d,"click",o[14]),C=!0)},p(c,D){c[1]||c[2]?u?u.p(c,D):(u=X(c),u.c(),u.m(e,r)):u&&(u.d(1),u=null),c[9]?f?f.p(c,D):(f=ee(c),f.c(),f.m(t,a)):f&&(f.d(1),f=null),c[7]?p?p.p(c,D):(p=ne(c),p.c(),p.m(t,null)):p&&(p.d(1),p=null),P!==(P=N(c))&&(k.d(1),k=P(c),k&&(k.c(),k.m(d,null))),D[0]&64&&A!==(A=!c[6])&&(d.disabled=A),D[0]&32&&B(d,"loading",c[5]),c[3].length>1?z?z.p(c,D):(z=se(c),z.c(),z.m(i,null)):z&&(z.d(1),z=null)},i:E,o:E,d(c){c&&v(e),u&&u.d(),f&&f.d(),p&&p.d(),k.d(),z&&z.d(),C=!1,x()}}}function Re(o,e,r){let{showArrangingColumns:n=!0}=e,{showExport:t=!0}=e,{headers:a=[]}=e,{pageSizes:s}=e,{sort:i}=e,{service:d}=e,{getData:A=async()=>{const l=await d.get(i,C);r(7,f=l.rows),r(6,u=l.hasMore),r(5,x=!1)}}=e,g=JSON.stringify(s.map(l=>({label:l,value:l}))),C=s[0],x=!0,u=!1,f=[],p=!1,N,P=!1,k=[];const z=$e();async function c(l,w,$){const{key:S,fallback:j,pipes:T}=l;let M;try{M=Ae(w,S)}catch{return j||""}if(!T)return M;for(const F of T)M=await F(M,w,$);return M}async function D(l){const{sortable:w}=l;if(!w)return;r(5,x=!0),r(0,i={key:l.key,direction:i?.key===l.key&&i.direction==="asc"?"desc":"asc"});const[$]=await Promise.all([d.get(i,C),d.adjustSort(i)]);r(7,f=$.rows),r(6,u=$.hasMore),r(5,x=!1)}async function le(){r(5,x=!0);const l=await d.loadMore(i,C);r(7,f=[...f,...l.rows]),r(6,u=l.hasMore),r(5,x=!1)}function J(l,w,$,S){z("rowClick",{row:l,index:w,header:$,originalEvent:S})}async function de(l){r(4,C=l.detail),await Promise.all([A(),d.adjustPageSize(C)])}async function ce(){r(8,p=!0);const l=await d.export(),w=await Promise.all(l.map(async(j,T)=>(await Promise.all(N.map(M=>c(M,j,T)))).map(M=>`"${M||""}"`).join(","))),$=new Blob([[N.map(j=>j.label).map(j=>`"${j}"`).join(","),...w].join(`
`)],{type:"text/csv"}),S=document.createElement("a");S.href=URL.createObjectURL($),S.download="export.csv",S.click(),r(8,p=!1)}function ue(){r(10,P=!0),k=N.map(l=>l.key)}function fe(){r(10,P=!1)}function _(l,w){l.dataTransfer.setData("text/plain",w.key)}function me(l){l.preventDefault()}function ge(l){var w;l.preventDefault();const $=l.dataTransfer.getData("text/plain"),S=k.indexOf($),j=(w=l.target)==null?void 0:w.dataset.index;S!==-1&&j&&(k.splice(S,1),k.splice(Number(j),0,$),r(9,N=a.filter(T=>!T.disabled).sort((T,M)=>{const F=k.indexOf(T.key),ve=k.indexOf(M.key);return F-ve})))}Ce(async()=>{await A()});const pe=(l,w)=>_(w,l),be=l=>D(l),he=(l,w,$,S)=>J(l,w,$,S);return o.$$set=l=>{"showArrangingColumns"in l&&r(1,n=l.showArrangingColumns),"showExport"in l&&r(2,t=l.showExport),"headers"in l&&r(23,a=l.headers),"pageSizes"in l&&r(3,s=l.pageSizes),"sort"in l&&r(0,i=l.sort),"service"in l&&r(24,d=l.service),"getData"in l&&r(25,A=l.getData)},o.$$.update=()=>{o.$$.dirty[0]&8388608&&r(9,N=a.filter(l=>!l.disabled))},[i,n,t,s,C,x,u,f,p,N,P,g,c,D,le,J,de,ce,ue,fe,_,me,ge,a,d,A,pe,be,he]}class ie extends we{constructor(e){super(),ze(this,e,Re,Be,ke,{showArrangingColumns:1,showExport:2,headers:23,pageSizes:3,sort:0,service:24,getData:25},Me,[-1,-1])}get showArrangingColumns(){return this.$$.ctx[1]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),O()}get showExport(){return this.$$.ctx[2]}set showExport(e){this.$$set({showExport:e}),O()}get headers(){return this.$$.ctx[23]}set headers(e){this.$$set({headers:e}),O()}get pageSizes(){return this.$$.ctx[3]}set pageSizes(e){this.$$set({pageSizes:e}),O()}get sort(){return this.$$.ctx[0]}set sort(e){this.$$set({sort:e}),O()}get service(){return this.$$.ctx[24]}set service(e){this.$$set({service:e}),O()}get getData(){return this.$$.ctx[25]}set getData(e){this.$$set({getData:e}),O()}}try{customElements.define("jp-async-table",xe(ie,{showArrangingColumns:{type:"Boolean"},showExport:{type:"Boolean"},headers:{},pageSizes:{},sort:{},service:{},getData:{}},[],[],!1));}catch{};export{ie as default};
