import{c as V,S as W,i as X,f as T,s as Y,a as Z,e as u,b as H,d as k,t as C,g as f,h as b,o as E,n as v,j as p,k as ee,w as te,l as D,m as N,p as re,q as S,r as ae,u as q,v as ne}from"./svelte.js";import"./index2.js";import{g as se}from"./json-pointer.js";function oe(n){Z(n,"svelte-1gieww0",".table-card.svelte-1gieww0{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-1gieww0{overflow-x:auto;width:100%}table.svelte-1gieww0{width:100%}th.svelte-1gieww0,td.svelte-1gieww0{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-1gieww0{opacity:0.75}.cell.svelte-1gieww0{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-actions.svelte-1gieww0{padding:1rem}.load-button.svelte-1gieww0{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;background-color:var(--primary-color);color:var(--text-on-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.load-button.svelte-1gieww0:disabled{opacity:0.5}.load-button.loading.svelte-1gieww0{pointer-events:none}.spinner.svelte-1gieww0{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:1rem;height:1rem;margin-right:0.5rem;-webkit-animation:svelte-1gieww0-spin 1s linear infinite;-moz-animation:svelte-1gieww0-spin 1s linear infinite;-o-animation:svelte-1gieww0-spin 1s linear infinite;animation:svelte-1gieww0-spin 1s linear infinite}@-webkit-keyframes svelte-1gieww0-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-1gieww0-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-1gieww0-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-1gieww0-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}function A(n,a,r){const e=n.slice();return e[14]=a[r],e[16]=r,e}function B(n,a,r){const e=n.slice();return e[17]=a[r],e}function F(n,a,r){const e=n.slice();return e[17]=a[r],e}function G(n){let a,r=D(n[1]),e=[];for(let t=0;t<r.length;t+=1)e[t]=J(F(n,r,t));return{c(){a=u("tr");for(let t=0;t<e.length;t+=1)e[t].c()},m(t,s){f(t,a,s);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(a,null)},p(t,s){if(s&67){r=D(t[1]);let o;for(o=0;o<r.length;o+=1){const i=F(t,r,o);e[o]?e[o].p(i,s):(e[o]=J(i),e[o].c(),e[o].m(a,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=r.length}},d(t){t&&p(a),N(e,t)}}}function I(n){let a,r=n[0].direction==="asc"?"\u2191":"\u2193",e;return{c(){a=u("span"),e=S(r)},m(t,s){f(t,a,s),b(a,e)},p(t,s){s&1&&r!==(r=t[0].direction==="asc"?"\u2191":"\u2193")&&ae(e,r)},d(t){t&&p(a)}}}function J(n){var a;let r,e,t=n[17].label+"",s,o,i,m,c=((a=n[0])==null?void 0:a.key)===n[17].key&&I(n);function M(){return n[11](n[17])}return{c(){r=u("th"),e=u("span"),s=H(),c&&c.c(),o=H(),k(r,"class","svelte-1gieww0"),C(r,"sortable",n[17].sortable)},m(g,d){f(g,r,d),b(r,e),e.innerHTML=t,b(r,s),c&&c.m(r,null),b(r,o),i||(m=E(r,"click",M),i=!0)},p(g,d){var $;n=g,d&2&&t!==(t=n[17].label+"")&&(e.innerHTML=t),(($=n[0])==null?void 0:$.key)===n[17].key?c?c.p(n,d):(c=I(n),c.c(),c.m(r,o)):c&&(c.d(1),c=null),d&2&&C(r,"sortable",n[17].sortable)},d(g){g&&p(r),c&&c.d(),i=!1,m()}}}function K(n){let a,r=D(n[4]),e=[];for(let t=0;t<r.length;t+=1)e[t]=P(A(n,r,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();a=re()},m(t,s){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,s);f(t,a,s)},p(t,s){if(s&306){r=D(t[4]);let o;for(o=0;o<r.length;o+=1){const i=A(t,r,o);e[o]?e[o].p(i,s):(e[o]=P(i),e[o].c(),e[o].m(a.parentNode,a))}for(;o<e.length;o+=1)e[o].d(1);e.length=r.length}},d(t){t&&p(a),N(e,t)}}}function ie(n){return{c:v,m:v,p:v,d:v}}function le(n){let a,r=n[20]+"";return{c(){a=u("span"),k(a,"class","cell svelte-1gieww0")},m(e,t){f(e,a,t),a.innerHTML=r},p(e,t){t&18&&r!==(r=e[20]+"")&&(a.innerHTML=r)},d(e){e&&p(a)}}}function ce(n){return{c:v,m:v,p:v,d:v}}function O(n){let a,r,e,t,s={ctx:n,current:null,token:null,hasCatch:!1,pending:ce,then:le,catch:ie,value:20};q(r=n[5](n[17],n[14],n[16]),s);function o(...i){return n[12](n[14],n[16],n[17],...i)}return{c(){a=u("td"),s.block.c(),k(a,"class","svelte-1gieww0")},m(i,m){f(i,a,m),s.block.m(a,s.anchor=null),s.mount=()=>a,s.anchor=null,e||(t=E(a,"click",o),e=!0)},p(i,m){n=i,s.ctx=n,m&18&&r!==(r=n[5](n[17],n[14],n[16]))&&q(r,s)||ne(s,n,m)},d(i){i&&p(a),s.block.d(),s.token=null,s=null,e=!1,t()}}}function P(n){let a,r,e=D(n[1]),t=[];for(let s=0;s<e.length;s+=1)t[s]=O(B(n,e,s));return{c(){a=u("tr");for(let s=0;s<t.length;s+=1)t[s].c();r=H()},m(s,o){f(s,a,o);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(a,null);b(a,r)},p(s,o){if(o&306){e=D(s[1]);let i;for(i=0;i<e.length;i+=1){const m=B(s,e,i);t[i]?t[i].p(m,o):(t[i]=O(m),t[i].c(),t[i].m(a,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=e.length}},d(s){s&&p(a),N(t,s)}}}function de(n){let a;return{c(){a=S("Load More")},m(r,e){f(r,a,e)},d(r){r&&p(a)}}}function ge(n){let a,r;return{c(){a=u("span"),r=S(`
        Loading`),k(a,"class","spinner svelte-1gieww0")},m(e,t){f(e,a,t),f(e,r,t)},d(e){e&&(p(a),p(r))}}}function me(n){let a,r,e,t,s,o,i,m,c,M,g=n[1]&&G(n),d=n[4]&&K(n);function $(w,l){return w[2]?ge:de}let z=$(n),h=z(n);return{c(){a=u("div"),r=u("div"),e=u("table"),g&&g.c(),t=H(),d&&d.c(),s=H(),o=u("div"),i=u("button"),h.c(),k(e,"class","svelte-1gieww0"),k(r,"class","table-container svelte-1gieww0"),k(i,"class","load-button svelte-1gieww0"),i.disabled=m=!n[3],C(i,"loading",n[2]),k(o,"class","table-actions svelte-1gieww0"),k(a,"class","table-card svelte-1gieww0")},m(w,l){f(w,a,l),b(a,r),b(r,e),g&&g.m(e,null),b(e,t),d&&d.m(e,null),b(a,s),b(a,o),b(o,i),h.m(i,null),c||(M=E(i,"click",n[7]),c=!0)},p(w,[l]){w[1]?g?g.p(w,l):(g=G(w),g.c(),g.m(e,t)):g&&(g.d(1),g=null),w[4]?d?d.p(w,l):(d=K(w),d.c(),d.m(e,null)):d&&(d.d(1),d=null),z!==(z=$(w))&&(h.d(1),h=z(w),h&&(h.c(),h.m(i,null))),l&8&&m!==(m=!w[3])&&(i.disabled=m),l&4&&C(i,"loading",w[2])},i:v,o:v,d(w){w&&p(a),g&&g.d(),d&&d.d(),h.d(),c=!1,M()}}}function we(n,a,r){let{headers:e=[]}=a,{sort:t}=a,{service:s}=a,{getData:o=async()=>{const l=await s.get(t);r(4,c=l.rows),r(3,m=l.hasMore),r(2,i=!1)}}=a,i=!0,m=!1,c=[];const M=ee();async function g(l,x,y){const{key:L,fallback:R,pipes:_}=l;let j;try{j=se(x,L)}catch{return R||""}if(!_)return j;for(const U of _)j=await U(j,x,y);return j}async function d(l){const{sortable:x}=l;if(!x)return;r(2,i=!0),r(0,t={key:l.key,direction:t?.key===l.key&&t.direction==="asc"?"desc":"asc"});const y=await s.get(t);r(4,c=y.rows),r(3,m=y.hasMore),r(2,i=!1)}async function $(){r(2,i=!0);const l=await s.loadMore(t);r(4,c=[...c,...l.rows]),r(3,m=l.hasMore),r(2,i=!1)}function z(l,x,y,L){M("rowClick",{row:l,index:x,header:y,originalEvent:L})}te(async()=>{await o()});const h=l=>d(l),w=(l,x,y,L)=>z(l,x,y,L);return n.$$set=l=>{"headers"in l&&r(1,e=l.headers),"sort"in l&&r(0,t=l.sort),"service"in l&&r(9,s=l.service),"getData"in l&&r(10,o=l.getData)},[t,e,i,m,c,g,d,$,z,s,o,h,w]}class Q extends W{constructor(a){super(),X(this,a,we,me,Y,{headers:1,sort:0,service:9,getData:10},oe)}get headers(){return this.$$.ctx[1]}set headers(a){this.$$set({headers:a}),T()}get sort(){return this.$$.ctx[0]}set sort(a){this.$$set({sort:a}),T()}get service(){return this.$$.ctx[9]}set service(a){this.$$set({service:a}),T()}get getData(){return this.$$.ctx[10]}set getData(a){this.$$set({getData:a}),T()}}try{customElements.define("jp-async-table",V(Q,{headers:{},sort:{},service:{},getData:{}},[],[],!1));}catch{};export{Q as default};
