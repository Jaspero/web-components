import{c as Fe,S as Ue,i as Ze,f as M,s as Ve,a as Xe,e as f,m as N,d as m,q as ae,p as S,g as h,r as z,v as j,z as H,l as y,E as ee,w as qe,o as Je,A as _,B as U,M as Z,N as Q,C as Ke,Q as X,y as Qe,L as We,x as Ye,R as oe,T as et}from"./svelte.js";import"./index2.js";import{g as tt}from"./json-pointer.js";function nt(n){Xe(n,"svelte-2y2ud9",".table-card.svelte-2y2ud9.svelte-2y2ud9{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-2y2ud9.svelte-2y2ud9{overflow-x:auto;width:100%}table.svelte-2y2ud9.svelte-2y2ud9{width:100%}th.svelte-2y2ud9.svelte-2y2ud9,td.svelte-2y2ud9.svelte-2y2ud9{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-2y2ud9.svelte-2y2ud9{position:sticky;z-index:2;top:0;background-color:var(--background-primary);font-weight:bold}.sortable.svelte-2y2ud9.svelte-2y2ud9{cursor:pointer}.draggable-column.svelte-2y2ud9.svelte-2y2ud9{cursor:grab}.cell.svelte-2y2ud9.svelte-2y2ud9{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-actions.svelte-2y2ud9.svelte-2y2ud9{padding:1rem;display:flex;justify-content:space-between}.table-header.svelte-2y2ud9.svelte-2y2ud9{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-2y2ud9.svelte-2y2ud9{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-2y2ud9.svelte-2y2ud9{background-color:var(--background-secondary);color:var(--text-on-secondary)}.load-button.svelte-2y2ud9.svelte-2y2ud9{background-color:var(--primary-color);color:var(--text-on-primary)}.load-button.svelte-2y2ud9.svelte-2y2ud9:disabled{opacity:0.5}.load-button.loading.svelte-2y2ud9.svelte-2y2ud9{pointer-events:none}.highlight.svelte-2y2ud9.svelte-2y2ud9{cursor:pointer;transition:0.3s}.highlight.svelte-2y2ud9.svelte-2y2ud9:hover{background-color:#ddd}.spinner.svelte-2y2ud9.svelte-2y2ud9{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:1rem;height:1rem;margin-right:0.5rem;-webkit-animation:svelte-2y2ud9-spin 1s linear infinite;-moz-animation:svelte-2y2ud9-spin 1s linear infinite;-o-animation:svelte-2y2ud9-spin 1s linear infinite;animation:svelte-2y2ud9-spin 1s linear infinite}.arrange-columns-dialog.svelte-2y2ud9.svelte-2y2ud9{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:flex;justify-content:center}.arrange-columns-dialog-backdrop.svelte-2y2ud9.svelte-2y2ud9{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5);z-index:1001}.arrange-columns-dialog-inner.svelte-2y2ud9.svelte-2y2ud9{width:500px;max-width:100%;z-index:1002;background-color:white;border-radius:0.25rem;box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);margin-top:50px;padding:1rem;display:flex;flex-direction:column;height:min-content}.arrange-columns-dialog-inner.svelte-2y2ud9 main.svelte-2y2ud9{display:flex;flex-direction:column;flex:1;padding-bottom:1rem;max-height:400px;overflow-y:auto}@-webkit-keyframes svelte-2y2ud9-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-2y2ud9-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-2y2ud9-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-2y2ud9-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.sticky-first.svelte-2y2ud9.svelte-2y2ud9{position:sticky;left:0;background-color:var(--background-primary)}td.sticky-first.svelte-2y2ud9.svelte-2y2ud9,td.sticky-last.svelte-2y2ud9.svelte-2y2ud9{z-index:1}.sticky-first.svelte-2y2ud9.svelte-2y2ud9:after{content:'';position:absolute;top:0;right:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}.sticky-last.svelte-2y2ud9.svelte-2y2ud9{position:sticky;right:0;background-color:var(--background-primary)}.sticky-last.svelte-2y2ud9.svelte-2y2ud9:before{content:'';position:absolute;top:0;left:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}")}function ie(n,e,t){const r=n.slice();return r[50]=e[t],r[51]=e,r[52]=t,r}function le(n,e,t){const r=n.slice();return r[53]=e[t],r[55]=t,r}function de(n,e,t){const r=n.slice();return r[56]=e[t],r[58]=t,r}function ue(n,e,t){const r=n.slice();return r[56]=e[t],r[58]=t,r}function ce(n){let e,t,r,s=n[6]&&ge(n),a=n[10]&&me(n),i=n[9]&&pe(n);return{c(){e=f("div"),s&&s.c(),t=N(),a&&a.c(),r=N(),i&&i.c(),m(e,"class","table-header svelte-2y2ud9")},m(l,d){h(l,e,d),s&&s.m(e,null),z(e,t),a&&a.m(e,null),z(e,r),i&&i.m(e,null)},p(l,d){l[6]?s?s.p(l,d):(s=ge(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[10]?a?a.p(l,d):(a=me(l),a.c(),a.m(e,r)):a&&(a.d(1),a=null),l[9]?i?i.p(l,d):(i=pe(l),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(l){l&&y(e),s&&s.d(),a&&a.d(),i&&i.d()}}}function ge(n){let e,t,r=n[4].ARRANGE_COLUMNS+"",s,a,i;return{c(){e=_(`\xA0
        `),t=f("button"),s=_(r),m(t,"type","button"),m(t,"class","table-button settings-button svelte-2y2ud9")},m(l,d){h(l,e,d),h(l,t,d),z(t,s),a||(i=j(t,"click",n[29]),a=!0)},p(l,d){d[0]&16&&r!==(r=l[4].ARRANGE_COLUMNS+"")&&U(s,r)},d(l){l&&(y(e),y(t)),a=!1,i()}}}function me(n){let e,t,r=n[4].IMPORT+"",s,a,i;return{c(){e=_(`\xA0
        `),t=f("button"),s=_(r),m(t,"type","button"),m(t,"class","table-button settings-button svelte-2y2ud9")},m(l,d){h(l,e,d),h(l,t,d),z(t,s),a||(i=j(t,"click",n[39]),a=!0)},p(l,d){d[0]&16&&r!==(r=l[4].IMPORT+"")&&U(s,r)},d(l){l&&(y(e),y(t)),a=!1,i()}}}function pe(n){let e,t,r,s;function a(d,O){return d[16]?st:rt}let i=a(n),l=i(n);return{c(){e=_(`\xA0
        `),t=f("button"),l.c(),m(t,"type","button"),m(t,"class","table-button settings-button svelte-2y2ud9"),t.disabled=n[16],S(t,"loading",n[16])},m(d,O){h(d,e,O),h(d,t,O),l.m(t,null),r||(s=j(t,"click",n[27]),r=!0)},p(d,O){i===(i=a(d))&&l?l.p(d,O):(l.d(1),l=i(d),l&&(l.c(),l.m(t,null))),O[0]&65536&&(t.disabled=d[16]),O[0]&65536&&S(t,"loading",d[16])},d(d){d&&(y(e),y(t)),l.d(),r=!1,s()}}}function rt(n){let e=n[4].EXPORT+"",t;return{c(){t=_(e)},m(r,s){h(r,t,s)},p(r,s){s[0]&16&&e!==(e=r[4].EXPORT+"")&&U(t,e)},d(r){r&&y(t)}}}function st(n){let e,t,r=n[4].LOADING+"",s;return{c(){e=f("span"),t=N(),s=_(r),m(e,"class","spinner svelte-2y2ud9")},m(a,i){h(a,e,i),h(a,t,i),h(a,s,i)},p(a,i){i[0]&16&&r!==(r=a[4].LOADING+"")&&U(s,r)},d(a){a&&(y(e),y(t),y(s))}}}function he(n){let e,t=Z(n[17]),r=[];for(let s=0;s<t.length;s+=1)r[s]=be(ue(n,t,s));return{c(){e=f("tr");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,a){h(s,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(s,a){if(a[0]&276955554){t=Z(s[17]);let i;for(i=0;i<t.length;i+=1){const l=ue(s,t,i);r[i]?r[i].p(l,a):(r[i]=be(l),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},d(s){s&&y(e),Q(r,s)}}}function ye(n){let e,t=n[1].direction==="asc"?"\u2191":"\u2193",r;return{c(){e=f("span"),r=_(t),m(e,"class","sortable svelte-2y2ud9")},m(s,a){h(s,e,a),z(e,r)},p(s,a){a[0]&2&&t!==(t=s[1].direction==="asc"?"\u2191":"\u2193")&&U(r,t)},d(s){s&&y(e)}}}function be(n){var e;let t,r,s=n[56].label+"",a,i,l,d;function O(...w){return n[40](n[56],...w)}let v=((e=n[1])==null?void 0:e.key)===n[56].key&&ye(n);function x(){return n[41](n[56])}function $(...w){return n[42](n[58],...w)}return{c(){t=f("th"),r=f("span"),a=N(),v&&v.c(),i=N(),m(r,"draggable",n[5]),m(r,"tabindex","-1"),m(r,"role","button"),m(r,"aria-label","Drag handle"),m(r,"class","svelte-2y2ud9"),S(r,"draggable-column",n[5]),m(t,"class","svelte-2y2ud9"),S(t,"sortable",n[5]&&n[56].sortable),S(t,"sticky-first",n[7]&&n[58]===0),S(t,"sticky-last",n[58]===n[17].length-1&&n[8])},m(w,k){h(w,t,k),z(t,r),r.innerHTML=s,z(t,a),v&&v.m(t,null),z(t,i),l||(d=[j(r,"dragstart",O),j(t,"click",x),j(t,"drop",$),j(t,"dragover",pt)],l=!0)},p(w,k){var b;n=w,k[0]&131072&&s!==(s=n[56].label+"")&&(r.innerHTML=s),k[0]&32&&m(r,"draggable",n[5]),k[0]&32&&S(r,"draggable-column",n[5]),((b=n[1])==null?void 0:b.key)===n[56].key?v?v.p(n,k):(v=ye(n),v.c(),v.m(t,i)):v&&(v.d(1),v=null),k[0]&131104&&S(t,"sortable",n[5]&&n[56].sortable),k[0]&128&&S(t,"sticky-first",n[7]&&n[58]===0),k[0]&131328&&S(t,"sticky-last",n[58]===n[17].length-1&&n[8])},d(w){w&&y(t),v&&v.d(),l=!1,ee(d)}}}function fe(n){let e,t=Z(n[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=we(le(n,t,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ke()},m(s,a){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,a);h(s,e,a)},p(s,a){if(a[0]&37882244){t=Z(s[2]);let i;for(i=0;i<t.length;i+=1){const l=le(s,t,i);r[i]?r[i].p(l,a):(r[i]=we(l),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}},d(s){s&&y(e),Q(r,s)}}}function at(n){return{c:H,m:H,p:H,d:H}}function ot(n){let e,t=n[59]+"";return{c(){e=f("span"),m(e,"class","cell svelte-2y2ud9")},m(r,s){h(r,e,s),e.innerHTML=t},p(r,s){s[0]&131076&&t!==(t=r[59]+"")&&(e.innerHTML=t)},d(r){r&&y(e)}}}function it(n){return{c:H,m:H,p:H,d:H}}function ve(n){let e,t,r,s,a={ctx:n,current:null,token:null,hasCatch:!1,pending:it,then:ot,catch:at,value:59};oe(t=n[22](n[56],n[53],n[55]),a);function i(...l){return n[43](n[53],n[58],n[56],...l)}return{c(){e=f("td"),a.block.c(),m(e,"class","svelte-2y2ud9"),S(e,"sticky-first",n[7]&&n[58]===0),S(e,"sticky-last",n[58]===n[17].length-1&&n[8])},m(l,d){h(l,e,d),a.block.m(e,a.anchor=null),a.mount=()=>e,a.anchor=null,r||(s=j(e,"click",i),r=!0)},p(l,d){n=l,a.ctx=n,d[0]&131076&&t!==(t=n[22](n[56],n[53],n[55]))&&oe(t,a)||et(a,n,d),d[0]&128&&S(e,"sticky-first",n[7]&&n[58]===0),d[0]&131328&&S(e,"sticky-last",n[58]===n[17].length-1&&n[8])},d(l){l&&y(e),a.block.d(),a.token=null,a=null,r=!1,s()}}}function we(n){let e,t,r=Z(n[17]),s=[];for(let a=0;a<r.length;a+=1)s[a]=ve(de(n,r,a));return{c(){e=f("tr");for(let a=0;a<s.length;a+=1)s[a].c();t=N(),m(e,"class","svelte-2y2ud9"),S(e,"highlight",n[11])},m(a,i){h(a,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);z(e,t)},p(a,i){if(i[0]&37880196){r=Z(a[17]);let l;for(l=0;l<r.length;l+=1){const d=de(a,r,l);s[l]?s[l].p(d,i):(s[l]=ve(d),s[l].c(),s[l].m(e,t))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}i[0]&2048&&S(e,"highlight",a[11])},d(a){a&&y(e),Q(s,a)}}}function lt(n){let e=n[4].LOAD_MORE+"",t;return{c(){t=_(e)},m(r,s){h(r,t,s)},p(r,s){s[0]&16&&e!==(e=r[4].LOAD_MORE+"")&&U(t,e)},d(r){r&&y(t)}}}function dt(n){let e,t,r=n[4].LOADING+"",s;return{c(){e=f("span"),t=N(),s=_(r),m(e,"class","spinner svelte-2y2ud9")},m(a,i){h(a,e,i),h(a,t,i),h(a,s,i)},p(a,i){i[0]&16&&r!==(r=a[4].LOADING+"")&&U(s,r)},d(a){a&&(y(e),y(t),y(s))}}}function ke(n){let e,t,r,s;return{c(){e=f("jp-select"),X(e,"label",t=n[4].PAGE_SIZE),X(e,"options",n[21]),X(e,"value",n[0])},m(a,i){h(a,e,i),r||(s=j(e,"value",n[26]),r=!0)},p(a,i){i[0]&16&&t!==(t=a[4].PAGE_SIZE)&&X(e,"label",t),i[0]&1&&X(e,"value",a[0])},d(a){a&&y(e),r=!1,s()}}}function xe(n){let e,t,r,s,a,i,l,d,O,v,x=Z(n[18]),$=[];for(let u=0;u<x.length;u+=1)$[u]=$e(ie(n,x,u));function w(u,A){return u[14]?ct:ut}let k=w(n),b=k(n);return{c(){e=f("div"),t=f("div"),r=N(),s=f("form"),a=f("main");for(let u=0;u<$.length;u+=1)$[u].c();i=N(),l=f("footer"),d=f("button"),b.c(),m(t,"class","arrange-columns-dialog-backdrop svelte-2y2ud9"),m(a,"class","svelte-2y2ud9"),m(d,"type","submit"),m(d,"class","table-button load-button svelte-2y2ud9"),d.disabled=n[19],S(d,"loading",n[19]),m(s,"class","arrange-columns-dialog-inner svelte-2y2ud9"),m(e,"class","arrange-columns-dialog svelte-2y2ud9")},m(u,A){h(u,e,A),z(e,t),z(e,r),z(e,s),z(s,a);for(let g=0;g<$.length;g+=1)$[g]&&$[g].m(a,null);z(s,i),z(s,l),z(l,d),b.m(d,null),O||(v=[j(t,"click",n[44]),j(s,"submit",Qe(n[31]))],O=!0)},p(u,A){if(A[0]&262144){x=Z(u[18]);let g;for(g=0;g<x.length;g+=1){const L=ie(u,x,g);$[g]?$[g].p(L,A):($[g]=$e(L),$[g].c(),$[g].m(a,null))}for(;g<$.length;g+=1)$[g].d(1);$.length=x.length}k===(k=w(u))&&b?b.p(u,A):(b.d(1),b=k(u),b&&(b.c(),b.m(d,null))),A[0]&524288&&(d.disabled=u[19]),A[0]&524288&&S(d,"loading",u[19])},d(u){u&&y(e),Q($,u),b.d(),O=!1,ee(v)}}}function $e(n){let e,t,r,s,a=n[50].label+"",i,l,d;function O(){n[45].call(t,n[51],n[52])}return{c(){e=f("label"),t=f("input"),r=N(),s=f("span"),i=N(),m(t,"type","checkbox"),t.__value=!0,We(t,t.__value)},m(v,x){h(v,e,x),z(e,t),t.checked=n[50].enabled,z(e,r),z(e,s),s.innerHTML=a,z(e,i),l||(d=j(t,"change",O),l=!0)},p(v,x){n=v,x[0]&262144&&(t.checked=n[50].enabled),x[0]&262144&&a!==(a=n[50].label+"")&&(s.innerHTML=a)},d(v){v&&y(e),l=!1,d()}}}function ut(n){let e=n[4].SAVE+"",t;return{c(){t=_(e)},m(r,s){h(r,t,s)},p(r,s){s[0]&16&&e!==(e=r[4].SAVE+"")&&U(t,e)},d(r){r&&y(t)}}}function ct(n){let e,t,r=n[4].LOADING+"",s;return{c(){e=f("span"),t=N(),s=_(r),m(e,"class","spinner svelte-2y2ud9")},m(a,i){h(a,e,i),h(a,t,i),h(a,s,i)},p(a,i){i[0]&16&&r!==(r=a[4].LOADING+"")&&U(s,r)},d(a){a&&(y(e),y(t),y(s))}}}function gt(n){let e,t,r,s,a,i,l,d,O,v,x,$,w,k,b,u=(n[6]||n[10]||n[9])&&ce(n),A=n[17]&&he(n),g=n[2]&&fe(n);function L(c,C){return c[14]?dt:lt}let B=L(n),G=B(n),D=n[12].length>1&&ke(n),R=n[3]&&xe(n);return{c(){e=f("div"),u&&u.c(),t=N(),r=f("div"),s=f("table"),A&&A.c(),a=N(),g&&g.c(),i=N(),l=f("div"),d=f("button"),G.c(),v=N(),D&&D.c(),x=N(),R&&R.c(),$=N(),w=f("input"),m(s,"class","svelte-2y2ud9"),m(r,"class","table-container svelte-2y2ud9"),ae(r,"height",n[13]),m(d,"type","button"),m(d,"class","table-button load-button svelte-2y2ud9"),d.disabled=O=!n[15],S(d,"loading",n[14]),m(l,"class","table-actions svelte-2y2ud9"),m(e,"class","table-card svelte-2y2ud9"),m(w,"type","file"),m(w,"accept",".csv"),w.hidden=!0},m(c,C){h(c,e,C),u&&u.m(e,null),z(e,t),z(e,r),z(r,s),A&&A.m(s,null),z(s,a),g&&g.m(s,null),z(e,i),z(e,l),z(l,d),G.m(d,null),z(l,v),D&&D.m(l,null),h(c,x,C),R&&R.m(c,C),h(c,$,C),h(c,w,C),n[46](w),k||(b=[j(d,"click",n[24]),j(w,"change",n[30])],k=!0)},p(c,C){c[6]||c[10]||c[9]?u?u.p(c,C):(u=ce(c),u.c(),u.m(e,t)):u&&(u.d(1),u=null),c[17]?A?A.p(c,C):(A=he(c),A.c(),A.m(s,a)):A&&(A.d(1),A=null),c[2]?g?g.p(c,C):(g=fe(c),g.c(),g.m(s,null)):g&&(g.d(1),g=null),C[0]&8192&&ae(r,"height",c[13]),B===(B=L(c))&&G?G.p(c,C):(G.d(1),G=B(c),G&&(G.c(),G.m(d,null))),C[0]&32768&&O!==(O=!c[15])&&(d.disabled=O),C[0]&16384&&S(d,"loading",c[14]),c[12].length>1?D?D.p(c,C):(D=ke(c),D.c(),D.m(l,null)):D&&(D.d(1),D=null),c[3]?R?R.p(c,C):(R=xe(c),R.c(),R.m($.parentNode,$)):R&&(R.d(1),R=null)},i:H,o:H,d(c){c&&(y(e),y(x),y($),y(w)),u&&u.d(),A&&A.d(),g&&g.d(),G.d(),D&&D.d(),R&&R.d(c),n[46](null),k=!1,ee(b)}}}function mt(n,e){n.dataTransfer.setData("text/plain",e.key)}function pt(n){n.preventDefault()}function ht(n,e,t){let{wording:r={ARRANGE_COLUMNS:"Arrange columns",EXPORT:"Export",IMPORT:"Import",LOADING:"Loading",LOAD_MORE:"Load more",PAGE_SIZE:"Page size",SAVE:"Save"}}=e,{allowArrangeColumns:s=!0}=e,{showArrangingColumns:a=!0}=e,{freezeFirstColumn:i=!1}=e,{freezeLastColumn:l=!1}=e,{showExport:d=!0}=e,{showImport:O=!0}=e,{rowClickable:v=!1}=e,{headers:x=[]}=e,{pageSizes:$=[10,25,50,100]}=e,{pageSize:w=$[0]}=e,{sort:k}=e,{service:b}=e,{id:u}=e,{height:A=null}=e,{getData:g=async()=>{const o=await b.get(k,w);t(2,L=o.rows),t(15,R=o.hasMore),t(14,D=!1)}}=e,{rows:L=[]}=e,{arrangeColumnDialog:B=!1}=e,G=JSON.stringify($.map(o=>({label:o,value:o}))),D=!0,R=!1,c=!1,C,F=[],q=[],J=!1,K,W=!1;const ze=qe();async function Ae(o,p="id"){t(2,L=L.filter(E=>E[p]!==o))}async function Oe(o){t(2,L=[...L,o])}async function Ee(o,p){t(2,L=L.map((E,I)=>I===p?{...E,...o}:E))}async function te(o,p,E){const{key:I,fallback:P,pipes:V}=o;let T;try{T=tt(p,I)}catch{return P||""}if(!V)return T;for(const Y of V)T=await Y(T,p,E);return T}async function ne(o){const{sortable:p}=o;if(!p)return;t(14,D=!0),t(1,k={key:o.key,direction:k?.key===o.key&&k.direction==="asc"?"desc":"asc"});const[E]=await Promise.all([b.get(k,w),b.adjustSort(k)]);t(2,L=E.rows),t(15,R=E.hasMore),t(14,D=!1)}async function De(){t(14,D=!0);const o=await b.loadMore(k,w);t(2,L=[...L,...o.rows]),t(15,R=o.hasMore),t(14,D=!1)}function re(o,p,E,I){ze("rowClick",{row:o,index:p,header:E,originalEvent:I})}async function Le(o){t(0,w=o.detail),await Promise.all([g(),b.adjustPageSize(w)])}async function Se(){if(c)return;t(16,c=!0);const o=await b.export(),p=await Promise.all(o.map(async(P,V)=>(await Promise.all(C.map(T=>te({key:T.key,fallback:T.exportFallback||T.fallback,pipes:T.exportPipes||T.pipes||[]},P,V)))).map(T=>`"${T||""}"`).join(","))),E=new Blob([[C.map(P=>P.label).map(P=>`"${P}"`).join(","),...p].join(`
`)],{type:"text/csv"}),I=document.createElement("a");I.href=URL.createObjectURL(E),I.download="export.csv",I.click(),t(16,c=!1)}async function se(o,p){o.preventDefault();const E=o.dataTransfer.getData("text/plain"),I=F.indexOf(E);I!==-1&&Number.isInteger(p)&&(F.splice(I,1),F.splice(Number(p),0,E),t(17,C=x.filter(P=>!P.disabled).sort((P,V)=>{const T=F.indexOf(P.key),Y=F.indexOf(V.key);return T-Y})),b.arrangeColumns&&await b.arrangeColumns(u,C.map(P=>P.key)))}function Re(){t(18,q=[...x].map(o=>(o.enabled=!o.disabled,o)).sort((o,p)=>{const E=F.indexOf(o.key),I=F.indexOf(p.key);return E-I})),t(3,B=!0)}async function Ie(o){if(W||!o.target.files||!o.target.files[0])return;W=!0;const p=await b.import(o.target.files[0]);p!=null&&p.length&&t(2,L=[...p,...L]),o.target.value="",W=!1}async function Me(){J||(t(19,J=!0),t(32,x=[...q].map(o=>(o.disabled=!o.enabled,delete o.enabled,o))),t(17,C=x.filter(o=>!o.disabled)),F=C.map(o=>o.key),b.arrangeColumns&&await b.arrangeColumns(u,C.map(o=>o.key)),t(19,J=!1),t(3,B=!1))}Je(async()=>{if(b.getColumnOrder){const o=await b.getColumnOrder(u);o&&t(32,x=x.map(p=>(p.disabled=!o.includes(p.key),p)).sort((p,E)=>{const I=o.indexOf(p.key),P=o.indexOf(E.key);return I-P}))}t(17,C=x.filter(o=>!o.disabled)),F=C.map(o=>o.key),await g()});const Ne=()=>K.click(),Pe=(o,p)=>mt(p,o),Te=o=>ne(o),je=(o,p)=>se(p,o),Ge=(o,p,E,I)=>re(o,p,E,I),_e=()=>t(3,B=!1);function Be(o,p){o[p].enabled=this.checked,t(18,q)}function He(o){Ye[o?"unshift":"push"](()=>{K=o,t(20,K)})}return n.$$set=o=>{"wording"in o&&t(4,r=o.wording),"allowArrangeColumns"in o&&t(5,s=o.allowArrangeColumns),"showArrangingColumns"in o&&t(6,a=o.showArrangingColumns),"freezeFirstColumn"in o&&t(7,i=o.freezeFirstColumn),"freezeLastColumn"in o&&t(8,l=o.freezeLastColumn),"showExport"in o&&t(9,d=o.showExport),"showImport"in o&&t(10,O=o.showImport),"rowClickable"in o&&t(11,v=o.rowClickable),"headers"in o&&t(32,x=o.headers),"pageSizes"in o&&t(12,$=o.pageSizes),"pageSize"in o&&t(0,w=o.pageSize),"sort"in o&&t(1,k=o.sort),"service"in o&&t(33,b=o.service),"id"in o&&t(34,u=o.id),"height"in o&&t(13,A=o.height),"getData"in o&&t(35,g=o.getData),"rows"in o&&t(2,L=o.rows),"arrangeColumnDialog"in o&&t(3,B=o.arrangeColumnDialog)},n.$$.update=()=>{n.$$.dirty[1]&2&&t(17,C=x.filter(o=>!o.disabled))},[w,k,L,B,r,s,a,i,l,d,O,v,$,A,D,R,c,C,q,J,K,G,te,ne,De,re,Le,Se,se,Re,Ie,Me,x,b,u,g,Ae,Oe,Ee,Ne,Pe,Te,je,Ge,_e,Be,He]}class Ce extends Ue{constructor(e){super(),Ze(this,e,ht,gt,Ve,{wording:4,allowArrangeColumns:5,showArrangingColumns:6,freezeFirstColumn:7,freezeLastColumn:8,showExport:9,showImport:10,rowClickable:11,headers:32,pageSizes:12,pageSize:0,sort:1,service:33,id:34,height:13,getData:35,rows:2,arrangeColumnDialog:3,removeRow:36,addRow:37,updateRow:38},nt,[-1,-1])}get wording(){return this.$$.ctx[4]}set wording(e){this.$$set({wording:e}),M()}get allowArrangeColumns(){return this.$$.ctx[5]}set allowArrangeColumns(e){this.$$set({allowArrangeColumns:e}),M()}get showArrangingColumns(){return this.$$.ctx[6]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),M()}get freezeFirstColumn(){return this.$$.ctx[7]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),M()}get freezeLastColumn(){return this.$$.ctx[8]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),M()}get showExport(){return this.$$.ctx[9]}set showExport(e){this.$$set({showExport:e}),M()}get showImport(){return this.$$.ctx[10]}set showImport(e){this.$$set({showImport:e}),M()}get rowClickable(){return this.$$.ctx[11]}set rowClickable(e){this.$$set({rowClickable:e}),M()}get headers(){return this.$$.ctx[32]}set headers(e){this.$$set({headers:e}),M()}get pageSizes(){return this.$$.ctx[12]}set pageSizes(e){this.$$set({pageSizes:e}),M()}get pageSize(){return this.$$.ctx[0]}set pageSize(e){this.$$set({pageSize:e}),M()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),M()}get service(){return this.$$.ctx[33]}set service(e){this.$$set({service:e}),M()}get id(){return this.$$.ctx[34]}set id(e){this.$$set({id:e}),M()}get height(){return this.$$.ctx[13]}set height(e){this.$$set({height:e}),M()}get getData(){return this.$$.ctx[35]}set getData(e){this.$$set({getData:e}),M()}get rows(){return this.$$.ctx[2]}set rows(e){this.$$set({rows:e}),M()}get arrangeColumnDialog(){return this.$$.ctx[3]}set arrangeColumnDialog(e){this.$$set({arrangeColumnDialog:e}),M()}get removeRow(){return this.$$.ctx[36]}get addRow(){return this.$$.ctx[37]}get updateRow(){return this.$$.ctx[38]}}try{customElements.define("jp-async-table",Fe(Ce,{wording:{},allowArrangeColumns:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"},showExport:{type:"Boolean"},showImport:{type:"Boolean"},rowClickable:{type:"Boolean"},headers:{},pageSizes:{},pageSize:{},sort:{},service:{},id:{},height:{},getData:{},rows:{},arrangeColumnDialog:{type:"Boolean"}},[],["removeRow","addRow","updateRow"],!1));}catch{};export{Ce as default};
