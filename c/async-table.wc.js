import{c as On,S as En,i as Ln,o as R,s as An,e as $,l as I,d as w,v as K,f as h,p as v,m as S,x as D,k as b,D as Sn,H as Mn,A as B,B as H,w as Q,y as _,z as Y,E as k,a4 as J,O as Rn,r as oe,n as In,q as Dn,F as se,G as xe,C as Tn,Z as ke}from"./svelte.js";import"./index.js";import{get as Nn}from"./json-pointer.js";import{clickOutside as Pn}from"./click-outside.js";const Gn='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M160-360v-80h640v80H160Zm0-160v-80h640v80H160Z" /></svg>';function je(t,e,n){const l=t.slice();return l[73]=e[n],l[74]=e,l[75]=n,l}function ve(t,e,n){const l=t.slice();return l[76]=e[n],l[78]=n,l}function Ce(t,e,n){const l=t.slice();return l[79]=e[n],l[81]=n,l}function ze(t,e,n){const l=t.slice();return l[79]=e[n],l[75]=n,l}function Oe(t,e,n){const l=t.slice();return l[84]=e[n],l}function Ee(t){let e,n,l,a=t[7]&&Le(t),r=t[11]&&Ae(t),o=t[10]&&Se(t);return{c(){e=$("div"),a&&a.c(),n=I(),r&&r.c(),l=I(),o&&o.c(),w(e,"class","jp-async-table-header")},m(c,i){h(c,e,i),a&&a.m(e,null),v(e,n),r&&r.m(e,null),v(e,l),o&&o.m(e,null)},p(c,i){c[7]?a?a.p(c,i):(a=Le(c),a.c(),a.m(e,n)):a&&(a.d(1),a=null),c[11]?r?r.p(c,i):(r=Ae(c),r.c(),r.m(e,l)):r&&(r.d(1),r=null),c[10]?o?o.p(c,i):(o=Se(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(c){c&&b(e),a&&a.d(),r&&r.d(),o&&o.d()}}}function Le(t){let e,n,l=t[5].ARRANGE_COLUMNS+"",a,r,o;return{c(){e=B(`\xA0
        `),n=$("button"),a=B(l),w(n,"type","button"),w(n,"class","jp-async-table-button")},m(c,i){h(c,e,i),h(c,n,i),v(n,a),r||(o=S(n,"click",t[37]),r=!0)},p(c,i){i[0]&32&&l!==(l=c[5].ARRANGE_COLUMNS+"")&&H(a,l)},d(c){c&&(b(e),b(n)),r=!1,o()}}}function Ae(t){let e,n,l=t[5].IMPORT+"",a,r,o;return{c(){e=B(`\xA0
        `),n=$("button"),a=B(l),w(n,"type","button"),w(n,"class","jp-async-table-button")},m(c,i){h(c,e,i),h(c,n,i),v(n,a),r||(o=S(n,"click",t[47]),r=!0)},p(c,i){i[0]&32&&l!==(l=c[5].IMPORT+"")&&H(a,l)},d(c){c&&(b(e),b(n)),r=!1,o()}}}function Se(t){let e,n;function l(o,c){return o[14]?Bn:_n}let a=l(t),r=a(t);return{c(){e=B(`\xA0
        `),r.c(),n=Q()},m(o,c){h(o,e,c),r.m(o,c),h(o,n,c)},p(o,c){a===(a=l(o))&&r?r.p(o,c):(r.d(1),r=a(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&(b(e),b(n)),r.d(o)}}}function Bn(t){let e,n,l,a,r,o=t[17]&&Me(t);return{c(){e=$("div"),n=$("button"),n.textContent="Export",l=I(),o&&o.c(),w(n,"type","button"),w(n,"class","jp-async-table-button"),w(e,"class","jp-async-table-dropdown")},m(c,i){h(c,e,i),v(e,n),v(e,l),o&&o.m(e,null),a||(r=S(n,"click",t[48]),a=!0)},p(c,i){c[17]?o?o.p(c,i):(o=Me(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(c){c&&b(e),o&&o.d(),a=!1,r()}}}function _n(t){let e,n,l;function a(c,i){return c[20]?Hn:Fn}let r=a(t),o=r(t);return{c(){e=$("button"),o.c(),w(e,"type","button"),w(e,"class","jp-async-table-button"),e.disabled=t[20],k(e,"jp-async-table-loading",t[20])},m(c,i){h(c,e,i),o.m(e,null),n||(l=S(e,"click",t[32]),n=!0)},p(c,i){r===(r=a(c))&&o?o.p(c,i):(o.d(1),o=r(c),o&&(o.c(),o.m(e,null))),i[0]&1048576&&(e.disabled=c[20]),i[0]&1048576&&k(e,"jp-async-table-loading",c[20])},d(c){c&&b(e),o.d(),n=!1,l()}}}function Me(t){let e,n,l,a=_(t[25]),r=[];for(let o=0;o<a.length;o+=1)r[o]=Re(Oe(t,a,o));return{c(){e=$("ul");for(let o=0;o<r.length;o+=1)r[o].c();w(e,"class","jp-async-table-dropdown-menu")},m(o,c){h(o,e,c);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n||(l=[Dn(Pn.call(null,e)),S(e,"click_outside",t[50])],n=!0)},p(o,c){if(c[0]&33554432|c[1]&512){a=_(o[25]);let i;for(i=0;i<a.length;i+=1){const O=Oe(o,a,i);r[i]?r[i].p(O,c):(r[i]=Re(O),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}},d(o){o&&b(e),Y(r,o),n=!1,oe(l)}}}function Re(t){let e,n,l;function a(){return t[49](t[84])}return{c(){e=$("button"),e.textContent=`${t[84].label} `,w(e,"type","button"),w(e,"class","jp-async-table-dropdown-option")},m(r,o){h(r,e,o),n||(l=S(e,"click",a),n=!0)},p(r,o){t=r},d(r){r&&b(e),n=!1,l()}}}function Fn(t){let e=t[5].EXPORT+"",n;return{c(){n=B(e)},m(l,a){h(l,n,a)},p(l,a){a[0]&32&&e!==(e=l[5].EXPORT+"")&&H(n,e)},d(l){l&&b(n)}}}function Hn(t){let e,n,l=t[5].LOADING+"",a;return{c(){e=$("span"),n=I(),a=B(l),w(e,"class","jp-async-table-spinner")},m(r,o){h(r,e,o),h(r,n,o),h(r,a,o)},p(r,o){o[0]&32&&l!==(l=r[5].LOADING+"")&&H(a,l)},d(r){r&&(b(e),b(n),b(a))}}}function Ie(t){let e,n=_(t[0]),l=[];for(let a=0;a<n.length;a+=1)l[a]=Ne(ze(t,n,a));return{c(){e=$("tr");for(let a=0;a<l.length;a+=1)l[a].c()},m(a,r){h(a,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(a,r){if(r[0]&285213509|r[1]&60){n=_(a[0]);let o;for(o=0;o<n.length;o+=1){const c=ze(a,n,o);l[o]?l[o].p(c,r):(l[o]=Ne(c),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(a){a&&b(e),Y(l,a)}}}function De(t){var e;let n,l,a,r,o,c,i,O,C={ctx:t,current:null,token:null,hasCatch:!1,pending:Xn,then:Vn,catch:Un,value:82};se(a=Ze(t[79]),C);let g=((e=t[2])==null?void 0:e.key)===t[79].key&&Te(t);function z(){return t[51](t[79])}function G(...m){return t[52](t[79],...m)}function j(...m){return t[53](t[79],t[75],...m)}function f(){return t[54](t[79])}function u(...m){return t[55](t[79],t[75],...m)}return{c(){n=$("th"),l=$("span"),C.block.c(),r=I(),g&&g.c(),o=I(),w(l,"tabindex","-1"),w(l,"role","button"),w(l,"aria-label","Drag handle"),k(l,"jp-async-table-draggable-column",t[6]&&!t[79].disableOrganize),w(n,"draggable",c=t[6]&&!t[79].disableOrganize),k(n,"jp-async-table-sortable",t[6]&&t[79].sortable),k(n,"jp-async-table-sticky-first",t[8]&&t[75]===0),k(n,"jp-async-table-sticky-last",t[75]===t[0].length-1&&t[9]),k(n,"jp-async-table-no-cursor",t[79].disableOrganize),k(n,"jp-async-table-hover-over",t[24]===t[75])},m(m,d){h(m,n,d),v(n,l),C.block.m(l,C.anchor=null),C.mount=()=>l,C.anchor=null,v(n,r),g&&g.m(n,null),v(n,o),i||(O=[S(n,"click",z),S(n,"dragstart",G),S(n,"dragover",j),S(n,"dragleave",f),S(n,"drop",u)],i=!0)},p(m,d){var A;t=m,C.ctx=t,d[0]&1&&a!==(a=Ze(t[79]))&&se(a,C)||xe(C,t,d),d[0]&65&&k(l,"jp-async-table-draggable-column",t[6]&&!t[79].disableOrganize),((A=t[2])==null?void 0:A.key)===t[79].key?g?g.p(t,d):(g=Te(t),g.c(),g.m(n,o)):g&&(g.d(1),g=null),d[0]&65&&c!==(c=t[6]&&!t[79].disableOrganize)&&w(n,"draggable",c),d[0]&65&&k(n,"jp-async-table-sortable",t[6]&&t[79].sortable),d[0]&256&&k(n,"jp-async-table-sticky-first",t[8]&&t[75]===0),d[0]&513&&k(n,"jp-async-table-sticky-last",t[75]===t[0].length-1&&t[9]),d[0]&1&&k(n,"jp-async-table-no-cursor",t[79].disableOrganize),d[0]&16777216&&k(n,"jp-async-table-hover-over",t[24]===t[75])},d(m){m&&b(n),C.block.d(),C.token=null,C=null,g&&g.d(),i=!1,oe(O)}}}function Un(t){return{c:D,m:D,p:D,d:D}}function Vn(t){let e,n=t[82]+"",l;return{c(){e=new ke(!1),l=Q(),e.a=l},m(a,r){e.m(n,a,r),h(a,l,r)},p(a,r){r[0]&1&&n!==(n=a[82]+"")&&e.p(n)},d(a){a&&(b(l),e.d())}}}function Xn(t){return{c:D,m:D,p:D,d:D}}function Te(t){let e,n=t[2].direction==="asc"?"\u2191":"\u2193",l;return{c(){e=$("span"),l=B(n),w(e,"class","jp-async-table-sortable")},m(a,r){h(a,e,r),v(e,l)},p(a,r){r[0]&4&&n!==(n=a[2].direction==="asc"?"\u2191":"\u2193")&&H(l,n)},d(a){a&&b(e)}}}function Ne(t){let e,n=!t[79].disabled&&De(t);return{c(){n&&n.c(),e=Q()},m(l,a){n&&n.m(l,a),h(l,e,a)},p(l,a){l[79].disabled?n&&(n.d(1),n=null):n?n.p(l,a):(n=De(l),n.c(),n.m(e.parentNode,e))},d(l){l&&b(e),n&&n.d(l)}}}function Pe(t){let e,n=_(t[3]),l=[];for(let a=0;a<n.length;a+=1)l[a]=_e(ve(t,n,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=Q()},m(a,r){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(a,r);h(a,e,r)},p(a,r){if(r[0]&1224741705){n=_(a[3]);let o;for(o=0;o<n.length;o+=1){const c=ve(a,n,o);l[o]?l[o].p(c,r):(l[o]=_e(c),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(a){a&&b(e),Y(l,a)}}}function Ge(t){let e,n,l,a,r={ctx:t,current:null,token:null,hasCatch:!1,pending:Kn,then:qn,catch:Zn,value:82};se(n=t[27](t[79],t[76],t[78]),r);function o(...c){return t[56](t[76],t[78],t[79],...c)}return{c(){e=$("td"),r.block.c(),k(e,"jp-async-table-sortable",t[6]&&t[79].sortable),k(e,"jp-async-table-sticky-first",t[8]&&t[81]===0),k(e,"jp-async-table-sticky-last",t[81]===t[0].length-1&&t[9]),k(e,"jp-async-table-hover-over",t[24]===t[81])},m(c,i){h(c,e,i),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,l||(a=S(e,"click",o),l=!0)},p(c,i){t=c,r.ctx=t,i[0]&9&&n!==(n=t[27](t[79],t[76],t[78]))&&se(n,r)||xe(r,t,i),i[0]&65&&k(e,"jp-async-table-sortable",t[6]&&t[79].sortable),i[0]&256&&k(e,"jp-async-table-sticky-first",t[8]&&t[81]===0),i[0]&513&&k(e,"jp-async-table-sticky-last",t[81]===t[0].length-1&&t[9]),i[0]&16777216&&k(e,"jp-async-table-hover-over",t[24]===t[81])},d(c){c&&b(e),r.block.d(),r.token=null,r=null,l=!1,a()}}}function Zn(t){return{c:D,m:D,p:D,d:D}}function qn(t){let e,n=t[82]+"";return{c(){e=$("span"),w(e,"class","jp-async-table-cell")},m(l,a){h(l,e,a),e.innerHTML=n},p(l,a){a[0]&9&&n!==(n=l[82]+"")&&(e.innerHTML=n)},d(l){l&&b(e)}}}function Kn(t){return{c:D,m:D,p:D,d:D}}function Be(t){let e,n=!t[79].disabled&&Ge(t);return{c(){n&&n.c(),e=Q()},m(l,a){n&&n.m(l,a),h(l,e,a)},p(l,a){l[79].disabled?n&&(n.d(1),n=null):n?n.p(l,a):(n=Ge(l),n.c(),n.m(e.parentNode,e))},d(l){l&&b(e),n&&n.d(l)}}}function _e(t){let e,n,l=_(t[0]),a=[];for(let r=0;r<l.length;r+=1)a[r]=Be(Ce(t,l,r));return{c(){e=$("tr");for(let r=0;r<a.length;r+=1)a[r].c();n=I(),k(e,"jp-async-table-highlight",t[12])},m(r,o){h(r,e,o);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);v(e,n)},p(r,o){if(o[0]&1224737609){l=_(r[0]);let c;for(c=0;c<l.length;c+=1){const i=Ce(r,l,c);a[c]?a[c].p(i,o):(a[c]=Be(i),a[c].c(),a[c].m(e,n))}for(;c<a.length;c+=1)a[c].d(1);a.length=l.length}o[0]&4096&&k(e,"jp-async-table-highlight",r[12])},d(r){r&&b(e),Y(a,r)}}}function Fe(t){let e,n,l,a;function r(i,O){return i[18]?Wn:Qn}let o=r(t),c=o(t);return{c(){e=$("button"),c.c(),w(e,"type","button"),w(e,"class","jp-async-table-button"),e.disabled=n=!t[19],k(e,"jp-async-table-loading",t[18])},m(i,O){h(i,e,O),c.m(e,null),l||(a=S(e,"click",t[29]),l=!0)},p(i,O){o===(o=r(i))&&c?c.p(i,O):(c.d(1),c=o(i),c&&(c.c(),c.m(e,null))),O[0]&524288&&n!==(n=!i[19])&&(e.disabled=n),O[0]&262144&&k(e,"jp-async-table-loading",i[18])},d(i){i&&b(e),c.d(),l=!1,a()}}}function Qn(t){let e=t[5].LOAD_MORE+"",n;return{c(){n=B(e)},m(l,a){h(l,n,a)},p(l,a){a[0]&32&&e!==(e=l[5].LOAD_MORE+"")&&H(n,e)},d(l){l&&b(n)}}}function Wn(t){let e,n,l=t[5].LOADING+"",a;return{c(){e=$("span"),n=I(),a=B(l),w(e,"class","jp-async-table-spinner")},m(r,o){h(r,e,o),h(r,n,o),h(r,a,o)},p(r,o){o[0]&32&&l!==(l=r[5].LOADING+"")&&H(a,l)},d(r){r&&(b(e),b(n),b(a))}}}function He(t){let e,n,l,a;return{c(){e=$("jp-select"),J(e,"label",n=t[5].PAGE_SIZE),J(e,"options",t[26]),J(e,"value",t[1])},m(r,o){h(r,e,o),l||(a=S(e,"value",t[31]),l=!0)},p(r,o){o[0]&32&&n!==(n=r[5].PAGE_SIZE)&&J(e,"label",n),o[0]&2&&J(e,"value",r[1])},d(r){r&&b(e),l=!1,a()}}}function Ue(t){let e,n,l,a,r,o,c,i,O,C,g=_(t[21]),z=[];for(let u=0;u<g.length;u+=1)z[u]=Xe(je(t,g,u));function G(u,m){return u[18]?Jn:Yn}let j=G(t),f=j(t);return{c(){e=$("div"),n=$("div"),l=I(),a=$("form"),r=$("main");for(let u=0;u<z.length;u+=1)z[u].c();o=I(),c=$("footer"),i=$("button"),f.c(),w(n,"class","jp-async-table-arrange-columns-dialog-backdrop"),w(i,"type","submit"),w(i,"class","jp-async-table-button"),i.disabled=t[22],k(i,"jp-async-table-loading",t[22]),w(a,"class","jp-async-table-arrange-columns-dialog-inner"),w(e,"class","jp-async-table-arrange-columns-dialog")},m(u,m){h(u,e,m),v(e,n),v(e,l),v(e,a),v(a,r);for(let d=0;d<z.length;d+=1)z[d]&&z[d].m(r,null);v(a,o),v(a,c),v(c,i),f.m(i,null),O||(C=[S(n,"click",t[57]),S(a,"submit",Rn(t[39]))],O=!0)},p(u,m){if(m[0]&18874368|m[1]&60){g=_(u[21]);let d;for(d=0;d<g.length;d+=1){const A=je(u,g,d);z[d]?z[d].p(A,m):(z[d]=Xe(A),z[d].c(),z[d].m(r,null))}for(;d<z.length;d+=1)z[d].d(1);z.length=g.length}j===(j=G(u))&&f?f.p(u,m):(f.d(1),f=j(u),f&&(f.c(),f.m(i,null))),m[0]&4194304&&(i.disabled=u[22]),m[0]&4194304&&k(i,"jp-async-table-loading",u[22])},d(u){u&&b(e),Y(z,u),f.d(),O=!1,oe(C)}}}function Ve(t){let e,n,l,a,r,o,c,i=t[73].label+"",O,C,g;function z(...m){return t[58](t[73],...m)}function G(...m){return t[59](t[73],t[75],...m)}function j(){return t[60](t[73])}function f(...m){return t[61](t[73],t[75],...m)}function u(){t[62].call(r,t[74],t[75])}return{c(){e=$("label"),n=$("span"),l=new ke(!1),a=I(),r=$("input"),o=I(),c=$("span"),O=I(),l.a=a,w(n,"class","jp-async-table-material-symbols-outlined drag-handle"),w(n,"draggable","true"),K(n,"cursor",t[73].disableOrganize?"default":"grab"),K(n,"pointer-events",t[73].disableOrganize?"none":"auto"),k(n,"jp-async-table-no-cursor",t[73].disableOrganize),w(r,"type","checkbox"),r.__value=!0,Tn(r,r.__value),w(e,"class","jp-async-table-arrange-column-label"),k(e,"jp-async-table-hover-over",t[24]===t[75])},m(m,d){h(m,e,d),v(e,n),l.m(Gn,n),v(n,a),v(e,r),r.checked=t[73].enabled,v(e,o),v(e,c),c.innerHTML=i,v(e,O),C||(g=[S(n,"dragstart",z),S(n,"dragover",G),S(n,"dragleave",j),S(n,"drop",f),S(r,"change",u)],C=!0)},p(m,d){t=m,d[0]&2097152&&K(n,"cursor",t[73].disableOrganize?"default":"grab"),d[0]&2097152&&K(n,"pointer-events",t[73].disableOrganize?"none":"auto"),d[0]&2097152&&k(n,"jp-async-table-no-cursor",t[73].disableOrganize),d[0]&2097152&&(r.checked=t[73].enabled),d[0]&2097152&&i!==(i=t[73].label+"")&&(c.innerHTML=i),d[0]&16777216&&k(e,"jp-async-table-hover-over",t[24]===t[75])},d(m){m&&b(e),C=!1,oe(g)}}}function Xe(t){let e,n=!t[73].disableToggle&&Ve(t);return{c(){n&&n.c(),e=Q()},m(l,a){n&&n.m(l,a),h(l,e,a)},p(l,a){l[73].disableToggle?n&&(n.d(1),n=null):n?n.p(l,a):(n=Ve(l),n.c(),n.m(e.parentNode,e))},d(l){l&&b(e),n&&n.d(l)}}}function Yn(t){let e=t[5].SAVE+"",n;return{c(){n=B(e)},m(l,a){h(l,n,a)},p(l,a){a[0]&32&&e!==(e=l[5].SAVE+"")&&H(n,e)},d(l){l&&b(n)}}}function Jn(t){let e,n,l=t[5].LOADING+"",a;return{c(){e=$("span"),n=I(),a=B(l),w(e,"class","spinner")},m(r,o){h(r,e,o),h(r,n,o),h(r,a,o)},p(r,o){o[0]&32&&l!==(l=r[5].LOADING+"")&&H(a,l)},d(r){r&&(b(e),b(n),b(a))}}}function et(t){let e,n,l,a,r,o,c,i,O,C,g,z,G,j=(t[7]||t[11]||t[10])&&Ee(t),f=t[0]&&Ie(t),u=t[3]&&Pe(t),m=t[16]&&Fe(t),d=t[13].length>1&&He(t),A=t[4]&&Ue(t);return{c(){e=$("div"),j&&j.c(),n=I(),l=$("div"),a=$("table"),f&&f.c(),r=I(),u&&u.c(),o=I(),c=$("div"),m&&m.c(),i=I(),d&&d.c(),O=I(),A&&A.c(),C=I(),g=$("input"),w(l,"class","jp-async-table-container"),K(l,"height",t[15]),w(c,"class","jp-async-table-actions"),w(e,"class","jp-async-table"),w(g,"accept",".csv"),g.hidden=!0,w(g,"type","file")},m(y,M){h(y,e,M),j&&j.m(e,null),v(e,n),v(e,l),v(l,a),f&&f.m(a,null),v(a,r),u&&u.m(a,null),v(e,o),v(e,c),m&&m.m(c,null),v(c,i),d&&d.m(c,null),h(y,O,M),A&&A.m(y,M),h(y,C,M),h(y,g,M),t[63](g),z||(G=S(g,"change",t[38]),z=!0)},p(y,M){y[7]||y[11]||y[10]?j?j.p(y,M):(j=Ee(y),j.c(),j.m(e,n)):j&&(j.d(1),j=null),y[0]?f?f.p(y,M):(f=Ie(y),f.c(),f.m(a,r)):f&&(f.d(1),f=null),y[3]?u?u.p(y,M):(u=Pe(y),u.c(),u.m(a,null)):u&&(u.d(1),u=null),M[0]&32768&&K(l,"height",y[15]),y[16]?m?m.p(y,M):(m=Fe(y),m.c(),m.m(c,i)):m&&(m.d(1),m=null),y[13].length>1?d?d.p(y,M):(d=He(y),d.c(),d.m(c,null)):d&&(d.d(1),d=null),y[4]?A?A.p(y,M):(A=Ue(y),A.c(),A.m(C.parentNode,C)):A&&(A.d(1),A=null)},i:D,o:D,d(y){y&&(b(e),b(O),b(C),b(g)),j&&j.d(),f&&f.d(),u&&u.d(),m&&m.d(),d&&d.d(),A&&A.d(y),t[63](null),z=!1,G()}}}async function Ze(t){const{label:e,headerPipes:n}=t;let l=e;if(!n)return l;for(const a of n)l=await a(l);return l}async function qe(){const t=document.querySelector(".jp-async-table-container");t&&t.scrollTo({top:0,behavior:"smooth"})}function nt(t,e,n){let{wording:l={ARRANGE_COLUMNS:"Arrange columns",EXPORT:"Export",IMPORT:"Import",SELECT:"Select data type",LOADING:"Loading",LOAD_MORE:"Load more",PAGE_SIZE:"Page size",SAVE:"Save"}}=e,{allowArrangeColumns:a=!0}=e,{showArrangingColumns:r=!0}=e,{freezeFirstColumn:o=!1}=e,{freezeLastColumn:c=!1}=e,{showExport:i=!0}=e,{showImport:O=!0}=e,{rowClickable:C=!1}=e,{headers:g=[]}=e,{pageSizes:z=[10,25,50,100]}=e,{dropdownMenuExport:G=!1}=e,{pageSize:j=z[0]}=e,{sort:f}=e,{service:u}=e,{id:m}=e,{height:d=null}=e,A=[],y=[],M=!1,ee=[];const ge=[{value:"csv",label:"CSV"},{value:"json",label:"JSON"},{value:"xml",label:"XML"}],he=[{label:"CSV",type:"csv",method:()=>({fileContent:[y.map(s=>`"${s.label}"`).join(","),...ee].join(`
`),mimeType:"text/csv",extension:"csv"})},{label:"JSON",type:"json",method:()=>({fileContent:JSON.stringify(ee.map(s=>{const p=s.split(",");return Object.fromEntries(y.map((x,E)=>{var L;return[x.label,((L=p[E])==null?void 0:L.replace(/"/g,""))||""]}))}),null,2),mimeType:"application/json",extension:"json"})},{label:"XML",type:"xml",method:()=>({fileContent:`<root>
${ee.map(s=>`  <row>
${s}</row>`).join(`
`)}
</root>`,mimeType:"application/xml",extension:"xml"})}];let{getData:ne=async()=>{const s=await u.get(f,j);n(3,N=s.rows),n(19,te=s.hasMore),n(18,Z=!1),qe()}}=e,{rows:N=[]}=e,{arrangeColumnDialog:W=!1}=e,{showLoadMore:be=!0}=e,Qe=JSON.stringify(z.map(s=>({label:s,value:s}))),Z=!0,te=!1,U=!1,q=[],le=!1,ae,ce=!1;const We=Sn();async function Ye(s,p="id"){n(3,N=N.filter(x=>x[p]!==s))}async function Je(s){n(3,N=[...N,s])}async function en(s,p){n(3,N=N.map((x,E)=>E===p?{...x,...s}:x))}async function ie(s,p,x){const{key:E,fallback:L,pipes:P}=s;let T;try{T=Nn(p,E)}catch{return L||""}if(!P)return T;for(const V of P)T=await V(T,p,x);return T}async function fe(s){const{sortable:p}=s;if(!p)return;n(18,Z=!0),n(2,f={key:s.key,direction:f?.key===s.key&&f.direction==="asc"?"desc":"asc"});const x=[u.get(f,j)];u.adjustSort&&x.push(u.adjustSort(f));const[E]=await Promise.all(x);n(3,N=E.rows),n(19,te=E.hasMore),n(18,Z=!1),qe()}async function nn(){n(18,Z=!0);const s=await u.loadMore(f,j);n(3,N=[...N,...s.rows]),n(19,te=s.hasMore),n(18,Z=!1)}function ye(s,p,x,E){We("rowClick",{row:s,index:p,header:x,originalEvent:E})}async function tn(s){n(1,j=s.detail);const p=[ne()];u.adjustPageSize&&p.push(u.adjustPageSize(j)),await Promise.all(p)}async function ln(){if(U)return;n(20,U=!0),y=g.filter(L=>!L.disabled&&!L.hideOnExport);const s=await u.export(),p=await Promise.all(s.map(async(L,P)=>(await Promise.all(y.map(T=>ie({key:T.key,fallback:T.exportFallback||T.fallback,pipes:T.exportPipes||T.pipes||[]},L,P)))).map(T=>`"${T||""}"`).join(","))),x=new Blob([[y.map(L=>L.label).map(L=>`"${L}"`).join(","),...p].join(`
`)],{type:"text/csv"}),E=document.createElement("a");E.href=URL.createObjectURL(x),E.download="export.csv",E.click(),n(20,U=!1)}let we="",re=null;function ue(s,p){p.disableOrganize||(we=p.key,s.dataTransfer.setData("text/plain",we))}function de(s,p){s.preventDefault(),!g[p].disableOrganize&&n(24,re=p)}function pe(){n(24,re=null)}async function me(s,p){if(s.preventDefault(),g[p].disableOrganize)return;n(24,re=null);const x=s.dataTransfer.getData("text/plain"),E=g.findIndex(L=>L.key===x);if(E!==-1&&E!==p){const L=[...g],P=[...q],[T]=L.splice(E,1),[V]=P.splice(E,1);L.splice(p,0,T),P.splice(p,0,V),n(0,g=L),n(21,q=P),u.arrangeColumns&&await u.arrangeColumns(m,L.map(F=>({key:F.key,disabled:F.disabled})))}}function an(){n(21,q=[...g].map(s=>(s.enabled=!s.disabled,s))),n(4,W=!0)}async function rn(s){if(ce||!s.target.files||!s.target.files[0])return;ce=!0;const p=await u.import(s.target.files[0]);p!=null&&p.length&&n(3,N=[...p,...N]),s.target.value="",ce=!1}async function on(){le||(n(22,le=!0),n(0,g=[...q].map(s=>(s.disabled=!s.enabled,delete s.enabled,s))),u.arrangeColumns&&await u.arrangeColumns(m,g.map(s=>({key:s.key,disabled:s.disabled}))),n(22,le=!1),n(4,W=!1))}async function sn(s){if(U)return;n(20,U=!0),y=g.filter(F=>!F.disabled&&!F.hideOnExport);const p=await u.export();ee=await Promise.all(p.map(async(F,zn)=>(await Promise.all(y.map(X=>ie({key:X.key,fallback:X.exportFallback||X.fallback,pipes:X.exportPipes||X.pipes||[]},F,zn)))).map(X=>`"${X||""}"`).join(",")));const x=he.find(F=>F.type===s),{fileContent:E,mimeType:L,extension:P}=x.method(),T=new Blob([E],{type:L}),V=document.createElement("a");V.href=URL.createObjectURL(T),V.download=`export.${P}`,V.click(),n(20,U=!1)}Mn(async()=>{if(u.additionalExportTypes&&(A=await u.additionalExportTypes(),A.forEach(s=>{ge.push(s.label),he.push({label:s.label,type:s.type,method:s.method})})),u.getColumnOrder){const s=await u.getColumnOrder(m);s&&n(0,g=g.map(p=>(p.disabled=!s.find(x=>x.key===p.key),p)).sort((p,x)=>{const E=s.findIndex(P=>P.key===p.key),L=s.findIndex(P=>P.key===x.key);return E-L}))}y=g.filter(s=>!s.disabled),await ne()});const $e=s=>{sn(s),n(17,M=!1)},cn=()=>ae.click(),un=()=>n(17,M=!M),dn=s=>$e(s.value),pn=()=>{n(17,M=!M)},mn=s=>fe(s),gn=(s,p)=>{s.disableOrganize||ue(p,s)},hn=(s,p,x)=>{s.disableOrganize||de(x,p)},bn=s=>{s.disableOrganize||pe()},fn=(s,p,x)=>{s.disableOrganize||me(x,p)},yn=(s,p,x,E)=>ye(s,p,x,E),wn=()=>n(4,W=!1),$n=(s,p)=>{s.disableOrganize||ue(p,s)},xn=(s,p,x)=>{s.disableOrganize||de(x,p)},kn=s=>{s.disableOrganize||pe()},jn=(s,p,x)=>{s.disableOrganize||me(x,p)};function vn(s,p){s[p].enabled=this.checked,n(21,q)}function Cn(s){In[s?"unshift":"push"](()=>{ae=s,n(23,ae)})}return t.$$set=s=>{"wording"in s&&n(5,l=s.wording),"allowArrangeColumns"in s&&n(6,a=s.allowArrangeColumns),"showArrangingColumns"in s&&n(7,r=s.showArrangingColumns),"freezeFirstColumn"in s&&n(8,o=s.freezeFirstColumn),"freezeLastColumn"in s&&n(9,c=s.freezeLastColumn),"showExport"in s&&n(10,i=s.showExport),"showImport"in s&&n(11,O=s.showImport),"rowClickable"in s&&n(12,C=s.rowClickable),"headers"in s&&n(0,g=s.headers),"pageSizes"in s&&n(13,z=s.pageSizes),"dropdownMenuExport"in s&&n(14,G=s.dropdownMenuExport),"pageSize"in s&&n(1,j=s.pageSize),"sort"in s&&n(2,f=s.sort),"service"in s&&n(41,u=s.service),"id"in s&&n(42,m=s.id),"height"in s&&n(15,d=s.height),"getData"in s&&n(43,ne=s.getData),"rows"in s&&n(3,N=s.rows),"arrangeColumnDialog"in s&&n(4,W=s.arrangeColumnDialog),"showLoadMore"in s&&n(16,be=s.showLoadMore)},[g,j,f,N,W,l,a,r,o,c,i,O,C,z,G,d,be,M,Z,te,U,q,le,ae,re,ge,Qe,ie,fe,nn,ye,tn,ln,ue,de,pe,me,an,rn,on,$e,u,m,ne,Ye,Je,en,cn,un,dn,pn,mn,gn,hn,bn,fn,yn,wn,$n,xn,kn,jn,vn,Cn]}class Ke extends En{constructor(e){super(),Ln(this,e,nt,et,An,{wording:5,allowArrangeColumns:6,showArrangingColumns:7,freezeFirstColumn:8,freezeLastColumn:9,showExport:10,showImport:11,rowClickable:12,headers:0,pageSizes:13,dropdownMenuExport:14,pageSize:1,sort:2,service:41,id:42,height:15,getData:43,rows:3,arrangeColumnDialog:4,showLoadMore:16,removeRow:44,addRow:45,updateRow:46},null,[-1,-1,-1])}get wording(){return this.$$.ctx[5]}set wording(e){this.$$set({wording:e}),R()}get allowArrangeColumns(){return this.$$.ctx[6]}set allowArrangeColumns(e){this.$$set({allowArrangeColumns:e}),R()}get showArrangingColumns(){return this.$$.ctx[7]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),R()}get freezeFirstColumn(){return this.$$.ctx[8]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),R()}get freezeLastColumn(){return this.$$.ctx[9]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),R()}get showExport(){return this.$$.ctx[10]}set showExport(e){this.$$set({showExport:e}),R()}get showImport(){return this.$$.ctx[11]}set showImport(e){this.$$set({showImport:e}),R()}get rowClickable(){return this.$$.ctx[12]}set rowClickable(e){this.$$set({rowClickable:e}),R()}get headers(){return this.$$.ctx[0]}set headers(e){this.$$set({headers:e}),R()}get pageSizes(){return this.$$.ctx[13]}set pageSizes(e){this.$$set({pageSizes:e}),R()}get dropdownMenuExport(){return this.$$.ctx[14]}set dropdownMenuExport(e){this.$$set({dropdownMenuExport:e}),R()}get pageSize(){return this.$$.ctx[1]}set pageSize(e){this.$$set({pageSize:e}),R()}get sort(){return this.$$.ctx[2]}set sort(e){this.$$set({sort:e}),R()}get service(){return this.$$.ctx[41]}set service(e){this.$$set({service:e}),R()}get id(){return this.$$.ctx[42]}set id(e){this.$$set({id:e}),R()}get height(){return this.$$.ctx[15]}set height(e){this.$$set({height:e}),R()}get getData(){return this.$$.ctx[43]}set getData(e){this.$$set({getData:e}),R()}get rows(){return this.$$.ctx[3]}set rows(e){this.$$set({rows:e}),R()}get arrangeColumnDialog(){return this.$$.ctx[4]}set arrangeColumnDialog(e){this.$$set({arrangeColumnDialog:e}),R()}get showLoadMore(){return this.$$.ctx[16]}set showLoadMore(e){this.$$set({showLoadMore:e}),R()}get removeRow(){return this.$$.ctx[44]}get addRow(){return this.$$.ctx[45]}get updateRow(){return this.$$.ctx[46]}}try{customElements.define("jp-async-table",On(Ke,{wording:{},allowArrangeColumns:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"},showExport:{type:"Boolean"},showImport:{type:"Boolean"},rowClickable:{type:"Boolean"},headers:{},pageSizes:{},dropdownMenuExport:{type:"Boolean"},pageSize:{},sort:{},service:{},id:{},height:{},getData:{},rows:{},arrangeColumnDialog:{type:"Boolean"},showLoadMore:{type:"Boolean"}},[],["removeRow","addRow","updateRow"],!1));}catch{};export{Ke as default};
//# sourceMappingURL=async-table.wc.js.map
