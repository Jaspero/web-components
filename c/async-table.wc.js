import{c as On,S as En,i as Ln,o as M,s as Sn,e as x,l as R,d as b,v as K,f,p as O,m as S,x as T,k as y,G as An,K as Mn,D as B,F as H,w as Q,z as F,C as Y,H as j,a4 as Z,T as Rn,r as oe,n as In,q as Tn,I as se,J as ke,E as Dn,a0 as xe}from"./svelte.js";import"./index.js";import{get as Nn}from"./json-pointer.js";import{clickOutside as Pn}from"./click-outside.js";const Gn='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M160-360v-80h640v80H160Zm0-160v-80h640v80H160Z" /></svg>';function ve(l,e,n){const a=l.slice();return a[73]=e[n],a[74]=e,a[75]=n,a}function Ce(l,e,n){const a=l.slice();return a[76]=e[n],a[78]=n,a}function je(l,e,n){const a=l.slice();return a[79]=e[n],a[81]=n,a}function ze(l,e,n){const a=l.slice();return a[79]=e[n],a[75]=n,a}function Oe(l,e,n){const a=l.slice();return a[84]=e[n],a}function Ee(l){let e,n,a,t=l[7]&&Le(l),o=l[11]&&Se(l),r=l[10]&&Ae(l);return{c(){e=x("div"),t&&t.c(),n=R(),o&&o.c(),a=R(),r&&r.c(),b(e,"class","jp-async-table-header")},m(c,i){f(c,e,i),t&&t.m(e,null),O(e,n),o&&o.m(e,null),O(e,a),r&&r.m(e,null)},p(c,i){c[7]?t?t.p(c,i):(t=Le(c),t.c(),t.m(e,n)):t&&(t.d(1),t=null),c[11]?o?o.p(c,i):(o=Se(c),o.c(),o.m(e,a)):o&&(o.d(1),o=null),c[10]?r?r.p(c,i):(r=Ae(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(c){c&&y(e),t&&t.d(),o&&o.d(),r&&r.d()}}}function Le(l){let e,n,a=l[5].ARRANGE_COLUMNS+"",t,o,r;return{c(){e=B(`\xA0
        `),n=x("button"),t=B(a),b(n,"type","button"),b(n,"class","jp-async-table-button")},m(c,i){f(c,e,i),f(c,n,i),O(n,t),o||(r=S(n,"click",l[37]),o=!0)},p(c,i){i[0]&32&&a!==(a=c[5].ARRANGE_COLUMNS+"")&&H(t,a)},d(c){c&&(y(e),y(n)),o=!1,r()}}}function Se(l){let e,n,a=l[5].IMPORT+"",t,o,r;return{c(){e=B(`\xA0
        `),n=x("button"),t=B(a),b(n,"type","button"),b(n,"class","jp-async-table-button")},m(c,i){f(c,e,i),f(c,n,i),O(n,t),o||(r=S(n,"click",l[47]),o=!0)},p(c,i){i[0]&32&&a!==(a=c[5].IMPORT+"")&&H(t,a)},d(c){c&&(y(e),y(n)),o=!1,r()}}}function Ae(l){let e,n;function a(r,c){return r[14]?Bn:Fn}let t=a(l),o=t(l);return{c(){e=B(`\xA0
        `),o.c(),n=Q()},m(r,c){f(r,e,c),o.m(r,c),f(r,n,c)},p(r,c){t===(t=a(r))&&o?o.p(r,c):(o.d(1),o=t(r),o&&(o.c(),o.m(n.parentNode,n)))},d(r){r&&(y(e),y(n)),o.d(r)}}}function Bn(l){let e,n,a,t,o,r=l[17]&&Me(l);return{c(){e=x("div"),n=x("button"),n.textContent="Export",a=R(),r&&r.c(),b(n,"type","button"),b(n,"class","jp-async-table-button"),b(e,"class","jp-async-table-dropdown")},m(c,i){f(c,e,i),O(e,n),O(e,a),r&&r.m(e,null),t||(o=S(n,"click",l[48]),t=!0)},p(c,i){c[17]?r?r.p(c,i):(r=Me(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(c){c&&y(e),r&&r.d(),t=!1,o()}}}function Fn(l){let e,n,a;function t(c,i){return c[20]?Hn:_n}let o=t(l),r=o(l);return{c(){e=x("button"),r.c(),b(e,"type","button"),b(e,"class","jp-async-table-button"),e.disabled=l[20],j(e,"jp-async-table-loading",l[20])},m(c,i){f(c,e,i),r.m(e,null),n||(a=S(e,"click",l[32]),n=!0)},p(c,i){o===(o=t(c))&&r?r.p(c,i):(r.d(1),r=o(c),r&&(r.c(),r.m(e,null))),i[0]&1048576&&(e.disabled=c[20]),i[0]&1048576&&j(e,"jp-async-table-loading",c[20])},d(c){c&&y(e),r.d(),n=!1,a()}}}function Me(l){let e,n,a,t=F(l[25]),o=[];for(let r=0;r<t.length;r+=1)o[r]=Re(Oe(l,t,r));return{c(){e=x("ul");for(let r=0;r<o.length;r+=1)o[r].c();b(e,"class","jp-async-table-dropdown-menu")},m(r,c){f(r,e,c);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(e,null);n||(a=[Tn(Pn.call(null,e)),S(e,"click_outside",l[50])],n=!0)},p(r,c){if(c[0]&33554432|c[1]&512){t=F(r[25]);let i;for(i=0;i<t.length;i+=1){const k=Oe(r,t,i);o[i]?o[i].p(k,c):(o[i]=Re(k),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=t.length}},d(r){r&&y(e),Y(o,r),n=!1,oe(a)}}}function Re(l){let e,n,a;function t(){return l[49](l[84])}return{c(){e=x("button"),e.textContent=`${l[84].label} `,b(e,"type","button"),b(e,"class","jp-async-table-dropdown-option")},m(o,r){f(o,e,r),n||(a=S(e,"click",t),n=!0)},p(o,r){l=o},d(o){o&&y(e),n=!1,a()}}}function _n(l){let e=l[5].EXPORT+"",n;return{c(){n=B(e)},m(a,t){f(a,n,t)},p(a,t){t[0]&32&&e!==(e=a[5].EXPORT+"")&&H(n,e)},d(a){a&&y(n)}}}function Hn(l){let e,n,a=l[5].LOADING+"",t;return{c(){e=x("span"),n=R(),t=B(a),b(e,"class","jp-async-table-spinner")},m(o,r){f(o,e,r),f(o,n,r),f(o,t,r)},p(o,r){r[0]&32&&a!==(a=o[5].LOADING+"")&&H(t,a)},d(o){o&&(y(e),y(n),y(t))}}}function Ie(l){let e,n=F(l[0]),a=[];for(let t=0;t<n.length;t+=1)a[t]=Ne(ze(l,n,t));return{c(){e=x("tr");for(let t=0;t<a.length;t+=1)a[t].c()},m(t,o){f(t,e,o);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(e,null)},p(t,o){if(o[0]&285213509|o[1]&60){n=F(t[0]);let r;for(r=0;r<n.length;r+=1){const c=ze(t,n,r);a[r]?a[r].p(c,o):(a[r]=Ne(c),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},d(t){t&&y(e),Y(a,t)}}}function Te(l){var e;let n,a,t,o,r,c,i,k,I,g={ctx:l,current:null,token:null,hasCatch:!1,pending:Xn,then:Vn,catch:Un,value:82};se(t=qe(l[79]),g);let w=((e=l[2])==null?void 0:e.key)===l[79].key&&De(l);function G(){return l[51](l[79])}function z(...d){return l[52](l[79],...d)}function $(...d){return l[53](l[79],l[75],...d)}function u(){return l[54](l[79])}function h(...d){return l[55](l[79],l[75],...d)}return{c(){n=x("th"),a=x("span"),g.block.c(),o=R(),w&&w.c(),r=R(),b(a,"tabindex","-1"),b(a,"role","button"),b(a,"aria-label","Drag handle"),j(a,"jp-async-table-draggable-column",l[6]&&!l[79].disableOrganize),b(n,"class",c=`jp-async-table-header-cell-${l[79].key.slice(1).replace(/\//g,"(?!^)/")}`),b(n,"draggable",i=l[6]&&!l[79].disableOrganize),j(n,"jp-async-table-sortable",l[6]&&l[79].sortable),j(n,"jp-async-table-sticky-first",l[8]&&l[75]===0),j(n,"jp-async-table-sticky-last",l[75]===l[0].length-1&&l[9]),j(n,"jp-async-table-no-cursor",l[79].disableOrganize),j(n,"jp-async-table-hover-over",l[24]===l[75])},m(d,v){f(d,n,v),O(n,a),g.block.m(a,g.anchor=null),g.mount=()=>a,g.anchor=null,O(n,o),w&&w.m(n,null),O(n,r),k||(I=[S(n,"click",G),S(n,"dragstart",z),S(n,"dragover",$),S(n,"dragleave",u),S(n,"drop",h)],k=!0)},p(d,v){var m;l=d,g.ctx=l,v[0]&1&&t!==(t=qe(l[79]))&&se(t,g)||ke(g,l,v),v[0]&65&&j(a,"jp-async-table-draggable-column",l[6]&&!l[79].disableOrganize),((m=l[2])==null?void 0:m.key)===l[79].key?w?w.p(l,v):(w=De(l),w.c(),w.m(n,r)):w&&(w.d(1),w=null),v[0]&1&&c!==(c=`jp-async-table-header-cell-${l[79].key.slice(1).replace(/\//g,"(?!^)/")}`)&&b(n,"class",c),v[0]&65&&i!==(i=l[6]&&!l[79].disableOrganize)&&b(n,"draggable",i),v[0]&65&&j(n,"jp-async-table-sortable",l[6]&&l[79].sortable),v[0]&257&&j(n,"jp-async-table-sticky-first",l[8]&&l[75]===0),v[0]&513&&j(n,"jp-async-table-sticky-last",l[75]===l[0].length-1&&l[9]),v[0]&1&&j(n,"jp-async-table-no-cursor",l[79].disableOrganize),v[0]&16777217&&j(n,"jp-async-table-hover-over",l[24]===l[75])},d(d){d&&y(n),g.block.d(),g.token=null,g=null,w&&w.d(),k=!1,oe(I)}}}function Un(l){return{c:T,m:T,p:T,d:T}}function Vn(l){let e,n=l[82]+"",a;return{c(){e=new xe(!1),a=Q(),e.a=a},m(t,o){e.m(n,t,o),f(t,a,o)},p(t,o){o[0]&1&&n!==(n=t[82]+"")&&e.p(n)},d(t){t&&(y(a),e.d())}}}function Xn(l){return{c:T,m:T,p:T,d:T}}function De(l){let e,n=l[2].direction==="asc"?"\u2191":"\u2193",a;return{c(){e=x("span"),a=B(n),b(e,"class","jp-async-table-sortable")},m(t,o){f(t,e,o),O(e,a)},p(t,o){o[0]&4&&n!==(n=t[2].direction==="asc"?"\u2191":"\u2193")&&H(a,n)},d(t){t&&y(e)}}}function Ne(l){let e,n=!l[79].disabled&&Te(l);return{c(){n&&n.c(),e=Q()},m(a,t){n&&n.m(a,t),f(a,e,t)},p(a,t){a[79].disabled?n&&(n.d(1),n=null):n?n.p(a,t):(n=Te(a),n.c(),n.m(e.parentNode,e))},d(a){a&&y(e),n&&n.d(a)}}}function Pe(l){let e,n=F(l[3]),a=[];for(let t=0;t<n.length;t+=1)a[t]=Fe(Ce(l,n,t));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=Q()},m(t,o){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(t,o);f(t,e,o)},p(t,o){if(o[0]&1224741705){n=F(t[3]);let r;for(r=0;r<n.length;r+=1){const c=Ce(t,n,r);a[r]?a[r].p(c,o):(a[r]=Fe(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},d(t){t&&y(e),Y(a,t)}}}function Ge(l){let e,n,a,t,o,r={ctx:l,current:null,token:null,hasCatch:!1,pending:Kn,then:Jn,catch:qn,value:82};se(n=l[27](l[79],l[76],l[78]),r);function c(...i){return l[56](l[76],l[78],l[79],...i)}return{c(){e=x("td"),r.block.c(),b(e,"class",a=`jp-async-table-cell-${l[79].key.slice(1).replace(/\//g,"(?!^)/")}`),j(e,"jp-async-table-sortable",l[6]&&l[79].sortable),j(e,"jp-async-table-sticky-first",l[8]&&l[81]===0),j(e,"jp-async-table-sticky-last",l[81]===l[0].length-1&&l[9]),j(e,"jp-async-table-hover-over",l[24]===l[81])},m(i,k){f(i,e,k),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,t||(o=S(e,"click",c),t=!0)},p(i,k){l=i,r.ctx=l,k[0]&9&&n!==(n=l[27](l[79],l[76],l[78]))&&se(n,r)||ke(r,l,k),k[0]&1&&a!==(a=`jp-async-table-cell-${l[79].key.slice(1).replace(/\//g,"(?!^)/")}`)&&b(e,"class",a),k[0]&65&&j(e,"jp-async-table-sortable",l[6]&&l[79].sortable),k[0]&257&&j(e,"jp-async-table-sticky-first",l[8]&&l[81]===0),k[0]&513&&j(e,"jp-async-table-sticky-last",l[81]===l[0].length-1&&l[9]),k[0]&16777217&&j(e,"jp-async-table-hover-over",l[24]===l[81])},d(i){i&&y(e),r.block.d(),r.token=null,r=null,t=!1,o()}}}function qn(l){return{c:T,m:T,p:T,d:T}}function Jn(l){let e,n=l[82]+"";return{c(){e=x("span"),b(e,"class","jp-async-table-cell")},m(a,t){f(a,e,t),e.innerHTML=n},p(a,t){t[0]&9&&n!==(n=a[82]+"")&&(e.innerHTML=n)},d(a){a&&y(e)}}}function Kn(l){return{c:T,m:T,p:T,d:T}}function Be(l){let e,n=!l[79].disabled&&Ge(l);return{c(){n&&n.c(),e=Q()},m(a,t){n&&n.m(a,t),f(a,e,t)},p(a,t){a[79].disabled?n&&(n.d(1),n=null):n?n.p(a,t):(n=Ge(a),n.c(),n.m(e.parentNode,e))},d(a){a&&y(e),n&&n.d(a)}}}function Fe(l){let e,n,a=F(l[0]),t=[];for(let o=0;o<a.length;o+=1)t[o]=Be(je(l,a,o));return{c(){e=x("tr");for(let o=0;o<t.length;o+=1)t[o].c();n=R(),j(e,"jp-async-table-highlight",l[12])},m(o,r){f(o,e,r);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);O(e,n)},p(o,r){if(r[0]&1224737609){a=F(o[0]);let c;for(c=0;c<a.length;c+=1){const i=je(o,a,c);t[c]?t[c].p(i,r):(t[c]=Be(i),t[c].c(),t[c].m(e,n))}for(;c<t.length;c+=1)t[c].d(1);t.length=a.length}r[0]&4096&&j(e,"jp-async-table-highlight",o[12])},d(o){o&&y(e),Y(t,o)}}}function _e(l){let e,n,a,t;function o(i,k){return i[18]?Wn:Qn}let r=o(l),c=r(l);return{c(){e=x("button"),c.c(),b(e,"type","button"),b(e,"class","jp-async-table-button"),e.disabled=n=!l[19],j(e,"jp-async-table-loading",l[18])},m(i,k){f(i,e,k),c.m(e,null),a||(t=S(e,"click",l[29]),a=!0)},p(i,k){r===(r=o(i))&&c?c.p(i,k):(c.d(1),c=r(i),c&&(c.c(),c.m(e,null))),k[0]&524288&&n!==(n=!i[19])&&(e.disabled=n),k[0]&262144&&j(e,"jp-async-table-loading",i[18])},d(i){i&&y(e),c.d(),a=!1,t()}}}function Qn(l){let e=l[5].LOAD_MORE+"",n;return{c(){n=B(e)},m(a,t){f(a,n,t)},p(a,t){t[0]&32&&e!==(e=a[5].LOAD_MORE+"")&&H(n,e)},d(a){a&&y(n)}}}function Wn(l){let e,n,a=l[5].LOADING+"",t;return{c(){e=x("span"),n=R(),t=B(a),b(e,"class","jp-async-table-spinner")},m(o,r){f(o,e,r),f(o,n,r),f(o,t,r)},p(o,r){r[0]&32&&a!==(a=o[5].LOADING+"")&&H(t,a)},d(o){o&&(y(e),y(n),y(t))}}}function He(l){let e,n,a,t;return{c(){e=x("jp-select"),Z(e,"label",n=l[5].PAGE_SIZE),Z(e,"options",l[26]),Z(e,"value",l[1])},m(o,r){f(o,e,r),a||(t=S(e,"value",l[31]),a=!0)},p(o,r){r[0]&32&&n!==(n=o[5].PAGE_SIZE)&&Z(e,"label",n),r[0]&2&&Z(e,"value",o[1])},d(o){o&&y(e),a=!1,t()}}}function Ue(l){let e,n,a,t,o,r,c,i,k,I,g=F(l[21]),w=[];for(let u=0;u<g.length;u+=1)w[u]=Xe(ve(l,g,u));function G(u,h){return u[18]?Zn:Yn}let z=G(l),$=z(l);return{c(){e=x("div"),n=x("div"),a=R(),t=x("form"),o=x("main");for(let u=0;u<w.length;u+=1)w[u].c();r=R(),c=x("footer"),i=x("button"),$.c(),b(n,"class","jp-async-table-arrange-columns-dialog-backdrop"),b(i,"type","submit"),b(i,"class","jp-async-table-button"),i.disabled=l[22],j(i,"jp-async-table-loading",l[22]),b(t,"class","jp-async-table-arrange-columns-dialog-inner"),b(e,"class","jp-async-table-arrange-columns-dialog")},m(u,h){f(u,e,h),O(e,n),O(e,a),O(e,t),O(t,o);for(let d=0;d<w.length;d+=1)w[d]&&w[d].m(o,null);O(t,r),O(t,c),O(c,i),$.m(i,null),k||(I=[S(n,"click",l[57]),S(t,"submit",Rn(l[39]))],k=!0)},p(u,h){if(h[0]&18874368|h[1]&60){g=F(u[21]);let d;for(d=0;d<g.length;d+=1){const v=ve(u,g,d);w[d]?w[d].p(v,h):(w[d]=Xe(v),w[d].c(),w[d].m(o,null))}for(;d<w.length;d+=1)w[d].d(1);w.length=g.length}z===(z=G(u))&&$?$.p(u,h):($.d(1),$=z(u),$&&($.c(),$.m(i,null))),h[0]&4194304&&(i.disabled=u[22]),h[0]&4194304&&j(i,"jp-async-table-loading",u[22])},d(u){u&&y(e),Y(w,u),$.d(),k=!1,oe(I)}}}function Ve(l){let e,n,a,t,o,r,c,i=l[73].label+"",k,I,g;function w(...h){return l[58](l[73],...h)}function G(...h){return l[59](l[73],l[75],...h)}function z(){return l[60](l[73])}function $(...h){return l[61](l[73],l[75],...h)}function u(){l[62].call(o,l[74],l[75])}return{c(){e=x("label"),n=x("span"),a=new xe(!1),t=R(),o=x("input"),r=R(),c=x("span"),k=R(),a.a=t,b(n,"class","jp-async-table-material-symbols-outlined drag-handle"),b(n,"draggable","true"),K(n,"cursor",l[73].disableOrganize?"default":"grab"),K(n,"pointer-events",l[73].disableOrganize?"none":"auto"),j(n,"jp-async-table-no-cursor",l[73].disableOrganize),b(o,"type","checkbox"),o.__value=!0,Dn(o,o.__value),b(e,"class","jp-async-table-arrange-column-label"),j(e,"jp-async-table-hover-over",l[24]===l[75])},m(h,d){f(h,e,d),O(e,n),a.m(Gn,n),O(n,t),O(e,o),o.checked=l[73].enabled,O(e,r),O(e,c),c.innerHTML=i,O(e,k),I||(g=[S(n,"dragstart",w),S(n,"dragover",G),S(n,"dragleave",z),S(n,"drop",$),S(o,"change",u)],I=!0)},p(h,d){l=h,d[0]&2097152&&K(n,"cursor",l[73].disableOrganize?"default":"grab"),d[0]&2097152&&K(n,"pointer-events",l[73].disableOrganize?"none":"auto"),d[0]&2097152&&j(n,"jp-async-table-no-cursor",l[73].disableOrganize),d[0]&2097152&&(o.checked=l[73].enabled),d[0]&2097152&&i!==(i=l[73].label+"")&&(c.innerHTML=i),d[0]&16777216&&j(e,"jp-async-table-hover-over",l[24]===l[75])},d(h){h&&y(e),I=!1,oe(g)}}}function Xe(l){let e,n=!l[73].disableToggle&&Ve(l);return{c(){n&&n.c(),e=Q()},m(a,t){n&&n.m(a,t),f(a,e,t)},p(a,t){a[73].disableToggle?n&&(n.d(1),n=null):n?n.p(a,t):(n=Ve(a),n.c(),n.m(e.parentNode,e))},d(a){a&&y(e),n&&n.d(a)}}}function Yn(l){let e=l[5].SAVE+"",n;return{c(){n=B(e)},m(a,t){f(a,n,t)},p(a,t){t[0]&32&&e!==(e=a[5].SAVE+"")&&H(n,e)},d(a){a&&y(n)}}}function Zn(l){let e,n,a=l[5].LOADING+"",t;return{c(){e=x("span"),n=R(),t=B(a),b(e,"class","spinner")},m(o,r){f(o,e,r),f(o,n,r),f(o,t,r)},p(o,r){r[0]&32&&a!==(a=o[5].LOADING+"")&&H(t,a)},d(o){o&&(y(e),y(n),y(t))}}}function el(l){let e,n,a,t,o,r,c,i,k,I,g,w,G,z=(l[7]||l[11]||l[10])&&Ee(l),$=l[0]&&Ie(l),u=l[3]&&Pe(l),h=l[16]&&_e(l),d=l[13].length>1&&He(l),v=l[4]&&Ue(l);return{c(){e=x("div"),z&&z.c(),n=R(),a=x("div"),t=x("table"),$&&$.c(),o=R(),u&&u.c(),r=R(),c=x("div"),h&&h.c(),i=R(),d&&d.c(),k=R(),v&&v.c(),I=R(),g=x("input"),b(a,"class","jp-async-table-container"),K(a,"height",l[15]),b(c,"class","jp-async-table-actions"),b(e,"class","jp-async-table"),b(g,"accept",".csv"),g.hidden=!0,b(g,"type","file")},m(m,A){f(m,e,A),z&&z.m(e,null),O(e,n),O(e,a),O(a,t),$&&$.m(t,null),O(t,o),u&&u.m(t,null),O(e,r),O(e,c),h&&h.m(c,null),O(c,i),d&&d.m(c,null),f(m,k,A),v&&v.m(m,A),f(m,I,A),f(m,g,A),l[63](g),w||(G=S(g,"change",l[38]),w=!0)},p(m,A){m[7]||m[11]||m[10]?z?z.p(m,A):(z=Ee(m),z.c(),z.m(e,n)):z&&(z.d(1),z=null),m[0]?$?$.p(m,A):($=Ie(m),$.c(),$.m(t,o)):$&&($.d(1),$=null),m[3]?u?u.p(m,A):(u=Pe(m),u.c(),u.m(t,null)):u&&(u.d(1),u=null),A[0]&32768&&K(a,"height",m[15]),m[16]?h?h.p(m,A):(h=_e(m),h.c(),h.m(c,i)):h&&(h.d(1),h=null),m[13].length>1?d?d.p(m,A):(d=He(m),d.c(),d.m(c,null)):d&&(d.d(1),d=null),m[4]?v?v.p(m,A):(v=Ue(m),v.c(),v.m(I.parentNode,I)):v&&(v.d(1),v=null)},i:T,o:T,d(m){m&&(y(e),y(k),y(I),y(g)),z&&z.d(),$&&$.d(),u&&u.d(),h&&h.d(),d&&d.d(),v&&v.d(m),l[63](null),w=!1,G()}}}async function qe(l){const{label:e,headerPipes:n}=l;let a=e;if(!n)return a;for(const t of n)a=await t(a);return a}async function Je(){const l=document.querySelector(".jp-async-table-container");l&&l.scrollTo({top:0,behavior:"smooth"})}function nl(l,e,n){let{wording:a={ARRANGE_COLUMNS:"Arrange columns",EXPORT:"Export",IMPORT:"Import",SELECT:"Select data type",LOADING:"Loading",LOAD_MORE:"Load more",PAGE_SIZE:"Page size",SAVE:"Save"}}=e,{allowArrangeColumns:t=!0}=e,{showArrangingColumns:o=!0}=e,{freezeFirstColumn:r=!1}=e,{freezeLastColumn:c=!1}=e,{showExport:i=!0}=e,{showImport:k=!0}=e,{rowClickable:I=!1}=e,{headers:g=[]}=e,{pageSizes:w=[10,25,50,100]}=e,{dropdownMenuExport:G=!1}=e,{pageSize:z=w[0]}=e,{sort:$}=e,{service:u}=e,{id:h}=e,{height:d=null}=e,v=[],m=[],A=!1,ee=[];const he=[{value:"csv",label:"CSV"},{value:"json",label:"JSON"},{value:"xml",label:"XML"}],be=[{label:"CSV",type:"csv",method:()=>({fileContent:[m.map(s=>`"${s.label}"`).join(","),...ee].join(`
`),mimeType:"text/csv",extension:"csv"})},{label:"JSON",type:"json",method:()=>({fileContent:JSON.stringify(ee.map(s=>{const p=s.split(",");return Object.fromEntries(m.map((C,E)=>{var L;return[C.label,((L=p[E])==null?void 0:L.replace(/"/g,""))||""]}))}),null,2),mimeType:"application/json",extension:"json"})},{label:"XML",type:"xml",method:()=>({fileContent:`<root>
${ee.map(s=>`  <row>
${s}</row>`).join(`
`)}
</root>`,mimeType:"application/xml",extension:"xml"})}];let{getData:ne=async()=>{const s=await u.get($,z);n(3,N=s.rows),n(19,le=s.hasMore),n(18,q=!1),Je()}}=e,{rows:N=[]}=e,{arrangeColumnDialog:W=!1}=e,{showLoadMore:me=!0}=e,Qe=JSON.stringify(w.map(s=>({label:s,value:s}))),q=!0,le=!1,U=!1,J=[],ae=!1,te,ce=!1;const We=An();async function Ye(s,p="id"){n(3,N=N.filter(C=>C[p]!==s))}async function Ze(s){n(3,N=[...N,s])}async function en(s,p){n(3,N=N.map((C,E)=>E===p?{...C,...s}:C))}async function ie(s,p,C){const{key:E,fallback:L,pipes:P}=s;let D;try{D=Nn(p,E)}catch{return L||""}if(!P)return D;for(const V of P)D=await V(D,p,C);return D}async function fe(s){const{sortable:p}=s;if(!p)return;n(18,q=!0),n(2,$={key:s.key,direction:$?.key===s.key&&$.direction==="asc"?"desc":"asc"});const C=[u.get($,z)];u.adjustSort&&C.push(u.adjustSort($));const[E]=await Promise.all(C);n(3,N=E.rows),n(19,le=E.hasMore),n(18,q=!1),Je()}async function nn(){n(18,q=!0);const s=await u.loadMore($,z);n(3,N=[...N,...s.rows]),n(19,le=s.hasMore),n(18,q=!1)}function ye(s,p,C,E){We("rowClick",{row:s,index:p,header:C,originalEvent:E})}async function ln(s){n(1,z=s.detail);const p=[ne()];u.adjustPageSize&&p.push(u.adjustPageSize(z)),await Promise.all(p)}async function an(){if(U)return;n(20,U=!0),m=g.filter(L=>!L.disabled&&!L.hideOnExport);const s=await u.export(),p=await Promise.all(s.map(async(L,P)=>(await Promise.all(m.map(D=>ie({key:D.key,fallback:D.exportFallback||D.fallback,pipes:D.exportPipes||D.pipes||[]},L,P)))).map(D=>`"${D||""}"`).join(","))),C=new Blob([[m.map(L=>L.label).map(L=>`"${L}"`).join(","),...p].join(`
`)],{type:"text/csv"}),E=document.createElement("a");E.href=URL.createObjectURL(C),E.download="export.csv",E.click(),n(20,U=!1)}let we="",re=null;function ue(s,p){p.disableOrganize||(we=p.key,s.dataTransfer.setData("text/plain",we))}function de(s,p){s.preventDefault(),!g[p].disableOrganize&&n(24,re=p)}function pe(){n(24,re=null)}async function ge(s,p){if(s.preventDefault(),g[p].disableOrganize)return;n(24,re=null);const C=s.dataTransfer.getData("text/plain"),E=g.findIndex(L=>L.key===C);if(E!==-1&&E!==p){const L=[...g],P=[...J],[D]=L.splice(E,1),[V]=P.splice(E,1);L.splice(p,0,D),P.splice(p,0,V),n(0,g=L),n(21,J=P),u.arrangeColumns&&await u.arrangeColumns(h,L.map(_=>({key:_.key,disabled:_.disabled})))}}function tn(){n(21,J=[...g].map(s=>(s.enabled=!s.disabled,s))),n(4,W=!0)}async function rn(s){if(ce||!s.target.files||!s.target.files[0])return;ce=!0;const p=await u.import(s.target.files[0]);p!=null&&p.length&&n(3,N=[...p,...N]),s.target.value="",ce=!1}async function on(){ae||(n(22,ae=!0),n(0,g=[...J].map(s=>(s.disabled=!s.enabled,delete s.enabled,s))),u.arrangeColumns&&await u.arrangeColumns(h,g.map(s=>({key:s.key,disabled:s.disabled}))),n(22,ae=!1),n(4,W=!1))}async function sn(s){if(U)return;n(20,U=!0),m=g.filter(_=>!_.disabled&&!_.hideOnExport);const p=await u.export();ee=await Promise.all(p.map(async(_,zn)=>(await Promise.all(m.map(X=>ie({key:X.key,fallback:X.exportFallback||X.fallback,pipes:X.exportPipes||X.pipes||[]},_,zn)))).map(X=>`"${X||""}"`).join(",")));const C=be.find(_=>_.type===s),{fileContent:E,mimeType:L,extension:P}=C.method(),D=new Blob([E],{type:L}),V=document.createElement("a");V.href=URL.createObjectURL(D),V.download=`export.${P}`,V.click(),n(20,U=!1)}Mn(async()=>{if(u.additionalExportTypes&&(v=await u.additionalExportTypes(),v.forEach(s=>{he.push(s.label),be.push({label:s.label,type:s.type,method:s.method})})),u.getColumnOrder){const s=await u.getColumnOrder(h);s&&n(0,g=g.map(p=>(p.disabled=!s.find(C=>C.key===p.key),p)).sort((p,C)=>{const E=s.findIndex(P=>P.key===p.key),L=s.findIndex(P=>P.key===C.key);return E-L}))}m=g.filter(s=>!s.disabled),await ne()});const $e=s=>{sn(s),n(17,A=!1)},cn=()=>te.click(),un=()=>n(17,A=!A),dn=s=>$e(s.value),pn=()=>{n(17,A=!A)},gn=s=>fe(s),hn=(s,p)=>{s.disableOrganize||ue(p,s)},bn=(s,p,C)=>{s.disableOrganize||de(C,p)},mn=s=>{s.disableOrganize||pe()},fn=(s,p,C)=>{s.disableOrganize||ge(C,p)},yn=(s,p,C,E)=>ye(s,p,C,E),wn=()=>n(4,W=!1),$n=(s,p)=>{s.disableOrganize||ue(p,s)},kn=(s,p,C)=>{s.disableOrganize||de(C,p)},xn=s=>{s.disableOrganize||pe()},vn=(s,p,C)=>{s.disableOrganize||ge(C,p)};function Cn(s,p){s[p].enabled=this.checked,n(21,J)}function jn(s){In[s?"unshift":"push"](()=>{te=s,n(23,te)})}return l.$$set=s=>{"wording"in s&&n(5,a=s.wording),"allowArrangeColumns"in s&&n(6,t=s.allowArrangeColumns),"showArrangingColumns"in s&&n(7,o=s.showArrangingColumns),"freezeFirstColumn"in s&&n(8,r=s.freezeFirstColumn),"freezeLastColumn"in s&&n(9,c=s.freezeLastColumn),"showExport"in s&&n(10,i=s.showExport),"showImport"in s&&n(11,k=s.showImport),"rowClickable"in s&&n(12,I=s.rowClickable),"headers"in s&&n(0,g=s.headers),"pageSizes"in s&&n(13,w=s.pageSizes),"dropdownMenuExport"in s&&n(14,G=s.dropdownMenuExport),"pageSize"in s&&n(1,z=s.pageSize),"sort"in s&&n(2,$=s.sort),"service"in s&&n(41,u=s.service),"id"in s&&n(42,h=s.id),"height"in s&&n(15,d=s.height),"getData"in s&&n(43,ne=s.getData),"rows"in s&&n(3,N=s.rows),"arrangeColumnDialog"in s&&n(4,W=s.arrangeColumnDialog),"showLoadMore"in s&&n(16,me=s.showLoadMore)},[g,z,$,N,W,a,t,o,r,c,i,k,I,w,G,d,me,A,q,le,U,J,ae,te,re,he,Qe,ie,fe,nn,ye,ln,an,ue,de,pe,ge,tn,rn,on,$e,u,h,ne,Ye,Ze,en,cn,un,dn,pn,gn,hn,bn,mn,fn,yn,wn,$n,kn,xn,vn,Cn,jn]}class Ke extends En{constructor(e){super(),Ln(this,e,nl,el,Sn,{wording:5,allowArrangeColumns:6,showArrangingColumns:7,freezeFirstColumn:8,freezeLastColumn:9,showExport:10,showImport:11,rowClickable:12,headers:0,pageSizes:13,dropdownMenuExport:14,pageSize:1,sort:2,service:41,id:42,height:15,getData:43,rows:3,arrangeColumnDialog:4,showLoadMore:16,removeRow:44,addRow:45,updateRow:46},null,[-1,-1,-1])}get wording(){return this.$$.ctx[5]}set wording(e){this.$$set({wording:e}),M()}get allowArrangeColumns(){return this.$$.ctx[6]}set allowArrangeColumns(e){this.$$set({allowArrangeColumns:e}),M()}get showArrangingColumns(){return this.$$.ctx[7]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),M()}get freezeFirstColumn(){return this.$$.ctx[8]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),M()}get freezeLastColumn(){return this.$$.ctx[9]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),M()}get showExport(){return this.$$.ctx[10]}set showExport(e){this.$$set({showExport:e}),M()}get showImport(){return this.$$.ctx[11]}set showImport(e){this.$$set({showImport:e}),M()}get rowClickable(){return this.$$.ctx[12]}set rowClickable(e){this.$$set({rowClickable:e}),M()}get headers(){return this.$$.ctx[0]}set headers(e){this.$$set({headers:e}),M()}get pageSizes(){return this.$$.ctx[13]}set pageSizes(e){this.$$set({pageSizes:e}),M()}get dropdownMenuExport(){return this.$$.ctx[14]}set dropdownMenuExport(e){this.$$set({dropdownMenuExport:e}),M()}get pageSize(){return this.$$.ctx[1]}set pageSize(e){this.$$set({pageSize:e}),M()}get sort(){return this.$$.ctx[2]}set sort(e){this.$$set({sort:e}),M()}get service(){return this.$$.ctx[41]}set service(e){this.$$set({service:e}),M()}get id(){return this.$$.ctx[42]}set id(e){this.$$set({id:e}),M()}get height(){return this.$$.ctx[15]}set height(e){this.$$set({height:e}),M()}get getData(){return this.$$.ctx[43]}set getData(e){this.$$set({getData:e}),M()}get rows(){return this.$$.ctx[3]}set rows(e){this.$$set({rows:e}),M()}get arrangeColumnDialog(){return this.$$.ctx[4]}set arrangeColumnDialog(e){this.$$set({arrangeColumnDialog:e}),M()}get showLoadMore(){return this.$$.ctx[16]}set showLoadMore(e){this.$$set({showLoadMore:e}),M()}get removeRow(){return this.$$.ctx[44]}get addRow(){return this.$$.ctx[45]}get updateRow(){return this.$$.ctx[46]}}try{customElements.define("jp-async-table",On(Ke,{wording:{},allowArrangeColumns:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"},showExport:{type:"Boolean"},showImport:{type:"Boolean"},rowClickable:{type:"Boolean"},headers:{},pageSizes:{},dropdownMenuExport:{type:"Boolean"},pageSize:{},sort:{},service:{},id:{},height:{},getData:{},rows:{},arrangeColumnDialog:{type:"Boolean"},showLoadMore:{type:"Boolean"}},[],["removeRow","addRow","updateRow"],!1));}catch{};export{Ke as default};
//# sourceMappingURL=async-table.wc.js.map
