import{c as V,S as W,i as X,f as z,s as Y,a as Z,e as m,b as T,d as y,t as j,g as p,h as v,o as C,n as b,j as g,k as _,w as ee,l as M,m as E,p as te,q as N,r as re,u as A,v as se}from"./svelte.js";import"./index2.js";import{g as le}from"./json-pointer.js";function ne(l){Z(l,"svelte-916kqr",".table-card.svelte-916kqr{background-color:var(--background-primary);border-radius:.25rem;box-shadow:0 3px 12px rgba(0,0,0,.16)}.table-container.svelte-916kqr{overflow-x:auto;width:100%}table.svelte-916kqr{width:100%}th.svelte-916kqr,td.svelte-916kqr{text-align:left;white-space:nowrap;font-size:.75rem;font-weight:normal;padding:.5rem;border-bottom:1px solid rgba(0,0,0,.16)}th.svelte-916kqr{opacity:.75}.cell.svelte-916kqr{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-actions.svelte-916kqr{padding:1rem}.load-button.svelte-916kqr{display:flex;justify-content:center;align-items:center;border-radius:.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;background-color:var(--primary-color);color:var(--text-on-primary);-webkit-user-select:none;-moz-user-select:none;user-select:none}.load-button.svelte-916kqr:disabled{opacity:.5}.load-button.loading.svelte-916kqr{pointer-events:none}.spinner.svelte-916kqr{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;border-radius:50%;width:1rem;height:1rem;margin-right:.5rem;animation:svelte-916kqr-spin 1s linear infinite}@keyframes svelte-916kqr-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}")}function B(l,s,r){const e=l.slice();return e[13]=s[r],e[15]=r,e}function D(l,s,r){const e=l.slice();return e[16]=s[r],e}function F(l,s,r){const e=l.slice();return e[16]=s[r],e}function G(l){let s,r=M(l[1]),e=[];for(let t=0;t<r.length;t+=1)e[t]=J(F(l,r,t));return{c(){s=m("tr");for(let t=0;t<e.length;t+=1)e[t].c()},m(t,o){p(t,s,o);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(s,null)},p(t,o){if(o&67){r=M(t[1]);let n;for(n=0;n<r.length;n+=1){const a=F(t,r,n);e[n]?e[n].p(a,o):(e[n]=J(a),e[n].c(),e[n].m(s,null))}for(;n<e.length;n+=1)e[n].d(1);e.length=r.length}},d(t){t&&g(s),E(e,t)}}}function I(l){let s,r=l[0].direction==="asc"?"\u2191":"\u2193",e;return{c(){s=m("span"),e=N(r)},m(t,o){p(t,s,o),v(s,e)},p(t,o){o&1&&r!==(r=t[0].direction==="asc"?"\u2191":"\u2193")&&re(e,r)},d(t){t&&g(s)}}}function J(l){var s;let r,e,t=l[16].label+"",o,n,a,u,f=((s=l[0])==null?void 0:s.key)===l[16].key&&I(l);function w(){return l[10](l[16])}return{c(){r=m("th"),e=m("span"),o=T(),f&&f.c(),n=T(),y(r,"class","svelte-916kqr"),j(r,"sortable",l[16].sortable)},m(i,d){p(i,r,d),v(r,e),e.innerHTML=t,v(r,o),f&&f.m(r,null),v(r,n),a||(u=C(r,"click",w),a=!0)},p(i,d){var q;l=i,d&2&&t!==(t=l[16].label+"")&&(e.innerHTML=t),((q=l[0])==null?void 0:q.key)===l[16].key?f?f.p(l,d):(f=I(l),f.c(),f.m(r,n)):f&&(f.d(1),f=null),d&2&&j(r,"sortable",l[16].sortable)},d(i){i&&g(r),f&&f.d(),a=!1,u()}}}function K(l){let s,r=M(l[4]),e=[];for(let t=0;t<r.length;t+=1)e[t]=P(B(l,r,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();s=te()},m(t,o){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,o);p(t,s,o)},p(t,o){if(o&306){r=M(t[4]);let n;for(n=0;n<r.length;n+=1){const a=B(t,r,n);e[n]?e[n].p(a,o):(e[n]=P(a),e[n].c(),e[n].m(s.parentNode,s))}for(;n<e.length;n+=1)e[n].d(1);e.length=r.length}},d(t){t&&g(s),E(e,t)}}}function oe(l){return{c:b,m:b,p:b,d:b}}function ae(l){let s,r=l[19]+"";return{c(){s=m("span"),y(s,"class","cell svelte-916kqr")},m(e,t){p(e,s,t),s.innerHTML=r},p(e,t){t&18&&r!==(r=e[19]+"")&&(s.innerHTML=r)},d(e){e&&g(s)}}}function ce(l){return{c:b,m:b,p:b,d:b}}function O(l){let s,r,e,t,o={ctx:l,current:null,token:null,hasCatch:!1,pending:ce,then:ae,catch:oe,value:19};A(r=l[5](l[16],l[13],l[15]),o);function n(...a){return l[11](l[13],l[15],l[16],...a)}return{c(){s=m("td"),o.block.c(),y(s,"class","svelte-916kqr")},m(a,u){p(a,s,u),o.block.m(s,o.anchor=null),o.mount=()=>s,o.anchor=null,e||(t=C(s,"click",n),e=!0)},p(a,u){l=a,o.ctx=l,u&18&&r!==(r=l[5](l[16],l[13],l[15]))&&A(r,o)||se(o,l,u)},d(a){a&&g(s),o.block.d(),o.token=null,o=null,e=!1,t()}}}function P(l){let s,r,e=M(l[1]),t=[];for(let o=0;o<e.length;o+=1)t[o]=O(D(l,e,o));return{c(){s=m("tr");for(let o=0;o<t.length;o+=1)t[o].c();r=T()},m(o,n){p(o,s,n);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(s,null);v(s,r)},p(o,n){if(n&306){e=M(o[1]);let a;for(a=0;a<e.length;a+=1){const u=D(o,e,a);t[a]?t[a].p(u,n):(t[a]=O(u),t[a].c(),t[a].m(s,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(o){o&&g(s),E(t,o)}}}function ie(l){let s;return{c(){s=N("Load More")},m(r,e){p(r,s,e)},d(r){r&&g(s)}}}function de(l){let s,r;return{c(){s=m("span"),r=N(`
        Loading`),y(s,"class","spinner svelte-916kqr")},m(e,t){p(e,s,t),p(e,r,t)},d(e){e&&(g(s),g(r))}}}function ue(l){let s,r,e,t,o,n,a,u,f,w,i=l[1]&&G(l),d=l[4]&&K(l);function q(c,h){return c[2]?de:ie}let $=q(l),k=$(l);return{c(){s=m("div"),r=m("div"),e=m("table"),i&&i.c(),t=T(),d&&d.c(),o=T(),n=m("div"),a=m("button"),k.c(),y(e,"class","svelte-916kqr"),y(r,"class","table-container svelte-916kqr"),y(a,"class","load-button svelte-916kqr"),a.disabled=u=!l[3],j(a,"loading",l[2]),y(n,"class","table-actions svelte-916kqr"),y(s,"class","table-card svelte-916kqr")},m(c,h){p(c,s,h),v(s,r),v(r,e),i&&i.m(e,null),v(e,t),d&&d.m(e,null),v(s,o),v(s,n),v(n,a),k.m(a,null),f||(w=C(a,"click",l[7]),f=!0)},p(c,[h]){c[1]?i?i.p(c,h):(i=G(c),i.c(),i.m(e,t)):i&&(i.d(1),i=null),c[4]?d?d.p(c,h):(d=K(c),d.c(),d.m(e,null)):d&&(d.d(1),d=null),$!==($=q(c))&&(k.d(1),k=$(c),k&&(k.c(),k.m(a,null))),h&8&&u!==(u=!c[3])&&(a.disabled=u),h&4&&j(a,"loading",c[2])},i:b,o:b,d(c){c&&g(s),i&&i.d(),d&&d.d(),k.d(),f=!1,w()}}}function fe(l,s,r){let{headers:e=[]}=s,{sort:t}=s,{service:o}=s,n=!0,a=!1,u=[];const f=_();async function w(c,h,x){const{key:L,fallback:R,pipes:S}=c;let H;try{H=le(h,L)}catch{return R||""}if(!S)return H;for(const U of S)H=await U(H,h,x);return H}async function i(c){const{sortable:h}=c;if(!h)return;r(2,n=!0),r(0,t={key:c.key,direction:t?.key===c.key&&t.direction==="asc"?"desc":"asc"});const x=await o.get(t);r(4,u=x.rows),r(3,a=x.hasMore),r(2,n=!1)}async function d(){r(2,n=!0);const c=await o.loadMore(t);r(4,u=[...u,...c.rows]),r(3,a=c.hasMore),r(2,n=!1)}function q(c,h,x,L){f("rowClick",{row:c,index:h,header:x,originalEvent:L})}ee(async()=>{const c=await o.get(t);r(4,u=c.rows),r(3,a=c.hasMore),r(2,n=!1)});const $=c=>i(c),k=(c,h,x,L)=>q(c,h,x,L);return l.$$set=c=>{"headers"in c&&r(1,e=c.headers),"sort"in c&&r(0,t=c.sort),"service"in c&&r(9,o=c.service)},[t,e,n,a,u,w,i,d,q,o,$,k]}class Q extends W{constructor(s){super(),X(this,s,fe,ue,Y,{headers:1,sort:0,service:9},ne)}get headers(){return this.$$.ctx[1]}set headers(s){this.$$set({headers:s}),z()}get sort(){return this.$$.ctx[0]}set sort(s){this.$$set({sort:s}),z()}get service(){return this.$$.ctx[9]}set service(s){this.$$set({service:s}),z()}}try{customElements.define("jp-async-table",V(Q,{headers:{},sort:{},service:{}},[],[],!1));}catch{};export{Q as default};
