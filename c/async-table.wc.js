import{c as xe,S as ze,i as we,f as N,s as ke,a as ye,e as b,b as O,d as g,m as B,g as h,h as $,o as L,n as E,j as v,k as $e,x as Se,l as G,t as U,p as R,q as I,r as je,y as q,u as De,v as K,w as Ee}from"./svelte.js";import"./index2.js";import{g as Ae}from"./json-pointer.js";function Ce(a){ye(a,"svelte-1ud1rfz",".table-card.svelte-1ud1rfz{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-1ud1rfz{overflow-x:auto;width:100%}table.svelte-1ud1rfz{width:100%}th.svelte-1ud1rfz,td.svelte-1ud1rfz{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-1ud1rfz{opacity:0.75}.cell.svelte-1ud1rfz{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-actions.svelte-1ud1rfz{padding:1rem;display:flex;justify-content:space-between}.table-header.svelte-1ud1rfz{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-1ud1rfz{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-1ud1rfz{background-color:var(--background-secondary);color:var(--text-on-secondary)}.load-button.svelte-1ud1rfz{background-color:var(--primary-color);color:var(--text-on-primary)}.load-button.svelte-1ud1rfz:disabled{opacity:0.5}.load-button.loading.svelte-1ud1rfz{pointer-events:none}.spinner.svelte-1ud1rfz{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:1rem;height:1rem;margin-right:0.5rem;-webkit-animation:svelte-1ud1rfz-spin 1s linear infinite;-moz-animation:svelte-1ud1rfz-spin 1s linear infinite;-o-animation:svelte-1ud1rfz-spin 1s linear infinite;animation:svelte-1ud1rfz-spin 1s linear infinite}@-webkit-keyframes svelte-1ud1rfz-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-1ud1rfz-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-1ud1rfz-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-1ud1rfz-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}function Q(a,e,r){const n=a.slice();return n[32]=e[r],n[34]=r,n}function V(a,e,r){const n=a.slice();return n[35]=e[r],n}function W(a,e,r){const n=a.slice();return n[35]=e[r],n[34]=r,n}function X(a){let e,r,n=a[2]&&Y(a),t=a[3]&&Z(a);return{c(){e=b("div"),n&&n.c(),r=O(),t&&t.c(),g(e,"class","table-header svelte-1ud1rfz")},m(s,o){h(s,e,o),n&&n.m(e,null),$(e,r),t&&t.m(e,null)},p(s,o){s[2]?n?n.p(s,o):(n=Y(s),n.c(),n.m(e,r)):n&&(n.d(1),n=null),s[3]?t?t.p(s,o):(t=Z(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&v(e),n&&n.d(),t&&t.d()}}}function Y(a){let e;function r(s,o){return s[10]?Le:Me}let n=r(a),t=n(a);return{c(){t.c(),e=G()},m(s,o){t.m(s,o),h(s,e,o)},p(s,o){n===(n=r(s))&&t?t.p(s,o):(t.d(1),t=n(s),t&&(t.c(),t.m(e.parentNode,e)))},d(s){s&&v(e),t.d(s)}}}function Le(a){let e,r,n;return{c(){e=b("button"),e.textContent="Finish Arranging",g(e,"type","button"),g(e,"class","table-button settings-button svelte-1ud1rfz")},m(t,s){h(t,e,s),r||(n=L(e,"click",a[19]),r=!0)},p:E,d(t){t&&v(e),r=!1,n()}}}function Me(a){let e,r,n;return{c(){e=b("button"),e.textContent="Arrange Columns",g(e,"type","button"),g(e,"class","table-button settings-button svelte-1ud1rfz")},m(t,s){h(t,e,s),r||(n=L(e,"click",a[18]),r=!0)},p:E,d(t){t&&v(e),r=!1,n()}}}function Z(a){let e,r,n,t;return{c(){e=U(`\xA0
        `),r=b("button"),r.textContent="Export",g(r,"type","button"),g(r,"class","table-button settings-button svelte-1ud1rfz"),B(r,"loading",a[8])},m(s,o){h(s,e,o),h(s,r,o),n||(t=L(r,"click",a[17]),n=!0)},p(s,o){o[0]&256&&B(r,"loading",s[8])},d(s){s&&(v(e),v(r)),n=!1,t()}}}function ee(a){let e,r=R(a[9]),n=[];for(let t=0;t<r.length;t+=1)n[t]=re(W(a,r,t));return{c(){e=b("tr");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,s){h(t,e,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(t,s){if(s[0]&7348738){r=R(t[9]);let o;for(o=0;o<r.length;o+=1){const l=W(t,r,o);n[o]?n[o].p(l,s):(n[o]=re(l),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&v(e),I(n,t)}}}function te(a){let e,r=a[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=b("span"),n=U(r)},m(t,s){h(t,e,s),$(e,n)},p(t,s){s[0]&2&&r!==(r=t[1].direction==="asc"?"\u2191":"\u2193")&&De(n,r)},d(t){t&&v(e)}}}function re(a){var e;let r,n,t=a[35].label+"",s,o,l,c;function k(...x){return a[26](a[35],...x)}let m=((e=a[1])==null?void 0:e.key)===a[35].key&&te(a);function H(){return a[27](a[35])}return{c(){r=b("th"),n=b("span"),s=O(),m&&m.c(),o=O(),g(n,"draggable","true"),g(n,"tabindex","-1"),g(n,"role","button"),g(n,"aria-label","Drag handle"),g(r,"data-index",a[34]),g(r,"class","svelte-1ud1rfz"),B(r,"sortable",a[35].sortable)},m(x,u){h(x,r,u),$(r,n),n.innerHTML=t,$(r,s),m&&m.m(r,null),$(r,o),l||(c=[L(n,"dragstart",k),L(r,"click",H),L(r,"drop",a[22]),L(r,"dragover",a[21])],l=!0)},p(x,u){var f;a=x,u[0]&512&&t!==(t=a[35].label+"")&&(n.innerHTML=t),((f=a[1])==null?void 0:f.key)===a[35].key?m?m.p(a,u):(m=te(a),m.c(),m.m(r,o)):m&&(m.d(1),m=null),u[0]&512&&B(r,"sortable",a[35].sortable)},d(x){x&&v(r),m&&m.d(),l=!1,je(c)}}}function ne(a){let e,r=R(a[7]),n=[];for(let t=0;t<r.length;t+=1)n[t]=se(Q(a,r,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=G()},m(t,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,s);h(t,e,s)},p(t,s){if(s[0]&37504){r=R(t[7]);let o;for(o=0;o<r.length;o+=1){const l=Q(t,r,o);n[o]?n[o].p(l,s):(n[o]=se(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&v(e),I(n,t)}}}function Pe(a){return{c:E,m:E,p:E,d:E}}function Te(a){let e,r=a[38]+"";return{c(){e=b("span"),g(e,"class","cell svelte-1ud1rfz")},m(n,t){h(n,e,t),e.innerHTML=r},p(n,t){t[0]&640&&r!==(r=n[38]+"")&&(e.innerHTML=r)},d(n){n&&v(e)}}}function Ne(a){return{c:E,m:E,p:E,d:E}}function ae(a){let e,r,n,t,s={ctx:a,current:null,token:null,hasCatch:!1,pending:Ne,then:Te,catch:Pe,value:38};K(r=a[12](a[35],a[32],a[34]),s);function o(...l){return a[28](a[32],a[34],a[35],...l)}return{c(){e=b("td"),s.block.c(),g(e,"class","svelte-1ud1rfz")},m(l,c){h(l,e,c),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,n||(t=L(e,"click",o),n=!0)},p(l,c){a=l,s.ctx=a,c[0]&640&&r!==(r=a[12](a[35],a[32],a[34]))&&K(r,s)||Ee(s,a,c)},d(l){l&&v(e),s.block.d(),s.token=null,s=null,n=!1,t()}}}function se(a){let e,r,n=R(a[9]),t=[];for(let s=0;s<n.length;s+=1)t[s]=ae(V(a,n,s));return{c(){e=b("tr");for(let s=0;s<t.length;s+=1)t[s].c();r=O()},m(s,o){h(s,e,o);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null);$(e,r)},p(s,o){if(o[0]&37504){n=R(s[9]);let l;for(l=0;l<n.length;l+=1){const c=V(s,n,l);t[l]?t[l].p(c,o):(t[l]=ae(c),t[l].c(),t[l].m(e,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},d(s){s&&v(e),I(t,s)}}}function Oe(a){let e;return{c(){e=U("Load More")},m(r,n){h(r,e,n)},d(r){r&&v(e)}}}function He(a){let e,r;return{c(){e=b("span"),r=U(`
        Loading`),g(e,"class","spinner svelte-1ud1rfz")},m(n,t){h(n,e,t),h(n,r,t)},d(n){n&&(v(e),v(r))}}}function oe(a){let e,r,n;return{c(){e=b("jp-select"),q(e,"label","Page Size"),q(e,"options",a[11]),q(e,"value",a[0])},m(t,s){h(t,e,s),r||(n=L(e,"value",a[16]),r=!0)},p(t,s){s[0]&1&&q(e,"value",t[0])},d(t){t&&v(e),r=!1,n()}}}function Be(a){let e,r,n,t,s,o,l,c,k,m,H,x,u=(a[2]||a[3])&&X(a),f=a[9]&&ee(a),p=a[7]&&ne(a);function M(d,j){return d[5]?He:Oe}let P=M(a),y=P(a),w=a[4].length>1&&oe(a);return{c(){e=b("div"),u&&u.c(),r=O(),n=b("div"),t=b("table"),f&&f.c(),s=O(),p&&p.c(),o=O(),l=b("div"),c=b("button"),y.c(),m=O(),w&&w.c(),g(t,"class","svelte-1ud1rfz"),g(n,"class","table-container svelte-1ud1rfz"),g(c,"class","table-button load-button svelte-1ud1rfz"),c.disabled=k=!a[6],B(c,"loading",a[5]),g(l,"class","table-actions svelte-1ud1rfz"),g(e,"class","table-card svelte-1ud1rfz")},m(d,j){h(d,e,j),u&&u.m(e,null),$(e,r),$(e,n),$(n,t),f&&f.m(t,null),$(t,s),p&&p.m(t,null),$(e,o),$(e,l),$(l,c),y.m(c,null),$(l,m),w&&w.m(l,null),H||(x=L(c,"click",a[14]),H=!0)},p(d,j){d[2]||d[3]?u?u.p(d,j):(u=X(d),u.c(),u.m(e,r)):u&&(u.d(1),u=null),d[9]?f?f.p(d,j):(f=ee(d),f.c(),f.m(t,s)):f&&(f.d(1),f=null),d[7]?p?p.p(d,j):(p=ne(d),p.c(),p.m(t,null)):p&&(p.d(1),p=null),P!==(P=M(d))&&(y.d(1),y=P(d),y&&(y.c(),y.m(c,null))),j[0]&64&&k!==(k=!d[6])&&(c.disabled=k),j[0]&32&&B(c,"loading",d[5]),d[4].length>1?w?w.p(d,j):(w=oe(d),w.c(),w.m(l,null)):w&&(w.d(1),w=null)},i:E,o:E,d(d){d&&v(e),u&&u.d(),f&&f.d(),p&&p.d(),y.d(),w&&w.d(),H=!1,x()}}}function Re(a,e,r){let{showArrangingColumns:n=!0}=e,{showExport:t=!0}=e,{headers:s=[]}=e,{pageSizes:o}=e,{pageSize:l=o[0]}=e,{sort:c}=e,{service:k}=e,{getData:m=async()=>{const i=await k.get(c,l);r(7,f=i.rows),r(6,u=i.hasMore),r(5,x=!1)}}=e,H=JSON.stringify(o.map(i=>({label:i,value:i}))),x=!0,u=!1,f=[],p=!1,M,P=!1,y=[];const w=$e();async function d(i,z,S){const{key:D,fallback:C,pipes:T}=i;let A;try{A=Ae(z,D)}catch{return C||""}if(!T)return A;for(const F of T)A=await F(A,z,S);return A}async function j(i){const{sortable:z}=i;if(!z)return;r(5,x=!0),r(1,c={key:i.key,direction:c?.key===i.key&&c.direction==="asc"?"desc":"asc"});const[S]=await Promise.all([k.get(c,l),k.adjustSort(c)]);r(7,f=S.rows),r(6,u=S.hasMore),r(5,x=!1)}async function le(){r(5,x=!0);const i=await k.loadMore(c,l);r(7,f=[...f,...i.rows]),r(6,u=i.hasMore),r(5,x=!1)}function J(i,z,S,D){w("rowClick",{row:i,index:z,header:S,originalEvent:D})}async function ce(i){r(0,l=i.detail),await Promise.all([m(),k.adjustPageSize(l)])}async function de(){r(8,p=!0);const i=await k.export(),z=await Promise.all(i.map(async(C,T)=>(await Promise.all(M.map(A=>d(A,C,T)))).map(A=>`"${A||""}"`).join(","))),S=new Blob([[M.map(C=>C.label).map(C=>`"${C}"`).join(","),...z].join(`
`)],{type:"text/csv"}),D=document.createElement("a");D.href=URL.createObjectURL(S),D.download="export.csv",D.click(),r(8,p=!1)}function ue(){r(10,P=!0),y=M.map(i=>i.key)}function fe(){r(10,P=!1)}function _(i,z){i.dataTransfer.setData("text/plain",z.key)}function me(i){i.preventDefault()}function ge(i){var z;i.preventDefault();const S=i.dataTransfer.getData("text/plain"),D=y.indexOf(S),C=(z=i.target)==null?void 0:z.dataset.index;D!==-1&&C&&(y.splice(D,1),y.splice(Number(C),0,S),r(9,M=s.filter(T=>!T.disabled).sort((T,A)=>{const F=y.indexOf(T.key),ve=y.indexOf(A.key);return F-ve})))}Se(async()=>{await m()});const pe=(i,z)=>_(z,i),be=i=>j(i),he=(i,z,S,D)=>J(i,z,S,D);return a.$$set=i=>{"showArrangingColumns"in i&&r(2,n=i.showArrangingColumns),"showExport"in i&&r(3,t=i.showExport),"headers"in i&&r(23,s=i.headers),"pageSizes"in i&&r(4,o=i.pageSizes),"pageSize"in i&&r(0,l=i.pageSize),"sort"in i&&r(1,c=i.sort),"service"in i&&r(24,k=i.service),"getData"in i&&r(25,m=i.getData)},a.$$.update=()=>{a.$$.dirty[0]&8388608&&r(9,M=s.filter(i=>!i.disabled))},[l,c,n,t,o,x,u,f,p,M,P,H,d,j,le,J,ce,de,ue,fe,_,me,ge,s,k,m,pe,be,he]}class ie extends ze{constructor(e){super(),we(this,e,Re,Be,ke,{showArrangingColumns:2,showExport:3,headers:23,pageSizes:4,pageSize:0,sort:1,service:24,getData:25},Ce,[-1,-1])}get showArrangingColumns(){return this.$$.ctx[2]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),N()}get showExport(){return this.$$.ctx[3]}set showExport(e){this.$$set({showExport:e}),N()}get headers(){return this.$$.ctx[23]}set headers(e){this.$$set({headers:e}),N()}get pageSizes(){return this.$$.ctx[4]}set pageSizes(e){this.$$set({pageSizes:e}),N()}get pageSize(){return this.$$.ctx[0]}set pageSize(e){this.$$set({pageSize:e}),N()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),N()}get service(){return this.$$.ctx[24]}set service(e){this.$$set({service:e}),N()}get getData(){return this.$$.ctx[25]}set getData(e){this.$$set({getData:e}),N()}}try{customElements.define("jp-async-table",xe(ie,{showArrangingColumns:{type:"Boolean"},showExport:{type:"Boolean"},headers:{},pageSizes:{},pageSize:{},sort:{},service:{},getData:{}},[],[],!1));}catch{};export{ie as default};
