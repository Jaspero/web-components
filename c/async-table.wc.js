import{c as V,S as W,i as X,f as C,s as Y,a as Z,e as w,b as H,d as k,t as T,g as f,h as b,o as E,n as v,j as p,k as _,w as ee,l as M,m as q,p as te,q as N,r as re,u as A,v as oe}from"./svelte.js";import"./index2.js";import{g as se}from"./json-pointer.js";function ne(s){Z(s,"svelte-1gieww0",".table-card.svelte-1gieww0{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-1gieww0{overflow-x:auto;width:100%}table.svelte-1gieww0{width:100%}th.svelte-1gieww0,td.svelte-1gieww0{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-1gieww0{opacity:0.75}.cell.svelte-1gieww0{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-actions.svelte-1gieww0{padding:1rem}.load-button.svelte-1gieww0{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;background-color:var(--primary-color);color:var(--text-on-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.load-button.svelte-1gieww0:disabled{opacity:0.5}.load-button.loading.svelte-1gieww0{pointer-events:none}.spinner.svelte-1gieww0{display:block;border-top:2px solid var(--text-on-primary);border-bottom:2px solid var(--text-on-primary);border-left:2px solid transparent;border-right:2px solid transparent;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:1rem;height:1rem;margin-right:0.5rem;-webkit-animation:svelte-1gieww0-spin 1s linear infinite;-moz-animation:svelte-1gieww0-spin 1s linear infinite;-o-animation:svelte-1gieww0-spin 1s linear infinite;animation:svelte-1gieww0-spin 1s linear infinite}@-webkit-keyframes svelte-1gieww0-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-1gieww0-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-1gieww0-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-1gieww0-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}function B(s,o,r){const e=s.slice();return e[13]=o[r],e[15]=r,e}function D(s,o,r){const e=s.slice();return e[16]=o[r],e}function F(s,o,r){const e=s.slice();return e[16]=o[r],e}function G(s){let o,r=M(s[1]),e=[];for(let t=0;t<r.length;t+=1)e[t]=J(F(s,r,t));return{c(){o=w("tr");for(let t=0;t<e.length;t+=1)e[t].c()},m(t,i){f(t,o,i);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(o,null)},p(t,i){if(i&67){r=M(t[1]);let n;for(n=0;n<r.length;n+=1){const a=F(t,r,n);e[n]?e[n].p(a,i):(e[n]=J(a),e[n].c(),e[n].m(o,null))}for(;n<e.length;n+=1)e[n].d(1);e.length=r.length}},d(t){t&&p(o),q(e,t)}}}function I(s){let o,r=s[0].direction==="asc"?"\u2191":"\u2193",e;return{c(){o=w("span"),e=N(r)},m(t,i){f(t,o,i),b(o,e)},p(t,i){i&1&&r!==(r=t[0].direction==="asc"?"\u2191":"\u2193")&&re(e,r)},d(t){t&&p(o)}}}function J(s){var o;let r,e,t=s[16].label+"",i,n,a,m,g=((o=s[0])==null?void 0:o.key)===s[16].key&&I(s);function z(){return s[10](s[16])}return{c(){r=w("th"),e=w("span"),i=H(),g&&g.c(),n=H(),k(r,"class","svelte-1gieww0"),T(r,"sortable",s[16].sortable)},m(c,d){f(c,r,d),b(r,e),e.innerHTML=t,b(r,i),g&&g.m(r,null),b(r,n),a||(m=E(r,"click",z),a=!0)},p(c,d){var x;s=c,d&2&&t!==(t=s[16].label+"")&&(e.innerHTML=t),((x=s[0])==null?void 0:x.key)===s[16].key?g?g.p(s,d):(g=I(s),g.c(),g.m(r,n)):g&&(g.d(1),g=null),d&2&&T(r,"sortable",s[16].sortable)},d(c){c&&p(r),g&&g.d(),a=!1,m()}}}function K(s){let o,r=M(s[4]),e=[];for(let t=0;t<r.length;t+=1)e[t]=P(B(s,r,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();o=te()},m(t,i){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,i);f(t,o,i)},p(t,i){if(i&306){r=M(t[4]);let n;for(n=0;n<r.length;n+=1){const a=B(t,r,n);e[n]?e[n].p(a,i):(e[n]=P(a),e[n].c(),e[n].m(o.parentNode,o))}for(;n<e.length;n+=1)e[n].d(1);e.length=r.length}},d(t){t&&p(o),q(e,t)}}}function ie(s){return{c:v,m:v,p:v,d:v}}function ae(s){let o,r=s[19]+"";return{c(){o=w("span"),k(o,"class","cell svelte-1gieww0")},m(e,t){f(e,o,t),o.innerHTML=r},p(e,t){t&18&&r!==(r=e[19]+"")&&(o.innerHTML=r)},d(e){e&&p(o)}}}function le(s){return{c:v,m:v,p:v,d:v}}function O(s){let o,r,e,t,i={ctx:s,current:null,token:null,hasCatch:!1,pending:le,then:ae,catch:ie,value:19};A(r=s[5](s[16],s[13],s[15]),i);function n(...a){return s[11](s[13],s[15],s[16],...a)}return{c(){o=w("td"),i.block.c(),k(o,"class","svelte-1gieww0")},m(a,m){f(a,o,m),i.block.m(o,i.anchor=null),i.mount=()=>o,i.anchor=null,e||(t=E(o,"click",n),e=!0)},p(a,m){s=a,i.ctx=s,m&18&&r!==(r=s[5](s[16],s[13],s[15]))&&A(r,i)||oe(i,s,m)},d(a){a&&p(o),i.block.d(),i.token=null,i=null,e=!1,t()}}}function P(s){let o,r,e=M(s[1]),t=[];for(let i=0;i<e.length;i+=1)t[i]=O(D(s,e,i));return{c(){o=w("tr");for(let i=0;i<t.length;i+=1)t[i].c();r=H()},m(i,n){f(i,o,n);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(o,null);b(o,r)},p(i,n){if(n&306){e=M(i[1]);let a;for(a=0;a<e.length;a+=1){const m=D(i,e,a);t[a]?t[a].p(m,n):(t[a]=O(m),t[a].c(),t[a].m(o,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&p(o),q(t,i)}}}function ce(s){let o;return{c(){o=N("Load More")},m(r,e){f(r,o,e)},d(r){r&&p(o)}}}function de(s){let o,r;return{c(){o=w("span"),r=N(`
        Loading`),k(o,"class","spinner svelte-1gieww0")},m(e,t){f(e,o,t),f(e,r,t)},d(e){e&&(p(o),p(r))}}}function me(s){let o,r,e,t,i,n,a,m,g,z,c=s[1]&&G(s),d=s[4]&&K(s);function x(l,u){return l[2]?de:ce}let $=x(s),h=$(s);return{c(){o=w("div"),r=w("div"),e=w("table"),c&&c.c(),t=H(),d&&d.c(),i=H(),n=w("div"),a=w("button"),h.c(),k(e,"class","svelte-1gieww0"),k(r,"class","table-container svelte-1gieww0"),k(a,"class","load-button svelte-1gieww0"),a.disabled=m=!s[3],T(a,"loading",s[2]),k(n,"class","table-actions svelte-1gieww0"),k(o,"class","table-card svelte-1gieww0")},m(l,u){f(l,o,u),b(o,r),b(r,e),c&&c.m(e,null),b(e,t),d&&d.m(e,null),b(o,i),b(o,n),b(n,a),h.m(a,null),g||(z=E(a,"click",s[7]),g=!0)},p(l,[u]){l[1]?c?c.p(l,u):(c=G(l),c.c(),c.m(e,t)):c&&(c.d(1),c=null),l[4]?d?d.p(l,u):(d=K(l),d.c(),d.m(e,null)):d&&(d.d(1),d=null),$!==($=x(l))&&(h.d(1),h=$(l),h&&(h.c(),h.m(a,null))),u&8&&m!==(m=!l[3])&&(a.disabled=m),u&4&&T(a,"loading",l[2])},i:v,o:v,d(l){l&&p(o),c&&c.d(),d&&d.d(),h.d(),g=!1,z()}}}function ge(s,o,r){let{headers:e=[]}=o,{sort:t}=o,{service:i}=o,n=!0,a=!1,m=[];const g=_();async function z(l,u,y){const{key:L,fallback:R,pipes:S}=l;let j;try{j=se(u,L)}catch{return R||""}if(!S)return j;for(const U of S)j=await U(j,u,y);return j}async function c(l){const{sortable:u}=l;if(!u)return;r(2,n=!0),r(0,t={key:l.key,direction:t?.key===l.key&&t.direction==="asc"?"desc":"asc"});const y=await i.get(t);r(4,m=y.rows),r(3,a=y.hasMore),r(2,n=!1)}async function d(){r(2,n=!0);const l=await i.loadMore(t);r(4,m=[...m,...l.rows]),r(3,a=l.hasMore),r(2,n=!1)}function x(l,u,y,L){g("rowClick",{row:l,index:u,header:y,originalEvent:L})}ee(async()=>{const l=await i.get(t);r(4,m=l.rows),r(3,a=l.hasMore),r(2,n=!1)});const $=l=>c(l),h=(l,u,y,L)=>x(l,u,y,L);return s.$$set=l=>{"headers"in l&&r(1,e=l.headers),"sort"in l&&r(0,t=l.sort),"service"in l&&r(9,i=l.service)},[t,e,n,a,m,z,c,d,x,i,$,h]}class Q extends W{constructor(o){super(),X(this,o,ge,me,Y,{headers:1,sort:0,service:9},ne)}get headers(){return this.$$.ctx[1]}set headers(o){this.$$set({headers:o}),C()}get sort(){return this.$$.ctx[0]}set sort(o){this.$$set({sort:o}),C()}get service(){return this.$$.ctx[9]}set service(o){this.$$set({service:o}),C()}}try{customElements.define("jp-async-table",V(Q,{headers:{},sort:{},service:{}},[],[],!1));}catch{};export{Q as default};
