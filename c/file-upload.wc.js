var ce=Object.defineProperty,pe=(a,e,t)=>e in a?ce(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,de=(a,e,t)=>(pe(a,typeof e!="symbol"?e+"":e,t),t);import{c as ue,S as ve,i as fe,f as F,s as we,a as he,e as g,d as r,g as H,h as x,o as b,H as A,n as E,j as I,k as me,G as ge,b as T,E as Y,t as R,I as _,J as U,K as D,L as be}from"./svelte.js";import"./index2.js";import{c as xe}from"./clickOutside.js";function qe(a){he(a,"svelte-rlqpwa",`.field.svelte-rlqpwa.svelte-rlqpwa{position:relative;display:flex;flex-direction:row-reverse;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;user-select:none;gap:0.75rem;background-color:var(--background-primary);border:1px solid var(--border-primary);border-radius:0.25rem}.drop.svelte-rlqpwa.svelte-rlqpwa{position:absolute;left:0;right:0;top:0;bottom:0;border:2px dashed #e65000}.field.svelte-rlqpwa.svelte-rlqpwa:focus-within{border-color:var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-rlqpwa.svelte-rlqpwa{position:absolute;top:50%;left:0.75rem;transform:translateY(-50%);font-size:1rem;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s}.field-label.move.svelte-rlqpwa.svelte-rlqpwa{top:0.25rem;transform:translateY(0);font-size:0.75rem}.field-input.svelte-rlqpwa.svelte-rlqpwa{flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;text-overflow:ellipsis;padding:1rem 0 0 0;border:none;outline:none;border-radius:0}.field-upload.svelte-rlqpwa.svelte-rlqpwa{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-rlqpwa.svelte-rlqpwa{position:relative;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;flex:1}.field-icons.svelte-rlqpwa.svelte-rlqpwa{z-index:1;position:relative;display:flex;align-items:center;gap:0.375rem}.field-icon.svelte-rlqpwa.svelte-rlqpwa{display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;border-radius:50%;cursor:pointer}.field-icon.svelte-rlqpwa.svelte-rlqpwa:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-rlqpwa.svelte-rlqpwa{display:none}.field-icon-upload.svelte-rlqpwa.svelte-rlqpwa{position:relative;cursor:pointer}.field-icon.svelte-rlqpwa button.svelte-rlqpwa{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.preview-button.svelte-rlqpwa.svelte-rlqpwa{position:relative}.preview.svelte-rlqpwa.svelte-rlqpwa{z-index:1;position:absolute;bottom:100%;right:0;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);border-radius:0.5rem;box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}`)}function $e(a){let e,t,n,o,i,d,u,h,w,y,$,z,m,q,k,B,j,L,c,C,S,v=a[10]&&G(a),f=a[0]&&J(a);return{c(){e=g("span"),t=T(),n=g("div"),o=g("label"),i=g("input"),h=T(),w=Y("svg"),y=Y("path"),z=T(),m=g("div"),q=g("button"),q.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',k=T(),v&&v.c(),B=T(),f&&f.c(),j=T(),L=g("span"),c=g("input"),r(e,"class","field-label svelte-rlqpwa"),R(e,"move",a[7]||a[0]),r(i,"type","file"),r(i,"id",d=`${a[3]}`),r(i,"class","field-upload svelte-rlqpwa"),r(i,"accept",u=a[4]&&a[4].acceptedFiles),r(y,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),r(w,"xmlns","http://www.w3.org/2000/svg"),r(w,"height","1rem"),r(w,"viewBox","0 0 512 512"),r(o,"for",$=`${a[3]}`),r(o,"class","field-icon field-icon-upload svelte-rlqpwa"),r(q,"class","svelte-rlqpwa"),r(m,"class","field-icon preview-button svelte-rlqpwa"),R(m,"hidden",!a[9]),r(n,"class","field-icons svelte-rlqpwa"),r(c,"class","field-input svelte-rlqpwa"),r(c,"type","text"),r(c,"name",a[3]),r(c,"id",a[2]),c.disabled=a[8],r(L,"class","field-upload-container svelte-rlqpwa")},m(s,p){H(s,e,p),e.innerHTML=a[1],H(s,t,p),H(s,n,p),x(n,o),x(o,i),x(o,h),x(o,w),x(w,y),x(n,z),x(n,m),x(m,q),x(m,k),v&&v.m(m,null),x(n,B),f&&f.m(n,null),H(s,j,p),H(s,L,p),x(L,c),_(c,a[0]),C||(S=[b(i,"change",a[22]),b(i,"focus",a[23]),b(i,"blur",a[24]),b(q,"click",A(a[25])),b(c,"focus",a[28]),b(c,"blur",a[29]),b(c,"change",a[30]),b(c,"input",a[31])],C=!0)},p(s,p){p[0]&2&&(e.innerHTML=s[1]),p[0]&129&&R(e,"move",s[7]||s[0]),p[0]&8&&d!==(d=`${s[3]}`)&&r(i,"id",d),p[0]&16&&u!==(u=s[4]&&s[4].acceptedFiles)&&r(i,"accept",u),p[0]&8&&$!==($=`${s[3]}`)&&r(o,"for",$),s[10]?v?v.p(s,p):(v=G(s),v.c(),v.m(m,null)):v&&(v.d(1),v=null),p[0]&512&&R(m,"hidden",!s[9]),s[0]?f?f.p(s,p):(f=J(s),f.c(),f.m(n,null)):f&&(f.d(1),f=null),p[0]&8&&r(c,"name",s[3]),p[0]&4&&r(c,"id",s[2]),p[0]&256&&(c.disabled=s[8]),p[0]&1&&c.value!==s[0]&&_(c,s[0])},d(s){s&&(I(e),I(t),I(n),I(j),I(L)),v&&v.d(),f&&f.d(),C=!1,U(S)}}}function ye(a){let e,t,n;return{c(){e=g("div"),r(e,"class","drop svelte-rlqpwa")},m(o,i){H(o,e,i),t||(n=[b(e,"dragleave",a[19]),b(e,"dragend",a[20]),b(e,"drop",A(a[21]))],t=!0)},p:E,d(o){o&&I(e),t=!1,U(n)}}}function G(a){let e,t,n,o;return{c(){e=g("img"),r(e,"class","preview svelte-rlqpwa"),r(e,"style",a[5]),D(e.src,t=a[9])||r(e,"src",t),r(e,"alt","preview")},m(i,d){H(i,e,d),n||(o=[be(xe.call(null,e)),b(e,"click_outside",a[26])],n=!0)},p(i,d){d[0]&32&&r(e,"style",i[5]),d[0]&512&&!D(e.src,t=i[9])&&r(e,"src",t)},d(i){i&&I(e),n=!1,U(o)}}}function J(a){let e,t,n,o;return{c(){e=g("div"),t=g("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',r(t,"class","svelte-rlqpwa"),r(e,"class","field-icon svelte-rlqpwa")},m(i,d){H(i,e,d),x(e,t),n||(o=b(t,"click",A(a[27])),n=!0)},p:E,d(i){i&&I(e),n=!1,o()}}}function ze(a){let e,t,n,o;function i(h,w){return h[11]?ye:$e}let d=i(a),u=d(a);return{c(){e=g("div"),t=g("div"),u.c(),r(t,"class","field svelte-rlqpwa")},m(h,w){H(h,e,w),x(e,t),u.m(t,null),a[32](t),n||(o=b(t,"dragover",A(a[33])),n=!0)},p(h,w){d===(d=i(h))&&u?u.p(h,w):(u.d(1),u=d(h),u&&(u.c(),u.m(t,null)))},i:E,o:E,d(h){h&&I(e),u.d(),a[32](null),n=!1,o()}}}let ke=null;function He(a,e,t){let{label:n="Upload a file"}=e,{attachedInternals:o}=e,{value:i=""}=e,{id:d=""}=e,{name:u=""}=e,h,w,y=!1,$=!1,z="",m=!1,q=!1,{service:k}=e;const B=()=>i,j=me();async function L(l){if($)try{t(0,i=await k.uploadFile(ke,l))}catch(V){console.log(V)}return i}async function c(l){if(k&&k.maxSize&&l.size>k.maxSize){j("rejected",{file:l.name,code:"maxSize"});return}if(t(8,$=!0),l=l,t(0,i=l.name),l.type.split("/")[0]==="image"){const V=await s(l);t(9,z=V)}else t(9,z="")}async function C(l){l.dataTransfer.files.length&&c(l.dataTransfer.files[0]),t(11,q=!1)}async function S(l){c(l.target.files[0])}async function v(){$||((await(await fetch(i)).blob()).type.startsWith("image/")?t(9,z=i):t(9,z=""))}function f(){const l=w.getBoundingClientRect(),V=window.innerHeight-l.bottom,P=300;let M="";V<P?M=`
            bottom: ${window.innerHeight-l.top}px;
            right: ${l.left}px;
        `:M=`
            top: ${l.bottom}px;
            right: ${l.left}px;
        `,t(5,h=M),t(10,m=!m)}const s=l=>new Promise((V,P)=>{const M=new FileReader;M.readAsDataURL(l),M.onload=()=>V(M.result),M.onerror=oe=>P(oe)}),p=()=>t(11,q=!1),W=()=>t(11,q=!1),K=l=>C(l),N=l=>{S(l)},Q=()=>t(7,y=!0),X=()=>t(7,y=!1),Z=()=>f(),ee=()=>t(10,m=!1),te=()=>{t(8,$=!1),t(9,z=""),t(0,i="")},ae=()=>t(7,y=!0),le=()=>t(7,y=!1),ie=()=>v();function re(){i=this.value,t(0,i)}function se(l){ge[l?"unshift":"push"](()=>{w=l,t(6,w)})}const ne=()=>t(11,q=!0);return a.$$set=l=>{"label"in l&&t(1,n=l.label),"attachedInternals"in l&&t(16,o=l.attachedInternals),"value"in l&&t(0,i=l.value),"id"in l&&t(2,d=l.id),"name"in l&&t(3,u=l.name),"service"in l&&t(4,k=l.service)},a.$$.update=()=>{a.$$.dirty[0]&65537&&(o.checkValidity(),o.setFormValue(i),j("value",{value:i}))},[i,n,d,u,k,h,w,y,$,z,m,q,C,S,v,f,o,B,L,p,W,K,N,Q,X,Z,ee,te,ae,le,ie,re,se,ne]}class O extends ve{constructor(e){super(),fe(this,e,He,ze,we,{label:1,attachedInternals:16,value:0,id:2,name:3,service:4,getValue:17,save:18},qe,[-1,-1])}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),F()}get attachedInternals(){return this.$$.ctx[16]}set attachedInternals(e){this.$$set({attachedInternals:e}),F()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),F()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),F()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),F()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),F()}get getValue(){return this.$$.ctx[17]}get save(){return this.$$.ctx[18]}}try{customElements.define("jp-file-upload",ue(O,{label:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,a=>{var e;return e=class extends a{constructor(){super(),this.attachedInternals=this.attachInternals()}},de(e,"formAssociated",!0),e}));}catch{};export{O as default};
