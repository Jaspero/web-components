var me=Object.defineProperty,fe=(i,e,t)=>e in i?me(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ve=(i,e,t)=>(fe(i,typeof e!="symbol"?e+"":e,t),t);import{c as xe,S as he,i as we,f as j,s as ge,a as ye,b as F,e as w,d as r,g as $,h as y,o as g,J as B,n as A,j as T,k as ke,I as ze,G as E,m as N,K as J,L as K,r as _,M as O,N as $e}from"./svelte.js";import"./index2.js";import{c as Te}from"./clickOutside.js";function Me(i){ye(i,"svelte-1bba0u2",`.field.svelte-1bba0u2.svelte-1bba0u2{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-moz-box-orient:horizontal;-moz-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;gap:0.75rem;background-color:transparent;border:1px solid var(--border-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem}.drop.svelte-1bba0u2.svelte-1bba0u2{position:absolute;left:0;right:0;top:0;bottom:0;border:2px dashed var(--primary-color)}.field.svelte-1bba0u2.svelte-1bba0u2:focus-within{border-color:var(--primary-color);-webkit-box-shadow:inset 0 0 0 1px var(--primary-color);-moz-box-shadow:inset 0 0 0 1px var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-1bba0u2.svelte-1bba0u2{position:absolute;top:50%;left:0.75rem;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);font-size:1rem;-webkit-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-o-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-webkit-transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;-o-transition:top 0.3s,
      font-size 0.3s,
      -o-transform 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -moz-transform 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s,
      -moz-transform 0.3s,
      -o-transform 0.3s}.field-label.move.svelte-1bba0u2.svelte-1bba0u2{top:0.25rem;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);font-size:0.75rem}.field-input.svelte-1bba0u2.svelte-1bba0u2{-webkit-box-flex:1;-webkit-flex:auto;-moz-box-flex:1;-ms-flex:auto;flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border:none;outline:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.field-input-padding.svelte-1bba0u2.svelte-1bba0u2{padding:1rem 0 0 0}.field-upload.svelte-1bba0u2.svelte-1bba0u2{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-1bba0u2.svelte-1bba0u2{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.field-icons.svelte-1bba0u2.svelte-1bba0u2{z-index:1;position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:0.375rem}.field-icon.svelte-1bba0u2.svelte-1bba0u2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:2rem;height:2rem;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;cursor:pointer}.field-icon.svelte-1bba0u2.svelte-1bba0u2:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-1bba0u2.svelte-1bba0u2{display:none}.field-icon-upload.svelte-1bba0u2.svelte-1bba0u2{position:relative;cursor:pointer}.field-icon.svelte-1bba0u2 button.svelte-1bba0u2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.preview-button.svelte-1bba0u2.svelte-1bba0u2{position:relative}.preview.svelte-1bba0u2.svelte-1bba0u2{z-index:1;position:absolute;bottom:100%;right:0;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);-webkit-border-radius:0.5rem;-moz-border-radius:0.5rem;border-radius:0.5rem;-webkit-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}`)}function U(i){let e;return{c(){e=w("div"),r(e,"class","label")},m(t,a){$(t,e,a),e.innerHTML=i[0]},p(t,a){a[0]&1&&(e.innerHTML=t[0])},d(t){t&&T(e)}}}function He(i){let e,t,a,b,c,o,k,z,x,l,p,Y,M,L,H,d,m,I,S,f=i[0]&&i[1]=="inside"&&W(i),h=i[11]&&q(i),v=i[5]&&G(i);return{c(){f&&f.c(),e=F(),t=w("div"),a=w("label"),b=w("input"),o=F(),k=E("svg"),z=E("path"),x=F(),l=w("div"),p=w("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',Y=F(),h&&h.c(),M=F(),v&&v.c(),L=F(),H=w("span"),d=w("input"),r(b,"type","file"),r(b,"id",i[3]),r(b,"class","field-upload svelte-1bba0u2"),r(b,"accept",c=i[4]&&i[4].acceptedFiles),r(z,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),r(k,"xmlns","http://www.w3.org/2000/svg"),r(k,"height","1rem"),r(k,"viewBox","0 0 512 512"),r(a,"for",i[3]),r(a,"class","field-icon field-icon-upload svelte-1bba0u2"),r(p,"class","svelte-1bba0u2"),r(l,"class","field-icon preview-button svelte-1bba0u2"),N(l,"hidden",!i[10]),r(t,"class","field-icons svelte-1bba0u2"),r(d,"class",m=J(`field-input ${i[1]=="outside"||!i[0]?"":"field-input-padding"}`)+" svelte-1bba0u2"),r(d,"type","text"),r(d,"name",i[3]),r(d,"id",i[2]),d.disabled=i[9],r(H,"class","field-upload-container svelte-1bba0u2")},m(n,u){f&&f.m(n,u),$(n,e,u),$(n,t,u),y(t,a),y(a,b),y(a,o),y(a,k),y(k,z),y(t,x),y(t,l),y(l,p),y(l,Y),h&&h.m(l,null),y(t,M),v&&v.m(t,null),$(n,L,u),$(n,H,u),y(H,d),K(d,i[5]),I||(S=[g(b,"change",i[14]),g(b,"focus",i[24]),g(b,"blur",i[25]),g(p,"click",B(i[26])),g(d,"focus",i[29]),g(d,"blur",i[30]),g(d,"change",i[31]),g(d,"input",i[32])],I=!0)},p(n,u){n[0]&&n[1]=="inside"?f?f.p(n,u):(f=W(n),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),u[0]&8&&r(b,"id",n[3]),u[0]&16&&c!==(c=n[4]&&n[4].acceptedFiles)&&r(b,"accept",c),u[0]&8&&r(a,"for",n[3]),n[11]?h?h.p(n,u):(h=q(n),h.c(),h.m(l,null)):h&&(h.d(1),h=null),u[0]&1024&&N(l,"hidden",!n[10]),n[5]?v?v.p(n,u):(v=G(n),v.c(),v.m(t,null)):v&&(v.d(1),v=null),u[0]&3&&m!==(m=J(`field-input ${n[1]=="outside"||!n[0]?"":"field-input-padding"}`)+" svelte-1bba0u2")&&r(d,"class",m),u[0]&8&&r(d,"name",n[3]),u[0]&4&&r(d,"id",n[2]),u[0]&512&&(d.disabled=n[9]),u[0]&32&&d.value!==n[5]&&K(d,n[5])},d(n){n&&(T(e),T(t),T(L),T(H)),f&&f.d(n),h&&h.d(),v&&v.d(),I=!1,_(S)}}}function Ie(i){let e,t,a;return{c(){e=w("div"),r(e,"class","drop svelte-1bba0u2")},m(b,c){$(b,e,c),t||(a=[g(e,"dragleave",i[21]),g(e,"dragend",i[22]),g(e,"drop",B(i[23]))],t=!0)},p:A,d(b){b&&T(e),t=!1,_(a)}}}function W(i){let e;return{c(){e=w("span"),r(e,"class","field-label svelte-1bba0u2"),N(e,"move",i[8]||i[5])},m(t,a){$(t,e,a),e.innerHTML=i[0]},p(t,a){a[0]&1&&(e.innerHTML=t[0]),a[0]&288&&N(e,"move",t[8]||t[5])},d(t){t&&T(e)}}}function q(i){let e,t,a,b;return{c(){e=w("img"),r(e,"class","preview svelte-1bba0u2"),r(e,"style",i[6]),O(e.src,t=i[10])||r(e,"src",t),r(e,"alt","preview")},m(c,o){$(c,e,o),a||(b=[$e(Te.call(null,e)),g(e,"click_outside",i[27])],a=!0)},p(c,o){o[0]&64&&r(e,"style",c[6]),o[0]&1024&&!O(e.src,t=c[10])&&r(e,"src",t)},d(c){c&&T(e),a=!1,_(b)}}}function G(i){let e,t,a,b;return{c(){e=w("div"),t=w("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',r(t,"class","svelte-1bba0u2"),r(e,"class","field-icon svelte-1bba0u2")},m(c,o){$(c,e,o),y(e,t),a||(b=g(t,"click",B(i[28])),a=!0)},p:A,d(c){c&&T(e),a=!1,b()}}}function Ye(i){let e,t,a,b,c,o=i[0]&&i[1]=="outside"&&U(i);function k(l,p){return l[12]?Ie:He}let z=k(i),x=z(i);return{c(){o&&o.c(),e=F(),t=w("div"),a=w("div"),x.c(),r(a,"class","field svelte-1bba0u2")},m(l,p){o&&o.m(l,p),$(l,e,p),$(l,t,p),y(t,a),x.m(a,null),i[33](a),b||(c=g(a,"dragover",B(i[34])),b=!0)},p(l,p){l[0]&&l[1]=="outside"?o?o.p(l,p):(o=U(l),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),z===(z=k(l))&&x?x.p(l,p):(x.d(1),x=z(l),x&&(x.c(),x.m(a,null)))},i:A,o:A,d(l){l&&(T(e),T(t)),o&&o.d(l),x.d(),i[33](null),b=!1,c()}}}function Le(i,e,t){let{label:a=""}=e,{labelType:b="inside"}=e,{attachedInternals:c}=e,{value:o=""}=e,{id:k=""}=e,{name:z=""}=e,x,l,p=!1,Y=!1,M="",L=null,H=!1,d=!1,m,{service:I}=e;const S=()=>m,f=ke();async function h(s){if(Y)try{t(5,m=await I.uploadFile(L,s))}catch(V){console.log(V)}return m}async function v(s){if(I&&I.maxSize&&s.size>I.maxSize){f("rejected",{file:s.name,code:"maxSize"});return}if(t(9,Y=!0),L=s,t(5,m=s.name),L.type.split("/")[0]==="image"){const V=await X(L);t(10,M=V)}else t(10,M="")}async function n(s){s.dataTransfer.files.length&&v(s.dataTransfer.files[0]),t(12,d=!1)}async function u(s){v(s.target.files[0])}async function R(){Y||((await(await fetch(m)).blob()).type.startsWith("image/")?t(10,M=m):t(10,M=""))}function D(){const s=l.getBoundingClientRect(),V=window.innerHeight-s.bottom,P=300;let C="";V<P?C=`bottom: ${window.innerHeight-s.top}px;right: ${s.left}px;`:C=`top:${s.bottom}px;right: ${s.left}px;`,t(6,x=C),t(11,H=!H)}const X=s=>new Promise((V,P)=>{const C=new FileReader;C.readAsDataURL(s),C.onload=()=>V(C.result),C.onerror=pe=>P(pe)}),Z=()=>t(12,d=!1),ee=()=>t(12,d=!1),te=s=>n(s),ie=()=>t(8,p=!0),ae=()=>t(8,p=!1),se=()=>D(),re=()=>t(11,H=!1),ne=()=>{t(9,Y=!1),t(10,M=""),t(5,m="")},le=()=>t(8,p=!0),oe=()=>t(8,p=!1),be=()=>R();function ce(){m=this.value,t(5,m),t(18,o)}function de(s){ze[s?"unshift":"push"](()=>{l=s,t(7,l)})}const ue=()=>t(12,d=!0);return i.$$set=s=>{"label"in s&&t(0,a=s.label),"labelType"in s&&t(1,b=s.labelType),"attachedInternals"in s&&t(17,c=s.attachedInternals),"value"in s&&t(18,o=s.value),"id"in s&&t(2,k=s.id),"name"in s&&t(3,z=s.name),"service"in s&&t(4,I=s.service)},i.$$.update=()=>{i.$$.dirty[0]&262144&&(t(5,m=o),o?R():t(10,M="")),i.$$.dirty[0]&131104&&(c.checkValidity(),c.setFormValue(m),f("value",{internalValue:m}))},[a,b,k,z,I,m,x,l,p,Y,M,H,d,n,u,R,D,c,o,S,h,Z,ee,te,ie,ae,se,re,ne,le,oe,be,ce,de,ue]}class Q extends he{constructor(e){super(),we(this,e,Le,Ye,ge,{label:0,labelType:1,attachedInternals:17,value:18,id:2,name:3,service:4,getValue:19,save:20},Me,[-1,-1])}get label(){return this.$$.ctx[0]}set label(e){this.$$set({label:e}),j()}get labelType(){return this.$$.ctx[1]}set labelType(e){this.$$set({labelType:e}),j()}get attachedInternals(){return this.$$.ctx[17]}set attachedInternals(e){this.$$set({attachedInternals:e}),j()}get value(){return this.$$.ctx[18]}set value(e){this.$$set({value:e}),j()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),j()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),j()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),j()}get getValue(){return this.$$.ctx[19]}get save(){return this.$$.ctx[20]}}try{customElements.define("jp-file-upload",xe(Q,{label:{},labelType:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,i=>{var e;return e=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},ve(e,"formAssociated",!0),e}));}catch{};export{Q as default};
