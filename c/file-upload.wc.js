var de=Object.defineProperty,fe=(i,e,t)=>e in i?de(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,me=(i,e,t)=>(fe(i,typeof e!="symbol"?e+"":e,t),t);import{c as pe,S as be,i as ue,f as L,s as ge,a as xe,e as v,d as a,g as I,h as w,o as h,J as S,n as B,j as Y,k as ve,I as he,b as V,G as U,m as A,K as D,r as _,L as E,M as we}from"./svelte.js";import"./index2.js";import{c as ke}from"./clickOutside.js";function ye(i){xe(i,"svelte-17tl2fg",`.field.svelte-17tl2fg.svelte-17tl2fg{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-moz-box-orient:horizontal;-moz-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;gap:0.75rem;background-color:var(--background-primary);border:1px solid var(--border-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem}.drop.svelte-17tl2fg.svelte-17tl2fg{position:absolute;left:0;right:0;top:0;bottom:0;border:2px dashed var(--primary-color)}.field.svelte-17tl2fg.svelte-17tl2fg:focus-within{border-color:var(--primary-color);-webkit-box-shadow:inset 0 0 0 1px var(--primary-color);-moz-box-shadow:inset 0 0 0 1px var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-17tl2fg.svelte-17tl2fg{position:absolute;top:50%;left:0.75rem;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);font-size:1rem;-webkit-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-o-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-webkit-transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;-o-transition:top 0.3s,
      font-size 0.3s,
      -o-transform 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -moz-transform 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s,
      -moz-transform 0.3s,
      -o-transform 0.3s}.field-label.move.svelte-17tl2fg.svelte-17tl2fg{top:0.25rem;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);font-size:0.75rem}.field-input.svelte-17tl2fg.svelte-17tl2fg{-webkit-box-flex:1;-webkit-flex:auto;-moz-box-flex:1;-ms-flex:auto;flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;padding:1rem 0 0 0;border:none;outline:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.field-upload.svelte-17tl2fg.svelte-17tl2fg{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-17tl2fg.svelte-17tl2fg{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.field-icons.svelte-17tl2fg.svelte-17tl2fg{z-index:1;position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:0.375rem}.field-icon.svelte-17tl2fg.svelte-17tl2fg{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:2rem;height:2rem;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;cursor:pointer}.field-icon.svelte-17tl2fg.svelte-17tl2fg:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-17tl2fg.svelte-17tl2fg{display:none}.field-icon-upload.svelte-17tl2fg.svelte-17tl2fg{position:relative;cursor:pointer}.field-icon.svelte-17tl2fg button.svelte-17tl2fg{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.preview-button.svelte-17tl2fg.svelte-17tl2fg{position:relative}.preview.svelte-17tl2fg.svelte-17tl2fg{z-index:1;position:absolute;bottom:100%;right:0;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);-webkit-border-radius:0.5rem;-moz-border-radius:0.5rem;border-radius:0.5rem;-webkit-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}`)}function ze(i){let e,t,n,o,r,m,d,u,k,x,y,$,j,M,z,c,T,F,g=i[1]&&G(i),p=i[10]&&J(i),b=i[0]&&K(i);return{c(){g&&g.c(),e=V(),t=v("div"),n=v("label"),o=v("input"),m=V(),d=U("svg"),u=U("path"),k=V(),x=v("div"),y=v("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',$=V(),p&&p.c(),j=V(),b&&b.c(),M=V(),z=v("span"),c=v("input"),a(o,"type","file"),a(o,"id",i[3]),a(o,"class","field-upload svelte-17tl2fg"),a(o,"accept",r=i[4]&&i[4].acceptedFiles),a(u,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),a(d,"xmlns","http://www.w3.org/2000/svg"),a(d,"height","1rem"),a(d,"viewBox","0 0 512 512"),a(n,"for",i[3]),a(n,"class","field-icon field-icon-upload svelte-17tl2fg"),a(y,"class","svelte-17tl2fg"),a(x,"class","field-icon preview-button svelte-17tl2fg"),A(x,"hidden",!i[9]),a(t,"class","field-icons svelte-17tl2fg"),a(c,"class","field-input svelte-17tl2fg"),a(c,"type","text"),a(c,"name",i[3]),a(c,"id",i[2]),c.disabled=i[8],a(z,"class","field-upload-container svelte-17tl2fg")},m(l,f){g&&g.m(l,f),I(l,e,f),I(l,t,f),w(t,n),w(n,o),w(n,m),w(n,d),w(d,u),w(t,k),w(t,x),w(x,y),w(x,$),p&&p.m(x,null),w(t,j),b&&b.m(t,null),I(l,M,f),I(l,z,f),w(z,c),D(c,i[0]),T||(F=[h(o,"change",i[13]),h(o,"focus",i[22]),h(o,"blur",i[23]),h(y,"click",S(i[24])),h(c,"focus",i[27]),h(c,"blur",i[28]),h(c,"change",i[29]),h(c,"input",i[30])],T=!0)},p(l,f){l[1]?g?g.p(l,f):(g=G(l),g.c(),g.m(e.parentNode,e)):g&&(g.d(1),g=null),f[0]&8&&a(o,"id",l[3]),f[0]&16&&r!==(r=l[4]&&l[4].acceptedFiles)&&a(o,"accept",r),f[0]&8&&a(n,"for",l[3]),l[10]?p?p.p(l,f):(p=J(l),p.c(),p.m(x,null)):p&&(p.d(1),p=null),f[0]&512&&A(x,"hidden",!l[9]),l[0]?b?b.p(l,f):(b=K(l),b.c(),b.m(t,null)):b&&(b.d(1),b=null),f[0]&8&&a(c,"name",l[3]),f[0]&4&&a(c,"id",l[2]),f[0]&256&&(c.disabled=l[8]),f[0]&1&&c.value!==l[0]&&D(c,l[0])},d(l){l&&(Y(e),Y(t),Y(M),Y(z)),g&&g.d(l),p&&p.d(),b&&b.d(),T=!1,_(F)}}}function $e(i){let e,t,n;return{c(){e=v("div"),a(e,"class","drop svelte-17tl2fg")},m(o,r){I(o,e,r),t||(n=[h(e,"dragleave",i[19]),h(e,"dragend",i[20]),h(e,"drop",S(i[21]))],t=!0)},p:B,d(o){o&&Y(e),t=!1,_(n)}}}function G(i){let e;return{c(){e=v("span"),a(e,"class","field-label svelte-17tl2fg"),A(e,"move",i[7]||i[0])},m(t,n){I(t,e,n),e.innerHTML=i[1]},p(t,n){n[0]&2&&(e.innerHTML=t[1]),n[0]&129&&A(e,"move",t[7]||t[0])},d(t){t&&Y(e)}}}function J(i){let e,t,n,o;return{c(){e=v("img"),a(e,"class","preview svelte-17tl2fg"),a(e,"style",i[5]),E(e.src,t=i[9])||a(e,"src",t),a(e,"alt","preview")},m(r,m){I(r,e,m),n||(o=[we(ke.call(null,e)),h(e,"click_outside",i[25])],n=!0)},p(r,m){m[0]&32&&a(e,"style",r[5]),m[0]&512&&!E(e.src,t=r[9])&&a(e,"src",t)},d(r){r&&Y(e),n=!1,_(o)}}}function K(i){let e,t,n,o;return{c(){e=v("div"),t=v("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',a(t,"class","svelte-17tl2fg"),a(e,"class","field-icon svelte-17tl2fg")},m(r,m){I(r,e,m),w(e,t),n||(o=h(t,"click",S(i[26])),n=!0)},p:B,d(r){r&&Y(e),n=!1,o()}}}function Ie(i){let e,t,n,o;function r(u,k){return u[11]?$e:ze}let m=r(i),d=m(i);return{c(){e=v("div"),t=v("div"),d.c(),a(t,"class","field svelte-17tl2fg")},m(u,k){I(u,e,k),w(e,t),d.m(t,null),i[31](t),n||(o=h(t,"dragover",S(i[32])),n=!0)},p(u,k){m===(m=r(u))&&d?d.p(u,k):(d.d(1),d=m(u),d&&(d.c(),d.m(t,null)))},i:B,o:B,d(u){u&&Y(e),d.d(),i[31](null),n=!1,o()}}}function Ye(i,e,t){let{label:n="Upload a file"}=e,{attachedInternals:o}=e,{value:r=""}=e,{id:m=""}=e,{name:d=""}=e,u,k,x=!1,y=!1,$="",j=null,M=!1,z=!1,{service:c}=e;const T=()=>r,F=ve();async function g(s){if(y)try{t(0,r=await c.uploadFile(j,s))}catch(C){console.log(C)}return r}async function p(s){if(c&&c.maxSize&&s.size>c.maxSize){F("rejected",{file:s.name,code:"maxSize"});return}if(t(8,y=!0),j=s,t(0,r=s.name),j.type.split("/")[0]==="image"){const C=await O(j);t(9,$=C)}else t(9,$="")}async function b(s){s.dataTransfer.files.length&&p(s.dataTransfer.files[0]),t(11,z=!1)}async function l(s){p(s.target.files[0])}async function f(){y||((await(await fetch(r)).blob()).type.startsWith("image/")?t(9,$=r):t(9,$=""))}function P(){const s=k.getBoundingClientRect(),C=window.innerHeight-s.bottom,R=300;let H="";C<R?H=`bottom: ${window.innerHeight-s.top}px;right: ${s.left}px;`:H=`top:${s.bottom}px;right: ${s.left}px;`,t(5,u=H),t(10,M=!M)}const O=s=>new Promise((C,R)=>{const H=new FileReader;H.readAsDataURL(s),H.onload=()=>C(H.result),H.onerror=ce=>R(ce)}),W=()=>t(11,z=!1),q=()=>t(11,z=!1),Q=s=>b(s),X=()=>t(7,x=!0),Z=()=>t(7,x=!1),ee=()=>P(),te=()=>t(10,M=!1),ie=()=>{t(8,y=!1),t(9,$=""),t(0,r="")},se=()=>t(7,x=!0),re=()=>t(7,x=!1),ae=()=>f();function ne(){r=this.value,t(0,r)}function le(s){he[s?"unshift":"push"](()=>{k=s,t(6,k)})}const oe=()=>t(11,z=!0);return i.$$set=s=>{"label"in s&&t(1,n=s.label),"attachedInternals"in s&&t(16,o=s.attachedInternals),"value"in s&&t(0,r=s.value),"id"in s&&t(2,m=s.id),"name"in s&&t(3,d=s.name),"service"in s&&t(4,c=s.service)},i.$$.update=()=>{i.$$.dirty[0]&65537&&(o.checkValidity(),o.setFormValue(r),F("value",{value:r}))},[r,n,m,d,c,u,k,x,y,$,M,z,b,l,f,P,o,T,g,W,q,Q,X,Z,ee,te,ie,se,re,ae,ne,le,oe]}class N extends be{constructor(e){super(),ue(this,e,Ye,Ie,ge,{label:1,attachedInternals:16,value:0,id:2,name:3,service:4,getValue:17,save:18},ye,[-1,-1])}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),L()}get attachedInternals(){return this.$$.ctx[16]}set attachedInternals(e){this.$$set({attachedInternals:e}),L()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),L()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),L()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),L()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),L()}get getValue(){return this.$$.ctx[17]}get save(){return this.$$.ctx[18]}}try{customElements.define("jp-file-upload",pe(N,{label:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,i=>{var e;return e=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},me(e,"formAssociated",!0),e}));}catch{};export{N as default};
