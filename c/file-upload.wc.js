var se=Object.defineProperty,ie=(a,e,t)=>e in a?se(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,re=(a,e,t)=>(ie(a,typeof e!="symbol"?e+"":e,t),t);import{c as le,S as ne,i as oe,f as L,s as de,a as ce,e as g,b as V,E as _,d as i,t as E,g as S,h as c,I as D,o as w,J as G,n as U,j as Y,K as J,k as ve,L as K,M as ue,G as pe}from"./svelte.js";import"./index2.js";import{c as he}from"./clickOutside.js";function fe(a){ce(a,"svelte-1djav24",`.field.svelte-1djav24.svelte-1djav24{position:relative;display:flex;flex-direction:row-reverse;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;user-select:none;gap:0.75rem;background-color:var(--background-primary);border:1px solid var(--border-primary);border-radius:0.25rem}.field.svelte-1djav24.svelte-1djav24:focus-within{border-color:var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-1djav24.svelte-1djav24{position:absolute;top:50%;left:0.75rem;transform:translateY(-50%);font-size:1rem;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s}.field-label.move.svelte-1djav24.svelte-1djav24{top:0.25rem;transform:translateY(0);font-size:0.75rem}.field-input.svelte-1djav24.svelte-1djav24{flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;text-overflow:ellipsis;padding:1rem 0 0 0;border:none;outline:none;border-radius:0}.field-upload.svelte-1djav24.svelte-1djav24{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-1djav24.svelte-1djav24{position:relative;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;flex:1}.field-icons.svelte-1djav24.svelte-1djav24{z-index:1;position:relative;display:flex;align-items:center;gap:0.375rem}.field-icon.svelte-1djav24.svelte-1djav24{display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;border-radius:50%;cursor:pointer}.field-icon.svelte-1djav24.svelte-1djav24:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-1djav24.svelte-1djav24{display:none}.field-icon-upload.svelte-1djav24.svelte-1djav24{position:relative;cursor:pointer}.field-icon.svelte-1djav24 button.svelte-1djav24{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.preview-button.svelte-1djav24.svelte-1djav24{position:relative}.preview.svelte-1djav24.svelte-1djav24{z-index:1;position:absolute;bottom:100%;right:0;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);border-radius:0.5rem;box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}`)}function O(a){let e,t,o,f;return{c(){e=g("img"),i(e,"class","preview svelte-1djav24"),i(e,"style",a[5]),K(e.src,t=a[9])||i(e,"src",t),i(e,"alt","preview")},m(s,d){S(s,e,d),o||(f=[ue(he.call(null,e)),w(e,"click_outside",a[21])],o=!0)},p(s,d){d&32&&i(e,"style",s[5]),d&512&&!K(e.src,t=s[9])&&i(e,"src",t)},d(s){s&&Y(e),o=!1,J(f)}}}function W(a){let e,t,o,f;return{c(){e=g("div"),t=g("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',i(t,"class","svelte-1djav24"),i(e,"class","field-icon svelte-1djav24")},m(s,d){S(s,e,d),c(e,t),o||(f=w(t,"click",G(a[22])),o=!0)},p:U,d(s){s&&Y(e),o=!1,f()}}}function me(a){let e,t,o,f,s,d,h,k,x,y,b,j,$,I,m,M,T,R,B,H,n,F,A,v=a[10]&&O(a),u=a[0]&&W(a);return{c(){e=g("div"),t=g("div"),o=g("span"),f=V(),s=g("div"),d=g("label"),h=g("input"),y=V(),b=_("svg"),j=_("path"),I=V(),m=g("div"),M=g("button"),M.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',T=V(),v&&v.c(),R=V(),u&&u.c(),B=V(),H=g("span"),n=g("input"),i(o,"class","field-label svelte-1djav24"),E(o,"move",a[7]||a[0]),i(h,"type","file"),i(h,"id",k=`${a[3]}`),i(h,"class","field-upload svelte-1djav24"),i(h,"accept",x=a[4]&&a[4].acceptedFiles),i(j,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),i(b,"xmlns","http://www.w3.org/2000/svg"),i(b,"height","1rem"),i(b,"viewBox","0 0 512 512"),i(d,"for",$=`${a[3]}`),i(d,"class","field-icon field-icon-upload svelte-1djav24"),i(M,"class","svelte-1djav24"),i(m,"class","field-icon preview-button svelte-1djav24"),E(m,"hidden",!a[9]),i(s,"class","field-icons svelte-1djav24"),i(n,"class","field-input svelte-1djav24"),i(n,"type","text"),i(n,"name",a[3]),i(n,"id",a[2]),n.disabled=a[8],i(H,"class","field-upload-container svelte-1djav24"),i(t,"class","field svelte-1djav24")},m(l,p){S(l,e,p),c(e,t),c(t,o),o.innerHTML=a[1],c(t,f),c(t,s),c(s,d),c(d,h),c(d,y),c(d,b),c(b,j),c(s,I),c(s,m),c(m,M),c(m,T),v&&v.m(m,null),c(s,R),u&&u.m(s,null),c(t,B),c(t,H),c(H,n),D(n,a[0]),a[27](t),F||(A=[w(h,"change",a[17]),w(h,"focus",a[18]),w(h,"blur",a[19]),w(M,"click",G(a[20])),w(n,"focus",a[23]),w(n,"blur",a[24]),w(n,"change",a[25]),w(n,"input",a[26])],F=!0)},p(l,[p]){p&2&&(o.innerHTML=l[1]),p&129&&E(o,"move",l[7]||l[0]),p&8&&k!==(k=`${l[3]}`)&&i(h,"id",k),p&16&&x!==(x=l[4]&&l[4].acceptedFiles)&&i(h,"accept",x),p&8&&$!==($=`${l[3]}`)&&i(d,"for",$),l[10]?v?v.p(l,p):(v=O(l),v.c(),v.m(m,null)):v&&(v.d(1),v=null),p&512&&E(m,"hidden",!l[9]),l[0]?u?u.p(l,p):(u=W(l),u.c(),u.m(s,null)):u&&(u.d(1),u=null),p&8&&i(n,"name",l[3]),p&4&&i(n,"id",l[2]),p&256&&(n.disabled=l[8]),p&1&&n.value!==l[0]&&D(n,l[0])},i:U,o:U,d(l){l&&Y(e),v&&v.d(),u&&u.d(),a[27](null),F=!1,J(A)}}}function ge(a,e,t){let{label:o="Upload a file"}=e,{attachedInternals:f}=e,{value:s=""}=e,{id:d=""}=e,{name:h=""}=e,k,x,y=!1,b=!1,j="",$=null,I=!1,{service:m}=e;const M=()=>s,T=ve();async function R(r){if(b)try{t(0,s=await m.uploadFile($,r))}catch(C){console.log(C)}return s}async function B(r){if(t(8,b=!0),t(0,s=r.target.value),$=r.target.files[0],$.type.split("/")[0]==="image"){const C=await F($);t(9,j=C)}else t(9,j="")}async function H(){b||((await(await fetch(s)).blob()).type.startsWith("image/")?t(9,j=s):t(9,j=""))}function n(){const r=x.getBoundingClientRect(),C=window.innerHeight-r.bottom,P=300;let z="";C<P?z=`
            bottom: ${window.innerHeight-r.top}px;
            right: ${r.left}px;
        `:z=`
            top: ${r.bottom}px;
            right: ${r.left}px;
        `,t(5,k=z),t(10,I=!I)}const F=r=>new Promise((C,P)=>{const z=new FileReader;z.readAsDataURL(r),z.onload=()=>C(z.result),z.onerror=ae=>P(ae)}),A=r=>{B(r)},v=()=>t(7,y=!0),u=()=>t(7,y=!1),l=()=>n(),p=()=>t(10,I=!1),N=()=>{t(8,b=!1),t(9,j=""),t(0,s="")},Q=()=>t(7,y=!0),X=()=>t(7,y=!1),Z=()=>H();function ee(){s=this.value,t(0,s)}function te(r){pe[r?"unshift":"push"](()=>{x=r,t(6,x)})}return a.$$set=r=>{"label"in r&&t(1,o=r.label),"attachedInternals"in r&&t(14,f=r.attachedInternals),"value"in r&&t(0,s=r.value),"id"in r&&t(2,d=r.id),"name"in r&&t(3,h=r.name),"service"in r&&t(4,m=r.service)},a.$$.update=()=>{a.$$.dirty&16385&&(f.checkValidity(),f.setFormValue(s),T("value",{value:s}))},[s,o,d,h,m,k,x,y,b,j,I,B,H,n,f,M,R,A,v,u,l,p,N,Q,X,Z,ee,te]}class q extends ne{constructor(e){super(),oe(this,e,ge,me,de,{label:1,attachedInternals:14,value:0,id:2,name:3,service:4,getValue:15,save:16},fe)}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),L()}get attachedInternals(){return this.$$.ctx[14]}set attachedInternals(e){this.$$set({attachedInternals:e}),L()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),L()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),L()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),L()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),L()}get getValue(){return this.$$.ctx[15]}get save(){return this.$$.ctx[16]}}try{customElements.define("jp-file-upload",le(q,{label:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,a=>{var e;return e=class extends a{constructor(){super(),this.attachedInternals=this.attachInternals()}},re(e,"formAssociated",!0),e}));}catch{};export{q as default};
