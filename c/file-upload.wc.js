var ce=Object.defineProperty,be=(i,t,e)=>t in i?ce(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,me=(i,t,e)=>(be(i,typeof t!="symbol"?t+"":t,e),e);import{c as he,S as pe,i as ve,f as M,s as ue,a as fe,m as Y,e as k,C as xe,d as n,g as $,r as T,v as z,y as C,z as j,l as I,w as we,I as _,W as ge,E as A,x as ye,n as P,p as F,a0 as W,L as D}from"./svelte.js";import"./index2.js";import{c as ke}from"./clickOutside.js";function ze(i){fe(i,"svelte-htbhvm",`.field.svelte-htbhvm.svelte-htbhvm{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-moz-box-orient:horizontal;-moz-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;gap:0.75rem;background-color:transparent;border:1px solid var(--border-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem}.drop.svelte-htbhvm.svelte-htbhvm{position:absolute;left:0;right:0;top:0;bottom:0;border:2px dashed var(--primary-color)}.field.svelte-htbhvm.svelte-htbhvm:focus-within{border-color:var(--primary-color);-webkit-box-shadow:inset 0 0 0 1px var(--primary-color);-moz-box-shadow:inset 0 0 0 1px var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-htbhvm.svelte-htbhvm{position:absolute;top:50%;left:0.75rem;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);font-size:1rem;-webkit-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-o-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-webkit-transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;-o-transition:top 0.3s,
      font-size 0.3s,
      -o-transform 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -moz-transform 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s,
      -moz-transform 0.3s,
      -o-transform 0.3s}.field-label.move.svelte-htbhvm.svelte-htbhvm{top:0.25rem;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);font-size:0.75rem}.field-input.svelte-htbhvm.svelte-htbhvm{-webkit-box-flex:1;-webkit-flex:auto;-moz-box-flex:1;-ms-flex:auto;flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border:none;outline:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.field-input-padding.svelte-htbhvm.svelte-htbhvm{padding:1rem 0 0 0}.field-upload.svelte-htbhvm.svelte-htbhvm{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-htbhvm.svelte-htbhvm{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.field-icons.svelte-htbhvm.svelte-htbhvm{z-index:1;position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:0.375rem}.field-icon.svelte-htbhvm.svelte-htbhvm{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:2rem;height:2rem;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;cursor:pointer}.field-icon.svelte-htbhvm.svelte-htbhvm:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-htbhvm.svelte-htbhvm{display:none}.field-icon-upload.svelte-htbhvm.svelte-htbhvm{position:relative;cursor:pointer}.field-icon.svelte-htbhvm button.svelte-htbhvm{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.preview-button.svelte-htbhvm.svelte-htbhvm{position:relative}.preview.svelte-htbhvm.svelte-htbhvm{z-index:1;position:absolute;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);-webkit-border-radius:0.5rem;-moz-border-radius:0.5rem;border-radius:0.5rem;-webkit-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}.overlay.svelte-htbhvm.svelte-htbhvm{z-index:100;position:fixed;top:0;left:0;width:100vw;height:100vh}`)}function E(i){let t;return{c(){t=k("div"),n(t,"class","label")},m(e,r){$(e,t,r),t.innerHTML=i[0]},p(e,r){r[0]&1&&(t.innerHTML=e[0])},d(e){e&&I(t)}}}function $e(i){let t,e,r,l,d,u,w,h,L,g,c,b,a,m,p,H,x,V,v=i[0]&&i[1]=="inside"&&O(i),y=i[5]&&U(i);return{c(){v&&v.c(),t=Y(),e=k("div"),r=k("label"),l=k("input"),u=Y(),w=P("svg"),h=P("path"),L=Y(),g=k("div"),c=k("button"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',b=Y(),y&&y.c(),a=Y(),m=k("span"),p=k("input"),n(l,"type","file"),n(l,"id",i[3]),n(l,"class","field-upload svelte-htbhvm"),n(l,"accept",d=i[4]&&i[4].acceptedFiles),n(h,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),n(w,"xmlns","http://www.w3.org/2000/svg"),n(w,"height","1rem"),n(w,"viewBox","0 0 512 512"),n(r,"for",i[3]),n(r,"class","field-icon field-icon-upload svelte-htbhvm"),n(c,"type","button"),n(c,"class","svelte-htbhvm"),n(g,"class","field-icon preview-button svelte-htbhvm"),F(g,"hidden",!i[9]),n(e,"class","field-icons svelte-htbhvm"),n(p,"class",H=W(`field-input ${i[1]=="outside"||!i[0]?"":"field-input-padding"}`)+" svelte-htbhvm"),n(p,"type","text"),n(p,"name",i[3]),n(p,"id",i[2]),p.disabled=i[8],n(m,"class","field-upload-container svelte-htbhvm")},m(o,f){v&&v.m(o,f),$(o,t,f),$(o,e,f),T(e,r),T(r,l),T(r,u),T(r,w),T(w,h),T(e,L),T(e,g),T(g,c),T(e,b),y&&y.m(e,null),$(o,a,f),$(o,m,f),T(m,p),D(p,i[5]),x||(V=[z(l,"change",i[14]),z(l,"focus",i[24]),z(l,"blur",i[25]),z(c,"click",C(i[26])),z(p,"focus",i[28]),z(p,"blur",i[29]),z(p,"change",i[30]),z(p,"input",i[31])],x=!0)},p(o,f){o[0]&&o[1]=="inside"?v?v.p(o,f):(v=O(o),v.c(),v.m(t.parentNode,t)):v&&(v.d(1),v=null),f[0]&8&&n(l,"id",o[3]),f[0]&16&&d!==(d=o[4]&&o[4].acceptedFiles)&&n(l,"accept",d),f[0]&8&&n(r,"for",o[3]),f[0]&512&&F(g,"hidden",!o[9]),o[5]?y?y.p(o,f):(y=U(o),y.c(),y.m(e,null)):y&&(y.d(1),y=null),f[0]&3&&H!==(H=W(`field-input ${o[1]=="outside"||!o[0]?"":"field-input-padding"}`)+" svelte-htbhvm")&&n(p,"class",H),f[0]&8&&n(p,"name",o[3]),f[0]&4&&n(p,"id",o[2]),f[0]&256&&(p.disabled=o[8]),f[0]&32&&p.value!==o[5]&&D(p,o[5])},d(o){o&&(I(t),I(e),I(a),I(m)),v&&v.d(o),y&&y.d(),x=!1,A(V)}}}function Te(i){let t,e,r;return{c(){t=k("div"),n(t,"class","drop svelte-htbhvm")},m(l,d){$(l,t,d),e||(r=[z(t,"dragleave",i[21]),z(t,"dragend",i[22]),z(t,"drop",C(i[23]))],e=!0)},p:j,d(l){l&&I(t),e=!1,A(r)}}}function O(i){let t;return{c(){t=k("span"),n(t,"class","field-label svelte-htbhvm"),F(t,"move",i[7]||i[5])},m(e,r){$(e,t,r),t.innerHTML=i[0]},p(e,r){r[0]&1&&(t.innerHTML=e[0]),r[0]&160&&F(t,"move",e[7]||e[5])},d(e){e&&I(t)}}}function U(i){let t,e,r,l;return{c(){t=k("div"),e=k("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',n(e,"type","button"),n(e,"class","svelte-htbhvm"),n(t,"class","field-icon svelte-htbhvm")},m(d,u){$(d,t,u),T(t,e),r||(l=z(e,"click",C(i[27])),r=!0)},p:j,d(d){d&&I(t),r=!1,l()}}}function q(i){let t,e,r,l,d;return{c(){t=k("div"),e=k("img"),n(e,"class","preview svelte-htbhvm"),n(e,"style",i[12]),_(e.src,r=i[9])||n(e,"src",r),n(e,"alt","preview"),n(t,"class","overlay svelte-htbhvm")},m(u,w){$(u,t,w),T(t,e),l||(d=[ge(ke.call(null,e)),z(e,"click_outside",i[34])],l=!0)},p(u,w){w[0]&512&&!_(e.src,r=u[9])&&n(e,"src",r)},d(u){u&&I(t),l=!1,A(d)}}}function Ie(i){let t,e,r,l,d,u,w,h=i[0]&&i[1]=="outside"&&E(i);function L(a,m){return a[11]?Te:$e}let g=L(i),c=g(i),b=i[10]&&q(i);return{c(){h&&h.c(),t=Y(),e=k("div"),r=k("div"),c.c(),l=Y(),b&&b.c(),d=xe(),n(r,"class","field svelte-htbhvm")},m(a,m){h&&h.m(a,m),$(a,t,m),$(a,e,m),T(e,r),c.m(r,null),i[32](r),$(a,l,m),b&&b.m(a,m),$(a,d,m),u||(w=z(r,"dragover",C(i[33])),u=!0)},p(a,m){a[0]&&a[1]=="outside"?h?h.p(a,m):(h=E(a),h.c(),h.m(t.parentNode,t)):h&&(h.d(1),h=null),g===(g=L(a))&&c?c.p(a,m):(c.d(1),c=g(a),c&&(c.c(),c.m(r,null))),a[10]?b?b.p(a,m):(b=q(a),b.c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},i:j,o:j,d(a){a&&(I(t),I(e),I(l),I(d)),h&&h.d(a),c.d(),i[32](null),b&&b.d(a),u=!1,w()}}}function He(i){return new Promise((t,e)=>{const r=new FileReader;r.readAsDataURL(i),r.onload=()=>t(r.result),r.onerror=l=>e(l)})}function Le(i,t,e){let{label:r=""}=t,{labelType:l="inside"}=t,{attachedInternals:d}=t,{value:u=""}=t,{id:w=""}=t,{name:h=""}=t,L,g,c=!1,b=!1,a="",m=null,p=!1,H=!1,x;const V=we();let{service:v}=t;const y=()=>x;async function o(s){if(b)try{e(5,x=await v.uploadFile(m,s))}catch(S){console.log(S)}return x}async function f(s){if(v&&v.maxSize&&s.size>v.maxSize){V("rejected",{file:s.name,code:"maxSize"});return}if(e(8,b=!0),m=s,e(5,x=s.name),m.type.split("/")[0]==="image"){const S=await He(m);e(9,a=S)}else e(9,a="")}async function N(s){s.dataTransfer.files.length&&f(s.dataTransfer.files[0]),e(11,H=!1)}async function J(s){f(s.target.files[0])}async function B(){b||((await(await fetch(x)).blob()).type.startsWith("image/")?e(9,a=x):e(9,a=""))}function R(){const s=g.getBoundingClientRect();window.innerHeight-s.bottom<300?(`${s.width}`,window.innerHeight-s.top,s.width-300):(`${s.width}${s.bottom}`,s.width-300)}const K=()=>e(11,H=!1),Q=()=>e(11,H=!1),X=s=>N(s),Z=()=>e(7,c=!0),ee=()=>e(7,c=!1),te=()=>R(),ie=()=>{e(8,b=!1),e(9,a=""),e(5,x="")},re=()=>e(7,c=!0),se=()=>e(7,c=!1),ne=()=>B();function ae(){x=this.value,e(5,x),e(18,u)}function le(s){ye[s?"unshift":"push"](()=>{g=s,e(6,g)})}const oe=()=>e(11,H=!0),de=()=>e(10,p=!1);return i.$$set=s=>{"label"in s&&e(0,r=s.label),"labelType"in s&&e(1,l=s.labelType),"attachedInternals"in s&&e(17,d=s.attachedInternals),"value"in s&&e(18,u=s.value),"id"in s&&e(2,w=s.id),"name"in s&&e(3,h=s.name),"service"in s&&e(4,v=s.service)},i.$$.update=()=>{i.$$.dirty[0]&262144&&(e(5,x=u),u?B():e(9,a="")),i.$$.dirty[0]&131104&&(d.checkValidity(),d.setFormValue(x),V("value",{internalValue:x}))},[r,l,w,h,v,x,g,c,b,a,p,H,L,N,J,B,R,d,u,y,o,K,Q,X,Z,ee,te,ie,re,se,ne,ae,le,oe,de]}class G extends pe{constructor(t){super(),ve(this,t,Le,Ie,ue,{label:0,labelType:1,attachedInternals:17,value:18,id:2,name:3,service:4,getValue:19,save:20},ze,[-1,-1])}get label(){return this.$$.ctx[0]}set label(t){this.$$set({label:t}),M()}get labelType(){return this.$$.ctx[1]}set labelType(t){this.$$set({labelType:t}),M()}get attachedInternals(){return this.$$.ctx[17]}set attachedInternals(t){this.$$set({attachedInternals:t}),M()}get value(){return this.$$.ctx[18]}set value(t){this.$$set({value:t}),M()}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),M()}get name(){return this.$$.ctx[3]}set name(t){this.$$set({name:t}),M()}get service(){return this.$$.ctx[4]}set service(t){this.$$set({service:t}),M()}get getValue(){return this.$$.ctx[19]}get save(){return this.$$.ctx[20]}}try{customElements.define("jp-file-upload",he(G,{label:{},labelType:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,i=>{var t;return t=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},me(t,"formAssociated",!0),t}));}catch{};export{G as default};
