var be=Object.defineProperty,me=(i,t,e)=>t in i?be(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,ue=(i,t,e)=>(me(i,typeof t!="symbol"?t+"":t,e),e);import{c as ve,S as ze,i as he,f as Y,s as we,a as ge,b as V,e as y,l as ye,d as n,g as j,h as $,o as k,z as B,n as F,j as T,k as ke,L as D,M as je,u as R,B as $e,J as E,m as A,N as O,A as U}from"./svelte.js";import"./index2.js";import{c as Te}from"./clickOutside.js";function Me(i){ge(i,"svelte-zfjx2c",`.field.svelte-zfjx2c.svelte-zfjx2c{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-moz-box-orient:horizontal;-moz-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;gap:0.75rem;background-color:transparent;border:1px solid var(--border-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem}.drop.svelte-zfjx2c.svelte-zfjx2c{position:absolute;left:0;right:0;top:0;bottom:0;border:2px dashed var(--primary-color)}.field.svelte-zfjx2c.svelte-zfjx2c:focus-within{border-color:var(--primary-color);-webkit-box-shadow:inset 0 0 0 1px var(--primary-color);-moz-box-shadow:inset 0 0 0 1px var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-zfjx2c.svelte-zfjx2c{position:absolute;top:50%;left:0.75rem;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);font-size:1rem;-webkit-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-o-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-webkit-transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;-o-transition:top 0.3s,
      font-size 0.3s,
      -o-transform 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -moz-transform 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s,
      -moz-transform 0.3s,
      -o-transform 0.3s}.field-label.move.svelte-zfjx2c.svelte-zfjx2c{top:0.25rem;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);font-size:0.75rem}.field-input.svelte-zfjx2c.svelte-zfjx2c{-webkit-box-flex:1;-webkit-flex:auto;-moz-box-flex:1;-ms-flex:auto;flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border:none;outline:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.field-input-padding.svelte-zfjx2c.svelte-zfjx2c{padding:1rem 0 0 0}.field-upload.svelte-zfjx2c.svelte-zfjx2c{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-zfjx2c.svelte-zfjx2c{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.field-icons.svelte-zfjx2c.svelte-zfjx2c{z-index:1;position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:0.375rem}.field-icon.svelte-zfjx2c.svelte-zfjx2c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:2rem;height:2rem;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;cursor:pointer}.field-icon.svelte-zfjx2c.svelte-zfjx2c:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-zfjx2c.svelte-zfjx2c{display:none}.field-icon-upload.svelte-zfjx2c.svelte-zfjx2c{position:relative;cursor:pointer}.field-icon.svelte-zfjx2c button.svelte-zfjx2c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.preview-button.svelte-zfjx2c.svelte-zfjx2c{position:relative}.preview.svelte-zfjx2c.svelte-zfjx2c{z-index:1;position:absolute;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);-webkit-border-radius:0.5rem;-moz-border-radius:0.5rem;border-radius:0.5rem;-webkit-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}.overlay.svelte-zfjx2c.svelte-zfjx2c{z-index:100;position:fixed;top:0;left:0;width:100vw;height:100vh}`)}function W(i){let t;return{c(){t=y("div"),n(t,"class","label")},m(e,a){j(e,t,a),t.innerHTML=i[0]},p(e,a){a[0]&1&&(t.innerHTML=e[0])},d(e){e&&T(t)}}}function He(i){let t,e,a,o,c,b,z,m,H,w,d,f,l,x,p,M,h,C,u=i[0]&&i[1]=="inside"&&q(i),g=i[5]&&G(i);return{c(){u&&u.c(),t=V(),e=y("div"),a=y("label"),o=y("input"),b=V(),z=E("svg"),m=E("path"),H=V(),w=y("div"),d=y("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',f=V(),g&&g.c(),l=V(),x=y("span"),p=y("input"),n(o,"type","file"),n(o,"id",i[3]),n(o,"class","field-upload svelte-zfjx2c"),n(o,"accept",c=i[4]&&i[4].acceptedFiles),n(m,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),n(z,"xmlns","http://www.w3.org/2000/svg"),n(z,"height","1rem"),n(z,"viewBox","0 0 512 512"),n(a,"for",i[3]),n(a,"class","field-icon field-icon-upload svelte-zfjx2c"),n(d,"type","button"),n(d,"class","svelte-zfjx2c"),n(w,"class","field-icon preview-button svelte-zfjx2c"),A(w,"hidden",!i[10]),n(e,"class","field-icons svelte-zfjx2c"),n(p,"class",M=O(`field-input ${i[1]=="outside"||!i[0]?"":"field-input-padding"}`)+" svelte-zfjx2c"),n(p,"type","text"),n(p,"name",i[3]),n(p,"id",i[2]),p.disabled=i[9],n(x,"class","field-upload-container svelte-zfjx2c")},m(r,v){u&&u.m(r,v),j(r,t,v),j(r,e,v),$(e,a),$(a,o),$(a,b),$(a,z),$(z,m),$(e,H),$(e,w),$(w,d),$(e,f),g&&g.m(e,null),j(r,l,v),j(r,x,v),$(x,p),U(p,i[5]),h||(C=[k(o,"change",i[14]),k(o,"focus",i[24]),k(o,"blur",i[25]),k(d,"click",B(i[26])),k(p,"focus",i[28]),k(p,"blur",i[29]),k(p,"change",i[30]),k(p,"input",i[31])],h=!0)},p(r,v){r[0]&&r[1]=="inside"?u?u.p(r,v):(u=q(r),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),v[0]&8&&n(o,"id",r[3]),v[0]&16&&c!==(c=r[4]&&r[4].acceptedFiles)&&n(o,"accept",c),v[0]&8&&n(a,"for",r[3]),v[0]&1024&&A(w,"hidden",!r[10]),r[5]?g?g.p(r,v):(g=G(r),g.c(),g.m(e,null)):g&&(g.d(1),g=null),v[0]&3&&M!==(M=O(`field-input ${r[1]=="outside"||!r[0]?"":"field-input-padding"}`)+" svelte-zfjx2c")&&n(p,"class",M),v[0]&8&&n(p,"name",r[3]),v[0]&4&&n(p,"id",r[2]),v[0]&512&&(p.disabled=r[9]),v[0]&32&&p.value!==r[5]&&U(p,r[5])},d(r){r&&(T(t),T(e),T(l),T(x)),u&&u.d(r),g&&g.d(),h=!1,R(C)}}}function Ie(i){let t,e,a;return{c(){t=y("div"),n(t,"class","drop svelte-zfjx2c")},m(o,c){j(o,t,c),e||(a=[k(t,"dragleave",i[21]),k(t,"dragend",i[22]),k(t,"drop",B(i[23]))],e=!0)},p:F,d(o){o&&T(t),e=!1,R(a)}}}function q(i){let t;return{c(){t=y("span"),n(t,"class","field-label svelte-zfjx2c"),A(t,"move",i[8]||i[5])},m(e,a){j(e,t,a),t.innerHTML=i[0]},p(e,a){a[0]&1&&(t.innerHTML=e[0]),a[0]&288&&A(t,"move",e[8]||e[5])},d(e){e&&T(t)}}}function G(i){let t,e,a,o;return{c(){t=y("div"),e=y("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',n(e,"type","button"),n(e,"class","svelte-zfjx2c"),n(t,"class","field-icon svelte-zfjx2c")},m(c,b){j(c,t,b),$(t,e),a||(o=k(e,"click",B(i[27])),a=!0)},p:F,d(c){c&&T(t),a=!1,o()}}}function J(i){let t,e,a,o,c;return{c(){t=y("div"),e=y("img"),n(e,"class","preview svelte-zfjx2c"),n(e,"style",i[6]),D(e.src,a=i[10])||n(e,"src",a),n(e,"alt","preview"),n(t,"class","overlay svelte-zfjx2c")},m(b,z){j(b,t,z),$(t,e),o||(c=[je(Te.call(null,e)),k(e,"click_outside",i[34])],o=!0)},p(b,z){z[0]&64&&n(e,"style",b[6]),z[0]&1024&&!D(e.src,a=b[10])&&n(e,"src",a)},d(b){b&&T(t),o=!1,R(c)}}}function Le(i){let t,e,a,o,c,b,z,m=i[0]&&i[1]=="outside"&&W(i);function H(l,x){return l[12]?Ie:He}let w=H(i),d=w(i),f=i[11]&&J(i);return{c(){m&&m.c(),t=V(),e=y("div"),a=y("div"),d.c(),o=V(),f&&f.c(),c=ye(),n(a,"class","field svelte-zfjx2c")},m(l,x){m&&m.m(l,x),j(l,t,x),j(l,e,x),$(e,a),d.m(a,null),i[32](a),j(l,o,x),f&&f.m(l,x),j(l,c,x),b||(z=k(a,"dragover",B(i[33])),b=!0)},p(l,x){l[0]&&l[1]=="outside"?m?m.p(l,x):(m=W(l),m.c(),m.m(t.parentNode,t)):m&&(m.d(1),m=null),w===(w=H(l))&&d?d.p(l,x):(d.d(1),d=w(l),d&&(d.c(),d.m(a,null))),l[11]?f?f.p(l,x):(f=J(l),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},i:F,o:F,d(l){l&&(T(t),T(e),T(o),T(c)),m&&m.d(l),d.d(),i[32](null),f&&f.d(l),b=!1,z()}}}function Ye(i,t,e){let{label:a=""}=t,{labelType:o="inside"}=t,{attachedInternals:c}=t,{value:b=""}=t,{id:z=""}=t,{name:m=""}=t,H,w,d=!1,f=!1,l="",x=null,p=!1,M=!1,h;const C=ke();let{service:u}=t;const g=()=>h;async function r(s){if(f)try{e(5,h=await u.uploadFile(x,s))}catch(L){console.log(L)}return h}async function v(s){if(u&&u.maxSize&&s.size>u.maxSize){C("rejected",{file:s.name,code:"maxSize"});return}if(e(9,f=!0),x=s,e(5,h=s.name),x.type.split("/")[0]==="image"){const L=await X(x);e(10,l=L)}else e(10,l="")}async function P(s){s.dataTransfer.files.length&&v(s.dataTransfer.files[0]),e(12,M=!1)}async function Q(s){v(s.target.files[0])}async function N(){f||((await(await fetch(h)).blob()).type.startsWith("image/")?e(10,l=h):e(10,l=""))}function _(){const s=w.getBoundingClientRect(),L=window.innerHeight-s.bottom,S=300;let I="";L<S?I=`
        width: ${s.width}px;
        bottom: ${window.innerHeight-s.top}px;
        left: ${s.width-300}px;
      `:I=`
        width: ${s.width}px;
        top: ${s.bottom}px;
        left: ${s.width-300}px;
      `,e(6,H=I),e(11,p=!p)}const X=s=>new Promise((L,S)=>{const I=new FileReader;I.readAsDataURL(s),I.onload=()=>L(I.result),I.onerror=xe=>S(xe)}),Z=()=>e(12,M=!1),ee=()=>e(12,M=!1),te=s=>P(s),ie=()=>e(8,d=!0),se=()=>e(8,d=!1),ae=()=>_(),ne=()=>{e(9,f=!1),e(10,l=""),e(5,h="")},le=()=>e(8,d=!0),re=()=>e(8,d=!1),oe=()=>N();function ce(){h=this.value,e(5,h),e(18,b)}function de(s){$e[s?"unshift":"push"](()=>{w=s,e(7,w)})}const fe=()=>e(12,M=!0),pe=()=>e(11,p=!1);return i.$$set=s=>{"label"in s&&e(0,a=s.label),"labelType"in s&&e(1,o=s.labelType),"attachedInternals"in s&&e(17,c=s.attachedInternals),"value"in s&&e(18,b=s.value),"id"in s&&e(2,z=s.id),"name"in s&&e(3,m=s.name),"service"in s&&e(4,u=s.service)},i.$$.update=()=>{i.$$.dirty[0]&262144&&(e(5,h=b),b?N():e(10,l="")),i.$$.dirty[0]&131104&&(c.checkValidity(),c.setFormValue(h),C("value",{internalValue:h}))},[a,o,z,m,u,h,H,w,d,f,l,p,M,P,Q,N,_,c,b,g,r,Z,ee,te,ie,se,ae,ne,le,re,oe,ce,de,fe,pe]}class K extends ze{constructor(t){super(),he(this,t,Ye,Le,we,{label:0,labelType:1,attachedInternals:17,value:18,id:2,name:3,service:4,getValue:19,save:20},Me,[-1,-1])}get label(){return this.$$.ctx[0]}set label(t){this.$$set({label:t}),Y()}get labelType(){return this.$$.ctx[1]}set labelType(t){this.$$set({labelType:t}),Y()}get attachedInternals(){return this.$$.ctx[17]}set attachedInternals(t){this.$$set({attachedInternals:t}),Y()}get value(){return this.$$.ctx[18]}set value(t){this.$$set({value:t}),Y()}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),Y()}get name(){return this.$$.ctx[3]}set name(t){this.$$set({name:t}),Y()}get service(){return this.$$.ctx[4]}set service(t){this.$$set({service:t}),Y()}get getValue(){return this.$$.ctx[19]}get save(){return this.$$.ctx[20]}}try{customElements.define("jp-file-upload",ve(K,{label:{},labelType:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,i=>{var t;return t=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},ue(t,"formAssociated",!0),t}));}catch{};export{K as default};
