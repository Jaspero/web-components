var ve=Object.defineProperty,ue=(i,t,e)=>t in i?ve(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,fe=(i,t,e)=>(ue(i,typeof t!="symbol"?t+"":t,e),e);import{c as xe,S as we,i as ge,f as M,s as ye,a as ke,m as Y,e as g,C as ze,d as n,g as z,r as $,v as k,y as C,z as V,l as T,w as $e,I as R,W as Te,E as S,x as E,n as P,p as j,a0 as W,L as D}from"./svelte.js";import"./index2.js";import{c as He}from"./clickOutside.js";function Ie(i){ke(i,"svelte-htbhvm",`.field.svelte-htbhvm.svelte-htbhvm{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-moz-box-orient:horizontal;-moz-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;gap:0.75rem;background-color:transparent;border:1px solid var(--border-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem}.drop.svelte-htbhvm.svelte-htbhvm{position:absolute;left:0;right:0;top:0;bottom:0;border:2px dashed var(--primary-color)}.field.svelte-htbhvm.svelte-htbhvm:focus-within{border-color:var(--primary-color);-webkit-box-shadow:inset 0 0 0 1px var(--primary-color);-moz-box-shadow:inset 0 0 0 1px var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-htbhvm.svelte-htbhvm{position:absolute;top:50%;left:0.75rem;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-o-transform:translateY(-50%);transform:translateY(-50%);font-size:1rem;-webkit-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-o-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;-webkit-transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;transition:top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s;-o-transition:top 0.3s,
      font-size 0.3s,
      -o-transform 0.3s;-moz-transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -moz-transform 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s,
      -webkit-transform 0.3s,
      -moz-transform 0.3s,
      -o-transform 0.3s}.field-label.move.svelte-htbhvm.svelte-htbhvm{top:0.25rem;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);font-size:0.75rem}.field-input.svelte-htbhvm.svelte-htbhvm{-webkit-box-flex:1;-webkit-flex:auto;-moz-box-flex:1;-ms-flex:auto;flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border:none;outline:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.field-input-padding.svelte-htbhvm.svelte-htbhvm{padding:1rem 0 0 0}.field-upload.svelte-htbhvm.svelte-htbhvm{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-htbhvm.svelte-htbhvm{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.field-icons.svelte-htbhvm.svelte-htbhvm{z-index:1;position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:0.375rem}.field-icon.svelte-htbhvm.svelte-htbhvm{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:2rem;height:2rem;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;cursor:pointer}.field-icon.svelte-htbhvm.svelte-htbhvm:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-htbhvm.svelte-htbhvm{display:none}.field-icon-upload.svelte-htbhvm.svelte-htbhvm{position:relative;cursor:pointer}.field-icon.svelte-htbhvm button.svelte-htbhvm{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.preview-button.svelte-htbhvm.svelte-htbhvm{position:relative}.preview.svelte-htbhvm.svelte-htbhvm{z-index:1;position:absolute;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);-webkit-border-radius:0.5rem;-moz-border-radius:0.5rem;border-radius:0.5rem;-webkit-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}.overlay.svelte-htbhvm.svelte-htbhvm{z-index:100;position:fixed;top:0;left:0;width:100vw;height:100vh}`)}function O(i){let t;return{c(){t=g("div"),n(t,"class","label")},m(e,r){z(e,t,r),t.innerHTML=i[14]},p(e,r){r[0]&16384&&(t.innerHTML=e[14])},d(e){e&&T(t)}}}function Le(i){let t,e,r,a,b,f,x,v,I,y,u,p,l,m,c,H,q,L,d=i[0]&&i[1]=="inside"&&U(i),w=i[5]&&G(i);return{c(){d&&d.c(),t=Y(),e=g("div"),r=g("label"),a=g("input"),f=Y(),x=P("svg"),v=P("path"),I=Y(),y=g("div"),u=g("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1rem" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',p=Y(),w&&w.c(),l=Y(),m=g("span"),c=g("input"),n(a,"type","file"),n(a,"id",i[3]),n(a,"class","field-upload svelte-htbhvm"),n(a,"accept",b=i[4]&&i[4].acceptedFiles),n(v,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),n(x,"xmlns","http://www.w3.org/2000/svg"),n(x,"height","1rem"),n(x,"viewBox","0 0 512 512"),n(r,"for",i[3]),n(r,"class","field-icon field-icon-upload svelte-htbhvm"),n(u,"type","button"),n(u,"class","svelte-htbhvm"),n(y,"class","field-icon preview-button svelte-htbhvm"),j(y,"hidden",!i[10]),n(e,"class","field-icons svelte-htbhvm"),n(c,"class",H=W(`field-input ${i[1]=="outside"||!i[0]?"":"field-input-padding"}`)+" svelte-htbhvm"),n(c,"type","text"),n(c,"name",i[3]),n(c,"id",i[2]),c.disabled=i[9],n(m,"class","field-upload-container svelte-htbhvm")},m(o,h){d&&d.m(o,h),z(o,t,h),z(o,e,h),$(e,r),$(r,a),i[27](a),$(r,f),$(r,x),$(x,v),$(e,I),$(e,y),$(y,u),$(e,p),w&&w.m(e,null),z(o,l,h),z(o,m,h),$(m,c),D(c,i[5]),q||(L=[k(a,"change",i[16]),k(a,"focus",i[28]),k(a,"blur",i[29]),k(u,"click",C(i[30])),k(c,"focus",i[32]),k(c,"blur",i[33]),k(c,"change",i[34]),k(c,"input",i[35])],q=!0)},p(o,h){o[0]&&o[1]=="inside"?d?d.p(o,h):(d=U(o),d.c(),d.m(t.parentNode,t)):d&&(d.d(1),d=null),h[0]&8&&n(a,"id",o[3]),h[0]&16&&b!==(b=o[4]&&o[4].acceptedFiles)&&n(a,"accept",b),h[0]&8&&n(r,"for",o[3]),h[0]&1024&&j(y,"hidden",!o[10]),o[5]?w?w.p(o,h):(w=G(o),w.c(),w.m(e,null)):w&&(w.d(1),w=null),h[0]&3&&H!==(H=W(`field-input ${o[1]=="outside"||!o[0]?"":"field-input-padding"}`)+" svelte-htbhvm")&&n(c,"class",H),h[0]&8&&n(c,"name",o[3]),h[0]&4&&n(c,"id",o[2]),h[0]&512&&(c.disabled=o[9]),h[0]&32&&c.value!==o[5]&&D(c,o[5])},d(o){o&&(T(t),T(e),T(l),T(m)),d&&d.d(o),i[27](null),w&&w.d(),q=!1,S(L)}}}function Me(i){let t,e,r;return{c(){t=g("div"),n(t,"class","drop svelte-htbhvm")},m(a,b){z(a,t,b),e||(r=[k(t,"dragleave",i[24]),k(t,"dragend",i[25]),k(t,"drop",C(i[26]))],e=!0)},p:V,d(a){a&&T(t),e=!1,S(r)}}}function U(i){let t;return{c(){t=g("span"),n(t,"class","field-label svelte-htbhvm"),j(t,"move",i[8]||i[5])},m(e,r){z(e,t,r),t.innerHTML=i[14]},p(e,r){r[0]&16384&&(t.innerHTML=e[14]),r[0]&288&&j(t,"move",e[8]||e[5])},d(e){e&&T(t)}}}function G(i){let t,e,r,a;return{c(){t=g("div"),e=g("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1rem" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',n(e,"type","button"),n(e,"class","svelte-htbhvm"),n(t,"class","field-icon svelte-htbhvm")},m(b,f){z(b,t,f),$(t,e),r||(a=k(e,"click",C(i[31])),r=!0)},p:V,d(b){b&&T(t),r=!1,a()}}}function J(i){let t,e,r,a,b;return{c(){t=g("div"),e=g("img"),n(e,"class","preview svelte-htbhvm"),n(e,"style",i[6]),R(e.src,r=i[10])||n(e,"src",r),n(e,"alt","preview"),n(t,"class","overlay svelte-htbhvm")},m(f,x){z(f,t,x),$(t,e),a||(b=[Te(He.call(null,e)),k(e,"click_outside",i[38])],a=!0)},p(f,x){x[0]&64&&n(e,"style",f[6]),x[0]&1024&&!R(e.src,r=f[10])&&n(e,"src",r)},d(f){f&&T(t),a=!1,S(b)}}}function Ye(i){let t,e,r,a,b,f,x,v=i[0]&&i[1]=="outside"&&O(i);function I(l,m){return l[12]?Me:Le}let y=I(i),u=y(i),p=i[11]&&J(i);return{c(){v&&v.c(),t=Y(),e=g("div"),r=g("div"),u.c(),a=Y(),p&&p.c(),b=ze(),n(r,"class","field svelte-htbhvm")},m(l,m){v&&v.m(l,m),z(l,t,m),z(l,e,m),$(e,r),u.m(r,null),i[36](r),z(l,a,m),p&&p.m(l,m),z(l,b,m),f||(x=k(r,"dragover",C(i[37])),f=!0)},p(l,m){l[0]&&l[1]=="outside"?v?v.p(l,m):(v=O(l),v.c(),v.m(t.parentNode,t)):v&&(v.d(1),v=null),y===(y=I(l))&&u?u.p(l,m):(u.d(1),u=y(l),u&&(u.c(),u.m(r,null))),l[11]?p?p.p(l,m):(p=J(l),p.c(),p.m(b.parentNode,b)):p&&(p.d(1),p=null)},i:V,o:V,d(l){l&&(T(t),T(e),T(a),T(b)),v&&v.d(l),u.d(),i[36](null),p&&p.d(l),f=!1,x()}}}function qe(i){return new Promise((t,e)=>{const r=new FileReader;r.readAsDataURL(i),r.onload=()=>t(r.result),r.onerror=a=>e(a)})}function Ce(i,t,e){let r,{label:a=""}=t,{labelType:b="inside"}=t,{attachedInternals:f}=t,{value:x=""}=t,{id:v=""}=t,{name:I=""}=t,{required:y=!1}=t,u,p,l=!1,m=!1,c="",H=null,q=!1,L=!1,d,w;const o=$e();let{service:h}=t;const Q=()=>d;async function X(s){if(m)try{e(5,d=await h.uploadFile(H,s))}catch(F){console.error(F)}return d}async function _(s){if(h&&h.maxSize&&s.size>h.maxSize){o("rejected",{file:s.name,code:"maxSize"});return}if(e(9,m=!0),H=s,e(5,d=s.name),H.type.split("/")[0]==="image"){const F=await qe(H);e(10,c=F)}else e(10,c="")}async function A(s){s.dataTransfer.files.length&&_(s.dataTransfer.files[0]),e(12,L=!1)}async function Z(s){_(s.target.files[0])}async function B(){m||((await(await fetch(d)).blob()).type.startsWith("image/")?e(10,c=d):e(10,c=""))}function N(){const s=p.getBoundingClientRect();window.innerHeight-s.bottom<300?e(6,u=`
        width: ${s.width}px;
        bottom: ${window.innerHeight-s.top}px;
        left: ${s.width-300}px;
      `):e(6,u=`
        width: ${s.width}px;
        top: ${s.bottom}px;
        left: ${s.width-300}px;
      `)}const ee=()=>e(12,L=!1),te=()=>e(12,L=!1),ie=s=>A(s);function re(s){E[s?"unshift":"push"](()=>{w=s,e(13,w)})}const se=()=>e(8,l=!0),ne=()=>e(8,l=!1),ae=()=>N(),le=()=>{e(9,m=!1),e(10,c=""),e(5,d=""),e(13,w.value="",w)},oe=()=>e(8,l=!0),de=()=>e(8,l=!1),ce=()=>B();function he(){d=this.value,e(5,d),e(20,x)}function me(s){E[s?"unshift":"push"](()=>{p=s,e(7,p)})}const be=()=>e(12,L=!0),pe=()=>e(11,q=!1);return i.$$set=s=>{"label"in s&&e(0,a=s.label),"labelType"in s&&e(1,b=s.labelType),"attachedInternals"in s&&e(19,f=s.attachedInternals),"value"in s&&e(20,x=s.value),"id"in s&&e(2,v=s.id),"name"in s&&e(3,I=s.name),"required"in s&&e(21,y=s.required),"service"in s&&e(4,h=s.service)},i.$$.update=()=>{i.$$.dirty[0]&1048576&&(e(5,d=x),x?B():e(10,c="")),i.$$.dirty[0]&524320&&(f.checkValidity(),f.setFormValue(d),o("value",{internalValue:d})),i.$$.dirty[0]&2097153&&e(14,r=y?`${a} *`:a)},[a,b,v,I,h,d,u,p,l,m,c,q,L,w,r,A,Z,B,N,f,x,y,Q,X,ee,te,ie,re,se,ne,ae,le,oe,de,ce,he,me,be,pe]}class K extends we{constructor(t){super(),ge(this,t,Ce,Ye,ye,{label:0,labelType:1,attachedInternals:19,value:20,id:2,name:3,required:21,service:4,getValue:22,save:23},Ie,[-1,-1])}get label(){return this.$$.ctx[0]}set label(t){this.$$set({label:t}),M()}get labelType(){return this.$$.ctx[1]}set labelType(t){this.$$set({labelType:t}),M()}get attachedInternals(){return this.$$.ctx[19]}set attachedInternals(t){this.$$set({attachedInternals:t}),M()}get value(){return this.$$.ctx[20]}set value(t){this.$$set({value:t}),M()}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),M()}get name(){return this.$$.ctx[3]}set name(t){this.$$set({name:t}),M()}get required(){return this.$$.ctx[21]}set required(t){this.$$set({required:t}),M()}get service(){return this.$$.ctx[4]}set service(t){this.$$set({service:t}),M()}get getValue(){return this.$$.ctx[22]}get save(){return this.$$.ctx[23]}}try{customElements.define("jp-file-upload",xe(K,{label:{},labelType:{},attachedInternals:{},value:{},id:{},name:{},required:{type:"Boolean"},service:{}},[],["getValue","save"],!1,i=>{var t;return t=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},fe(t,"formAssociated",!0),t}));}catch{};export{K as default};
