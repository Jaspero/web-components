import{S as ie,i as le,s as ne,e as y,l as q,A as Z,d as f,f as F,p as m,m as C,B as z,x as P,k as M,Z as Se,w as oe,D as pe,a5 as fe,r as ae,T as ge,E as J,U as he,t as _,j as I,V as ve,O as ee,K as Ee,a6 as Te,a7 as Fe,c as gt,o as Q,R as U,a8 as ht,W,n as Me,C as Oe,y as ce,$ as vt,a9 as wt,aa as $t,ab as yt,ac as bt,a1 as re,ad as V,z as jt,ae as xt,af as St}from"./svelte.js";import"./index.js";import{fileSize as ke}from"./file-size.js";import{u as Et}from"./upload.js";const He='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 -960 960 960"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"/></svg>';function Tt(a){let e,t,s,r,l,n=a[1].name+"",o,i,c;return{c(){e=y("div"),t=y("button"),s=new Se(!1),r=q(),l=y("span"),o=Z(n),s.a=r,f(t,"class","jp-asset-manager-folder-button"),f(t,"type","button"),f(e,"class","jp-asset-manager-folder")},m(u,d){F(u,e,d),m(e,t),s.m(He,t),m(t,r),m(t,l),m(l,o),i||(c=C(t,"click",a[2]),i=!0)},p(u,[d]){d&2&&n!==(n=u[1].name+"")&&z(o,n)},i:P,o:P,d(u){u&&M(e),i=!1,c()}}}function Ft(a,e,t){let{folder:s}=e,{path:r}=e;const l=()=>t(0,r=s.id);return a.$$set=n=>{"folder"in n&&t(1,s=n.folder),"path"in n&&t(0,r=n.path)},[r,s,l]}class Mt extends ie{constructor(e){super(),le(this,e,Ft,Tt,ne,{folder:1,path:0})}}function Le(a){let e;function t(l,n){if(l[3]==="uploading")return Ht;if(l[3]==="paused")return kt;if(l[3]==="error")return Ot}let s=t(a),r=s&&s(a);return{c(){r&&r.c(),e=oe()},m(l,n){r&&r.m(l,n),F(l,e,n)},p(l,n){s===(s=t(l))&&r?r.p(l,n):(r&&r.d(1),r=s&&s(l),r&&(r.c(),r.m(e.parentNode,e)))},d(l){l&&M(e),r&&r.d(l)}}}function Ot(a){return{c:P,m:P,p:P,d:P}}function kt(a){let e,t,s,r,l,n=a[0].RESUME+"",o,i,c,u=a[0].CANCEL+"",d,p,b;return{c(){e=y("span"),t=Z(a[4]),s=Z(" / 100"),r=q(),l=y("button"),o=Z(n),i=q(),c=y("button"),d=Z(u),f(l,"type","button"),f(c,"type","button")},m(w,g){F(w,e,g),m(e,t),m(e,s),F(w,r,g),F(w,l,g),m(l,o),F(w,i,g),F(w,c,g),m(c,d),p||(b=[C(l,"click",a[7]),C(c,"click",a[5])],p=!0)},p(w,g){g&16&&z(t,w[4]),g&1&&n!==(n=w[0].RESUME+"")&&z(o,n),g&1&&u!==(u=w[0].CANCEL+"")&&z(d,u)},d(w){w&&(M(e),M(r),M(l),M(i),M(c)),p=!1,ae(b)}}}function Ht(a){let e,t,s,r,l,n=a[0].PAUSE+"",o,i,c;return{c(){e=y("span"),t=Z(a[4]),s=Z(" / 100"),r=q(),l=y("button"),o=Z(n),f(l,"type","button")},m(u,d){F(u,e,d),m(e,t),m(e,s),F(u,r,d),F(u,l,d),m(l,o),i||(c=C(l,"click",a[6]),i=!0)},p(u,d){d&16&&z(t,u[4]),d&1&&n!==(n=u[0].PAUSE+"")&&z(o,n)},d(u){u&&(M(e),M(r),M(l)),i=!1,c()}}}function Lt(a){let e,t=a[3]&&Le(a);return{c(){t&&t.c(),e=oe()},m(s,r){t&&t.m(s,r),F(s,e,r)},p(s,[r]){s[3]?t?t.p(s,r):(t=Le(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:P,o:P,d(s){s&&M(e),t&&t.d(s)}}}function Zt(a,e,t){let s,r=P,l=()=>(r(),r=fe(p,T=>t(3,s=T)),p),n,o=P,i=()=>(o(),o=fe(d,T=>t(4,n=T)),d);a.$$.on_destroy.push(()=>r()),a.$$.on_destroy.push(()=>o());let{wording:c}=e,{asset:u}=e,{progress:d}=e;i();let{status:p}=e;l();const b=pe();function w(){u.uploader&&(u.uploader.cancel(),b("cancel"))}function g(){u.uploader&&u.uploader.pause()}function j(){u.uploader&&u.uploader.resume()}return a.$$set=T=>{"wording"in T&&t(0,c=T.wording),"asset"in T&&t(8,u=T.asset),"progress"in T&&i(t(1,d=T.progress)),"status"in T&&l(t(2,p=T.status))},[c,d,p,s,n,w,g,j,u]}class Pt extends ie{constructor(e){super(),le(this,e,Zt,Lt,ne,{wording:0,asset:8,progress:1,status:2})}}const _t='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="m376-300 104-104 104 104 56-56-104-104 104-104-56-56-104 104-104-104-56 56 104 104-104 104 56 56Zm-96 180q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520Zm-400 0v520-520Z"/></svg>',qt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 -960 960 960"><path d="M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"/></svg>';function Ze(a){let e,t,s;return{c(){e=y("button"),f(e,"class","jp-asset-manager-file-remove"),f(e,"type","button")},m(r,l){F(r,e,l),e.innerHTML=_t,t||(s=C(e,"click",ee(a[4])),t=!0)},p:P,d(r){r&&M(e),t=!1,s()}}}function It(a){let e;return{c(){e=y("div"),f(e,"class","jp-asset-manager-icon-only")},m(t,s){F(t,e,s),e.innerHTML=qt},p:P,d(t){t&&M(e)}}}function Bt(a){let e;return{c(){e=y("div"),f(e,"class","jp-asset-manager-icon-only")},m(t,s){F(t,e,s),e.innerHTML=He},p:P,d(t){t&&M(e)}}}function Ct(a){let e,t,s;return{c(){e=y("img"),f(e,"class","jp-asset-manager-file-icon-image"),Ee(e.src,t=a[1].url)||f(e,"src",t),f(e,"alt",s=a[1].name)},m(r,l){F(r,e,l)},p(r,l){l&2&&!Ee(e.src,t=r[1].url)&&f(e,"src",t),l&2&&s!==(s=r[1].name)&&f(e,"alt",s)},d(r){r&&M(e)}}}function zt(a){let e,t,s,r,l,n,o,i=a[1].name+"",c,u,d,p,b,w,g=ke(a[1].size)+"",j,T,x=!a[1].preventDelete&&Ze(a);function L(S,E){return E&2&&(r=null),E&2&&(l=null),r==null&&(r=!!S[1].contentType.startsWith("image")),r?Ct:(l==null&&(l=!!S[1].contentType.startsWith("video")),l?Bt:It)}let R=L(a,-1),O=R(a);return d=new Pt({props:{wording:a[0],asset:a[1],status:a[1].status,progress:a[1].progress}}),d.$on("cancel",a[6]),{c(){e=y("div"),x&&x.c(),t=q(),s=y("div"),O.c(),n=q(),o=y("div"),c=Z(i),u=q(),ge(d.$$.fragment),p=q(),b=y("div"),w=y("span"),j=Z(g),f(s,"class","jp-asset-manager-file-icon"),f(o,"class","jp-asset-manager-file-name"),f(b,"class","jp-asset-manager-file-info"),f(e,"class","jp-asset-manager-file"),J(e,"jp-asset-manager-file-removing",a[2])},m(S,E){F(S,e,E),x&&x.m(e,null),m(e,t),m(e,s),O.m(s,null),m(e,n),m(e,o),m(o,c),m(o,u),he(d,o,null),m(e,p),m(e,b),m(b,w),m(w,j),T=!0},p(S,[E]){S[1].preventDelete?x&&(x.d(1),x=null):x?x.p(S,E):(x=Ze(S),x.c(),x.m(e,t)),R===(R=L(S,E))&&O?O.p(S,E):(O.d(1),O=R(S),O&&(O.c(),O.m(s,null))),(!T||E&2)&&i!==(i=S[1].name+"")&&z(c,i);const H={};E&1&&(H.wording=S[0]),E&2&&(H.asset=S[1]),E&2&&(H.status=S[1].status),E&2&&(H.progress=S[1].progress),d.$set(H),(!T||E&2)&&g!==(g=ke(S[1].size)+"")&&z(j,g),(!T||E&4)&&J(e,"jp-asset-manager-file-removing",S[2])},i(S){T||(_(d.$$.fragment,S),T=!0)},o(S){I(d.$$.fragment,S),T=!1},d(S){S&&M(e),x&&x.d(),O.d(),ve(d)}}}function Nt(a,e,t){let{wording:s}=e,{asset:r}=e,{service:l}=e,n=!1;const o=pe();async function i(){t(2,n=!0),await l.remove(r.id),t(2,n=!1),o("remove")}const c=()=>o("cancel");return a.$$set=u=>{"wording"in u&&t(0,s=u.wording),"asset"in u&&t(1,r=u.asset),"service"in u&&t(5,l=u.service)},[s,r,n,o,i,l,c]}class Rt extends ie{constructor(e){super(),le(this,e,Nt,zt,ne,{wording:0,asset:1,service:5})}}const At='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>',Dt='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" /></svg>',Ut='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="M560-320h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"/></svg>',Wt='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="M440-200h80v-167l64 64 56-57-160-160-160 160 57 56 63-63v167ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z" /></svg>';function Pe(a){const e=a-1;return e*e*e+1}function Vt(a,{from:e,to:t},s={}){const r=getComputedStyle(a),l=r.transform==="none"?"":r.transform,[n,o]=r.transformOrigin.split(" ").map(parseFloat),i=e.left+e.width*n/t.width-(t.left+n),c=e.top+e.height*o/t.height-(t.top+o),{delay:u=0,duration:d=b=>Math.sqrt(b)*120,easing:p=Pe}=s;return{delay:u,duration:Te(d)?d(Math.sqrt(i*i+c*c)):d,easing:p,css:(b,w)=>{const g=w*i,j=w*c,T=b+w*e.width/t.width,x=b+w*e.height/t.height;return`transform: ${l} translate(${g}px, ${j}px) scale(${T}, ${x});`}}}function Y(a,{delay:e=0,duration:t=400,easing:s=Pe,x:r=0,y:l=0,opacity:n=0}={}){const o=getComputedStyle(a),i=+o.opacity,c=o.transform==="none"?"":o.transform,u=i*(1-n),[d,p]=Fe(r),[b,w]=Fe(l);return{delay:e,duration:t,easing:s,css:(g,j)=>`
			transform: ${c} translate(${(1-g)*d}${p}, ${(1-g)*b}${w});
			opacity: ${i-u*j}`}}const te=[];function Yt(a,e){return{subscribe:_e(a,e).subscribe}}function _e(a,e=P){let t;const s=new Set;function r(o){if(ne(a,o)&&(a=o,t)){const i=!te.length;for(const c of s)c[1](),te.push(c,a);if(i){for(let c=0;c<te.length;c+=2)te[c][0](te[c+1]);te.length=0}}}function l(o){r(o(a))}function n(o,i=P){const c=[o,i];return s.add(c),s.size===1&&(t=e(r,l)||P),o(a),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:r,update:l,subscribe:n}}function Qt(a,e,t){const s=!Array.isArray(a),r=s?[a]:a;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return Yt(t,(n,o)=>{let i=!1;const c=[];let u=0,d=P;const p=()=>{if(u)return;d();const w=e(s?c[0]:c,n,o);l?n(w):d=Te(w)?w:P},b=r.map((w,g)=>fe(w,j=>{c[g]=j,u&=~(1<<g),i&&p()},()=>{u|=1<<g}));return i=!0,p(),function(){ae(b),d(),i=!1}})}function Kt(a){const e=_e([]);function t(l,n="default",o){e.update(i=>[...i,{id:Xt(),type:n,message:l,timeout:o}])}const s=Qt(e,(l,n)=>{if(n(l),l.length>0){const o=setTimeout(()=>{e.update(i=>(i.shift(),i))},l[0].timeout);return()=>{clearTimeout(o)}}}),{subscribe:r}=s;return{subscribe:r,send:t,default:(l,n)=>t(l,"default",n),danger:(l,n)=>t(l,"danger",n),warning:(l,n)=>t(l,"warning",n),info:(l,n)=>t(l,"info",n),success:(l,n)=>t(l,"success",n)}}function Xt(){return"_"+Math.random().toString(36).substr(2,9)}const qe=Kt();function Ie(a,e,t){const s=a.slice();return s[53]=e[t],s}function Be(a,e,t){const s=a.slice();return s[56]=e[t],s[58]=t,s}function Gt(a){let e,t,s,r,l,n,o=(a[6].replace(a[1],"")||"/")+"",i,c,u,d,p,b,w,g,j,T,x,L,R,O;const S=[ns,ss,ts],E=[];function H(v,k){return v[10]?0:v[7].length==0?1:2}g=H(a),j=E[g]=S[g](a);let $=a[4]&&ze(a);return{c(){e=y("header"),t=y("nav"),s=y("button"),l=q(),n=y("span"),i=Z(o),c=q(),u=y("div"),d=y("button"),p=q(),b=y("button"),w=q(),j.c(),T=q(),$&&$.c(),x=oe(),f(s,"class","jp-asset-manager-header-actions-button"),f(s,"type","button"),f(s,"title","Back"),s.disabled=r=a[6]===a[1],f(n,"class","jp-asset-manager-route"),f(t,"class","jp-asset-manager-header-nav"),f(d,"class","jp-asset-manager-header-actions-button"),f(d,"type","button"),f(d,"title","Add Folder"),f(b,"class","jp-asset-manager-header-actions-button"),f(b,"type","button"),f(b,"title","Add Files"),f(u,"class","jp-asset-manager-header-actions"),f(e,"class","jp-asset-manager-header")},m(v,k){F(v,e,k),m(e,t),m(t,s),s.innerHTML=Dt,m(t,l),m(t,n),m(n,i),m(e,c),m(e,u),m(u,d),d.innerHTML=Ut,m(u,p),m(u,b),b.innerHTML=Wt,F(v,w,k),E[g].m(v,k),F(v,T,k),$&&$.m(v,k),F(v,x,k),L=!0,R||(O=[C(s,"click",a[24]),C(d,"click",ee(a[25])),C(b,"click",ee(a[38]))],R=!0)},p(v,k){(!L||k[0]&66&&r!==(r=v[6]===v[1]))&&(s.disabled=r),(!L||k[0]&66)&&o!==(o=(v[6].replace(v[1],"")||"/")+"")&&z(i,o);let X=g;g=H(v),g===X?E[g].p(v,k):(W(),I(E[X],1,1,()=>{E[X]=null}),U(),j=E[g],j?j.p(v,k):(j=E[g]=S[g](v),j.c()),_(j,1),j.m(T.parentNode,T)),v[4]?$?($.p(v,k),k[0]&16&&_($,1)):($=ze(v),$.c(),_($,1),$.m(x.parentNode,x)):$&&(W(),I($,1,1,()=>{$=null}),U())},i(v){L||(_(j),_($),L=!0)},o(v){I(j),I($),L=!1},d(v){v&&(M(e),M(w),M(T),M(x)),E[g].d(v),$&&$.d(v),R=!1,ae(O)}}}function Jt(a){let e,t,s,r,l,n,o,i=a[0].FOLDER_NAME+"",c,u,d,p,b,w=a[0].SUBMIT+"",g,j,T;return{c(){e=y("header"),t=y("div"),s=y("button"),r=q(),l=y("form"),n=y("label"),o=y("span"),c=Z(i),u=q(),d=y("input"),p=q(),b=y("button"),g=Z(w),f(s,"class","jp-asset-manager-header-actions-button"),f(s,"type","button"),f(t,"class","jp-asset-manager-header-actions"),f(e,"class","jp-asset-manager-header"),f(o,"class","jp-asset-manager-add-folder-form-input-span"),f(d,"class","jp-asset-manager-add-folder-form-input-input"),f(d,"pattern",ls),d.required=!0,f(n,"class","jp-asset-manager-add-folder-form-input"),f(b,"class","jp-asset-manager-add-folder-form-submit"),f(b,"type","submit"),f(l,"class","jp-asset-manager-add-folder-form")},m(x,L){F(x,e,L),m(e,t),m(t,s),s.innerHTML=At,F(x,r,L),F(x,l,L),m(l,n),m(n,o),m(o,c),m(n,u),m(n,d),Oe(d,a[12]),m(l,p),m(l,b),m(b,g),j||(T=[C(s,"click",a[36]),C(d,"input",a[37]),C(l,"submit",ee(a[26]))],j=!0)},p(x,L){L[0]&1&&i!==(i=x[0].FOLDER_NAME+"")&&z(c,i),L[0]&4096&&d.value!==x[12]&&Oe(d,x[12]),L[0]&1&&w!==(w=x[0].SUBMIT+"")&&z(g,w)},i:P,o:P,d(x){x&&(M(e),M(r),M(l)),j=!1,ae(T)}}}function es(a){let e,t,s,r,l=a[0].DROP_FILES_HERE+"",n;return{c(){e=y("div"),t=new Se(!1),s=q(),r=y("div"),n=Z(l),t.a=s,f(e,"class","jp-asset-manager-drop-here")},m(o,i){F(o,e,i),t.m(Et,e),m(e,s),m(e,r),m(r,n)},p(o,i){i[0]&1&&l!==(l=o[0].DROP_FILES_HERE+"")&&z(n,l)},i:P,o:P,d(o){o&&M(e)}}}function ts(a){let e,t,s=ce(a[7]),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ce(Be(a,s,n));const l=n=>I(r[n],1,1,()=>{r[n]=null});return{c(){e=y("div");for(let n=0;n<r.length;n+=1)r[n].c();f(e,"class","jp-asset-manager-files")},m(n,o){F(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,o){if(o[0]&404750792){s=ce(n[7]);let i;for(i=0;i<s.length;i+=1){const c=Be(n,s,i);r[i]?(r[i].p(c,o),_(r[i],1)):(r[i]=Ce(c),r[i].c(),_(r[i],1),r[i].m(e,null))}for(W(),i=s.length;i<r.length;i+=1)l(i);U()}},i(n){if(!t){for(let o=0;o<s.length;o+=1)_(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);t=!1},d(n){n&&M(e),jt(r,n)}}}function ss(a){let e,t,s=a[0].FOLDER_IS_EMPTY+"",r;return{c(){e=y("div"),t=y("p"),r=Z(s),f(e,"class","jp-asset-manager-info")},m(l,n){F(l,e,n),m(e,t),m(t,r)},p(l,n){n[0]&1&&s!==(s=l[0].FOLDER_IS_EMPTY+"")&&z(r,s)},i:P,o:P,d(l){l&&M(e)}}}function ns(a){let e;return{c(){e=y("div"),e.innerHTML='<div class="jp-asset-manager-loader-spinner"></div>',f(e,"class","jp-asset-manager-loader")},m(t,s){F(t,e,s)},p:P,i:P,o:P,d(t){t&&M(e)}}}function as(a){let e,t,s,r,l,n;function o(){return a[40](a[58],a[56])}function i(){return a[41](a[56])}t=new Rt({props:{asset:a[56],service:a[3]}}),t.$on("remove",o),t.$on("cancel",i);function c(){return a[42](a[56])}return{c(){e=y("div"),ge(t.$$.fragment),s=q(),f(e,"class","jp-asset-manager-asset-button"),f(e,"role","button"),f(e,"tabindex","1"),J(e,"jp-asset-manager-asset-button-selected",a[8][a[56].id])},m(u,d){F(u,e,d),he(t,e,null),m(e,s),r=!0,l||(n=C(e,"click",c),l=!0)},p(u,d){a=u;const p={};d[0]&128&&(p.asset=a[56]),d[0]&8&&(p.service=a[3]),t.$set(p),(!r||d[0]&384)&&J(e,"jp-asset-manager-asset-button-selected",a[8][a[56].id])},i(u){r||(_(t.$$.fragment,u),r=!0)},o(u){I(t.$$.fragment,u),r=!1},d(u){u&&M(e),ve(t),l=!1,n()}}}function rs(a){let e,t,s;function r(n){a[39](n)}let l={folder:a[56]};return a[6]!==void 0&&(l.path=a[6]),e=new Mt({props:l}),Me.push(()=>xt(e,"path",r)),{c(){ge(e.$$.fragment)},m(n,o){he(e,n,o),s=!0},p(n,o){const i={};o[0]&128&&(i.folder=n[56]),!t&&o[0]&64&&(t=!0,i.path=n[6],St(()=>t=!1)),e.$set(i)},i(n){s||(_(e.$$.fragment,n),s=!0)},o(n){I(e.$$.fragment,n),s=!1},d(n){ve(e,n)}}}function Ce(a){let e,t,s,r;const l=[rs,as],n=[];function o(i,c){return i[56].type==="folder"?0:1}return e=o(a),t=n[e]=l[e](a),{c(){t.c(),s=oe()},m(i,c){n[e].m(i,c),F(i,s,c),r=!0},p(i,c){let u=e;e=o(i),e===u?n[e].p(i,c):(W(),I(n[u],1,1,()=>{n[u]=null}),U(),t=n[e],t?t.p(i,c):(t=n[e]=l[e](i),t.c()),_(t,1),t.m(s.parentNode,s))},i(i){r||(_(t),r=!0)},o(i){I(t),r=!1},d(i){i&&M(s),n[e].d(i)}}}function ze(a){let e,t,s=a[0].CONFIRM_SELECTION+"",r,l,n=Object.keys(a[8]).length>1,o,i,c=[],u=new Map,d,p,b,w,g,j,T,x=n&&Ne(a),L=ce(a[20]);const R=$=>$[53].id;for(let $=0;$<L.length;$+=1){let v=Ie(a,L,$),k=R(v);u.set(k,c[$]=Ae(k,v))}let O=a[14]&&De(),S=a[15]&&Ue(a),E=a[16]&&We(a),H=a[17]&&Ve(a);return{c(){e=y("div"),t=y("button"),r=Z(s),l=q(),x&&x.c(),o=q(),i=y("div");for(let $=0;$<c.length;$+=1)c[$].c();d=q(),O&&O.c(),p=q(),S&&S.c(),b=q(),E&&E.c(),w=q(),H&&H.c(),f(t,"class","jp-asset-manager-footer-button"),f(t,"type","button"),f(i,"class","jp-asset-manager-notifications"),f(e,"class","jp-asset-manager-footer")},m($,v){F($,e,v),m(e,t),m(t,r),m(e,l),x&&x.m(e,null),m(e,o),m(e,i);for(let k=0;k<c.length;k+=1)c[k]&&c[k].m(i,null);m(i,d),O&&O.m(i,null),m(i,p),S&&S.m(i,null),m(i,b),E&&E.m(i,null),m(i,w),H&&H.m(i,null),g=!0,j||(T=C(t,"click",a[29]),j=!0)},p($,v){if((!g||v[0]&1)&&s!==(s=$[0].CONFIRM_SELECTION+"")&&z(r,s),v[0]&256&&(n=Object.keys($[8]).length>1),n?x?x.p($,v):(x=Ne($),x.c(),x.m(e,o)):x&&(x.d(1),x=null),v[0]&1048576){L=ce($[20]),W();for(let k=0;k<c.length;k+=1)c[k].r();c=vt(c,v,R,1,$,L,u,i,wt,Ae,d,Ie);for(let k=0;k<c.length;k+=1)c[k].a();U()}$[14]?O?v[0]&16384&&_(O,1):(O=De(),O.c(),_(O,1),O.m(i,p)):O&&(W(),I(O,1,1,()=>{O=null}),U()),$[15]?S?(S.p($,v),v[0]&32768&&_(S,1)):(S=Ue($),S.c(),_(S,1),S.m(i,b)):S&&(W(),I(S,1,1,()=>{S=null}),U()),$[16]?E?(E.p($,v),v[0]&65536&&_(E,1)):(E=We($),E.c(),_(E,1),E.m(i,w)):E&&(W(),I(E,1,1,()=>{E=null}),U()),$[17]?H?(H.p($,v),v[0]&131072&&_(H,1)):(H=Ve($),H.c(),_(H,1),H.m(i,null)):H&&(W(),I(H,1,1,()=>{H=null}),U())},i($){if(!g){for(let v=0;v<L.length;v+=1)_(c[v]);_(O),_(S),_(E),_(H),g=!0}},o($){for(let v=0;v<c.length;v+=1)I(c[v]);I(O),I(S),I(E),I(H),g=!1},d($){$&&M(e),x&&x.d();for(let v=0;v<c.length;v+=1)c[v].d();O&&O.d(),S&&S.d(),E&&E.d(),H&&H.d(),j=!1,T()}}}function Ne(a){let e,t,s=Object.keys(a[8]).length+"",r,l,n,o;return{c(){e=y("button"),t=Z("Delete files: ("),r=Z(s),l=Z(")"),f(e,"type","button")},m(i,c){F(i,e,c),m(e,t),m(e,r),m(e,l),n||(o=C(e,"click",a[31]),n=!0)},p(i,c){c[0]&256&&s!==(s=Object.keys(i[8]).length+"")&&z(r,s)},d(i){i&&M(e),n=!1,o()}}}function Re(a){let e,t;return{c(){e=y("i"),f(e,"class",t=a[53].icon)},m(s,r){F(s,e,r)},p(s,r){r[0]&1048576&&t!==(t=s[53].icon)&&f(e,"class",t)},d(s){s&&M(e)}}}function Ae(a,e){let t,s,r=e[53].message+"",l,n,o,i,c=P,u,d=e[53].icon&&Re(e);return{key:a,first:null,c(){t=y("div"),s=y("div"),l=Z(r),n=q(),d&&d.c(),f(s,"class","jp-asset-manager-content"),f(t,"class","jp-asset-manager-toast"),this.first=t},m(p,b){F(p,t,b),m(t,s),m(s,l),m(t,n),d&&d.m(t,null),u=!0},p(p,b){e=p,(!u||b[0]&1048576)&&r!==(r=e[53].message+"")&&z(l,r),e[53].icon?d?d.p(e,b):(d=Re(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},r(){i=t.getBoundingClientRect()},f(){$t(t),c(),yt(t,i)},a(){c(),c=bt(t,i,Vt,{})},i(p){u||(p&&re(()=>{u&&(o||(o=V(t,Y,{y:30},!0)),o.run(1))}),u=!0)},o(p){p&&(o||(o=V(t,Y,{y:30},!1)),o.run(0)),u=!1},d(p){p&&M(t),d&&d.d(),p&&o&&o.end()}}}function De(a){let e,t,s;return{c(){e=y("div"),e.innerHTML='<div class="jp-asset-manager-content">Please select a file first.</div>',f(e,"class","jp-asset-manager-toast")},m(r,l){F(r,e,l),s=!0},i(r){s||(r&&re(()=>{s&&(t||(t=V(e,Y,{y:30},!0)),t.run(1))}),s=!0)},o(r){r&&(t||(t=V(e,Y,{y:30},!1)),t.run(0)),s=!1},d(r){r&&M(e),r&&t&&t.end()}}}function Ue(a){let e,t,s,r,l,n,o;return{c(){e=y("div"),t=y("div"),s=Z("Too many files have been selected. The maximum allowed is "),r=Z(a[5]),l=Z("."),f(t,"class","jp-asset-manager-content"),f(e,"class","jp-asset-manager-toast")},m(i,c){F(i,e,c),m(e,t),m(t,s),m(t,r),m(t,l),o=!0},p(i,c){(!o||c[0]&32)&&z(r,i[5])},i(i){o||(i&&re(()=>{o&&(n||(n=V(e,Y,{y:30},!0)),n.run(1))}),o=!0)},o(i){i&&(n||(n=V(e,Y,{y:30},!1)),n.run(0)),o=!1},d(i){i&&M(e),i&&n&&n.end()}}}function We(a){let e,t,s,r,l,n,o;return{c(){e=y("div"),t=y("div"),s=Z("File "),r=Z(a[18]),l=Z(" added successfully!"),f(t,"class","jp-asset-manager-content"),f(e,"class","jp-asset-manager-toast-added")},m(i,c){F(i,e,c),m(e,t),m(t,s),m(t,r),m(t,l),o=!0},p(i,c){(!o||c[0]&262144)&&z(r,i[18])},i(i){o||(i&&re(()=>{o&&(n||(n=V(e,Y,{y:30},!0)),n.run(1))}),o=!0)},o(i){i&&(n||(n=V(e,Y,{y:30},!1)),n.run(0)),o=!1},d(i){i&&M(e),i&&n&&n.end()}}}function Ve(a){let e,t,s,r,l,n,o;return{c(){e=y("div"),t=y("div"),s=Z("File "),r=Z(a[19]),l=Z(" already exists!"),f(t,"class","jp-asset-manager-content"),f(e,"class","jp-asset-manager-toast-exist")},m(i,c){F(i,e,c),m(e,t),m(t,s),m(t,r),m(t,l),o=!0},p(i,c){(!o||c[0]&524288)&&z(r,i[19])},i(i){o||(i&&re(()=>{o&&(n||(n=V(e,Y,{y:30},!0)),n.run(1))}),o=!0)},o(i){i&&(n||(n=V(e,Y,{y:30},!1)),n.run(0)),o=!1},d(i){i&&M(e),i&&n&&n.end()}}}function is(a){let e,t,s,r,l,n,o,i;const c=[es,Jt,Gt],u=[];function d(p,b){return p[11]?0:p[13]?1:2}return t=d(a),s=u[t]=c[t](a),{c(){e=y("section"),s.c(),r=q(),l=y("input"),f(e,"class","jp-asset-manager-card"),J(e,"full-border",a[11]),f(l,"type","file"),l.multiple=!0,f(l,"accept",a[2]),l.hidden=!0},m(p,b){F(p,e,b),u[t].m(e,null),F(p,r,b),F(p,l,b),a[48](l),n=!0,o||(i=[C(e,"dragover",ee(a[43])),C(e,"dragleave",a[44]),C(e,"dragend",a[45]),C(e,"drop",ee(a[46])),C(e,"click",a[47]),C(l,"change",a[49])],o=!0)},p(p,b){let w=t;t=d(p),t===w?u[t].p(p,b):(W(),I(u[w],1,1,()=>{u[w]=null}),U(),s=u[t],s?s.p(p,b):(s=u[t]=c[t](p),s.c()),_(s,1),s.m(e,null)),(!n||b[0]&2048)&&J(e,"full-border",p[11]),(!n||b[0]&4)&&f(l,"accept",p[2])},i(p){n||(_(s),n=!0)},o(p){I(s),n=!1},d(p){p&&(M(e),M(r),M(l)),u[t].d(),a[48](null),o=!1,ae(i)}}}let ls="[a-z_\\-]{3,}";async function ue(a){return new Promise(e=>setTimeout(e,a))}function os(a,e,t){let s;ht(a,qe,h=>t(20,s=h));let{wording:r={DROP_FILES_HERE:"Drop your files here",FOLDER_NAME:"Folder name",SUBMIT:"Submit",FOLDER_IS_EMPTY:"Folder is empty",CONFIRM_SELECTION:"Confirm selection",PAUSE:"Pause",RESUME:"Resume",CANCEL:"Cancel"}}=e,{rootPath:l="/"}=e,{maxSize:n=10*1048576}=e,{acceptedFiles:o="*"}=e,{shownFiles:i}=e,{service:c}=e,{selectable:u=""}=e,{minSelected:d=null}=e,{maxSelected:p=null}=e;const b=pe();let w=l,g=[],j={},T,x=!1,L=!1,R="",O=!1,S=!1,E=!1,H=!1,$=!1,v="",k="";function X(){t(8,j={})}async function de(h,N){j[N]&&(delete j[N],t(8,j={...j})),t(7,g=g.filter(D=>D.id!==N))}async function we(h){h.target.files.length&&t(7,g=[...g,...await ye(h.target.files)]),t(9,T.value=null,T)}async function $e(h){h.dataTransfer.files.length&&t(7,g=[...g,...await ye(h.dataTransfer.files)]),t(11,L=!1)}async function ye(h){const N=[],D=[],K=Array.from(h).filter(B=>g.some(G=>G.name===B.name&&G.size===B.size)?(N.push(B),console.log(`File ${B.name} already exists!`),!1):(D.push(B),n&&B.size>n?(qe.danger(`File ${B.name} is too big!`,2e3),!1):!0));for(let B=0;B<D.length;B++)t(18,v=D[B].name),t(16,H=!0),await ue(800),t(16,H=!1),await ue(800);t(16,H=!1);for(let B=0;B<N.length;B++)t(19,k=N[B].name),t(17,$=!0),await ue(800),t(17,$=!1),await ue(800);return Promise.all(K.map(B=>c.upload(w,B)))}function Qe(){t(6,w=w.split("/").slice(0,-1).join("/"))}function Ke(){t(12,R=""),t(13,O=!0)}async function Xe(){t(6,w+=`/${R}`),t(13,O=!1)}function me(h){t(7,g=g.filter(N=>N.id!==h))}function be(h){j[h.id]?(delete j[h.id],t(8,j={...j})):u==="single"?t(8,j={[h.id]:h}):t(8,j[h.id]=h,j),Object.keys(j).length>0&&t(14,S=!1),p&&Object.keys(j).length===p&&t(15,E=!1)}async function Ge(){if(d&&Object.keys(j).length<d){t(14,S=!0),console.log("Please select a file first.");return}if(p&&Object.keys(j).length>p){t(15,E=!0),console.log(`Too many files have been selected. The maximum allowed is ${p}.`);return}const h=Object.values(j);b("selected",u==="single"?h[0]:h),t(14,S=!1),t(15,E=!1)}function Je(){t(10,x=!0),c.fetch(w).then(h=>{t(7,g=h),i!=null&&i.length&&t(7,g=g.filter(N=>N.type==="folder"||i.some(D=>N.contentType.startsWith(D))))}).finally(()=>{t(10,x=!1)})}function je(h){const N=h.target,D=N.closest(".jp-asset-manager-asset-button"),K=N.closest("button");p&&K&&Object.keys(j).length>p||(!K&&!D&&t(14,S=!1),D||(X(),t(15,E=!1)))}async function et(h,N){const D=Object.keys(j),K=[];for(const A of D)K.push(g.findIndex(se=>se.id===A));const B=D.map((A,se)=>({value:A,index:K[se]}));B.sort((A,se)=>se.index-A.index);const G=B.map(A=>A.value),xe=B.map(A=>A.index);for(let A=0;A<xe.length;A++)de(xe[A],G[A]),me(G[A].toString()),c.remove(G[A].toString())}const tt=()=>t(13,O=!1);function st(){R=this.value,t(12,R)}const nt=()=>T.click();function at(h){w=h,t(6,w)}const rt=(h,N)=>de(h,N.id),it=h=>me(h.id),lt=h=>be(h),ot=()=>t(11,L=!0),ct=()=>t(11,L=!1),ut=()=>t(11,L=!1),dt=h=>$e(h),mt=h=>je(h);function pt(h){Me[h?"unshift":"push"](()=>{T=h,t(9,T)})}const ft=h=>we(h);return a.$$set=h=>{"wording"in h&&t(0,r=h.wording),"rootPath"in h&&t(1,l=h.rootPath),"maxSize"in h&&t(32,n=h.maxSize),"acceptedFiles"in h&&t(2,o=h.acceptedFiles),"shownFiles"in h&&t(33,i=h.shownFiles),"service"in h&&t(3,c=h.service),"selectable"in h&&t(4,u=h.selectable),"minSelected"in h&&t(34,d=h.minSelected),"maxSelected"in h&&t(5,p=h.maxSelected)},a.$$.update=()=>{a.$$.dirty[0]&64&&w&&Je()},[r,l,o,c,u,p,w,g,j,T,x,L,R,O,S,E,H,$,v,k,s,de,we,$e,Qe,Ke,Xe,me,be,Ge,je,et,n,i,d,X,tt,st,nt,at,rt,it,lt,ot,ct,ut,dt,mt,pt,ft]}class Ye extends ie{constructor(e){super(),le(this,e,os,is,ne,{wording:0,rootPath:1,maxSize:32,acceptedFiles:2,shownFiles:33,service:3,selectable:4,minSelected:34,maxSelected:5,clearSelection:35},null,[-1,-1])}get wording(){return this.$$.ctx[0]}set wording(e){this.$$set({wording:e}),Q()}get rootPath(){return this.$$.ctx[1]}set rootPath(e){this.$$set({rootPath:e}),Q()}get maxSize(){return this.$$.ctx[32]}set maxSize(e){this.$$set({maxSize:e}),Q()}get acceptedFiles(){return this.$$.ctx[2]}set acceptedFiles(e){this.$$set({acceptedFiles:e}),Q()}get shownFiles(){return this.$$.ctx[33]}set shownFiles(e){this.$$set({shownFiles:e}),Q()}get service(){return this.$$.ctx[3]}set service(e){this.$$set({service:e}),Q()}get selectable(){return this.$$.ctx[4]}set selectable(e){this.$$set({selectable:e}),Q()}get minSelected(){return this.$$.ctx[34]}set minSelected(e){this.$$set({minSelected:e}),Q()}get maxSelected(){return this.$$.ctx[5]}set maxSelected(e){this.$$set({maxSelected:e}),Q()}get clearSelection(){return this.$$.ctx[35]}}try{customElements.define("jp-asset-manager",gt(Ye,{wording:{},rootPath:{},maxSize:{},acceptedFiles:{},shownFiles:{},service:{},selectable:{},minSelected:{},maxSelected:{}},[],["clearSelection"],!1));}catch{};export{Ye as default};
//# sourceMappingURL=asset-manager.wc.js.map
