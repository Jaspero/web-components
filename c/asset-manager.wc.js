import{S as Y,i as W,s as J,e as f,l as S,z as _,d,f as w,p as b,m as Z,B as P,w as H,k as $,O as oe,y as V,x as ee,a5 as ie,r as G,T as te,A as D,U as se,N as U,t as O,j as N,V as ne,J as re,c as Ze,o as j,a as Re,R as K,W as Q,n as ae,Y as le,C as ce,D as _e,a6 as Pe,a7 as Ce}from"./svelte.js";import"./index.js";import{fileSize as pe}from"./file-size.js";import{u as Oe}from"./upload.js";const de='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 -960 960 960"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"/></svg>';function Ne(s){let e,t,n,o,r,i=s[1].name+"",l,a,v;return{c(){e=f("div"),t=f("button"),n=new oe(!1),o=S(),r=f("span"),l=_(i),n.a=o,d(t,"type","button"),d(e,"class","folder")},m(c,p){w(c,e,p),b(e,t),n.m(de,t),b(t,o),b(t,r),b(r,l),a||(v=Z(t,"click",s[2]),a=!0)},p(c,[p]){p&2&&i!==(i=c[1].name+"")&&P(l,i)},i:H,o:H,d(c){c&&$(e),a=!1,v()}}}function ze(s,e,t){let{folder:n}=e,{path:o}=e;const r=()=>t(0,o=n.id);return s.$$set=i=>{"folder"in i&&t(1,n=i.folder),"path"in i&&t(0,o=i.path)},[o,n,r]}class Ae extends Y{constructor(e){super(),W(this,e,ze,Ne,J,{folder:1,path:0})}}function ge(s){let e;function t(r,i){if(r[4]==="uploading")return Be;if(r[4]==="paused")return je;if(r[4]==="error")return Ie}let n=t(s),o=n&&n(s);return{c(){o&&o.c(),e=V()},m(r,i){o&&o.m(r,i),w(r,e,i)},p(r,i){n===(n=t(r))&&o?o.p(r,i):(o&&o.d(1),o=n&&n(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&$(e),o&&o.d(r)}}}function Ie(s){return{c:H,m:H,p:H,d:H}}function je(s){let e,t,n,o,r,i=s[0].RESUME+"",l,a,v,c=s[0].CANCEL+"",p,g,h;return{c(){e=f("span"),t=_(s[5]),n=_(" / 100"),o=S(),r=f("button"),l=_(i),a=S(),v=f("button"),p=_(c),d(r,"type","button"),d(v,"type","button")},m(m,x){w(m,e,x),b(e,t),b(e,n),w(m,o,x),w(m,r,x),b(r,l),w(m,a,x),w(m,v,x),b(v,p),g||(h=[Z(r,"click",s[8]),Z(v,"click",s[6])],g=!0)},p(m,x){x&32&&P(t,m[5]),x&1&&i!==(i=m[0].RESUME+"")&&P(l,i),x&1&&c!==(c=m[0].CANCEL+"")&&P(p,c)},d(m){m&&($(e),$(o),$(r),$(a),$(v)),g=!1,G(h)}}}function Be(s){let e,t,n,o,r,i=s[0].PAUSE+"",l,a,v;return{c(){e=f("span"),t=_(s[5]),n=_(" / 100"),o=S(),r=f("button"),l=_(i),d(r,"type","button")},m(c,p){w(c,e,p),b(e,t),b(e,n),w(c,o,p),w(c,r,p),b(r,l),a||(v=Z(r,"click",s[7]),a=!0)},p(c,p){p&32&&P(t,c[5]),p&1&&i!==(i=c[0].PAUSE+"")&&P(l,i)},d(c){c&&($(e),$(o),$(r)),a=!1,v()}}}function De(s){let e,t=s[4]&&ge(s);return{c(){t&&t.c(),e=V()},m(n,o){t&&t.m(n,o),w(n,e,o)},p(n,[o]){n[4]?t?t.p(n,o):(t=ge(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:H,o:H,d(n){n&&$(e),t&&t.d(n)}}}function Ue(s,e,t){let n,o=H,r=()=>(o(),o=ie(g,y=>t(4,n=y)),g),i,l=H,a=()=>(l(),l=ie(p,y=>t(5,i=y)),p);s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>l());let{wording:v}=e,{asset:c}=e,{progress:p}=e;a();let{status:g}=e;r();const h=ee();function m(){c.uploader.cancel(),h("cancel")}const x=()=>c.uploader.pause(),T=()=>c.uploader.resume();return s.$$set=y=>{"wording"in y&&t(0,v=y.wording),"asset"in y&&t(1,c=y.asset),"progress"in y&&a(t(2,p=y.progress)),"status"in y&&r(t(3,g=y.status))},[v,c,p,g,n,i,m,x,T]}class Ye extends Y{constructor(e){super(),W(this,e,Ue,De,J,{wording:0,asset:1,progress:2,status:3})}}const We='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="m376-300 104-104 104 104 56-56-104-104 104-104-56-56-104 104-104-104-56 56 104 104-104 104 56 56Zm-96 180q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520Zm-400 0v520-520Z"/></svg>',Je='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 -960 960 960"><path d="M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"/></svg>';function Ve(s){let e;return{c(){e=f("div"),d(e,"class","icon-only")},m(t,n){w(t,e,n),e.innerHTML=Je},p:H,d(t){t&&$(e)}}}function Ge(s){let e;return{c(){e=f("div"),d(e,"class","icon-only")},m(t,n){w(t,e,n),e.innerHTML=de},p:H,d(t){t&&$(e)}}}function Ke(s){let e,t,n;return{c(){e=f("img"),d(e,"class","file-icon-image"),re(e.src,t=s[1].url)||d(e,"src",t),d(e,"alt",n=s[1].name)},m(o,r){w(o,e,r)},p(o,r){r&2&&!re(e.src,t=o[1].url)&&d(e,"src",t),r&2&&n!==(n=o[1].name)&&d(e,"alt",n)},d(o){o&&$(e)}}}function Qe(s){let e,t,n,o,r,i,l,a,v=s[1].name+"",c,p,g,h,m,x,T=pe(s[1].size)+"",y,F,L,A;function I(M,k){return k&2&&(r=null),k&2&&(i=null),r==null&&(r=!!M[1].contentType.startsWith("image")),r?Ke:(i==null&&(i=!!M[1].contentType.startsWith("video")),i?Ge:Ve)}let z=I(s,-1),E=z(s);return g=new Ye({props:{wording:s[0],asset:s[1],status:s[1].status,progress:s[1].progress}}),g.$on("cancel",s[6]),{c(){e=f("div"),t=f("button"),n=S(),o=f("div"),E.c(),l=S(),a=f("div"),c=_(v),p=S(),te(g.$$.fragment),h=S(),m=f("div"),x=f("span"),y=_(T),d(t,"class","file-remove"),d(t,"type","button"),d(o,"class","file-icon"),d(a,"class","file-name"),d(m,"class","file-info"),d(e,"class","file"),D(e,"removing",s[2])},m(M,k){w(M,e,k),b(e,t),t.innerHTML=We,b(e,n),b(e,o),E.m(o,null),b(e,l),b(e,a),b(a,c),b(a,p),se(g,a,null),b(e,h),b(e,m),b(m,x),b(x,y),F=!0,L||(A=Z(t,"click",U(s[4])),L=!0)},p(M,[k]){z===(z=I(M,k))&&E?E.p(M,k):(E.d(1),E=z(M),E&&(E.c(),E.m(o,null))),(!F||k&2)&&v!==(v=M[1].name+"")&&P(c,v);const q={};k&1&&(q.wording=M[0]),k&2&&(q.asset=M[1]),k&2&&(q.status=M[1].status),k&2&&(q.progress=M[1].progress),g.$set(q),(!F||k&2)&&T!==(T=pe(M[1].size)+"")&&P(y,T),(!F||k&4)&&D(e,"removing",M[2])},i(M){F||(O(g.$$.fragment,M),F=!0)},o(M){N(g.$$.fragment,M),F=!1},d(M){M&&$(e),E.d(),ne(g),L=!1,A()}}}function Xe(s,e,t){let{wording:n}=e,{asset:o}=e,{service:r}=e,i=!1;const l=ee();async function a(){t(2,i=!0),await r.remove(o.id),t(2,i=!1),l("remove")}const v=()=>l("cancel");return s.$$set=c=>{"wording"in c&&t(0,n=c.wording),"asset"in c&&t(1,o=c.asset),"service"in c&&t(5,r=c.service)},[n,o,i,l,a,r,v]}class et extends Y{constructor(e){super(),W(this,e,Xe,Qe,J,{wording:0,asset:1,service:5})}}const tt='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>',st='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" /></svg>',nt='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="M560-320h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"/></svg>',ot='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960"><path d="M440-200h80v-167l64 64 56-57-160-160-160 160 57 56 63-63v167ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z" /></svg>';function it(s){Re(s,"svelte-1qg9bp8",`.svelte-1qg9bp8.svelte-1qg9bp8{box-sizing:border-box}.card.svelte-1qg9bp8.svelte-1qg9bp8{position:relative;display:flex;flex-direction:column;max-width:802px;width:100%;height:500px;overflow:auto;background-color:white;box-shadow:0 3px 6px rgba(0, 0, 0, 0.12);font-family:sans-serif}header.svelte-1qg9bp8.svelte-1qg9bp8{z-index:1;position:sticky;top:0;display:flex;justify-content:space-between;background-color:white;padding:20px;border-bottom:1px solid rgba(0, 0, 0, 0.12)}header.svelte-1qg9bp8 .route.svelte-1qg9bp8{display:flex;align-items:center;height:100%;font-size:20px}header.svelte-1qg9bp8 nav.svelte-1qg9bp8{display:flex;gap:12px}.header-actions.svelte-1qg9bp8.svelte-1qg9bp8{display:flex;gap:12px}header.svelte-1qg9bp8 button.svelte-1qg9bp8{width:40px;height:40px;display:flex;justify-content:center;align-items:center;background-color:transparent;border:1px solid rgba(0, 0, 0, 0.12);border-radius:12px;cursor:pointer;transition:0.25s}header.svelte-1qg9bp8 button.svelte-1qg9bp8:disabled{opacity:0.5;background-color:rgba(0, 0, 0, 0.1);pointer-events:none}header.svelte-1qg9bp8 button.svelte-1qg9bp8:hover{background-color:rgba(0, 0, 0, 0.08);border-color:rgba(0, 0, 0, 0.2)}footer.svelte-1qg9bp8.svelte-1qg9bp8{z-index:1;position:sticky;bottom:0;display:flex;background-color:white;padding:20px;border-top:1px solid rgba(0, 0, 0, 0.12)}footer.svelte-1qg9bp8 button.svelte-1qg9bp8{height:40px;padding:0 16px;font-weight:bold;background-color:#e66439;color:white;border:none;border-radius:12px;cursor:pointer;transition:0.25s}footer.svelte-1qg9bp8 button.svelte-1qg9bp8:disabled{opacity:0.5;pointer-events:none}footer.svelte-1qg9bp8 button.svelte-1qg9bp8:active{transform:scale(0.95)}.add-folder-submit.svelte-1qg9bp8.svelte-1qg9bp8{height:32px;padding:0 12px;font-weight:bold;background-color:#e66439;color:white;border:none;border-radius:8px;cursor:pointer;margin-top:12px;transition:0.25s}.add-folder-submit.svelte-1qg9bp8.svelte-1qg9bp8:disabled{opacity:0.5;pointer-events:none}.add-folder-submit.svelte-1qg9bp8.svelte-1qg9bp8:active{transform:scale(0.95)}.drop-here.svelte-1qg9bp8.svelte-1qg9bp8{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;gap:12px;justify-content:center;align-items:center;background-color:white}.add-folder-form.svelte-1qg9bp8.svelte-1qg9bp8{padding:20px}.add-folder-input.svelte-1qg9bp8.svelte-1qg9bp8{display:block}.add-folder-input.svelte-1qg9bp8 span.svelte-1qg9bp8{display:block;font-size:14px}.add-folder-input.svelte-1qg9bp8 input.svelte-1qg9bp8{border:1px solid rgba(0, 0, 0, 0.08);height:40px;padding:0 12px;border-radius:8px;font-size:14px;margin-top:4px}.file{position:relative;height:100%;border:1px solid rgba(0, 0, 0, 0.12);border-radius:12px;background-color:white;overflow:hidden}.file-name{padding:6px 12px 0}.file-info{padding:4px 12px 6px}.file-icon .icon-only{padding:12px}.file .file-remove{position:absolute;top:4px;right:4px;width:32px;height:32px;display:flex;justify-content:center;align-items:center;background-color:white;border-radius:8px;cursor:pointer;border:1px solid rgba(0, 0, 0, 0.08)}.file .file-remove:hover{border-color:rgba(0, 0, 0, 0.4)}.file .file-icon-image{width:100%;height:150px;-o-object-fit:contain;object-fit:contain;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none;background-color:rgba(0, 0, 0, 0.02)}.files.svelte-1qg9bp8.svelte-1qg9bp8{display:flex;flex:1;align-content:flex-start;flex-wrap:wrap;padding:12px}.info.svelte-1qg9bp8.svelte-1qg9bp8{display:flex;flex:1;align-content:flex-start;flex-wrap:wrap;padding:20px}.asset-button.svelte-1qg9bp8.svelte-1qg9bp8{width:25%;padding:8px;transition:0.25s;border-radius:12px;cursor:pointer}.asset-button.selected.svelte-1qg9bp8.svelte-1qg9bp8{border:1px solid #e66439}.asset-button:hover .file{background-color:rgba(0, 0, 0, 0.08);border-color:rgba(0, 0, 0, 0.2)}.folder{box-sizing:border-box;width:25%;padding:8px}.folder button{width:100%;padding:12px;display:flex;justify-content:flex-start;align-items:center;border:1px solid rgba(0, 0, 0, 0.12);gap:6px;background-color:transparent;font-size:14px;border-radius:12px;cursor:pointer;transition:0.25s}.folder button:hover{background-color:rgba(0, 0, 0, 0.08);border-color:rgba(0, 0, 0, 0.2)}.loader.svelte-1qg9bp8.svelte-1qg9bp8{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.spinner.svelte-1qg9bp8.svelte-1qg9bp8{width:150px;height:150px;border-radius:50%;border:9px solid var(--primary-color);animation:svelte-1qg9bp8-spinner-bulqg1 0.8s infinite linear alternate,
      svelte-1qg9bp8-spinner-oaa3wk 1.6s infinite linear}@keyframes svelte-1qg9bp8-spinner-bulqg1{0%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%)}12.5%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%)}25%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 100% 100%, 100% 100%)}50%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}62.5%{clip-path:polygon(50% 50%, 100% 0, 100% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}75%{clip-path:polygon(50% 50%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 50% 100%, 0% 100%)}100%{clip-path:polygon(50% 50%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 0% 100%)}}@keyframes svelte-1qg9bp8-spinner-oaa3wk{0%{transform:scaleY(1) rotate(0deg)}49.99%{transform:scaleY(1) rotate(135deg)}50%{transform:scaleY(-1) rotate(0deg)}100%{transform:scaleY(-1) rotate(-135deg)}}`)}function ue(s,e,t){const n=s.slice();return n[41]=e[t],n[43]=t,n}function rt(s){let e,t,n,o,r,i,l=(s[5].replace(s[1],"")||"/")+"",a,v,c,p,g,h,m,x,T,y,F,L,A,I;const z=[dt,pt,ct],E=[];function M(q,R){return q[9]?0:q[6].length==0?1:2}x=M(s),T=E[x]=z[x](s);let k=s[4]&&ve(s);return{c(){e=f("header"),t=f("nav"),n=f("button"),r=S(),i=f("span"),a=_(l),v=S(),c=f("div"),p=f("button"),g=S(),h=f("button"),m=S(),T.c(),y=S(),k&&k.c(),F=V(),d(n,"type","button"),d(n,"title","Back"),n.disabled=o=s[5]===s[1],d(n,"class","svelte-1qg9bp8"),d(i,"class","route svelte-1qg9bp8"),d(t,"class","svelte-1qg9bp8"),d(p,"type","button"),d(p,"title","Add Folder"),d(p,"class","svelte-1qg9bp8"),d(h,"type","button"),d(h,"title","Add Files"),d(h,"class","svelte-1qg9bp8"),d(c,"class","header-actions svelte-1qg9bp8"),d(e,"class","svelte-1qg9bp8")},m(q,R){w(q,e,R),b(e,t),b(t,n),n.innerHTML=st,b(t,r),b(t,i),b(i,a),b(e,v),b(e,c),b(c,p),p.innerHTML=nt,b(c,g),b(c,h),h.innerHTML=ot,w(q,m,R),E[x].m(q,R),w(q,y,R),k&&k.m(q,R),w(q,F,R),L=!0,A||(I=[Z(n,"click",s[16]),Z(p,"click",U(s[17])),Z(h,"click",U(s[27]))],A=!0)},p(q,R){(!L||R[0]&34&&o!==(o=q[5]===q[1]))&&(n.disabled=o),(!L||R[0]&34)&&l!==(l=(q[5].replace(q[1],"")||"/")+"")&&P(a,l);let B=x;x=M(q),x===B?E[x].p(q,R):(Q(),N(E[B],1,1,()=>{E[B]=null}),K(),T=E[x],T?T.p(q,R):(T=E[x]=z[x](q),T.c()),O(T,1),T.m(y.parentNode,y)),q[4]?k?k.p(q,R):(k=ve(q),k.c(),k.m(F.parentNode,F)):k&&(k.d(1),k=null)},i(q){L||(O(T),L=!0)},o(q){N(T),L=!1},d(q){q&&($(e),$(m),$(y),$(F)),E[x].d(q),k&&k.d(q),A=!1,G(I)}}}function at(s){let e,t,n,o,r,i,l,a=s[0].FOLDER_NAME+"",v,c,p,g,h,m=s[0].SUBMIT+"",x,T,y;return{c(){e=f("header"),t=f("div"),n=f("button"),o=S(),r=f("form"),i=f("label"),l=f("span"),v=_(a),c=S(),p=f("input"),g=S(),h=f("button"),x=_(m),d(n,"type","button"),d(n,"class","svelte-1qg9bp8"),d(t,"class","header-actions svelte-1qg9bp8"),d(e,"class","svelte-1qg9bp8"),d(l,"class","svelte-1qg9bp8"),d(p,"pattern",vt),p.required=!0,d(p,"class","svelte-1qg9bp8"),d(i,"class","add-folder-input svelte-1qg9bp8"),d(h,"class","add-folder-submit svelte-1qg9bp8"),d(h,"type","submit"),d(r,"class","add-folder-form svelte-1qg9bp8")},m(F,L){w(F,e,L),b(e,t),b(t,n),n.innerHTML=tt,w(F,o,L),w(F,r,L),b(r,i),b(i,l),b(l,v),b(i,c),b(i,p),le(p,s[11]),b(r,g),b(r,h),b(h,x),T||(y=[Z(n,"click",s[25]),Z(p,"input",s[26]),Z(r,"submit",U(s[18]))],T=!0)},p(F,L){L[0]&1&&a!==(a=F[0].FOLDER_NAME+"")&&P(v,a),L[0]&2048&&p.value!==F[11]&&le(p,F[11]),L[0]&1&&m!==(m=F[0].SUBMIT+"")&&P(x,m)},i:H,o:H,d(F){F&&($(e),$(o),$(r)),T=!1,G(y)}}}function lt(s){let e,t,n,o,r=s[0].DROP_FILES_HERE+"",i;return{c(){e=f("div"),t=new oe(!1),n=S(),o=f("div"),i=_(r),t.a=n,d(o,"class","svelte-1qg9bp8"),d(e,"class","drop-here svelte-1qg9bp8")},m(l,a){w(l,e,a),t.m(Oe,e),b(e,n),b(e,o),b(o,i)},p(l,a){a[0]&1&&r!==(r=l[0].DROP_FILES_HERE+"")&&P(i,r)},i:H,o:H,d(l){l&&$(e)}}}function ct(s){let e,t,n=ce(s[6]),o=[];for(let i=0;i<n.length;i+=1)o[i]=be(ue(s,n,i));const r=i=>N(o[i],1,1,()=>{o[i]=null});return{c(){e=f("div");for(let i=0;i<o.length;i+=1)o[i].c();d(e,"class","files svelte-1qg9bp8")},m(i,l){w(i,e,l);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(i,l){if(l[0]&1581288){n=ce(i[6]);let a;for(a=0;a<n.length;a+=1){const v=ue(i,n,a);o[a]?(o[a].p(v,l),O(o[a],1)):(o[a]=be(v),o[a].c(),O(o[a],1),o[a].m(e,null))}for(Q(),a=n.length;a<o.length;a+=1)r(a);K()}},i(i){if(!t){for(let l=0;l<n.length;l+=1)O(o[l]);t=!0}},o(i){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)N(o[l]);t=!1},d(i){i&&$(e),_e(o,i)}}}function pt(s){let e,t,n=s[0].FOLDER_IS_EMPTY+"",o;return{c(){e=f("div"),t=f("p"),o=_(n),d(t,"class","svelte-1qg9bp8"),d(e,"class","info svelte-1qg9bp8")},m(r,i){w(r,e,i),b(e,t),b(t,o)},p(r,i){i[0]&1&&n!==(n=r[0].FOLDER_IS_EMPTY+"")&&P(o,n)},i:H,o:H,d(r){r&&$(e)}}}function dt(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="spinner svelte-1qg9bp8"></div>',d(e,"class","loader svelte-1qg9bp8")},m(t,n){w(t,e,n)},p:H,i:H,o:H,d(t){t&&$(e)}}}function gt(s){let e,t,n,o,r,i;function l(){return s[29](s[43],s[41])}function a(){return s[30](s[41])}t=new et({props:{asset:s[41],service:s[3]}}),t.$on("remove",l),t.$on("cancel",a);function v(){return s[31](s[41])}return{c(){e=f("div"),te(t.$$.fragment),n=S(),d(e,"class","asset-button svelte-1qg9bp8"),d(e,"role","button"),d(e,"tabindex","1"),D(e,"selected",s[7][s[41].id])},m(c,p){w(c,e,p),se(t,e,null),b(e,n),o=!0,r||(i=Z(e,"click",v),r=!0)},p(c,p){s=c;const g={};p[0]&64&&(g.asset=s[41]),p[0]&8&&(g.service=s[3]),t.$set(g),(!o||p[0]&192)&&D(e,"selected",s[7][s[41].id])},i(c){o||(O(t.$$.fragment,c),o=!0)},o(c){N(t.$$.fragment,c),o=!1},d(c){c&&$(e),ne(t),r=!1,i()}}}function ut(s){let e,t,n;function o(i){s[28](i)}let r={folder:s[41]};return s[5]!==void 0&&(r.path=s[5]),e=new Ae({props:r}),ae.push(()=>Pe(e,"path",o)),{c(){te(e.$$.fragment)},m(i,l){se(e,i,l),n=!0},p(i,l){const a={};l[0]&64&&(a.folder=i[41]),!t&&l[0]&32&&(t=!0,a.path=i[5],Ce(()=>t=!1)),e.$set(a)},i(i){n||(O(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){ne(e,i)}}}function be(s){let e,t,n,o;const r=[ut,gt],i=[];function l(a,v){return a[41].type==="folder"?0:1}return e=l(s),t=i[e]=r[e](s),{c(){t.c(),n=V()},m(a,v){i[e].m(a,v),w(a,n,v),o=!0},p(a,v){let c=e;e=l(a),e===c?i[e].p(a,v):(Q(),N(i[c],1,1,()=>{i[c]=null}),K(),t=i[e],t?t.p(a,v):(t=i[e]=r[e](a),t.c()),O(t,1),t.m(n.parentNode,n))},i(a){o||(O(t),o=!0)},o(a){N(t),o=!1},d(a){a&&$(n),i[e].d(a)}}}function ve(s){let e,t,n=s[0].CONFIRM_SELECTION+"",o,r,i;return{c(){e=f("footer"),t=f("button"),o=_(n),d(t,"type","button"),d(t,"class","svelte-1qg9bp8"),d(e,"class","svelte-1qg9bp8")},m(l,a){w(l,e,a),b(e,t),b(t,o),r||(i=Z(t,"click",s[21]),r=!0)},p(l,a){a[0]&1&&n!==(n=l[0].CONFIRM_SELECTION+"")&&P(o,n)},d(l){l&&$(e),r=!1,i()}}}function bt(s){let e,t,n,o,r,i,l,a;const v=[lt,at,rt],c=[];function p(g,h){return g[10]?0:g[12]?1:2}return t=p(s),n=c[t]=v[t](s),{c(){e=f("section"),n.c(),o=S(),r=f("input"),d(e,"class","card svelte-1qg9bp8"),D(e,"full-border",s[10]),d(r,"type","file"),r.multiple=!0,d(r,"accept",s[2]),r.hidden=!0,d(r,"class","svelte-1qg9bp8")},m(g,h){w(g,e,h),c[t].m(e,null),w(g,o,h),w(g,r,h),s[36](r),i=!0,l||(a=[Z(e,"dragover",U(s[32])),Z(e,"dragleave",s[33]),Z(e,"dragend",s[34]),Z(e,"drop",U(s[35])),Z(r,"change",s[37])],l=!0)},p(g,h){let m=t;t=p(g),t===m?c[t].p(g,h):(Q(),N(c[m],1,1,()=>{c[m]=null}),K(),n=c[t],n?n.p(g,h):(n=c[t]=v[t](g),n.c()),O(n,1),n.m(e,null)),(!i||h[0]&1024)&&D(e,"full-border",g[10]),(!i||h[0]&4)&&d(r,"accept",g[2])},i(g){i||(O(n),i=!0)},o(g){N(n),i=!1},d(g){g&&($(e),$(o),$(r)),c[t].d(),s[36](null),l=!1,G(a)}}}let vt="[a-z_\\-]{3,}";function ft(s,e,t){let{wording:n={DROP_FILES_HERE:"Drop your files here",FOLDER_NAME:"Folder name",SUBMIT:"Submit",FOLDER_IS_EMPTY:"Folder is empty",CONFIRM_SELECTION:"Confirm selection",PAUSE:"Pause",RESUME:"Resume",CANCEL:"Cancel"}}=e,{rootPath:o="/"}=e,{maxSize:r=10*1048576}=e,{acceptedFiles:i="*"}=e,{shownFiles:l}=e,{service:a}=e,{selectable:v=""}=e;const c=ee();let p=o,g=[],h={},m,x=!1,T=!1,y="",F=!1;function L(){t(7,h={})}async function A(u,C){t(6,g=g.filter(X=>X.id!==C))}async function I(u){u.target.files.length&&t(6,g=[...g,...await E(u.target.files)]),t(8,m.value=null,m)}async function z(u){u.dataTransfer.files.length&&t(6,g=[...g,...await E(u.dataTransfer.files)]),t(10,T=!1)}function E(u){return Promise.all(Array.from(u).filter(C=>!(!r||r<C.size)).map(C=>a.upload(p,C)))}function M(){t(5,p=p.split("/").slice(0,-1).join("/"))}function k(){t(11,y=""),t(12,F=!0)}async function q(){t(5,p+=`/${y}`),t(12,F=!1)}function R(u){t(6,g=g.filter(C=>C.id!==u))}function B(u){h[u.id]?delete h[u.id]:v==="single"?t(7,h={[u.id]:u}):t(7,h[u.id]=u,h)}function he(){const u=Object.values(h);c("selected",v==="single"?u[0]:u)}function me(){t(9,x=!0),a.fetch(p).then(u=>{t(6,g=u),l!=null&&l.length&&t(6,g=g.filter(C=>C.type==="folder"||l.some(X=>C.contentType.startsWith(X))))}).finally(()=>{t(9,x=!1)})}const xe=()=>t(12,F=!1);function qe(){y=this.value,t(11,y)}const we=()=>m.click();function $e(u){p=u,t(5,p)}const ye=(u,C)=>A(u,C.id),ke=u=>R(u.id),Fe=u=>B(u),Te=()=>t(10,T=!0),Me=()=>t(10,T=!1),Ee=()=>t(10,T=!1),He=u=>z(u);function Le(u){ae[u?"unshift":"push"](()=>{m=u,t(8,m)})}const Se=u=>I(u);return s.$$set=u=>{"wording"in u&&t(0,n=u.wording),"rootPath"in u&&t(1,o=u.rootPath),"maxSize"in u&&t(22,r=u.maxSize),"acceptedFiles"in u&&t(2,i=u.acceptedFiles),"shownFiles"in u&&t(23,l=u.shownFiles),"service"in u&&t(3,a=u.service),"selectable"in u&&t(4,v=u.selectable)},s.$$.update=()=>{s.$$.dirty[0]&32&&p&&me()},[n,o,i,a,v,p,g,h,m,x,T,y,F,A,I,z,M,k,q,R,B,he,r,l,L,xe,qe,we,$e,ye,ke,Fe,Te,Me,Ee,He,Le,Se]}class fe extends Y{constructor(e){super(),W(this,e,ft,bt,J,{wording:0,rootPath:1,maxSize:22,acceptedFiles:2,shownFiles:23,service:3,selectable:4,clearSelection:24},it,[-1,-1])}get wording(){return this.$$.ctx[0]}set wording(e){this.$$set({wording:e}),j()}get rootPath(){return this.$$.ctx[1]}set rootPath(e){this.$$set({rootPath:e}),j()}get maxSize(){return this.$$.ctx[22]}set maxSize(e){this.$$set({maxSize:e}),j()}get acceptedFiles(){return this.$$.ctx[2]}set acceptedFiles(e){this.$$set({acceptedFiles:e}),j()}get shownFiles(){return this.$$.ctx[23]}set shownFiles(e){this.$$set({shownFiles:e}),j()}get service(){return this.$$.ctx[3]}set service(e){this.$$set({service:e}),j()}get selectable(){return this.$$.ctx[4]}set selectable(e){this.$$set({selectable:e}),j()}get clearSelection(){return this.$$.ctx[24]}}try{customElements.define("jp-asset-manager",Ze(fe,{wording:{},rootPath:{},maxSize:{},acceptedFiles:{},shownFiles:{},service:{},selectable:{}},[],["clearSelection"],!1));}catch{};export{fe as default};
//# sourceMappingURL=asset-manager.wc.js.map
