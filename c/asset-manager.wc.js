import{S as se,i as ne,s as ie,e as f,G as I,b as T,t as J,d as o,g,h as p,o as M,u as K,n as k,j as q,l as re,k as ae,a1 as me,r as le,a2 as oe,m as O,a3 as ce,J as Q,D as W,E as _,a4 as ve,M as pe,c as Me,f as G,a as Be,P as ue,L as fe,R as de,I as he,p as ge,q as Ce,a5 as Se,a6 as Le}from"./svelte.js";import"./index2.js";function Pe(s){let e,t,i,n,a,r=s[1].name+"",c,l,u;return{c(){e=f("button"),t=I("svg"),i=I("path"),n=T(),a=f("span"),c=J(r),o(i,"d","M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"height","24"),o(t,"viewBox","0 -960 960 960"),o(t,"width","24"),o(e,"type","button"),o(e,"class","folder")},m(v,d){g(v,e,d),p(e,t),p(t,i),p(e,n),p(e,a),p(a,c),l||(u=M(e,"click",s[2]),l=!0)},p(v,[d]){d&2&&r!==(r=v[1].name+"")&&K(c,r)},i:k,o:k,d(v){v&&q(e),l=!1,u()}}}function je(s,e,t){let{folder:i}=e,{path:n}=e;const a=()=>t(0,n=i.id);return s.$$set=r=>{"folder"in r&&t(1,i=r.folder),"path"in r&&t(0,n=r.path)},[n,i,a]}class Ne extends se{constructor(e){super(),ne(this,e,je,Pe,ie,{folder:1,path:0})}}function qe(s){let e;function t(a,r){if(a[3]==="uploading")return De;if(a[3]==="paused")return Ae;if(a[3]==="error")return Ye}let i=t(s),n=i&&i(s);return{c(){n&&n.c(),e=re()},m(a,r){n&&n.m(a,r),g(a,e,r)},p(a,r){i===(i=t(a))&&n?n.p(a,r):(n&&n.d(1),n=i&&i(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){a&&q(e),n&&n.d(a)}}}function Ye(s){return{c:k,m:k,p:k,d:k}}function Ae(s){let e,t,i,n,a,r,c,l,u;return{c(){e=f("span"),t=J(s[4]),i=J(" / 100"),n=T(),a=f("button"),a.textContent="Resume",r=T(),c=f("button"),c.textContent="Cancel",o(a,"type","button"),o(c,"type","button")},m(v,d){g(v,e,d),p(e,t),p(e,i),g(v,n,d),g(v,a,d),g(v,r,d),g(v,c,d),l||(u=[M(a,"click",s[7]),M(c,"click",s[5])],l=!0)},p(v,d){d&16&&K(t,v[4])},d(v){v&&(q(e),q(n),q(a),q(r),q(c)),l=!1,le(u)}}}function De(s){let e,t,i,n,a,r,c;return{c(){e=f("span"),t=J(s[4]),i=J(" / 100"),n=T(),a=f("button"),a.textContent="Pause",o(a,"type","button")},m(l,u){g(l,e,u),p(e,t),p(e,i),g(l,n,u),g(l,a,u),r||(c=M(a,"click",s[6]),r=!0)},p(l,u){u&16&&K(t,l[4])},d(l){l&&(q(e),q(n),q(a)),r=!1,c()}}}function We(s){let e,t=s[3]&&qe(s);return{c(){t&&t.c(),e=re()},m(i,n){t&&t.m(i,n),g(i,e,n)},p(i,[n]){i[3]?t?t.p(i,n):(t=qe(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:k,o:k,d(i){i&&q(e),t&&t.d(i)}}}function Ee(s,e,t){let i,n=k,a=()=>(n(),n=me(d,x=>t(3,i=x)),d),r,c=k,l=()=>(c(),c=me(v,x=>t(4,r=x)),v);s.$$.on_destroy.push(()=>n()),s.$$.on_destroy.push(()=>c());let{asset:u}=e,{progress:v}=e;l();let{status:d}=e;a();const w=ae();function L(){u.uploader.cancel(),w("cancel")}const y=()=>u.uploader.pause(),N=()=>u.uploader.resume();return s.$$set=x=>{"asset"in x&&t(0,u=x.asset),"progress"in x&&l(t(1,v=x.progress)),"status"in x&&a(t(2,d=x.status))},[u,v,d,i,r,L,y,N]}class Fe extends se{constructor(e){super(),ne(this,e,Ee,We,ie,{asset:0,progress:1,status:2})}}function xe(s){if(s<1024)return`${s} bytes`;if(s>=1024&&s<1048576)return`${(s/1024).toFixed(1)} KB`;if(s>=1048576)return`${(s/1048576).toFixed(1)} MB`}function _e(s){let e,t;return{c(){e=I("svg"),t=I("path"),o(t,"d","M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","24"),o(e,"viewBox","0 -960 960 960"),o(e,"width","24"),o(e,"class","svelte-1r89a3b")},m(i,n){g(i,e,n),p(e,t)},p:k,d(i){i&&q(e)}}}function Ve(s){let e,t;return{c(){e=I("svg"),t=I("path"),o(t,"d","M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h480q33 0 56.5 23.5T720-720v180l160-160v440L720-420v180q0 33-23.5 56.5T640-160H160Zm0-80h480v-480H160v480Zm0 0v-480 480Z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","24"),o(e,"viewBox","0 -960 960 960"),o(e,"width","24"),o(e,"class","svelte-1r89a3b")},m(i,n){g(i,e,n),p(e,t)},p:k,d(i){i&&q(e)}}}function Ie(s){let e,t,i;return{c(){e=f("img"),pe(e.src,t=s[0].url)||o(e,"src",t),o(e,"alt",i=s[0].name),o(e,"class","svelte-1r89a3b")},m(n,a){g(n,e,a)},p(n,a){a&1&&!pe(e.src,t=n[0].url)&&o(e,"src",t),a&1&&i!==(i=n[0].name)&&o(e,"alt",i)},d(n){n&&q(e)}}}function Je(s){let e,t,i,n,a,r,c,l,u,v,d=s[0].name+"",w,L,y,N,x=xe(s[0].size)+"",E,Y,H,B;n=new Fe({props:{asset:s[0],status:s[0].status,progress:s[0].progress}}),n.$on("cancel",s[5]);function V(b,$){return $&1&&(c=null),$&1&&(l=null),c==null&&(c=!!b[0].contentType.startsWith("image")),c?Ie:(l==null&&(l=!!b[0].contentType.startsWith("video")),l?Ve:_e)}let A=V(s,-1),z=A(s);return{c(){e=f("div"),t=f("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m376-300 104-104 104 104 56-56-104-104 104-104-56-56-104 104-104-104-56 56 104 104-104 104 56 56Zm-96 180q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520Zm-400 0v520-520Z"></path></svg>',i=T(),oe(n.$$.fragment),a=T(),r=f("div"),z.c(),u=T(),v=f("div"),w=J(d),L=T(),y=f("div"),N=f("span"),E=J(x),o(t,"type","button"),o(r,"class","file-icon svelte-1r89a3b"),o(v,"class","file-name svelte-1r89a3b"),o(y,"class","file-info svelte-1r89a3b"),o(e,"class","file svelte-1r89a3b"),O(e,"removing",s[1])},m(b,$){g(b,e,$),p(e,t),p(e,i),ce(n,e,null),p(e,a),p(e,r),z.m(r,null),p(e,u),p(e,v),p(v,w),p(e,L),p(e,y),p(y,N),p(N,E),Y=!0,H||(B=M(t,"click",Q(s[3])),H=!0)},p(b,[$]){const P={};$&1&&(P.asset=b[0]),$&1&&(P.status=b[0].status),$&1&&(P.progress=b[0].progress),n.$set(P),A===(A=V(b,$))&&z?z.p(b,$):(z.d(1),z=A(b),z&&(z.c(),z.m(r,null))),(!Y||$&1)&&d!==(d=b[0].name+"")&&K(w,d),(!Y||$&1)&&x!==(x=xe(b[0].size)+"")&&K(E,x),(!Y||$&2)&&O(e,"removing",b[1])},i(b){Y||(W(n.$$.fragment,b),Y=!0)},o(b){_(n.$$.fragment,b),Y=!1},d(b){b&&q(e),ve(n),z.d(),H=!1,B()}}}function Ke(s,e,t){let{asset:i}=e,{service:n}=e,a=!1;const r=ae();async function c(){t(1,a=!0),await n.remove(i.id),t(1,a=!1),r("remove")}const l=()=>r("cancel");return s.$$set=u=>{"asset"in u&&t(0,i=u.asset),"service"in u&&t(4,n=u.service)},[i,a,r,c,n,l]}class Oe extends se{constructor(e){super(),ne(this,e,Ke,Je,ie,{asset:0,service:4})}}function Qe(s){Be(s,"svelte-z5qm6v",`section.svelte-z5qm6v.svelte-z5qm6v{position:relative;max-width:750px;height:500px;width:100%;border-radius:0.25rem;border:1px dashed #e6510030}button.svelte-z5qm6v.svelte-z5qm6v{cursor:pointer}.full-border.svelte-z5qm6v.svelte-z5qm6v{border:1px dashed var(--primary-color)}header.svelte-z5qm6v.svelte-z5qm6v{display:flex;padding:0.5rem;justify-content:space-between}header.svelte-z5qm6v>div.svelte-z5qm6v{display:flex}header.svelte-z5qm6v span.svelte-z5qm6v{padding:0.5rem;background-color:#ccc;max-width:200px;min-width:50px;line-height:24px;overflow:hidden;border-left:1px dotted #efefef}header.svelte-z5qm6v button.svelte-z5qm6v{border:none;display:flex;padding:0.5rem;background-color:#ccc;transition:0.2s}header.svelte-z5qm6v button.svelte-z5qm6v:hover{background-color:#212121}header.svelte-z5qm6v button.svelte-z5qm6v:disabled{user-select:none;pointer-events:none;cursor:unset;background-color:#efefef}header.svelte-z5qm6v button:hover svg.svelte-z5qm6v{fill:#fff}.info.svelte-z5qm6v.svelte-z5qm6v{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.files.svelte-z5qm6v.svelte-z5qm6v{display:grid;grid-template-columns:repeat(4, minmax(0, 1fr));height:100%;padding:1rem;gap:1rem;overflow:auto}@media(max-width: 900px){.files.svelte-z5qm6v.svelte-z5qm6v{grid-template-columns:repeat(3, minmax(0, 1fr))}}@media(max-width: 600px){.files.svelte-z5qm6v.svelte-z5qm6v{grid-template-columns:repeat(2, minmax(0, 1fr))}}.loader.svelte-z5qm6v.svelte-z5qm6v{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.spinner.svelte-z5qm6v.svelte-z5qm6v{width:150px;height:150px;border-radius:50%;border:9px solid var(--primary-color);animation:svelte-z5qm6v-spinner-bulqg1 0.8s infinite linear alternate,\r
      svelte-z5qm6v-spinner-oaa3wk 1.6s infinite linear}.folder-dialog.svelte-z5qm6v.svelte-z5qm6v{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10}@keyframes svelte-z5qm6v-spinner-bulqg1{0%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%)}12.5%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%)}25%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 100% 100%, 100% 100%)}50%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}62.5%{clip-path:polygon(50% 50%, 100% 0, 100% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}75%{clip-path:polygon(50% 50%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 50% 100%, 0% 100%)}100%{clip-path:polygon(50% 50%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 0% 100%)}}@keyframes svelte-z5qm6v-spinner-oaa3wk{0%{transform:scaleY(1) rotate(0deg)}49.99%{transform:scaleY(1) rotate(135deg)}50%{transform:scaleY(-1) rotate(0deg)}100%{transform:scaleY(-1) rotate(-135deg)}}`)}function be(s,e,t){const i=s.slice();return i[37]=e[t],i[39]=t,i}function we(s){let e;return{c(){e=f("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 384 512"><path d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"></path></svg> <div>Drop your files here</div>',o(e,"class","info svelte-z5qm6v")},m(t,i){g(t,e,i)},d(t){t&&q(e)}}}function Re(s){let e,t,i=ge(s[5]),n=[];for(let r=0;r<i.length;r+=1)n[r]=ze(be(s,i,r));const a=r=>_(n[r],1,1,()=>{n[r]=null});return{c(){e=f("div");for(let r=0;r<n.length;r+=1)n[r].c();o(e,"class","files svelte-z5qm6v")},m(r,c){g(r,e,c);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null);t=!0},p(r,c){if(c[0]&790644){i=ge(r[5]);let l;for(l=0;l<i.length;l+=1){const u=be(r,i,l);n[l]?(n[l].p(u,c),W(n[l],1)):(n[l]=ze(u),n[l].c(),W(n[l],1),n[l].m(e,null))}for(de(),l=i.length;l<n.length;l+=1)a(l);ue()}},i(r){if(!t){for(let c=0;c<i.length;c+=1)W(n[c]);t=!0}},o(r){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)_(n[c]);t=!1},d(r){r&&q(e),Ce(n,r)}}}function Xe(s){let e;return{c(){e=f("div"),e.innerHTML="<p>Folder is empty</p>",o(e,"class","info svelte-z5qm6v")},m(t,i){g(t,e,i)},p:k,i:k,o:k,d(t){t&&q(e)}}}function Ge(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="spinner svelte-z5qm6v"></div>',o(e,"class","loader svelte-z5qm6v")},m(t,i){g(t,e,i)},p:k,i:k,o:k,d(t){t&&q(e)}}}function Ue(s){let e,t,i,n,a,r;function c(){return s[24](s[39],s[37])}function l(){return s[25](s[37])}t=new Oe({props:{asset:s[37],service:s[2]}}),t.$on("remove",c),t.$on("cancel",l);function u(){return s[26](s[37])}return{c(){e=f("div"),oe(t.$$.fragment),i=T(),o(e,"role","button"),o(e,"tabindex","1"),O(e,"selected",s[6][s[37].id])},m(v,d){g(v,e,d),ce(t,e,null),p(e,i),n=!0,a||(r=M(e,"click",u),a=!0)},p(v,d){s=v;const w={};d[0]&32&&(w.asset=s[37]),d[0]&4&&(w.service=s[2]),t.$set(w),(!n||d[0]&96)&&O(e,"selected",s[6][s[37].id])},i(v){n||(W(t.$$.fragment,v),n=!0)},o(v){_(t.$$.fragment,v),n=!1},d(v){v&&q(e),ve(t),a=!1,r()}}}function et(s){let e,t,i;function n(r){s[23](r)}let a={folder:s[37]};return s[4]!==void 0&&(a.path=s[4]),e=new Ne({props:a}),he.push(()=>Se(e,"path",n)),{c(){oe(e.$$.fragment)},m(r,c){ce(e,r,c),i=!0},p(r,c){const l={};c[0]&32&&(l.folder=r[37]),!t&&c[0]&16&&(t=!0,l.path=r[4],Le(()=>t=!1)),e.$set(l)},i(r){i||(W(e.$$.fragment,r),i=!0)},o(r){_(e.$$.fragment,r),i=!1},d(r){ve(e,r)}}}function ze(s){let e,t,i,n;const a=[et,Ue],r=[];function c(l,u){return l[37].type==="folder"?0:1}return e=c(s),t=r[e]=a[e](s),{c(){t.c(),i=re()},m(l,u){r[e].m(l,u),g(l,i,u),n=!0},p(l,u){let v=e;e=c(l),e===v?r[e].p(l,u):(de(),_(r[v],1,1,()=>{r[v]=null}),ue(),t=r[e],t?t.p(l,u):(t=r[e]=a[e](l),t.c()),W(t,1),t.m(i.parentNode,i))},i(l){n||(W(t),n=!0)},o(l){_(t),n=!1},d(l){l&&q(i),r[e].d(l)}}}function $e(s){let e,t,i,n;return{c(){e=f("footer"),t=f("button"),t.textContent="Confirm Selection",o(t,"type","button"),o(t,"class","svelte-z5qm6v")},m(a,r){g(a,e,r),p(e,t),i||(n=M(t,"click",s[20]),i=!0)},p:k,d(a){a&&q(e),i=!1,n()}}}function ye(s){let e,t,i,n,a,r,c,l,u,v;return{c(){e=f("button"),e.textContent="Close",t=T(),i=f("form"),n=f("label"),n.textContent="Folder Name",a=T(),r=f("input"),c=T(),l=f("button"),l.textContent="Submit",o(e,"type","button"),o(e,"class","svelte-z5qm6v"),o(n,"for","name"),o(r,"name","name"),o(r,"pattern",st),r.required=!0,o(l,"type","submit"),o(l,"class","svelte-z5qm6v"),o(i,"class","folder-dialog svelte-z5qm6v")},m(d,w){g(d,e,w),g(d,t,w),g(d,i,w),p(i,n),p(i,a),p(i,r),fe(r,s[10]),p(i,c),p(i,l),u||(v=[M(e,"click",s[33]),M(r,"input",s[34]),M(i,"submit",Q(s[17]))],u=!0)},p(d,w){w[0]&1024&&r.value!==d[10]&&fe(r,d[10])},d(d){d&&(q(e),q(t),q(i)),u=!1,le(v)}}}function tt(s){let e,t,i,n,a,r,c,l,u,v=(s[4].replace(s[0],"")||"/")+"",d,w,L,y,N,x,E,Y,H,B,V,A,z,b,$,P,R,U,j=s[9]&&we();const ee=[Ge,Xe,Re],D=[];function te(h,Z){return h[8]?0:h[5].length==0?1:2}H=te(s),B=D[H]=ee[H](s);let C=s[3]&&$e(s),S=s[11]&&ye(s);return{c(){e=f("section"),t=f("header"),i=f("div"),n=f("button"),a=I("svg"),r=I("path"),l=T(),u=f("span"),d=J(v),w=T(),L=f("div"),y=f("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" class="svelte-z5qm6v"><path d="M560-320h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"></path></svg>',N=T(),x=f("button"),x.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" class="svelte-z5qm6v"><path d="M440-200h80v-167l64 64 56-57-160-160-160 160 57 56 63-63v167ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"></path></svg>',E=T(),j&&j.c(),Y=T(),B.c(),V=T(),C&&C.c(),A=T(),z=f("input"),b=T(),S&&S.c(),$=re(),o(r,"d","m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"),o(a,"xmlns","http://www.w3.org/2000/svg"),o(a,"height","24"),o(a,"viewBox","0 -960 960 960"),o(a,"width","24"),o(a,"class","svelte-z5qm6v"),o(n,"type","button"),o(n,"title","Back"),n.disabled=c=s[4]===s[0],o(n,"class","svelte-z5qm6v"),o(u,"class","svelte-z5qm6v"),o(i,"class","svelte-z5qm6v"),o(y,"type","button"),o(y,"title","Add Folder"),o(y,"class","svelte-z5qm6v"),o(x,"type","button"),o(x,"title","Add Files"),o(x,"class","svelte-z5qm6v"),o(L,"class","svelte-z5qm6v"),o(t,"class","svelte-z5qm6v"),o(e,"class","svelte-z5qm6v"),O(e,"full-border",s[9]),o(z,"type","file"),z.multiple=!0,o(z,"accept",s[1]),z.hidden=!0},m(h,Z){g(h,e,Z),p(e,t),p(t,i),p(i,n),p(n,a),p(a,r),p(i,l),p(i,u),p(u,d),p(t,w),p(t,L),p(L,y),p(L,N),p(L,x),p(e,E),j&&j.m(e,null),p(e,Y),D[H].m(e,null),p(e,V),C&&C.m(e,null),g(h,A,Z),g(h,z,Z),s[31](z),g(h,b,Z),S&&S.m(h,Z),g(h,$,Z),P=!0,R||(U=[M(n,"click",s[15]),M(y,"click",Q(s[16])),M(x,"click",Q(s[22])),M(e,"dragover",Q(s[27])),M(e,"dragleave",s[28]),M(e,"dragend",s[29]),M(e,"drop",Q(s[30])),M(z,"change",s[32])],R=!0)},p(h,Z){(!P||Z[0]&17&&c!==(c=h[4]===h[0]))&&(n.disabled=c),(!P||Z[0]&17)&&v!==(v=(h[4].replace(h[0],"")||"/")+"")&&K(d,v),h[9]?j||(j=we(),j.c(),j.m(e,Y)):j&&(j.d(1),j=null);let X=H;H=te(h),H===X?D[H].p(h,Z):(de(),_(D[X],1,1,()=>{D[X]=null}),ue(),B=D[H],B?B.p(h,Z):(B=D[H]=ee[H](h),B.c()),W(B,1),B.m(e,V)),h[3]?C?C.p(h,Z):(C=$e(h),C.c(),C.m(e,null)):C&&(C.d(1),C=null),(!P||Z[0]&512)&&O(e,"full-border",h[9]),(!P||Z[0]&2)&&o(z,"accept",h[1]),h[11]?S?S.p(h,Z):(S=ye(h),S.c(),S.m($.parentNode,$)):S&&(S.d(1),S=null)},i(h){P||(W(B),P=!0)},o(h){_(B),P=!1},d(h){h&&(q(e),q(A),q(z),q(b),q($)),j&&j.d(),D[H].d(),C&&C.d(),s[31](null),S&&S.d(h),R=!1,le(U)}}}let st="[a-z_\\-]{3,}";function nt(s,e,t){let{rootPath:i="/"}=e,{maxSize:n=10*1048576}=e,{acceptedFiles:a="*"}=e,{service:r}=e,{selectable:c=""}=e;const l=ae();let u=i,v=[],d={},w,L=!1,y=!1,N="",x=!1;async function E(m,F){t(5,v=v.filter(Ze=>Ze.id!==F))}async function Y(m){m.target.files.length&&t(5,v=[...v,...await B(m.target.files)]),t(7,w.value=null,w)}async function H(m){m.dataTransfer.files.length&&t(5,v=[...v,...await B(m.dataTransfer.files)]),t(9,y=!1)}function B(m){return Promise.all(Array.from(m).filter(F=>!(!n||n<F.size)).map(F=>r.upload(u,F)))}function V(){t(4,u=u.split("/").slice(0,-1).join("/"))}function A(){t(10,N=""),t(11,x=!0)}async function z(){t(4,u+=`/${N}`),t(11,x=!1)}function b(m){t(5,v=v.filter(F=>F.id!==m))}function $(m){d[m.id]?delete d[m.id]:c==="single"?t(6,d={[m.id]:m}):t(6,d[m.id]=m,d)}function P(){const m=Object.values(d);l("selected",c==="single"?m[0]:m)}const R=()=>w.click();function U(m){u=m,t(4,u)}const j=(m,F)=>E(m,F.id),ee=m=>b(m.id),D=m=>$(m),te=()=>t(9,y=!0),C=()=>t(9,y=!1),S=()=>t(9,y=!1),h=m=>H(m);function Z(m){he[m?"unshift":"push"](()=>{w=m,t(7,w)})}const X=m=>Y(m),He=()=>t(11,x=!1);function ke(){N=this.value,t(10,N)}return s.$$set=m=>{"rootPath"in m&&t(0,i=m.rootPath),"maxSize"in m&&t(21,n=m.maxSize),"acceptedFiles"in m&&t(1,a=m.acceptedFiles),"service"in m&&t(2,r=m.service),"selectable"in m&&t(3,c=m.selectable)},s.$$.update=()=>{s.$$.dirty[0]&20&&u&&(t(8,L=!0),r.fetch(u).then(m=>{t(5,v=m)}).finally(()=>{t(8,L=!1)}))},[i,a,r,c,u,v,d,w,L,y,N,x,E,Y,H,V,A,z,b,$,P,n,R,U,j,ee,D,te,C,S,h,Z,X,He,ke]}class Te extends se{constructor(e){super(),ne(this,e,nt,tt,ie,{rootPath:0,maxSize:21,acceptedFiles:1,service:2,selectable:3},Qe,[-1,-1])}get rootPath(){return this.$$.ctx[0]}set rootPath(e){this.$$set({rootPath:e}),G()}get maxSize(){return this.$$.ctx[21]}set maxSize(e){this.$$set({maxSize:e}),G()}get acceptedFiles(){return this.$$.ctx[1]}set acceptedFiles(e){this.$$set({acceptedFiles:e}),G()}get service(){return this.$$.ctx[2]}set service(e){this.$$set({service:e}),G()}get selectable(){return this.$$.ctx[3]}set selectable(e){this.$$set({selectable:e}),G()}}try{customElements.define("jp-asset-manager",Me(Te,{rootPath:{},maxSize:{},acceptedFiles:{},service:{},selectable:{}},[],[],!1));}catch{};export{Te as default};
