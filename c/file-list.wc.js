var je=Object.defineProperty,ye=(l,e,t)=>e in l?je(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,$e=(l,e,t)=>(ye(l,typeof e!="symbol"?e+"":e,t),t);import{c as be,S as Ve,i as Me,f as k,s as ze,a as ke,b as B,e as x,d as o,t as P,g as y,I as Q,o as z,H as U,n as D,j as $,J as G,k as He,w as Le,G as W,l as Z,m as Be,q as K,h as w,F as Ie,r as _,E as N,K as ee}from"./svelte.js";import"./index2.js";function Se(l){ke(l,"svelte-6ljw7f",`.grab.svelte-6ljw7f.svelte-6ljw7f{cursor:grab}.grab.svelte-6ljw7f.svelte-6ljw7f:active{cursor:grabbing}.dropzone.svelte-6ljw7f.svelte-6ljw7f{position:relative;background-color:#f4f4f4;width:750px;height:500px;border:1px dashed #e6510030}.fullBorder.svelte-6ljw7f.svelte-6ljw7f{border:1px dashed var(--primary-color)}.info.svelte-6ljw7f.svelte-6ljw7f{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.info.svelte-6ljw7f a.svelte-6ljw7f{color:var(--primary-color);cursor:pointer}.info.svelte-6ljw7f a.svelte-6ljw7f:hover{text-decoration:underline}.files.svelte-6ljw7f.svelte-6ljw7f{height:100%;display:flex;flex-wrap:wrap;overflow:auto}.add-more.svelte-6ljw7f.svelte-6ljw7f{position:absolute;display:flex;justify-content:center;align-items:center;cursor:pointer;width:40px;height:40px;right:-20px;bottom:-20px;border-radius:50%;background-color:var(--primary-color);fill:var(--text-on-primary)}.add-more.svelte-6ljw7f svg.svelte-6ljw7f{height:60%}.file.svelte-6ljw7f.svelte-6ljw7f{position:relative;display:flex;flex-direction:column;align-items:center;width:23%;margin:0 1%}.file-name.svelte-6ljw7f.svelte-6ljw7f{width:100%;text-align:left;font-size:12px;font-weight:500;line-height:1.3;margin-bottom:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-info.svelte-6ljw7f.svelte-6ljw7f{width:100%;padding:0 5% 0 0;display:flex;justify-content:space-between;color:#757575;font-size:11px;font-weight:400}.file-remove.svelte-6ljw7f.svelte-6ljw7f{cursor:pointer;position:absolute;right:0;top:0}.file-icon.svelte-6ljw7f.svelte-6ljw7f{display:flex;justify-content:center;align-items:center;margin:10px 0;width:150px;height:150px;overflow:hidden;background-color:var(--primary-color);fill:var(--text-on-primary)}.file-icon.svelte-6ljw7f img.svelte-6ljw7f{object-fit:cover;min-width:100%;min-height:100%;user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.file-icon.svelte-6ljw7f svg.svelte-6ljw7f{height:50%}.loader.svelte-6ljw7f.svelte-6ljw7f{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.spinner.svelte-6ljw7f.svelte-6ljw7f{width:150px;height:150px;border-radius:50%;border:9px solid var(--primary-color);animation:svelte-6ljw7f-spinner-bulqg1 0.8s infinite linear alternate,
      svelte-6ljw7f-spinner-oaa3wk 1.6s infinite linear}@keyframes svelte-6ljw7f-spinner-bulqg1{0%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%)}12.5%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%)}25%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 100% 100%, 100% 100%)}50%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}62.5%{clip-path:polygon(50% 50%, 100% 0, 100% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}75%{clip-path:polygon(50% 50%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 50% 100%, 0% 100%)}100%{clip-path:polygon(50% 50%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 0% 100%)}}@keyframes svelte-6ljw7f-spinner-oaa3wk{0%{transform:scaleY(1) rotate(0deg)}49.99%{transform:scaleY(1) rotate(135deg)}50%{transform:scaleY(-1) rotate(0deg)}100%{transform:scaleY(-1) rotate(-135deg)}}`)}function te(l,e,t){const a=l.slice();return a[44]=e[t],a[45]=e,a[46]=t,a}function Te(l){let e,t,a,s,g,p=Z(l[5]),n=[];for(let r=0;r<p.length;r+=1)n[r]=ie(te(l,p,r));return{c(){e=x("div");for(let r=0;r<n.length;r+=1)n[r].c();t=B(),a=x("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="svelte-6ljw7f"><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"></path></svg>',o(e,"class","files svelte-6ljw7f"),o(a,"class","add-more svelte-6ljw7f")},m(r,h){y(r,e,h);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);y(r,t,h),y(r,a,h),s||(g=z(a,"click",U(l[35])),s=!0)},p(r,h){if(h[0]&25584){p=Z(r[5]);let f;for(f=0;f<p.length;f+=1){const b=te(r,p,f);n[f]?n[f].p(b,h):(n[f]=ie(b),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=p.length}},d(r){r&&($(e),$(t),$(a)),Be(n,r),s=!1,g()}}}function Ye(l){let e,t,a,s,g,p,n;return{c(){e=x("div"),t=x("div"),a=K("Drop files here or "),s=x("a"),s.textContent="browse files",o(s,"class","svelte-6ljw7f"),o(e,"class","info svelte-6ljw7f"),e.hidden=g=l[5].length!=0},m(r,h){y(r,e,h),w(e,t),w(t,a),w(t,s),p||(n=z(s,"click",l[31]),p=!0)},p(r,h){h[0]&32&&g!==(g=r[5].length!=0)&&(e.hidden=g)},d(r){r&&$(e),p=!1,n()}}}function Ae(l){let e,t,a;return{c(){e=x("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 384 512"><path d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"></path></svg> <div>Drop your files here</div>',o(e,"class","info svelte-6ljw7f")},m(s,g){y(s,e,g),t||(a=[z(e,"dragleave",l[28]),z(e,"dragend",l[29]),z(e,"drop",U(l[30]))],t=!0)},p:D,d(s){s&&$(e),t=!1,G(a)}}}function Ee(l){let e;return{c(){e=x("div"),e.innerHTML='<div class="spinner svelte-6ljw7f"></div>',o(e,"class","loader svelte-6ljw7f")},m(t,a){y(t,e,a)},p:D,d(t){t&&$(e)}}}function Ce(l){let e,t;return{c(){e=N("svg"),t=N("path"),o(t,"d","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 384 512"),o(e,"class","svelte-6ljw7f")},m(a,s){y(a,e,s),w(e,t)},p:D,d(a){a&&$(e)}}}function De(l){let e,t;return{c(){e=N("svg"),t=N("path"),o(t,"d","M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 640 512"),o(e,"class","svelte-6ljw7f")},m(a,s){y(a,e,s),w(e,t)},p:D,d(a){a&&$(e)}}}function Fe(l){let e,t,a;return{c(){e=x("img"),ee(e.src,t=l[44].src)||o(e,"src",t),o(e,"alt",a=l[44].name),o(e,"class","svelte-6ljw7f")},m(s,g){y(s,e,g)},p(s,g){g[0]&32&&!ee(e.src,t=s[44].src)&&o(e,"src",t),g[0]&32&&a!==(a=s[44].name)&&o(e,"alt",a)},d(s){s&&$(e)}}}function ie(l){let e,t,a,s,g,p,n=l[44].name+"",r,h,f,b,u=(l[44].size||"")+"",d,v,L,I=l[44].saved?"saved":"",Y,m,M=l[46],S,T;function E(){return l[32](l[46])}function X(V,H){return V[44].src?Fe:V[44].external?De:Ce}let C=X(l),j=C(l);function R(...V){return l[33](l[46],...V)}const F=()=>l[34](e,M),q=()=>l[34](null,M);return{c(){e=x("div"),t=x("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',a=B(),s=x("div"),j.c(),g=B(),p=x("div"),r=K(n),h=B(),f=x("div"),b=x("span"),d=K(u),v=B(),L=x("span"),Y=K(I),m=B(),o(t,"class","file-remove svelte-6ljw7f"),o(s,"class","file-icon svelte-6ljw7f"),o(p,"class","file-name svelte-6ljw7f"),Ie(L,"color","rgb(26 151 26)"),o(f,"class","file-info svelte-6ljw7f"),o(e,"class","file svelte-6ljw7f"),P(e,"grab",l[4])},m(V,H){y(V,e,H),w(e,t),w(e,a),w(e,s),j.m(s,null),w(e,g),w(e,p),w(p,r),w(e,h),w(e,f),w(f,b),w(b,d),w(f,v),w(f,L),w(L,Y),w(e,m),F(),S||(T=[z(t,"click",U(E)),z(e,"mousedown",R)],S=!0)},p(V,H){l=V,C===(C=X(l))&&j?j.p(l,H):(j.d(1),j=C(l),j&&(j.c(),j.m(s,null))),H[0]&32&&n!==(n=l[44].name+"")&&_(r,n),H[0]&32&&u!==(u=(l[44].size||"")+"")&&_(d,u),H[0]&32&&I!==(I=l[44].saved?"saved":"")&&_(Y,I),M!==l[46]&&(q(),M=l[46],F()),H[0]&16&&P(e,"grab",l[4])},d(V){V&&$(e),j.d(),q(),S=!1,G(T)}}}function qe(l){let e,t,a,s,g,p,n,r,h;function f(d,v){return d[11]?Ee:d[12]?Ae:d[5].length==0?Ye:Te}let b=f(l),u=b(l);return{c(){e=B(),t=x("div"),u.c(),a=B(),s=x("input"),p=B(),n=x("input"),o(t,"class","dropzone svelte-6ljw7f"),P(t,"fullBorder",l[12]),o(s,"type","file"),s.multiple=!0,o(s,"accept",g=l[3]&&l[3].acceptedFiles),s.hidden=!0,o(n,"type","text"),o(n,"id",l[1]),o(n,"name",l[2]),n.hidden=!0},m(d,v){y(d,e,v),y(d,t,v),u.m(t,null),y(d,a,v),y(d,s,v),l[37](s),y(d,p,v),y(d,n,v),Q(n,l[0]),r||(h=[z(document,"mousemove",l[26]),z(document,"mouseup",l[27]),z(t,"dragover",U(l[36])),z(s,"change",l[38]),z(n,"input",l[39])],r=!0)},p(d,v){b===(b=f(d))&&u?u.p(d,v):(u.d(1),u=b(d),u&&(u.c(),u.m(t,null))),v[0]&4096&&P(t,"fullBorder",d[12]),v[0]&8&&g!==(g=d[3]&&d[3].acceptedFiles)&&o(s,"accept",g),v[0]&2&&o(n,"id",d[1]),v[0]&4&&o(n,"name",d[2]),v[0]&1&&n.value!==d[0]&&Q(n,d[0])},i:D,o:D,d(d){d&&($(e),$(t),$(a),$(s),$(p),$(n)),u.d(),l[37](null),r=!1,G(h)}}}function Xe(l,e,t){let{attachedInternals:a}=e,{value:s=""}=e,{id:g=""}=e,{name:p=""}=e,{service:n}=e,{maxfiles:r=null}=e,{minfiles:h=null}=e,{maxfilesValidationMessage:f}=e,{minfilesValidationMessage:b}=e,{validationMessages:u={}}=e,{sortable:d=!0}=e,v=null,L=-1,I,Y,m=[],M,S=!0,T=!1,E=[];const X=()=>s,C=()=>a.reportValidity(),j=He();async function R(){t(11,S=!0);try{await Promise.allSettled(m.map(async i=>{if(!i.saved){const c=await n.uploadFile(i.file);i.saved=!0,i.url=c}})),t(5,m),t(0,s=m.filter(i=>i.saved).map(i=>i.url).join(","))}catch(i){console.log(i)}finally{t(11,S=!1)}}function F(i){m[i].saved&&j("removed",{url:m[i].url}),m.splice(i,1),t(5,m),t(0,s=m.filter(c=>c.saved).map(c=>c.url).join(","))}function q(i){i.target.files.length&&(t(5,m=m.concat(J(Array.from(i.target.files)))),j("change",{unsaved:m.filter(c=>!c.saved).length}),t(10,M.value=null,M))}function V(i){i.dataTransfer.files.length&&(t(5,m=m.concat(J(Array.from(i.dataTransfer.files)))),j("change",{unsaved:m.filter(c=>!c.saved).length})),t(12,T=!1)}const H=i=>{if(i<1024)return`${i} bytes`;if(i>=1024&&i<1048576)return`${(i/1024).toFixed(1)} KB`;if(i>=1048576)return`${(i/1048576).toFixed(1)} MB`},J=i=>i.filter(c=>n&&n.maxSize?(j("rejected",{file:c.name,code:"maxSize"}),c.size<n.maxSize):!0).map(c=>{let A={name:c.name,size:H(c.size),file:c,saved:!1};return c.type.split("/")[0]==="image"&&(A.src=URL.createObjectURL(c)),A}),se=(i,c)=>new File([i],c);Le(async()=>{if(s){Array.isArray(s)&&t(0,s=s.join(","));const i=s.split(",");await Promise.allSettled(i.map(async c=>{const A=await fetch(c),O=se(A.blob(),c);let xe={name:O.name,size:"",file:O,saved:!0,url:c,external:!0};m.push(xe)})),t(5,m)}t(11,S=!1)});const ae=i=>{v&&(i.preventDefault(),t(6,v.style.transform="translateY("+(i.clientY-I)+"px)",v),t(6,v.style.transform+="translateX("+(i.clientX-Y)+"px)",v))},ne=i=>{if(v){i.preventDefault();const c=i.target.closest(".file");if(c){const A=[...c.parentNode.children].indexOf(c),O=m[A];t(5,m[A]=m[L],m),t(5,m[L]=O,m)}t(6,v.style="",v),t(6,v=null)}},re=()=>t(12,T=!1),oe=()=>t(12,T=!1),ce=i=>V(i),fe=()=>M.click(),de=i=>F(i),ve=(i,c)=>{d&&(t(6,v=E[i]),t(7,L=i),t(6,v.style.pointerEvents="none",v),t(9,Y=c.clientX),t(8,I=c.clientY))};function me(i,c){W[i?"unshift":"push"](()=>{E[c]=i,t(13,E)})}const ge=()=>M.click(),pe=()=>t(12,T=!0);function he(i){W[i?"unshift":"push"](()=>{M=i,t(10,M)})}const ue=i=>q(i);function we(){s=this.value,t(0,s)}return l.$$set=i=>{"attachedInternals"in i&&t(17,a=i.attachedInternals),"value"in i&&t(0,s=i.value),"id"in i&&t(1,g=i.id),"name"in i&&t(2,p=i.name),"service"in i&&t(3,n=i.service),"maxfiles"in i&&t(18,r=i.maxfiles),"minfiles"in i&&t(19,h=i.minfiles),"maxfilesValidationMessage"in i&&t(20,f=i.maxfilesValidationMessage),"minfilesValidationMessage"in i&&t(21,b=i.minfilesValidationMessage),"validationMessages"in i&&t(22,u=i.validationMessages),"sortable"in i&&t(4,d=i.sortable)},l.$$.update=()=>{l.$$.dirty[0]&8257569&&(h&&m.length<h?a.setValidity({customError:!0},b||u.minfiles||"Not enough files."):r&&m.length>r?a.setValidity({customError:!0},f||u.maxfiles||"Too many files."):a.setValidity({}),a.checkValidity(),a.setFormValue(s),j("value",{value:s}))},[s,g,p,n,d,m,v,L,I,Y,M,S,T,E,F,q,V,a,r,h,f,b,u,X,C,R,ae,ne,re,oe,ce,fe,de,ve,me,ge,pe,he,ue,we]}class le extends Ve{constructor(e){super(),Me(this,e,Xe,qe,ze,{attachedInternals:17,value:0,id:1,name:2,service:3,maxfiles:18,minfiles:19,maxfilesValidationMessage:20,minfilesValidationMessage:21,validationMessages:22,sortable:4,getValue:23,reportValidity:24,save:25},Se,[-1,-1])}get attachedInternals(){return this.$$.ctx[17]}set attachedInternals(e){this.$$set({attachedInternals:e}),k()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),k()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),k()}get name(){return this.$$.ctx[2]}set name(e){this.$$set({name:e}),k()}get service(){return this.$$.ctx[3]}set service(e){this.$$set({service:e}),k()}get maxfiles(){return this.$$.ctx[18]}set maxfiles(e){this.$$set({maxfiles:e}),k()}get minfiles(){return this.$$.ctx[19]}set minfiles(e){this.$$set({minfiles:e}),k()}get maxfilesValidationMessage(){return this.$$.ctx[20]}set maxfilesValidationMessage(e){this.$$set({maxfilesValidationMessage:e}),k()}get minfilesValidationMessage(){return this.$$.ctx[21]}set minfilesValidationMessage(e){this.$$set({minfilesValidationMessage:e}),k()}get validationMessages(){return this.$$.ctx[22]}set validationMessages(e){this.$$set({validationMessages:e}),k()}get sortable(){return this.$$.ctx[4]}set sortable(e){this.$$set({sortable:e}),k()}get getValue(){return this.$$.ctx[23]}get reportValidity(){return this.$$.ctx[24]}get save(){return this.$$.ctx[25]}}try{customElements.define("jp-file-list",be(le,{attachedInternals:{},value:{},id:{},name:{},service:{},maxfiles:{},minfiles:{},maxfilesValidationMessage:{},minfilesValidationMessage:{},validationMessages:{},sortable:{type:"Boolean"}},[],["getValue","reportValidity","save"],!1,l=>{var e;return e=class extends l{constructor(){super(),this.attachedInternals=this.attachInternals()}},$e(e,"formAssociated",!0),e}));}catch{};export{le as default};
