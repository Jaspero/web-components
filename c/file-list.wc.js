var ze=Object.defineProperty,ke=(l,e,t)=>e in l?ze(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,He=(l,e,t)=>(ke(l,typeof e!="symbol"?e+"":e,t),t);import{c as Le,S as je,i as Be,f as L,s as Fe,a as Ie,b as I,e as y,d as o,m as N,g as $,L as Z,o as j,J as O,n as X,j as b,r as J,k as Te,I as ee,p as te,q as Ye,t as P,h as x,H as Ae,u as K,G as R,M as ae}from"./svelte.js";import"./index2.js";function Se(l){Ie(l,"svelte-mtyl3a",`.grab.svelte-mtyl3a.svelte-mtyl3a{cursor:grab}.grab.svelte-mtyl3a.svelte-mtyl3a:active{cursor:grabbing}.dropzone.svelte-mtyl3a.svelte-mtyl3a{position:relative;background-color:#f4f4f4;max-width:750px;height:500px;width:100%;border-radius:0.25rem;border:1px dashed #e6510030}.fullBorder.svelte-mtyl3a.svelte-mtyl3a{border:1px dashed var(--primary-color)}.info.svelte-mtyl3a.svelte-mtyl3a{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.info.svelte-mtyl3a a.svelte-mtyl3a{color:var(--primary-color);cursor:pointer}.info.svelte-mtyl3a a.svelte-mtyl3a:hover{text-decoration:underline}.files.svelte-mtyl3a.svelte-mtyl3a{display:grid;grid-template-columns:repeat(4, minmax(0, 1fr));height:100%;padding:1rem;gap:1rem;overflow:auto}@media(max-width: 900px){.files.svelte-mtyl3a.svelte-mtyl3a{grid-template-columns:repeat(3, minmax(0, 1fr))}}@media(max-width: 600px){.files.svelte-mtyl3a.svelte-mtyl3a{grid-template-columns:repeat(2, minmax(0, 1fr))}}.add-more.svelte-mtyl3a.svelte-mtyl3a{position:absolute;display:flex;justify-content:center;align-items:center;cursor:pointer;width:40px;height:40px;right:-20px;bottom:-20px;border-radius:50%;background-color:var(--primary-color);fill:var(--text-on-primary)}.add-more.svelte-mtyl3a svg.svelte-mtyl3a{height:60%}.file.svelte-mtyl3a.svelte-mtyl3a{position:relative;grid-column:span 1 / span 1;display:flex;flex-direction:column;align-items:center}.file-name.svelte-mtyl3a.svelte-mtyl3a{width:100%;text-align:left;font-size:12px;font-weight:500;line-height:1.3;margin-bottom:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-info.svelte-mtyl3a.svelte-mtyl3a{width:100%;padding:0 5% 0 0;display:flex;justify-content:space-between;color:#757575;font-size:11px;font-weight:400}.file-remove.svelte-mtyl3a.svelte-mtyl3a{cursor:pointer;position:absolute;top:0;right:0;padding:0;transform:translate(50%, -50%)}.file-icon.svelte-mtyl3a.svelte-mtyl3a{display:flex;justify-content:center;align-items:center;overflow:hidden;background-color:var(--primary-color);fill:var(--text-on-primary)}.file-icon.svelte-mtyl3a img.svelte-mtyl3a{aspect-ratio:1 / 1;object-fit:cover;user-drag:none;width:100%;height:100%;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.file-icon.svelte-mtyl3a svg.svelte-mtyl3a{height:50%}.loader.svelte-mtyl3a.svelte-mtyl3a{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.spinner.svelte-mtyl3a.svelte-mtyl3a{width:150px;height:150px;border-radius:50%;border:9px solid var(--primary-color);animation:svelte-mtyl3a-spinner-bulqg1 0.8s infinite linear alternate,
      svelte-mtyl3a-spinner-oaa3wk 1.6s infinite linear}@keyframes svelte-mtyl3a-spinner-bulqg1{0%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%)}12.5%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%)}25%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 100% 100%, 100% 100%)}50%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}62.5%{clip-path:polygon(50% 50%, 100% 0, 100% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}75%{clip-path:polygon(50% 50%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 50% 100%, 0% 100%)}100%{clip-path:polygon(50% 50%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 0% 100%)}}@keyframes svelte-mtyl3a-spinner-oaa3wk{0%{transform:scaleY(1) rotate(0deg)}49.99%{transform:scaleY(1) rotate(135deg)}50%{transform:scaleY(-1) rotate(0deg)}100%{transform:scaleY(-1) rotate(-135deg)}}`)}function le(l,e,t){const i=l.slice();return i[47]=e[t],i[48]=e,i[49]=t,i}function ie(l){let e;return{c(){e=y("label")},m(t,i){$(t,e,i),e.innerHTML=l[0]},p(t,i){i[0]&1&&(e.innerHTML=t[0])},d(t){t&&b(e)}}}function Ce(l){let e,t,i,r,m,g=te(l[5]),f=[];for(let s=0;s<g.length;s+=1)f[s]=se(le(l,g,s));return{c(){e=y("div");for(let s=0;s<f.length;s+=1)f[s].c();t=I(),i=y("button"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="svelte-mtyl3a"><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"></path></svg>',o(e,"class","files svelte-mtyl3a"),o(i,"type","button"),o(i,"class","add-more svelte-mtyl3a")},m(s,h){$(s,e,h);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(e,null);$(s,t,h),$(s,i,h),r||(m=j(i,"click",O(l[37])),r=!0)},p(s,h){if(h[0]&51120){g=te(s[5]);let c;for(c=0;c<g.length;c+=1){const p=le(s,g,c);f[c]?f[c].p(p,h):(f[c]=se(p),f[c].c(),f[c].m(e,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=g.length}},d(s){s&&(b(e),b(t),b(i)),Ye(f,s),r=!1,m()}}}function De(l){let e,t,i,r,m,g,f;return{c(){e=y("div"),t=y("div"),i=P("Drop files here or "),r=y("a"),r.textContent="browse files",o(r,"class","svelte-mtyl3a"),o(e,"class","info svelte-mtyl3a"),e.hidden=m=l[5].length!=0},m(s,h){$(s,e,h),x(e,t),x(t,i),x(t,r),g||(f=j(r,"click",l[33]),g=!0)},p(s,h){h[0]&32&&m!==(m=s[5].length!=0)&&(e.hidden=m)},d(s){s&&b(e),g=!1,f()}}}function Ee(l){let e,t,i;return{c(){e=y("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 384 512"><path d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"></path></svg> <div>Drop your files here</div>',o(e,"class","info svelte-mtyl3a")},m(r,m){$(r,e,m),t||(i=[j(e,"dragleave",l[30]),j(e,"dragend",l[31]),j(e,"drop",O(l[32]))],t=!0)},p:X,d(r){r&&b(e),t=!1,J(i)}}}function Xe(l){let e;return{c(){e=y("div"),e.innerHTML='<div class="spinner svelte-mtyl3a"></div>',o(e,"class","loader svelte-mtyl3a")},m(t,i){$(t,e,i)},p:X,d(t){t&&b(e)}}}function qe(l){let e,t;return{c(){e=R("svg"),t=R("path"),o(t,"d","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 384 512"),o(e,"class","svelte-mtyl3a")},m(i,r){$(i,e,r),x(e,t)},p:X,d(i){i&&b(e)}}}function Ne(l){let e,t;return{c(){e=R("svg"),t=R("path"),o(t,"d","M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 640 512"),o(e,"class","svelte-mtyl3a")},m(i,r){$(i,e,r),x(e,t)},p:X,d(i){i&&b(e)}}}function Oe(l){let e,t,i;return{c(){e=y("img"),ae(e.src,t=l[47].src)||o(e,"src",t),o(e,"alt",i=l[47].name),o(e,"class","svelte-mtyl3a")},m(r,m){$(r,e,m)},p(r,m){m[0]&32&&!ae(e.src,t=r[47].src)&&o(e,"src",t),m[0]&32&&i!==(i=r[47].name)&&o(e,"alt",i)},d(r){r&&b(e)}}}function se(l){let e,t,i,r,m,g,f=l[47].name+"",s,h,c,p,z=(l[47].size||"")+"",V,w,n,v=l[47].saved?"saved":"",S,E,d=l[49],B,Y;function C(){return l[34](l[49])}function D(M,F){return M[47].src?Oe:M[47].external?Ne:qe}let k=D(l),H=k(l);function U(...M){return l[35](l[49],...M)}const A=()=>l[36](e,d),q=()=>l[36](null,d);return{c(){e=y("div"),t=y("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',i=I(),r=y("div"),H.c(),m=I(),g=y("div"),s=P(f),h=I(),c=y("div"),p=y("span"),V=P(z),w=I(),n=y("span"),S=P(v),E=I(),o(t,"type","button"),o(t,"class","file-remove svelte-mtyl3a"),o(r,"class","file-icon svelte-mtyl3a"),o(g,"class","file-name svelte-mtyl3a"),Ae(n,"color","rgb(26 151 26)"),o(c,"class","file-info svelte-mtyl3a"),o(e,"class","file svelte-mtyl3a"),N(e,"grab",l[4])},m(M,F){$(M,e,F),x(e,t),x(e,i),x(e,r),H.m(r,null),x(e,m),x(e,g),x(g,s),x(e,h),x(e,c),x(c,p),x(p,V),x(c,w),x(c,n),x(n,S),x(e,E),A(),B||(Y=[j(t,"mousedown",O(C)),j(e,"mousedown",U)],B=!0)},p(M,F){l=M,k===(k=D(l))&&H?H.p(l,F):(H.d(1),H=k(l),H&&(H.c(),H.m(r,null))),F[0]&32&&f!==(f=l[47].name+"")&&K(s,f),F[0]&32&&z!==(z=(l[47].size||"")+"")&&K(V,z),F[0]&32&&v!==(v=l[47].saved?"saved":"")&&K(S,v),d!==l[49]&&(q(),d=l[49],A()),F[0]&16&&N(e,"grab",l[4])},d(M){M&&b(e),H.d(),q(),B=!1,J(Y)}}}function Pe(l){let e,t,i,r,m,g,f,s,h,c,p=l[0]&&ie(l);function z(n,v){return n[12]?Xe:n[13]?Ee:n[5].length==0?De:Ce}let V=z(l),w=V(l);return{c(){e=I(),p&&p.c(),t=I(),i=y("div"),w.c(),r=I(),m=y("input"),f=I(),s=y("input"),o(i,"class","dropzone svelte-mtyl3a"),N(i,"fullBorder",l[13]),o(m,"type","file"),m.multiple=!0,o(m,"accept",g=l[3]&&l[3].acceptedFiles),m.hidden=!0,o(s,"type","text"),o(s,"id",l[1]),o(s,"name",l[2]),s.hidden=!0},m(n,v){$(n,e,v),p&&p.m(n,v),$(n,t,v),$(n,i,v),w.m(i,null),$(n,r,v),$(n,m,v),l[39](m),$(n,f,v),$(n,s,v),Z(s,l[6]),h||(c=[j(document,"mousemove",l[28]),j(document,"mouseup",l[29]),j(i,"dragover",O(l[38])),j(m,"change",l[40]),j(s,"input",l[41])],h=!0)},p(n,v){n[0]?p?p.p(n,v):(p=ie(n),p.c(),p.m(t.parentNode,t)):p&&(p.d(1),p=null),V===(V=z(n))&&w?w.p(n,v):(w.d(1),w=V(n),w&&(w.c(),w.m(i,null))),v[0]&8192&&N(i,"fullBorder",n[13]),v[0]&8&&g!==(g=n[3]&&n[3].acceptedFiles)&&o(m,"accept",g),v[0]&2&&o(s,"id",n[1]),v[0]&4&&o(s,"name",n[2]),v[0]&64&&s.value!==n[6]&&Z(s,n[6])},i:X,o:X,d(n){n&&(b(e),b(t),b(i),b(r),b(m),b(f),b(s)),p&&p.d(n),w.d(),l[39](null),h=!1,J(c)}}}function Re(l,e,t){let{attachedInternals:i}=e,{value:r=""}=e,{label:m=""}=e,{id:g=""}=e,{name:f=""}=e,{service:s}=e,{maxfiles:h=null}=e,{minfiles:c=null}=e,{maxfilesValidationMessage:p}=e,{minfilesValidationMessage:z}=e,{validationMessages:V={}}=e,{sortable:w=!0}=e,n=null,v=-1,S,E,d=[],B,Y=!1,C=!1,D=[],k="";const H=()=>k,U=()=>i.reportValidity(),A=Te();async function q(){t(12,Y=!0);try{await Promise.allSettled(d.map(async a=>{if(!a.saved){const u=await s.uploadFile(a.file);a.saved=!0,a.url=u}})),t(5,d),t(19,r)}catch(a){console.log(a)}finally{t(12,Y=!1)}}function M(a){d[a].saved&&A("removed",{url:d[a].url}),d.splice(a,1),t(5,d),t(19,r)}function F(a){a.target.files.length&&(t(5,d=d.concat(Q(Array.from(a.target.files)))),A("change",{unsaved:d.filter(u=>!u.saved).length}),t(11,B.value=null,B))}function _(a){a.dataTransfer.files.length&&(t(5,d=d.concat(Q(Array.from(a.dataTransfer.files)))),A("change",{unsaved:d.filter(u=>!u.saved).length})),t(13,C=!1)}const re=a=>{if(a<1024)return`${a} bytes`;if(a>=1024&&a<1048576)return`${(a/1024).toFixed(1)} KB`;if(a>=1048576)return`${(a/1048576).toFixed(1)} MB`},Q=a=>a.filter(u=>s&&s.maxSize?(A("rejected",{file:u.name,code:"maxSize"}),u.size<s.maxSize):!0).map(u=>{let T={name:u.name,size:re(u.size),file:u,saved:!1};return u.type.split("/")[0]==="image"&&(T.src=URL.createObjectURL(u)),T}),oe=(a,u)=>new File([a],u),ce=async a=>{Array.isArray(a)&&(a=a.join(","));const u=a.split(",");await Promise.allSettled(u.map(async T=>{const G=await fetch(T),W=oe(G.blob(),T);let Me={name:W.name,size:"",file:W,saved:!0,url:T,external:!0};d.push(Me)})),t(5,d),t(19,a)},me=a=>{n&&(a.preventDefault(),t(7,n.style.transform="translateY("+(a.clientY-S)+"px)",n),t(7,n.style.transform+="translateX("+(a.clientX-E)+"px)",n))},de=a=>{if(n){a.preventDefault();const u=a.target.closest(".file");if(u){const T=[...u.parentNode.children].indexOf(u),G=d[T];t(5,d[T]=d[v],d),t(5,d[v]=G,d)}t(7,n.style="",n),t(7,n=null)}},fe=()=>t(13,C=!1),ve=()=>t(13,C=!1),ue=a=>_(a),pe=()=>B.click(),ge=a=>M(a),he=(a,u)=>{w&&(t(7,n=D[a]),t(8,v=a),t(7,n.style.pointerEvents="none",n),t(10,E=u.clientX),t(9,S=u.clientY))};function ye(a,u){ee[a?"unshift":"push"](()=>{D[u]=a,t(14,D)})}const xe=()=>B.click(),$e=()=>t(13,C=!0);function be(a){ee[a?"unshift":"push"](()=>{B=a,t(11,B)})}const we=a=>F(a);function Ve(){k=this.value,t(6,k),t(5,d),t(21,c),t(18,i),t(23,z),t(24,V),t(20,h),t(22,p),t(19,r)}return l.$$set=a=>{"attachedInternals"in a&&t(18,i=a.attachedInternals),"value"in a&&t(19,r=a.value),"label"in a&&t(0,m=a.label),"id"in a&&t(1,g=a.id),"name"in a&&t(2,f=a.name),"service"in a&&t(3,s=a.service),"maxfiles"in a&&t(20,h=a.maxfiles),"minfiles"in a&&t(21,c=a.minfiles),"maxfilesValidationMessage"in a&&t(22,p=a.maxfilesValidationMessage),"minfilesValidationMessage"in a&&t(23,z=a.minfilesValidationMessage),"validationMessages"in a&&t(24,V=a.validationMessages),"sortable"in a&&t(4,w=a.sortable)},l.$$.update=()=>{l.$$.dirty[0]&524288&&(t(5,d=[]),r&&(t(12,Y=!0),ce(r),t(12,Y=!1))),l.$$.dirty[0]&32768096&&(t(6,k=d.filter(a=>a.saved).map(a=>a.url).join(",")),c&&d.length<c?i.setValidity({customError:!0},z||V.minfiles||"Not enough files."):h&&d.length>h?i.setValidity({customError:!0},p||V.maxfiles||"Too many files."):i.setValidity({}),i.checkValidity(),i.setFormValue(k),A("value",{value:k}))},[m,g,f,s,w,d,k,n,v,S,E,B,Y,C,D,M,F,_,i,r,h,c,p,z,V,H,U,q,me,de,fe,ve,ue,pe,ge,he,ye,xe,$e,be,we,Ve]}class ne extends je{constructor(e){super(),Be(this,e,Re,Pe,Fe,{attachedInternals:18,value:19,label:0,id:1,name:2,service:3,maxfiles:20,minfiles:21,maxfilesValidationMessage:22,minfilesValidationMessage:23,validationMessages:24,sortable:4,getValue:25,reportValidity:26,save:27},Se,[-1,-1])}get attachedInternals(){return this.$$.ctx[18]}set attachedInternals(e){this.$$set({attachedInternals:e}),L()}get value(){return this.$$.ctx[19]}set value(e){this.$$set({value:e}),L()}get label(){return this.$$.ctx[0]}set label(e){this.$$set({label:e}),L()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),L()}get name(){return this.$$.ctx[2]}set name(e){this.$$set({name:e}),L()}get service(){return this.$$.ctx[3]}set service(e){this.$$set({service:e}),L()}get maxfiles(){return this.$$.ctx[20]}set maxfiles(e){this.$$set({maxfiles:e}),L()}get minfiles(){return this.$$.ctx[21]}set minfiles(e){this.$$set({minfiles:e}),L()}get maxfilesValidationMessage(){return this.$$.ctx[22]}set maxfilesValidationMessage(e){this.$$set({maxfilesValidationMessage:e}),L()}get minfilesValidationMessage(){return this.$$.ctx[23]}set minfilesValidationMessage(e){this.$$set({minfilesValidationMessage:e}),L()}get validationMessages(){return this.$$.ctx[24]}set validationMessages(e){this.$$set({validationMessages:e}),L()}get sortable(){return this.$$.ctx[4]}set sortable(e){this.$$set({sortable:e}),L()}get getValue(){return this.$$.ctx[25]}get reportValidity(){return this.$$.ctx[26]}get save(){return this.$$.ctx[27]}}try{customElements.define("jp-file-list",Le(ne,{attachedInternals:{},value:{},label:{},id:{},name:{},service:{},maxfiles:{},minfiles:{},maxfilesValidationMessage:{},minfilesValidationMessage:{},validationMessages:{},sortable:{type:"Boolean"}},[],["getValue","reportValidity","save"],!1,l=>{var e;return e=class extends l{constructor(){super(),this.attachedInternals=this.attachInternals()}},He(e,"formAssociated",!0),e}));}catch{};export{ne as default};
