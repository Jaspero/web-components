var $e=Object.defineProperty,be=(i,e,t)=>e in i?$e(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Me=(i,e,t)=>(be(i,typeof e!="symbol"?e+"":e,t),t);import{c as Ve,S as ze,i as je,f as z,s as ke,a as He,b as B,e as x,d as o,m as P,g as y,K as Q,o as j,J as K,n as D,j as w,r as G,k as Le,x as Be,I as W,p as Z,q as Ie,t as R,h as q,H as Te,u as J,G as U,L as ee}from"./svelte.js";import"./index2.js";function Ye(i){He(i,"svelte-hmq0xa",`.grab.svelte-hmq0xa.svelte-hmq0xa{cursor:grab}.grab.svelte-hmq0xa.svelte-hmq0xa:active{cursor:grabbing}.dropzone.svelte-hmq0xa.svelte-hmq0xa{position:relative;background-color:#f4f4f4;max-width:750px;height:500px;width:100%;border-radius:.25rem;border:1px dashed #e6510030}.fullBorder.svelte-hmq0xa.svelte-hmq0xa{border:1px dashed var(--primary-color)}.info.svelte-hmq0xa.svelte-hmq0xa{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.info.svelte-hmq0xa a.svelte-hmq0xa{color:var(--primary-color);cursor:pointer}.info.svelte-hmq0xa a.svelte-hmq0xa:hover{text-decoration:underline}.files.svelte-hmq0xa.svelte-hmq0xa{height:100%;display:flex;flex-wrap:wrap;overflow:auto}.add-more.svelte-hmq0xa.svelte-hmq0xa{position:absolute;display:flex;justify-content:center;align-items:center;cursor:pointer;width:40px;height:40px;right:-20px;bottom:-20px;border-radius:50%;background-color:var(--primary-color);fill:var(--text-on-primary)}.add-more.svelte-hmq0xa svg.svelte-hmq0xa{height:60%}.file.svelte-hmq0xa.svelte-hmq0xa{position:relative;display:flex;flex-direction:column;align-items:center;width:23%;margin:0 1%}.file-name.svelte-hmq0xa.svelte-hmq0xa{width:100%;text-align:left;font-size:12px;font-weight:500;line-height:1.3;margin-bottom:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-info.svelte-hmq0xa.svelte-hmq0xa{width:100%;padding:0 5% 0 0;display:flex;justify-content:space-between;color:#757575;font-size:11px;font-weight:400}.file-remove.svelte-hmq0xa.svelte-hmq0xa{cursor:pointer;position:absolute;right:0;top:0}.file-icon.svelte-hmq0xa.svelte-hmq0xa{display:flex;justify-content:center;align-items:center;margin:10px 0;width:150px;height:150px;overflow:hidden;background-color:var(--primary-color);fill:var(--text-on-primary)}.file-icon.svelte-hmq0xa img.svelte-hmq0xa{object-fit:cover;min-width:100%;min-height:100%;user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.file-icon.svelte-hmq0xa svg.svelte-hmq0xa{height:50%}.loader.svelte-hmq0xa.svelte-hmq0xa{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.spinner.svelte-hmq0xa.svelte-hmq0xa{width:150px;height:150px;border-radius:50%;border:9px solid var(--primary-color);animation:svelte-hmq0xa-spinner-bulqg1 0.8s infinite linear alternate,
      svelte-hmq0xa-spinner-oaa3wk 1.6s infinite linear}@keyframes svelte-hmq0xa-spinner-bulqg1{0%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%)}12.5%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%)}25%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 100% 100%, 100% 100%)}50%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}62.5%{clip-path:polygon(50% 50%, 100% 0, 100% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}75%{clip-path:polygon(50% 50%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 50% 100%, 0% 100%)}100%{clip-path:polygon(50% 50%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 0% 100%)}}@keyframes svelte-hmq0xa-spinner-oaa3wk{0%{transform:scaleY(1) rotate(0deg)}49.99%{transform:scaleY(1) rotate(135deg)}50%{transform:scaleY(-1) rotate(0deg)}100%{transform:scaleY(-1) rotate(-135deg)}}`)}function te(i,e,t){const s=i.slice();return s[45]=e[t],s[46]=e,s[47]=t,s}function ae(i){let e;return{c(){e=x("label")},m(t,s){y(t,e,s),e.innerHTML=i[1]},p(t,s){s[0]&2&&(e.innerHTML=t[1])},d(t){t&&w(e)}}}function Fe(i){let e,t,s,n,h,g=Z(i[6]),d=[];for(let l=0;l<g.length;l+=1)d[l]=ie(te(i,g,l));return{c(){e=x("div");for(let l=0;l<d.length;l+=1)d[l].c();t=B(),s=x("button"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="svelte-hmq0xa"><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"></path></svg>',o(e,"class","files svelte-hmq0xa"),o(s,"class","add-more svelte-hmq0xa")},m(l,p){y(l,e,p);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(e,null);y(l,t,p),y(l,s,p),n||(h=j(s,"click",K(i[36])),n=!0)},p(l,p){if(p[0]&51168){g=Z(l[6]);let m;for(m=0;m<g.length;m+=1){const u=te(l,g,m);d[m]?d[m].p(u,p):(d[m]=ie(u),d[m].c(),d[m].m(e,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=g.length}},d(l){l&&(w(e),w(t),w(s)),Ie(d,l),n=!1,h()}}}function Ae(i){let e,t,s,n,h,g,d;return{c(){e=x("div"),t=x("div"),s=R("Drop files here or "),n=x("a"),n.textContent="browse files",o(n,"class","svelte-hmq0xa"),o(e,"class","info svelte-hmq0xa"),e.hidden=h=i[6].length!=0},m(l,p){y(l,e,p),q(e,t),q(t,s),q(t,n),g||(d=j(n,"click",i[32]),g=!0)},p(l,p){p[0]&64&&h!==(h=l[6].length!=0)&&(e.hidden=h)},d(l){l&&w(e),g=!1,d()}}}function Se(i){let e,t,s;return{c(){e=x("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 384 512"><path d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"></path></svg> <div>Drop your files here</div>',o(e,"class","info svelte-hmq0xa")},m(n,h){y(n,e,h),t||(s=[j(e,"dragleave",i[29]),j(e,"dragend",i[30]),j(e,"drop",K(i[31]))],t=!0)},p:D,d(n){n&&w(e),t=!1,G(s)}}}function Ce(i){let e;return{c(){e=x("div"),e.innerHTML='<div class="spinner svelte-hmq0xa"></div>',o(e,"class","loader svelte-hmq0xa")},m(t,s){y(t,e,s)},p:D,d(t){t&&w(e)}}}function Ee(i){let e,t;return{c(){e=U("svg"),t=U("path"),o(t,"d","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 384 512"),o(e,"class","svelte-hmq0xa")},m(s,n){y(s,e,n),q(e,t)},p:D,d(s){s&&w(e)}}}function De(i){let e,t;return{c(){e=U("svg"),t=U("path"),o(t,"d","M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 640 512"),o(e,"class","svelte-hmq0xa")},m(s,n){y(s,e,n),q(e,t)},p:D,d(s){s&&w(e)}}}function Ne(i){let e,t,s;return{c(){e=x("img"),ee(e.src,t=i[45].src)||o(e,"src",t),o(e,"alt",s=i[45].name),o(e,"class","svelte-hmq0xa")},m(n,h){y(n,e,h)},p(n,h){h[0]&64&&!ee(e.src,t=n[45].src)&&o(e,"src",t),h[0]&64&&s!==(s=n[45].name)&&o(e,"alt",s)},d(n){n&&w(e)}}}function ie(i){let e,t,s,n,h,g,d=i[45].name+"",l,p,m,u,k=(i[45].size||"")+"",b,$,r,v=i[45].saved?"saved":"",I,C,f=i[47],H,T;function Y(){return i[33](i[47])}function F(M,L){return M[45].src?Ne:M[45].external?De:Ee}let E=F(i),V=E(i);function A(...M){return i[34](i[47],...M)}const O=()=>i[35](e,f),N=()=>i[35](null,f);return{c(){e=x("div"),t=x("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',s=B(),n=x("div"),V.c(),h=B(),g=x("div"),l=R(d),p=B(),m=x("div"),u=x("span"),b=R(k),$=B(),r=x("span"),I=R(v),C=B(),o(t,"class","file-remove svelte-hmq0xa"),o(n,"class","file-icon svelte-hmq0xa"),o(g,"class","file-name svelte-hmq0xa"),Te(r,"color","rgb(26 151 26)"),o(m,"class","file-info svelte-hmq0xa"),o(e,"class","file svelte-hmq0xa"),P(e,"grab",i[5])},m(M,L){y(M,e,L),q(e,t),q(e,s),q(e,n),V.m(n,null),q(e,h),q(e,g),q(g,l),q(e,p),q(e,m),q(m,u),q(u,b),q(m,$),q(m,r),q(r,I),q(e,C),O(),H||(T=[j(t,"mousedown",K(Y)),j(e,"mousedown",A)],H=!0)},p(M,L){i=M,E===(E=F(i))&&V?V.p(i,L):(V.d(1),V=E(i),V&&(V.c(),V.m(n,null))),L[0]&64&&d!==(d=i[45].name+"")&&J(l,d),L[0]&64&&k!==(k=(i[45].size||"")+"")&&J(b,k),L[0]&64&&v!==(v=i[45].saved?"saved":"")&&J(I,v),f!==i[47]&&(N(),f=i[47],O()),L[0]&32&&P(e,"grab",i[5])},d(M){M&&w(e),V.d(),N(),H=!1,G(T)}}}function Oe(i){let e,t,s,n,h,g,d,l,p,m,u=i[1]&&ae(i);function k(r,v){return r[12]?Ce:r[13]?Se:r[6].length==0?Ae:Fe}let b=k(i),$=b(i);return{c(){e=B(),u&&u.c(),t=B(),s=x("div"),$.c(),n=B(),h=x("input"),d=B(),l=x("input"),o(s,"class","dropzone svelte-hmq0xa"),P(s,"fullBorder",i[13]),o(h,"type","file"),h.multiple=!0,o(h,"accept",g=i[4]&&i[4].acceptedFiles),h.hidden=!0,o(l,"type","text"),o(l,"id",i[2]),o(l,"name",i[3]),l.hidden=!0},m(r,v){y(r,e,v),u&&u.m(r,v),y(r,t,v),y(r,s,v),$.m(s,null),y(r,n,v),y(r,h,v),i[38](h),y(r,d,v),y(r,l,v),Q(l,i[0]),p||(m=[j(document,"mousemove",i[27]),j(document,"mouseup",i[28]),j(s,"dragover",K(i[37])),j(h,"change",i[39]),j(l,"input",i[40])],p=!0)},p(r,v){r[1]?u?u.p(r,v):(u=ae(r),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),b===(b=k(r))&&$?$.p(r,v):($.d(1),$=b(r),$&&($.c(),$.m(s,null))),v[0]&8192&&P(s,"fullBorder",r[13]),v[0]&16&&g!==(g=r[4]&&r[4].acceptedFiles)&&o(h,"accept",g),v[0]&4&&o(l,"id",r[2]),v[0]&8&&o(l,"name",r[3]),v[0]&1&&l.value!==r[0]&&Q(l,r[0])},i:D,o:D,d(r){r&&(w(e),w(t),w(s),w(n),w(h),w(d),w(l)),u&&u.d(r),$.d(),i[38](null),p=!1,G(m)}}}function Xe(i,e,t){let{attachedInternals:s}=e,{value:n=""}=e,{label:h=""}=e,{id:g=""}=e,{name:d=""}=e,{service:l}=e,{maxfiles:p=null}=e,{minfiles:m=null}=e,{maxfilesValidationMessage:u}=e,{minfilesValidationMessage:k}=e,{validationMessages:b={}}=e,{sortable:$=!0}=e,r=null,v=-1,I,C,f=[],H,T=!0,Y=!1,F=[];const E=()=>n,V=()=>s.reportValidity(),A=Le();async function O(){t(12,T=!0);try{await Promise.allSettled(f.map(async a=>{if(!a.saved){const c=await l.uploadFile(a.file);a.saved=!0,a.url=c}})),t(6,f),t(0,n=f.filter(a=>a.saved).map(a=>a.url).join(","))}catch(a){console.log(a)}finally{t(12,T=!1)}}function N(a){f[a].saved&&A("removed",{url:f[a].url}),f.splice(a,1),t(6,f),t(0,n=f.filter(c=>c.saved).map(c=>c.url).join(","))}function M(a){a.target.files.length&&(t(6,f=f.concat(_(Array.from(a.target.files)))),A("change",{unsaved:f.filter(c=>!c.saved).length}),t(11,H.value=null,H))}function L(a){a.dataTransfer.files.length&&(t(6,f=f.concat(_(Array.from(a.dataTransfer.files)))),A("change",{unsaved:f.filter(c=>!c.saved).length})),t(13,Y=!1)}const ne=a=>{if(a<1024)return`${a} bytes`;if(a>=1024&&a<1048576)return`${(a/1024).toFixed(1)} KB`;if(a>=1048576)return`${(a/1048576).toFixed(1)} MB`},_=a=>a.filter(c=>l&&l.maxSize?(A("rejected",{file:c.name,code:"maxSize"}),c.size<l.maxSize):!0).map(c=>{let S={name:c.name,size:ne(c.size),file:c,saved:!1};return c.type.split("/")[0]==="image"&&(S.src=URL.createObjectURL(c)),S}),le=(a,c)=>new File([a],c);Be(async()=>{if(n){Array.isArray(n)&&t(0,n=n.join(","));const a=n.split(",");await Promise.allSettled(a.map(async c=>{const S=await fetch(c),X=le(S.blob(),c);let we={name:X.name,size:"",file:X,saved:!0,url:c,external:!0};f.push(we)})),t(6,f)}t(12,T=!1)});const re=a=>{r&&(a.preventDefault(),t(7,r.style.transform="translateY("+(a.clientY-I)+"px)",r),t(7,r.style.transform+="translateX("+(a.clientX-C)+"px)",r))},oe=a=>{if(r){a.preventDefault();const c=a.target.closest(".file");if(c){const S=[...c.parentNode.children].indexOf(c),X=f[S];t(6,f[S]=f[v],f),t(6,f[v]=X,f)}t(7,r.style="",r),t(7,r=null)}},ce=()=>t(13,Y=!1),me=()=>t(13,Y=!1),he=a=>L(a),de=()=>H.click(),fe=a=>N(a),ve=(a,c)=>{$&&(t(7,r=F[a]),t(8,v=a),t(7,r.style.pointerEvents="none",r),t(10,C=c.clientX),t(9,I=c.clientY))};function ue(a,c){W[a?"unshift":"push"](()=>{F[c]=a,t(14,F)})}const ge=()=>H.click(),pe=()=>t(13,Y=!0);function xe(a){W[a?"unshift":"push"](()=>{H=a,t(11,H)})}const qe=a=>M(a);function ye(){n=this.value,t(0,n)}return i.$$set=a=>{"attachedInternals"in a&&t(18,s=a.attachedInternals),"value"in a&&t(0,n=a.value),"label"in a&&t(1,h=a.label),"id"in a&&t(2,g=a.id),"name"in a&&t(3,d=a.name),"service"in a&&t(4,l=a.service),"maxfiles"in a&&t(19,p=a.maxfiles),"minfiles"in a&&t(20,m=a.minfiles),"maxfilesValidationMessage"in a&&t(21,u=a.maxfilesValidationMessage),"minfilesValidationMessage"in a&&t(22,k=a.minfilesValidationMessage),"validationMessages"in a&&t(23,b=a.validationMessages),"sortable"in a&&t(5,$=a.sortable)},i.$$.update=()=>{i.$$.dirty[0]&16515137&&(m&&f.length<m?s.setValidity({customError:!0},k||b.minfiles||"Not enough files."):p&&f.length>p?s.setValidity({customError:!0},u||b.maxfiles||"Too many files."):s.setValidity({}),s.checkValidity(),s.setFormValue(n),A("value",{value:n}))},[n,h,g,d,l,$,f,r,v,I,C,H,T,Y,F,N,M,L,s,p,m,u,k,b,E,V,O,re,oe,ce,me,he,de,fe,ve,ue,ge,pe,xe,qe,ye]}class se extends ze{constructor(e){super(),je(this,e,Xe,Oe,ke,{attachedInternals:18,value:0,label:1,id:2,name:3,service:4,maxfiles:19,minfiles:20,maxfilesValidationMessage:21,minfilesValidationMessage:22,validationMessages:23,sortable:5,getValue:24,reportValidity:25,save:26},Ye,[-1,-1])}get attachedInternals(){return this.$$.ctx[18]}set attachedInternals(e){this.$$set({attachedInternals:e}),z()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),z()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),z()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),z()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),z()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),z()}get maxfiles(){return this.$$.ctx[19]}set maxfiles(e){this.$$set({maxfiles:e}),z()}get minfiles(){return this.$$.ctx[20]}set minfiles(e){this.$$set({minfiles:e}),z()}get maxfilesValidationMessage(){return this.$$.ctx[21]}set maxfilesValidationMessage(e){this.$$set({maxfilesValidationMessage:e}),z()}get minfilesValidationMessage(){return this.$$.ctx[22]}set minfilesValidationMessage(e){this.$$set({minfilesValidationMessage:e}),z()}get validationMessages(){return this.$$.ctx[23]}set validationMessages(e){this.$$set({validationMessages:e}),z()}get sortable(){return this.$$.ctx[5]}set sortable(e){this.$$set({sortable:e}),z()}get getValue(){return this.$$.ctx[24]}get reportValidity(){return this.$$.ctx[25]}get save(){return this.$$.ctx[26]}}try{customElements.define("jp-file-list",Ve(se,{attachedInternals:{},value:{},label:{},id:{},name:{},service:{},maxfiles:{},minfiles:{},maxfilesValidationMessage:{},minfilesValidationMessage:{},validationMessages:{},sortable:{type:"Boolean"}},[],["getValue","reportValidity","save"],!1,i=>{var e;return e=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},Me(e,"formAssociated",!0),e}));}catch{};export{se as default};
