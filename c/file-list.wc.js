var Ve=Object.defineProperty,ke=(s,e,t)=>e in s?Ve(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,je=(s,e,t)=>(ke(s,typeof e!="symbol"?e+"":e,t),t);import{c as Le,S as He,i as Be,f as L,s as Te,a as Ae,b as Y,e as h,d as o,m as N,g as z,A as ee,o as H,z as O,n as X,j as y,u as J,k as Ye,B as te,q as ie,r as Fe,t as P,h as w,K as Ie,p as _,J as K,L as se}from"./svelte.js";import"./index2.js";function Se(s){Ae(s,"svelte-x6e1zw",`.grab.svelte-x6e1zw.svelte-x6e1zw{cursor:grab}.grab.svelte-x6e1zw.svelte-x6e1zw:active{cursor:grabbing}.dropzone.svelte-x6e1zw.svelte-x6e1zw{position:relative;background-color:#f4f4f4;height:500px;width:100%;border-radius:0.25rem;border:1px dashed #e6510030}.fullBorder.svelte-x6e1zw.svelte-x6e1zw{border:1px dashed var(--primary-color)}.info.svelte-x6e1zw.svelte-x6e1zw{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.info.svelte-x6e1zw a.svelte-x6e1zw{color:var(--primary-color);cursor:pointer}.info.svelte-x6e1zw a.svelte-x6e1zw:hover{text-decoration:underline}.files.svelte-x6e1zw.svelte-x6e1zw{display:grid;grid-template-columns:repeat(4, minmax(0, 1fr));height:100%;padding:1rem;gap:1rem;overflow:auto}@media(max-width: 900px){.files.svelte-x6e1zw.svelte-x6e1zw{grid-template-columns:repeat(3, minmax(0, 1fr))}}@media(max-width: 600px){.files.svelte-x6e1zw.svelte-x6e1zw{grid-template-columns:repeat(2, minmax(0, 1fr))}}.add-more.svelte-x6e1zw.svelte-x6e1zw{position:absolute;display:flex;justify-content:center;align-items:center;cursor:pointer;width:40px;height:40px;right:-20px;bottom:-20px;border-radius:50%;background-color:var(--primary-color);fill:var(--text-on-primary)}.add-more.svelte-x6e1zw svg.svelte-x6e1zw{height:60%}.file.svelte-x6e1zw.svelte-x6e1zw{position:relative;grid-column:span 1 / span 1;display:flex;flex-direction:column;align-items:center}.file-name.svelte-x6e1zw.svelte-x6e1zw{width:100%;text-align:left;font-size:12px;font-weight:500;line-height:1.3;margin-bottom:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-info.svelte-x6e1zw.svelte-x6e1zw{width:100%;padding:0 5% 0 0;display:flex;justify-content:space-between;color:#757575;font-size:11px;font-weight:400}.file-remove.svelte-x6e1zw.svelte-x6e1zw{cursor:pointer;position:absolute;top:0;right:0;padding:0;transform:translate(50%, -50%)}.file-icon.svelte-x6e1zw.svelte-x6e1zw{display:flex;justify-content:center;align-items:center;overflow:hidden;background-color:var(--primary-color);fill:var(--text-on-primary)}.file-icon.svelte-x6e1zw img.svelte-x6e1zw{aspect-ratio:1 / 1;object-fit:cover;user-drag:none;width:100%;height:100%;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.file-icon.svelte-x6e1zw svg.svelte-x6e1zw{height:50%}.loader.svelte-x6e1zw.svelte-x6e1zw{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.spinner.svelte-x6e1zw.svelte-x6e1zw{width:150px;height:150px;border-radius:50%;border:9px solid var(--primary-color);animation:svelte-x6e1zw-spinner-bulqg1 0.8s infinite linear alternate,
      svelte-x6e1zw-spinner-oaa3wk 1.6s infinite linear}@keyframes svelte-x6e1zw-spinner-bulqg1{0%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 50% 0%, 50% 0%, 50% 0%, 50% 0%)}12.5%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 0%, 100% 0%, 100% 0%)}25%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 100% 100%, 100% 100%)}50%{clip-path:polygon(50% 50%, 0 0, 50% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}62.5%{clip-path:polygon(50% 50%, 100% 0, 100% 0%, 100% 0%, 100% 100%, 50% 100%, 0% 100%)}75%{clip-path:polygon(50% 50%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 50% 100%, 0% 100%)}100%{clip-path:polygon(50% 50%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 50% 100%, 0% 100%)}}@keyframes svelte-x6e1zw-spinner-oaa3wk{0%{transform:scaleY(1) rotate(0deg)}49.99%{transform:scaleY(1) rotate(135deg)}50%{transform:scaleY(-1) rotate(0deg)}100%{transform:scaleY(-1) rotate(-135deg)}}`)}function ne(s,e,t){const n=s.slice();return n[47]=e[t],n[48]=e,n[49]=t,n}function ae(s){let e;return{c(){e=h("label")},m(t,n){z(t,e,n),e.innerHTML=s[0]},p(t,n){n[0]&1&&(e.innerHTML=t[0])},d(t){t&&y(e)}}}function Ce(s){let e,t,n,r,d,g=ie(s[5]),v=[];for(let a=0;a<g.length;a+=1)v[a]=le(ne(s,g,a));return{c(){e=h("div");for(let a=0;a<v.length;a+=1)v[a].c();t=Y(),n=h("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" class="svelte-x6e1zw"><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"></path></svg>',o(e,"class","files svelte-x6e1zw"),o(n,"type","button"),o(n,"class","add-more svelte-x6e1zw")},m(a,x){z(a,e,x);for(let c=0;c<v.length;c+=1)v[c]&&v[c].m(e,null);z(a,t,x),z(a,n,x),r||(d=H(n,"click",O(s[37])),r=!0)},p(a,x){if(x[0]&51120){g=ie(a[5]);let c;for(c=0;c<g.length;c+=1){const m=ne(a,g,c);v[c]?v[c].p(m,x):(v[c]=le(m),v[c].c(),v[c].m(e,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=g.length}},d(a){a&&(y(e),y(t),y(n)),Fe(v,a),r=!1,d()}}}function De(s){let e,t,n,r,d,g,v;return{c(){e=h("div"),t=h("div"),n=P("Drop files here or "),r=h("a"),r.textContent="browse files",o(r,"class","svelte-x6e1zw"),o(e,"class","info svelte-x6e1zw"),e.hidden=d=s[5].length!=0},m(a,x){z(a,e,x),w(e,t),w(t,n),w(t,r),g||(v=H(r,"click",s[33]),g=!0)},p(a,x){x[0]&32&&d!==(d=a[5].length!=0)&&(e.hidden=d)},d(a){a&&y(e),g=!1,v()}}}function Ee(s){let e,t,n;return{c(){e=h("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 384 512"><path d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"></path></svg> <div>Drop your files here</div>',o(e,"class","info svelte-x6e1zw")},m(r,d){z(r,e,d),t||(n=[H(e,"dragleave",s[30]),H(e,"dragend",s[31]),H(e,"drop",O(s[32]))],t=!0)},p:X,d(r){r&&y(e),t=!1,J(n)}}}function Xe(s){let e;return{c(){e=h("div"),e.innerHTML='<div class="spinner svelte-x6e1zw"></div>',o(e,"class","loader svelte-x6e1zw")},m(t,n){z(t,e,n)},p:X,d(t){t&&y(e)}}}function qe(s){let e,t;return{c(){e=K("svg"),t=K("path"),o(t,"d","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 384 512"),o(e,"class","svelte-x6e1zw")},m(n,r){z(n,e,r),w(e,t)},p:X,d(n){n&&y(e)}}}function Ne(s){let e,t;return{c(){e=K("svg"),t=K("path"),o(t,"d","M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"height","1em"),o(e,"viewBox","0 0 640 512"),o(e,"class","svelte-x6e1zw")},m(n,r){z(n,e,r),w(e,t)},p:X,d(n){n&&y(e)}}}function Oe(s){let e,t,n;return{c(){e=h("img"),se(e.src,t=s[47].src)||o(e,"src",t),o(e,"alt",n=s[47].name),o(e,"class","svelte-x6e1zw")},m(r,d){z(r,e,d)},p(r,d){d[0]&32&&!se(e.src,t=r[47].src)&&o(e,"src",t),d[0]&32&&n!==(n=r[47].name)&&o(e,"alt",n)},d(r){r&&y(e)}}}function le(s){let e,t,n,r,d,g,v=s[47].name+"",a,x,c,m,V=(s[47].size||"")+"",b,$,l,u=s[47].saved?"saved":"",S,E,f=s[49],B,F;function C(){return s[34](s[49])}function D(M,T){return M[47].src?Oe:M[47].external?Ne:qe}let k=D(s),j=k(s);function R(...M){return s[35](s[49],...M)}const I=()=>s[36](e,f),q=()=>s[36](null,f);return{c(){e=h("div"),t=h("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',n=Y(),r=h("div"),j.c(),d=Y(),g=h("div"),a=P(v),x=Y(),c=h("div"),m=h("span"),b=P(V),$=Y(),l=h("span"),S=P(u),E=Y(),o(t,"type","button"),o(t,"class","file-remove svelte-x6e1zw"),o(r,"class","file-icon svelte-x6e1zw"),o(g,"class","file-name svelte-x6e1zw"),Ie(l,"color","rgb(26 151 26)"),o(c,"class","file-info svelte-x6e1zw"),o(e,"class","file svelte-x6e1zw"),N(e,"grab",s[4])},m(M,T){z(M,e,T),w(e,t),w(e,n),w(e,r),j.m(r,null),w(e,d),w(e,g),w(g,a),w(e,x),w(e,c),w(c,m),w(m,b),w(c,$),w(c,l),w(l,S),w(e,E),I(),B||(F=[H(t,"mousedown",O(C)),H(e,"mousedown",R)],B=!0)},p(M,T){s=M,k===(k=D(s))&&j?j.p(s,T):(j.d(1),j=k(s),j&&(j.c(),j.m(r,null))),T[0]&32&&v!==(v=s[47].name+"")&&_(a,v),T[0]&32&&V!==(V=(s[47].size||"")+"")&&_(b,V),T[0]&32&&u!==(u=s[47].saved?"saved":"")&&_(S,u),f!==s[49]&&(q(),f=s[49],I()),T[0]&16&&N(e,"grab",s[4])},d(M){M&&y(e),j.d(),q(),B=!1,J(F)}}}function Pe(s){let e,t,n,r,d,g,v,a,x,c,m=s[0]&&ae(s);function V(l,u){return l[12]?Xe:l[13]?Ee:l[5].length==0?De:Ce}let b=V(s),$=b(s);return{c(){e=Y(),m&&m.c(),t=Y(),n=h("div"),$.c(),r=Y(),d=h("input"),v=Y(),a=h("input"),o(n,"class","dropzone svelte-x6e1zw"),N(n,"fullBorder",s[13]),o(d,"type","file"),d.multiple=!0,o(d,"accept",g=s[3]&&s[3].acceptedFiles),d.hidden=!0,o(a,"type","text"),o(a,"id",s[1]),o(a,"name",s[2]),a.hidden=!0},m(l,u){z(l,e,u),m&&m.m(l,u),z(l,t,u),z(l,n,u),$.m(n,null),z(l,r,u),z(l,d,u),s[39](d),z(l,v,u),z(l,a,u),ee(a,s[6]),x||(c=[H(document,"mousemove",s[28]),H(document,"mouseup",s[29]),H(n,"dragover",O(s[38])),H(d,"change",s[40]),H(a,"input",s[41])],x=!0)},p(l,u){l[0]?m?m.p(l,u):(m=ae(l),m.c(),m.m(t.parentNode,t)):m&&(m.d(1),m=null),b===(b=V(l))&&$?$.p(l,u):($.d(1),$=b(l),$&&($.c(),$.m(n,null))),u[0]&8192&&N(n,"fullBorder",l[13]),u[0]&8&&g!==(g=l[3]&&l[3].acceptedFiles)&&o(d,"accept",g),u[0]&2&&o(a,"id",l[1]),u[0]&4&&o(a,"name",l[2]),u[0]&64&&a.value!==l[6]&&ee(a,l[6])},i:X,o:X,d(l){l&&(y(e),y(t),y(n),y(r),y(d),y(v),y(a)),m&&m.d(l),$.d(),s[39](null),x=!1,J(c)}}}function Ke(s,e,t){let{attachedInternals:n}=e,{value:r=""}=e,{label:d=""}=e,{id:g=""}=e,{name:v=""}=e,{service:a}=e,{maxfiles:x=null}=e,{minfiles:c=null}=e,{maxfilesValidationMessage:m}=e,{minfilesValidationMessage:V}=e,{validationMessages:b={}}=e,{sortable:$=!0}=e,l=null,u=-1,S,E,f=[],B,F=!1,C=!1,D=[],k="";const j=()=>k,R=()=>n.reportValidity(),I=Ye();async function q(){t(12,F=!0);try{await Promise.allSettled(f.map(async i=>{if(!i.saved){const p=await a.uploadFile(i.file);i.saved=!0,i.url=p}})),t(5,f),t(19,r)}catch(i){console.log(i)}finally{t(12,F=!1)}}function M(i){f[i].saved&&I("removed",{url:f[i].url}),f.splice(i,1),t(5,f),t(19,r)}function T(i){i.target.files.length&&(t(5,f=f.concat(Q(Array.from(i.target.files)))),I("change",{unsaved:f.filter(p=>!p.saved).length}),t(11,B.value=null,B))}function G(i){i.dataTransfer.files.length&&(t(5,f=f.concat(Q(Array.from(i.dataTransfer.files)))),I("change",{unsaved:f.filter(p=>!p.saved).length})),t(13,C=!1)}const oe=i=>{if(i<1024)return`${i} bytes`;if(i>=1024&&i<1048576)return`${(i/1024).toFixed(1)} KB`;if(i>=1048576)return`${(i/1048576).toFixed(1)} MB`},Q=i=>i.filter(p=>a&&a.maxSize?(I("rejected",{file:p.name,code:"maxSize"}),p.size<a.maxSize):!0).map(p=>{let A={name:p.name,size:oe(p.size),file:p,saved:!1};return p.type.split("/")[0]==="image"&&(A.src=URL.createObjectURL(p)),A}),ce=(i,p)=>new File([i],p),de=async i=>{Array.isArray(i)&&(i=i.join(","));const p=i.split(",");await Promise.allSettled(p.map(async A=>{const U=await fetch(A),W=ce(U.blob(),A);let Z={name:W.name,size:"",file:W,saved:!0,url:A,external:!0};/\.jpg|\.png|\.jpeg|\.webp|\.svg|\.gif/.test(A)&&(Z.src=A),f.push(Z)})),t(5,f),t(19,i)},fe=i=>{l&&(i.preventDefault(),t(7,l.style.transform="translateY("+(i.clientY-S)+"px)",l),t(7,l.style.transform+="translateX("+(i.clientX-E)+"px)",l))},ve=i=>{if(l){i.preventDefault();const p=i.target.closest(".file");if(p){const A=[...p.parentNode.children].indexOf(p),U=f[A];t(5,f[A]=f[u],f),t(5,f[u]=U,f)}t(7,l.style="",l),t(7,l=null)}},ue=()=>t(13,C=!1),pe=()=>t(13,C=!1),me=i=>G(i),ge=()=>B.click(),xe=i=>M(i),he=(i,p)=>{$&&(t(7,l=D[i]),t(8,u=i),t(7,l.style.pointerEvents="none",l),t(10,E=p.clientX),t(9,S=p.clientY))};function we(i,p){te[i?"unshift":"push"](()=>{D[p]=i,t(14,D)})}const ze=()=>B.click(),ye=()=>t(13,C=!0);function $e(i){te[i?"unshift":"push"](()=>{B=i,t(11,B)})}const be=i=>T(i);function Me(){k=this.value,t(6,k),t(5,f),t(21,c),t(18,n),t(23,V),t(24,b),t(20,x),t(22,m),t(19,r)}return s.$$set=i=>{"attachedInternals"in i&&t(18,n=i.attachedInternals),"value"in i&&t(19,r=i.value),"label"in i&&t(0,d=i.label),"id"in i&&t(1,g=i.id),"name"in i&&t(2,v=i.name),"service"in i&&t(3,a=i.service),"maxfiles"in i&&t(20,x=i.maxfiles),"minfiles"in i&&t(21,c=i.minfiles),"maxfilesValidationMessage"in i&&t(22,m=i.maxfilesValidationMessage),"minfilesValidationMessage"in i&&t(23,V=i.minfilesValidationMessage),"validationMessages"in i&&t(24,b=i.validationMessages),"sortable"in i&&t(4,$=i.sortable)},s.$$.update=()=>{s.$$.dirty[0]&524288&&(t(5,f=[]),r&&(t(12,F=!0),de(r),t(12,F=!1))),s.$$.dirty[0]&32768096&&(t(6,k=f.filter(i=>i.saved).map(i=>i.url).join(",")),c&&f.length<c?n.setValidity({customError:!0},V||b.minfiles||"Not enough files."):x&&f.length>x?n.setValidity({customError:!0},m||b.maxfiles||"Too many files."):n.setValidity({}),n.checkValidity(),n.setFormValue(k),I("value",{value:k}))},[d,g,v,a,$,f,k,l,u,S,E,B,F,C,D,M,T,G,n,r,x,c,m,V,b,j,R,q,fe,ve,ue,pe,me,ge,xe,he,we,ze,ye,$e,be,Me]}class re extends He{constructor(e){super(),Be(this,e,Ke,Pe,Te,{attachedInternals:18,value:19,label:0,id:1,name:2,service:3,maxfiles:20,minfiles:21,maxfilesValidationMessage:22,minfilesValidationMessage:23,validationMessages:24,sortable:4,getValue:25,reportValidity:26,save:27},Se,[-1,-1])}get attachedInternals(){return this.$$.ctx[18]}set attachedInternals(e){this.$$set({attachedInternals:e}),L()}get value(){return this.$$.ctx[19]}set value(e){this.$$set({value:e}),L()}get label(){return this.$$.ctx[0]}set label(e){this.$$set({label:e}),L()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),L()}get name(){return this.$$.ctx[2]}set name(e){this.$$set({name:e}),L()}get service(){return this.$$.ctx[3]}set service(e){this.$$set({service:e}),L()}get maxfiles(){return this.$$.ctx[20]}set maxfiles(e){this.$$set({maxfiles:e}),L()}get minfiles(){return this.$$.ctx[21]}set minfiles(e){this.$$set({minfiles:e}),L()}get maxfilesValidationMessage(){return this.$$.ctx[22]}set maxfilesValidationMessage(e){this.$$set({maxfilesValidationMessage:e}),L()}get minfilesValidationMessage(){return this.$$.ctx[23]}set minfilesValidationMessage(e){this.$$set({minfilesValidationMessage:e}),L()}get validationMessages(){return this.$$.ctx[24]}set validationMessages(e){this.$$set({validationMessages:e}),L()}get sortable(){return this.$$.ctx[4]}set sortable(e){this.$$set({sortable:e}),L()}get getValue(){return this.$$.ctx[25]}get reportValidity(){return this.$$.ctx[26]}get save(){return this.$$.ctx[27]}}try{customElements.define("jp-file-list",Le(re,{attachedInternals:{},value:{},label:{},id:{},name:{},service:{},maxfiles:{},minfiles:{},maxfilesValidationMessage:{},minfilesValidationMessage:{},validationMessages:{},sortable:{type:"Boolean"}},[],["getValue","reportValidity","save"],!1,s=>{var e;return e=class extends s{constructor(){super(),this.attachedInternals=this.attachInternals()}},je(e,"formAssociated",!0),e}));}catch{};export{re as default};
