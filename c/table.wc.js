import{c as fe,S as me,i as pe,o as A,s as be,a as ke,e as b,l as R,d as m,f as k,p as v,w as z,k as x,x as xe,y as D,z as O,A as $,m as E,B as I,C as F,D as T,r as ye,E as P,F as ve}from"./svelte.js";import"./index.js";import{get as M}from"./json-pointer.js";function we(s){ke(s,"svelte-j2qbxk",".table-card.svelte-j2qbxk{background-color:var(--background-primary);border-radius:0.25rem;box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-j2qbxk{overflow-x:auto;width:100%}table.svelte-j2qbxk{width:100%}th.svelte-j2qbxk,td.svelte-j2qbxk{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-j2qbxk{opacity:0.75}.cell.svelte-j2qbxk{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-header.svelte-j2qbxk{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-j2qbxk{display:flex;justify-content:center;align-items:center;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.settings-button.svelte-j2qbxk{background-color:var(--background-secondary);color:var(--text-on-secondary)}.sticky-first.svelte-j2qbxk{position:sticky;left:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-first.svelte-j2qbxk:after{content:'';position:absolute;top:0;right:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}.sticky-last.svelte-j2qbxk{position:sticky;right:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-last.svelte-j2qbxk:before{content:'';position:absolute;top:0;left:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}")}function U(s,e,r){const n=s.slice();return n[27]=e[r],n[29]=r,n}function X(s,e,r){const n=s.slice();return n[30]=e[r],n[29]=r,n}function J(s,e,r){const n=s.slice();return n[30]=e[r],n[29]=r,n}function K(s){let e,r,n=s[4]&&Q(s),t=s[3]&&V(s);return{c(){e=b("div"),n&&n.c(),r=R(),t&&t.c(),m(e,"class","table-header svelte-j2qbxk")},m(i,o){k(i,e,o),n&&n.m(e,null),v(e,r),t&&t.m(e,null)},p(i,o){i[4]?n?n.p(i,o):(n=Q(i),n.c(),n.m(e,r)):n&&(n.d(1),n=null),i[3]?t?t.p(i,o):(t=V(i),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(i){i&&x(e),n&&n.d(),t&&t.d()}}}function Q(s){let e;function r(i,o){return i[8]?$e:je}let n=r(s),t=n(s);return{c(){t.c(),e=D()},m(i,o){t.m(i,o),k(i,e,o)},p(i,o){n===(n=r(i))&&t?t.p(i,o):(t.d(1),t=n(i),t&&(t.c(),t.m(e.parentNode,e)))},d(i){i&&x(e),t.d(i)}}}function $e(s){let e,r=s[2].FINISH_ARRANGING+"",n,t,i;return{c(){e=b("button"),n=O(r),m(e,"type","button"),m(e,"class","table-button settings-button svelte-j2qbxk")},m(o,c){k(o,e,c),v(e,n),t||(i=E(e,"click",s[15]),t=!0)},p(o,c){c[0]&4&&r!==(r=o[2].FINISH_ARRANGING+"")&&I(n,r)},d(o){o&&x(e),t=!1,i()}}}function je(s){let e,r=s[2].ARRANGE_COLUMNS+"",n,t,i;return{c(){e=b("button"),n=O(r),m(e,"type","button"),m(e,"class","table-button settings-button svelte-j2qbxk")},m(o,c){k(o,e,c),v(e,n),t||(i=E(e,"click",s[14]),t=!0)},p(o,c){c[0]&4&&r!==(r=o[2].ARRANGE_COLUMNS+"")&&I(n,r)},d(o){o&&x(e),t=!1,i()}}}function V(s){let e,r,n=s[2].EXPORT+"",t,i,o;return{c(){e=O(`\xA0
        `),r=b("button"),t=O(n),m(r,"type","button"),m(r,"class","table-button settings-button svelte-j2qbxk"),$(r,"loading",s[7])},m(c,a){k(c,e,a),k(c,r,a),v(r,t),i||(o=E(r,"click",s[13]),i=!0)},p(c,a){a[0]&4&&n!==(n=c[2].EXPORT+"")&&I(t,n),a[0]&128&&$(r,"loading",c[7])},d(c){c&&(x(e),x(r)),i=!1,o()}}}function W(s){let e,r=F(s[9]),n=[];for(let t=0;t<r.length;t+=1)n[t]=Z(J(s,r,t));return{c(){e=b("tr");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,i){k(t,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(t,i){if(i[0]&461410){r=F(t[9]);let o;for(o=0;o<r.length;o+=1){const c=J(t,r,o);n[o]?n[o].p(c,i):(n[o]=Z(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&x(e),T(n,t)}}}function Y(s){let e,r=s[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=b("span"),n=O(r)},m(t,i){k(t,e,i),v(e,n)},p(t,i){i[0]&2&&r!==(r=t[1].direction==="asc"?"\u2191":"\u2193")&&I(n,r)},d(t){t&&x(e)}}}function Z(s){var e;let r,n,t=s[30].label+"",i,o,c,a;function d(...j){return s[21](s[30],...j)}let u=((e=s[1])==null?void 0:e.key)===s[30].key&&Y(s);function G(){return s[22](s[30])}return{c(){r=b("th"),n=b("span"),i=R(),u&&u.c(),o=R(),m(n,"draggable","true"),m(r,"data-index",s[29]),m(r,"class","svelte-j2qbxk"),$(r,"sortable",s[30].sortable),$(r,"sticky-first",s[29]===0&&s[5]),$(r,"sticky-last",s[29]===s[9].length-1&&s[6])},m(j,C){k(j,r,C),v(r,n),n.innerHTML=t,v(r,i),u&&u.m(r,null),v(r,o),c||(a=[E(n,"dragstart",d),E(r,"click",G),E(r,"drop",s[18]),E(r,"dragover",s[17])],c=!0)},p(j,C){var N;s=j,C[0]&512&&t!==(t=s[30].label+"")&&(n.innerHTML=t),((N=s[1])==null?void 0:N.key)===s[30].key?u?u.p(s,C):(u=Y(s),u.c(),u.m(r,o)):u&&(u.d(1),u=null),C[0]&512&&$(r,"sortable",s[30].sortable),C[0]&32&&$(r,"sticky-first",s[29]===0&&s[5]),C[0]&576&&$(r,"sticky-last",s[29]===s[9].length-1&&s[6])},d(j){j&&x(r),u&&u.d(),c=!1,ye(a)}}}function ee(s){let e,r=F(s[0]),n=[];for(let t=0;t<r.length;t+=1)n[t]=ne(U(s,r,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=D()},m(t,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,i);k(t,e,i)},p(t,i){if(i[0]&5729){r=F(t[0]);let o;for(o=0;o<r.length;o+=1){const c=U(t,r,o);n[o]?n[o].p(c,i):(n[o]=ne(c),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&x(e),T(n,t)}}}function Ce(s){return{c:z,m:z,p:z,d:z}}function qe(s){let e,r=s[32]+"";return{c(){e=b("span"),m(e,"class","cell svelte-j2qbxk")},m(n,t){k(n,e,t),e.innerHTML=r},p(n,t){t[0]&513&&r!==(r=n[32]+"")&&(e.innerHTML=r)},d(n){n&&x(e)}}}function ze(s){return{c:z,m:z,p:z,d:z}}function te(s){let e,r,n,t,i={ctx:s,current:null,token:null,hasCatch:!1,pending:ze,then:qe,catch:Ce,value:32};P(r=s[10](s[30],s[27],s[29]),i);function o(...c){return s[23](s[27],s[29],s[30],...c)}return{c(){e=b("td"),i.block.c(),m(e,"class","svelte-j2qbxk"),$(e,"sticky-first",s[29]===0&&s[5]),$(e,"sticky-last",s[29]===s[9].length-1&&s[6])},m(c,a){k(c,e,a),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,n||(t=E(e,"click",o),n=!0)},p(c,a){s=c,i.ctx=s,a[0]&513&&r!==(r=s[10](s[30],s[27],s[29]))&&P(r,i)||ve(i,s,a),a[0]&32&&$(e,"sticky-first",s[29]===0&&s[5]),a[0]&576&&$(e,"sticky-last",s[29]===s[9].length-1&&s[6])},d(c){c&&x(e),i.block.d(),i.token=null,i=null,n=!1,t()}}}function ne(s){let e,r,n=F(s[9]),t=[];for(let i=0;i<n.length;i+=1)t[i]=te(X(s,n,i));return{c(){e=b("tr");for(let i=0;i<t.length;i+=1)t[i].c();r=R()},m(i,o){k(i,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);v(e,r)},p(i,o){if(o[0]&5729){n=F(i[9]);let c;for(c=0;c<n.length;c+=1){const a=X(i,n,c);t[c]?t[c].p(a,o):(t[c]=te(a),t[c].c(),t[c].m(e,r))}for(;c<t.length;c+=1)t[c].d(1);t.length=n.length}},d(i){i&&x(e),T(t,i)}}}function Ae(s){let e,r,n,t,i,o=(s[4]||s[3])&&K(s),c=s[9]&&W(s),a=s[0]&&ee(s);return{c(){e=b("div"),o&&o.c(),r=R(),n=b("div"),t=b("table"),c&&c.c(),i=R(),a&&a.c(),m(t,"class","svelte-j2qbxk"),m(n,"class","table-container svelte-j2qbxk"),m(e,"class","table-card svelte-j2qbxk")},m(d,u){k(d,e,u),o&&o.m(e,null),v(e,r),v(e,n),v(n,t),c&&c.m(t,null),v(t,i),a&&a.m(t,null)},p(d,u){d[4]||d[3]?o?o.p(d,u):(o=K(d),o.c(),o.m(e,r)):o&&(o.d(1),o=null),d[9]?c?c.p(d,u):(c=W(d),c.c(),c.m(t,i)):c&&(c.d(1),c=null),d[0]?a?a.p(d,u):(a=ee(d),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i:z,o:z,d(d){d&&x(e),o&&o.d(),c&&c.d(),a&&a.d()}}}function Ee(s,e,r){let{wording:n={EXPORT:"Export",ARRANGE_COLUMNS:"Arrange columns",FINISH_ARRANGING:"Finish Arranging"}}=e,{headers:t=[]}=e,{rows:i=[]}=e,{sort:o}=e,{service:c}=e,a=!1,{showExport:d=!0}=e,u=[],{showArrangingColumns:G=!0}=e,{freezeFirstColumn:j=!1}=e,{freezeLastColumn:C=!1}=e,N=!1;const se=xe();async function H(l,f,y){const{key:h,fallback:p,pipes:w}=l;let g;try{g=M(f,h)}catch{return p||""}if(!w)return g;for(const q of w)g=await q(g,f,y);return g}function S(l){const{sortable:f,sortMethod:y}=l;if(!f)return;const h=o?.key===l.key&&o.direction==="asc"?"desc":"asc";if(y){r(0,i=[...i.sort((p,w)=>y(h,p,w))]);return}r(0,i=[...i.sort((p,w)=>{let g,q;try{g=M(p,l.key)}catch{return h==="asc"?1:-1}try{q=M(w,l.key)}catch{return h==="asc"?-1:1}if(g===q)return 0;switch(typeof g){case"number":return h==="asc"?g-q:q-g;case"string":return h==="asc"?g.localeCompare(q):q.localeCompare(g);default:return 0}})]),r(1,o={key:l.key,direction:h})}function _(l,f,y,h){se("rowClick",{row:l,index:f,header:y,originalEvent:h})}async function oe(){r(7,a=!0);const l=await c.export(),f=await Promise.all(l.map(async(p,w)=>(await Promise.all(L.map(g=>H(g,p,w)))).map(g=>`"${g||""}"`).join(","))),y=new Blob([[L.map(p=>p.label).map(p=>`"${p}"`).join(","),...f].join(`
`)],{type:"text/csv"}),h=document.createElement("a");h.href=URL.createObjectURL(y),h.download="export.csv",h.click(),r(7,a=!1)}let L=[];function ie(){r(8,N=!0),u=L.map(l=>l.key)}function ce(){r(8,N=!1)}function B(l,f){l.dataTransfer.setData("text/plain",f.key)}function le(l){l.preventDefault()}function ae(l){var f;l.preventDefault();const y=l.dataTransfer.getData("text/plain"),h=u.indexOf(y),p=(f=l.target)==null?void 0:f.dataset.index;h!==-1&&p&&(u.splice(h,1),u.splice(Number(p),0,y),r(9,L=t.filter(w=>!w.disabled).sort((w,g)=>{const q=u.indexOf(w.key),ge=u.indexOf(g.key);return q-ge})))}const ue=(l,f)=>B(f,l),de=l=>S(l),he=(l,f,y,h)=>_(l,f,y,h);return s.$$set=l=>{"wording"in l&&r(2,n=l.wording),"headers"in l&&r(19,t=l.headers),"rows"in l&&r(0,i=l.rows),"sort"in l&&r(1,o=l.sort),"service"in l&&r(20,c=l.service),"showExport"in l&&r(3,d=l.showExport),"showArrangingColumns"in l&&r(4,G=l.showArrangingColumns),"freezeFirstColumn"in l&&r(5,j=l.freezeFirstColumn),"freezeLastColumn"in l&&r(6,C=l.freezeLastColumn)},s.$$.update=()=>{s.$$.dirty[0]&524288&&r(9,L=t.filter(l=>!l.disabled))},[i,o,n,d,G,j,C,a,N,L,H,S,_,oe,ie,ce,B,le,ae,t,c,ue,de,he]}class re extends me{constructor(e){super(),pe(this,e,Ee,Ae,be,{wording:2,headers:19,rows:0,sort:1,service:20,showExport:3,showArrangingColumns:4,freezeFirstColumn:5,freezeLastColumn:6},we,[-1,-1])}get wording(){return this.$$.ctx[2]}set wording(e){this.$$set({wording:e}),A()}get headers(){return this.$$.ctx[19]}set headers(e){this.$$set({headers:e}),A()}get rows(){return this.$$.ctx[0]}set rows(e){this.$$set({rows:e}),A()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),A()}get service(){return this.$$.ctx[20]}set service(e){this.$$set({service:e}),A()}get showExport(){return this.$$.ctx[3]}set showExport(e){this.$$set({showExport:e}),A()}get showArrangingColumns(){return this.$$.ctx[4]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),A()}get freezeFirstColumn(){return this.$$.ctx[5]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),A()}get freezeLastColumn(){return this.$$.ctx[6]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),A()}}try{customElements.define("jp-table",fe(re,{wording:{},headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"}},[],[],!1));}catch{};export{re as default};
//# sourceMappingURL=table.wc.js.map
