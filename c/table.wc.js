import{c as de,S as be,i as fe,f as A,s as ge,a as pe,e as h,b as M,d as g,g as y,h as E,n as v,j as k,k as he,l as q,t as S,m as $,o as j,p as T,q as D,r as ye,u as ke,v as _,w as xe}from"./svelte.js";import"./index2.js";import{g as O}from"./json-pointer.js";function we(r){pe(r,"svelte-1cbymbu",".table-card.svelte-1cbymbu{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-1cbymbu{overflow-x:auto;width:100%}table.svelte-1cbymbu{width:100%}th.svelte-1cbymbu,td.svelte-1cbymbu{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-1cbymbu{opacity:0.75}.cell.svelte-1cbymbu{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-header.svelte-1cbymbu{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-1cbymbu{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-1cbymbu{background-color:var(--background-secondary);color:var(--text-on-secondary)}@-webkit-keyframes svelte-1cbymbu-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-1cbymbu-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-1cbymbu-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-1cbymbu-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.sticky-first.svelte-1cbymbu{position:sticky;left:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-first.svelte-1cbymbu:after{content:'';position:absolute;top:0;right:0;bottom:0;width:.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}.sticky-last.svelte-1cbymbu{position:sticky;right:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-last.svelte-1cbymbu:before{content:'';position:absolute;top:0;left:0;bottom:0;width:.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}")}function G(r,e,o){const n=r.slice();return n[26]=e[o],n[28]=o,n}function I(r,e,o){const n=r.slice();return n[29]=e[o],n[28]=o,n}function J(r,e,o){const n=r.slice();return n[29]=e[o],n[28]=o,n}function K(r){let e,o,n=r[3]&&Q(r),t=r[2]&&V(r);return{c(){e=h("div"),n&&n.c(),o=M(),t&&t.c(),g(e,"class","table-header svelte-1cbymbu")},m(s,a){y(s,e,a),n&&n.m(e,null),E(e,o),t&&t.m(e,null)},p(s,a){s[3]?n?n.p(s,a):(n=Q(s),n.c(),n.m(e,o)):n&&(n.d(1),n=null),s[2]?t?t.p(s,a):(t=V(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&k(e),n&&n.d(),t&&t.d()}}}function Q(r){let e;function o(s,a){return s[7]?ve:$e}let n=o(r),t=n(r);return{c(){t.c(),e=q()},m(s,a){t.m(s,a),y(s,e,a)},p(s,a){n===(n=o(s))&&t?t.p(s,a):(t.d(1),t=n(s),t&&(t.c(),t.m(e.parentNode,e)))},d(s){s&&k(e),t.d(s)}}}function ve(r){let e,o,n;return{c(){e=h("button"),e.textContent="Finish Arranging",g(e,"type","button"),g(e,"class","table-button settings-button svelte-1cbymbu")},m(t,s){y(t,e,s),o||(n=j(e,"click",r[14]),o=!0)},p:v,d(t){t&&k(e),o=!1,n()}}}function $e(r){let e,o,n;return{c(){e=h("button"),e.textContent="Arrange Columns",g(e,"type","button"),g(e,"class","table-button settings-button svelte-1cbymbu")},m(t,s){y(t,e,s),o||(n=j(e,"click",r[13]),o=!0)},p:v,d(t){t&&k(e),o=!1,n()}}}function V(r){let e,o,n,t;return{c(){e=S(`\xA0
        `),o=h("button"),o.textContent="Export",g(o,"type","button"),g(o,"class","table-button settings-button svelte-1cbymbu"),$(o,"loading",r[6])},m(s,a){y(s,e,a),y(s,o,a),n||(t=j(o,"click",r[12]),n=!0)},p(s,a){a[0]&64&&$(o,"loading",s[6])},d(s){s&&(k(e),k(o)),n=!1,t()}}}function W(r){let e,o=T(r[8]),n=[];for(let t=0;t<o.length;t+=1)n[t]=Y(J(r,o,t));return{c(){e=h("tr");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,s){y(t,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(t,s){if(s[0]&230706){o=T(t[8]);let a;for(a=0;a<o.length;a+=1){const l=J(t,o,a);n[a]?n[a].p(l,s):(n[a]=Y(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=o.length}},d(t){t&&k(e),D(n,t)}}}function X(r){let e,o=r[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=h("span"),n=S(o)},m(t,s){y(t,e,s),E(e,n)},p(t,s){s[0]&2&&o!==(o=t[1].direction==="asc"?"\u2191":"\u2193")&&ke(n,o)},d(t){t&&k(e)}}}function Y(r){var e;let o,n,t=r[29].label+"",s,a,l,i;function u(...z){return r[20](r[29],...z)}let m=((e=r[1])==null?void 0:e.key)===r[29].key&&X(r);function B(){return r[21](r[29])}return{c(){o=h("th"),n=h("span"),s=M(),m&&m.c(),a=M(),g(n,"draggable","true"),g(o,"data-index",r[28]),g(o,"class","svelte-1cbymbu"),$(o,"sortable",r[29].sortable),$(o,"sticky-first",r[28]===0&&r[4]),$(o,"sticky-last",r[28]===r[8].length-1&&r[5])},m(z,C){y(z,o,C),E(o,n),n.innerHTML=t,E(o,s),m&&m.m(o,null),E(o,a),l||(i=[j(n,"dragstart",u),j(o,"click",B),j(o,"drop",r[17]),j(o,"dragover",r[16])],l=!0)},p(z,C){var H;r=z,C[0]&256&&t!==(t=r[29].label+"")&&(n.innerHTML=t),((H=r[1])==null?void 0:H.key)===r[29].key?m?m.p(r,C):(m=X(r),m.c(),m.m(o,a)):m&&(m.d(1),m=null),C[0]&256&&$(o,"sortable",r[29].sortable),C[0]&16&&$(o,"sticky-first",r[28]===0&&r[4]),C[0]&288&&$(o,"sticky-last",r[28]===r[8].length-1&&r[5])},d(z){z&&k(o),m&&m.d(),l=!1,ye(i)}}}function Z(r){let e,o=T(r[0]),n=[];for(let t=0;t<o.length;t+=1)n[t]=te(G(r,o,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=q()},m(t,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,s);y(t,e,s)},p(t,s){if(s[0]&2865){o=T(t[0]);let a;for(a=0;a<o.length;a+=1){const l=G(t,o,a);n[a]?n[a].p(l,s):(n[a]=te(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=o.length}},d(t){t&&k(e),D(n,t)}}}function Ce(r){return{c:v,m:v,p:v,d:v}}function ze(r){let e,o=r[31]+"";return{c(){e=h("span"),g(e,"class","cell svelte-1cbymbu")},m(n,t){y(n,e,t),e.innerHTML=o},p(n,t){t[0]&257&&o!==(o=n[31]+"")&&(e.innerHTML=o)},d(n){n&&k(e)}}}function Le(r){return{c:v,m:v,p:v,d:v}}function ee(r){let e,o,n,t,s={ctx:r,current:null,token:null,hasCatch:!1,pending:Le,then:ze,catch:Ce,value:31};_(o=r[9](r[29],r[26],r[28]),s);function a(...l){return r[22](r[26],r[28],r[29],...l)}return{c(){e=h("td"),s.block.c(),g(e,"class","svelte-1cbymbu"),$(e,"sticky-first",r[28]===0&&r[4]),$(e,"sticky-last",r[28]===r[8].length-1&&r[5])},m(l,i){y(l,e,i),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,n||(t=j(e,"click",a),n=!0)},p(l,i){r=l,s.ctx=r,i[0]&257&&o!==(o=r[9](r[29],r[26],r[28]))&&_(o,s)||xe(s,r,i),i[0]&16&&$(e,"sticky-first",r[28]===0&&r[4]),i[0]&288&&$(e,"sticky-last",r[28]===r[8].length-1&&r[5])},d(l){l&&k(e),s.block.d(),s.token=null,s=null,n=!1,t()}}}function te(r){let e,o,n=T(r[8]),t=[];for(let s=0;s<n.length;s+=1)t[s]=ee(I(r,n,s));return{c(){e=h("tr");for(let s=0;s<t.length;s+=1)t[s].c();o=M()},m(s,a){y(s,e,a);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null);E(e,o)},p(s,a){if(a[0]&2865){n=T(s[8]);let l;for(l=0;l<n.length;l+=1){const i=I(s,n,l);t[l]?t[l].p(i,a):(t[l]=ee(i),t[l].c(),t[l].m(e,o))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},d(s){s&&k(e),D(t,s)}}}function Ee(r){let e,o,n,t,s,a=(r[3]||r[2])&&K(r),l=r[8]&&W(r),i=r[0]&&Z(r);return{c(){e=h("div"),a&&a.c(),o=M(),n=h("div"),t=h("table"),l&&l.c(),s=M(),i&&i.c(),g(t,"class","svelte-1cbymbu"),g(n,"class","table-container svelte-1cbymbu"),g(e,"class","table-card svelte-1cbymbu")},m(u,m){y(u,e,m),a&&a.m(e,null),E(e,o),E(e,n),E(n,t),l&&l.m(t,null),E(t,s),i&&i.m(t,null)},p(u,m){u[3]||u[2]?a?a.p(u,m):(a=K(u),a.c(),a.m(e,o)):a&&(a.d(1),a=null),u[8]?l?l.p(u,m):(l=W(u),l.c(),l.m(t,s)):l&&(l.d(1),l=null),u[0]?i?i.p(u,m):(i=Z(u),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i:v,o:v,d(u){u&&k(e),a&&a.d(),l&&l.d(),i&&i.d()}}}function Ae(r,e,o){let{headers:n=[]}=e,{rows:t=[]}=e,{sort:s}=e,{service:a}=e,l=!1,{showExport:i=!0}=e,u=[],{showArrangingColumns:m=!0}=e,{freezeFirstColumn:B=!1}=e,{freezeLastColumn:z=!1}=e,C=!1;const H=he();async function N(c,f,x){const{key:d,fallback:p,pipes:w}=c;let b;try{b=O(f,d)}catch{return p||""}if(!w)return b;for(const L of w)b=await L(b,f,x);return b}function P(c){const{sortable:f,sortMethod:x}=c;if(!f)return;const d=s?.key===c.key&&s.direction==="asc"?"desc":"asc";if(x){o(0,t=[...t.sort((p,w)=>x(d,p,w))]);return}o(0,t=[...t.sort((p,w)=>{let b,L;try{b=O(p,c.key)}catch{return d==="asc"?1:-1}try{L=O(w,c.key)}catch{return d==="asc"?-1:1}if(b===L)return 0;switch(typeof b){case"number":return d==="asc"?b-L:L-b;case"string":return d==="asc"?b.localeCompare(L):L.localeCompare(b);default:return 0}})]),o(1,s={key:c.key,direction:d})}function R(c,f,x,d){H("rowClick",{row:c,index:f,header:x,originalEvent:d})}async function oe(){o(6,l=!0);const c=await a.export(),f=await Promise.all(c.map(async(p,w)=>(await Promise.all(F.map(b=>N(b,p,w)))).map(b=>`"${b||""}"`).join(","))),x=new Blob([[F.map(p=>p.label).map(p=>`"${p}"`).join(","),...f].join(`
`)],{type:"text/csv"}),d=document.createElement("a");d.href=URL.createObjectURL(x),d.download="export.csv",d.click(),o(6,l=!1)}let F=[];function re(){o(7,C=!0),u=F.map(c=>c.key)}function se(){o(7,C=!1)}function U(c,f){c.dataTransfer.setData("text/plain",f.key)}function ae(c){c.preventDefault()}function le(c){var f;c.preventDefault();const x=c.dataTransfer.getData("text/plain"),d=u.indexOf(x),p=(f=c.target)==null?void 0:f.dataset.index;d!==-1&&p&&(u.splice(d,1),u.splice(Number(p),0,x),o(8,F=n.filter(w=>!w.disabled).sort((w,b)=>{const L=u.indexOf(w.key),me=u.indexOf(b.key);return L-me})))}const ce=(c,f)=>U(f,c),ie=c=>P(c),ue=(c,f,x,d)=>R(c,f,x,d);return r.$$set=c=>{"headers"in c&&o(18,n=c.headers),"rows"in c&&o(0,t=c.rows),"sort"in c&&o(1,s=c.sort),"service"in c&&o(19,a=c.service),"showExport"in c&&o(2,i=c.showExport),"showArrangingColumns"in c&&o(3,m=c.showArrangingColumns),"freezeFirstColumn"in c&&o(4,B=c.freezeFirstColumn),"freezeLastColumn"in c&&o(5,z=c.freezeLastColumn)},r.$$.update=()=>{r.$$.dirty[0]&262144&&o(8,F=n.filter(c=>!c.disabled))},[t,s,i,m,B,z,l,C,F,N,P,R,oe,re,se,U,ae,le,n,a,ce,ie,ue]}class ne extends be{constructor(e){super(),fe(this,e,Ae,Ee,ge,{headers:18,rows:0,sort:1,service:19,showExport:2,showArrangingColumns:3,freezeFirstColumn:4,freezeLastColumn:5},we,[-1,-1])}get headers(){return this.$$.ctx[18]}set headers(e){this.$$set({headers:e}),A()}get rows(){return this.$$.ctx[0]}set rows(e){this.$$set({rows:e}),A()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),A()}get service(){return this.$$.ctx[19]}set service(e){this.$$set({service:e}),A()}get showExport(){return this.$$.ctx[2]}set showExport(e){this.$$set({showExport:e}),A()}get showArrangingColumns(){return this.$$.ctx[3]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),A()}get freezeFirstColumn(){return this.$$.ctx[4]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),A()}get freezeLastColumn(){return this.$$.ctx[5]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),A()}}try{customElements.define("jp-table",de(ne,{headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"}},[],[],!1));}catch{};export{ne as default};
