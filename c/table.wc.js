import{c as he,S as fe,i as ge,f as L,s as be,a as ye,e as b,b as F,g as f,h as y,j as k,J as E,o as v,D as ve,H as D,F as O,t as $,l as N,G as T,B as G,C as _,r as we,K as P,L as ke}from"./svelte.js";import"./index.js";import{get as j}from"./json-pointer.js";function xe(s){ye(s,"svelte-spmq5a",".table-card.svelte-spmq5a{background-color:var(--background-primary);border-radius:0.25rem;box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-spmq5a{overflow-x:auto;width:100%}table.svelte-spmq5a{width:100%}th.svelte-spmq5a,td.svelte-spmq5a{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-spmq5a{opacity:0.75}.cell.svelte-spmq5a{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-header.svelte-spmq5a{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-spmq5a{display:flex;justify-content:center;align-items:center;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.settings-button.svelte-spmq5a{background-color:var(--background-secondary);color:var(--text-on-secondary)}.sticky-first.svelte-spmq5a{position:sticky;left:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-first.svelte-spmq5a:after{content:'';position:absolute;top:0;right:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}.sticky-last.svelte-spmq5a{position:sticky;right:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-last.svelte-spmq5a:before{content:'';position:absolute;top:0;left:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}")}function U(s,e,r){const n=s.slice();return n[27]=e[r],n[29]=r,n}function X(s,e,r){const n=s.slice();return n[30]=e[r],n[29]=r,n}function J(s,e,r){const n=s.slice();return n[30]=e[r],n[29]=r,n}function K(s){let e,r,n=s[4]&&Q(s),t=s[3]&&V(s);return{c(){e=b("div"),n&&n.c(),r=F(),t&&t.c(),f(e,"class","table-header svelte-spmq5a")},m(i,o){y(i,e,o),n&&n.m(e,null),k(e,r),t&&t.m(e,null)},p(i,o){i[4]?n?n.p(i,o):(n=Q(i),n.c(),n.m(e,r)):n&&(n.d(1),n=null),i[3]?t?t.p(i,o):(t=V(i),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(i){i&&v(e),n&&n.d(),t&&t.d()}}}function Q(s){let e;function r(i,o){return i[8]?$e:Ce}let n=r(s),t=n(s);return{c(){t.c(),e=D()},m(i,o){t.m(i,o),y(i,e,o)},p(i,o){n===(n=r(i))&&t?t.p(i,o):(t.d(1),t=n(i),t&&(t.c(),t.m(e.parentNode,e)))},d(i){i&&v(e),t.d(i)}}}function $e(s){let e,r=s[2].FINISH_ARRANGING+"",n,t,i;return{c(){e=b("button"),n=O(r),f(e,"type","button"),f(e,"class","table-button settings-button svelte-spmq5a")},m(o,a){y(o,e,a),k(e,n),t||(i=N(e,"click",s[15]),t=!0)},p(o,a){a[0]&4&&r!==(r=o[2].FINISH_ARRANGING+"")&&T(n,r)},d(o){o&&v(e),t=!1,i()}}}function Ce(s){let e,r=s[2].ARRANGE_COLUMNS+"",n,t,i;return{c(){e=b("button"),n=O(r),f(e,"type","button"),f(e,"class","table-button settings-button svelte-spmq5a")},m(o,a){y(o,e,a),k(e,n),t||(i=N(e,"click",s[14]),t=!0)},p(o,a){a[0]&4&&r!==(r=o[2].ARRANGE_COLUMNS+"")&&T(n,r)},d(o){o&&v(e),t=!1,i()}}}function V(s){let e,r,n=s[2].EXPORT+"",t,i,o;return{c(){e=O(`\xA0
        `),r=b("button"),t=O(n),f(r,"type","button"),f(r,"class","table-button settings-button svelte-spmq5a"),$(r,"loading",s[7])},m(a,l){y(a,e,l),y(a,r,l),k(r,t),i||(o=N(r,"click",s[13]),i=!0)},p(a,l){l[0]&4&&n!==(n=a[2].EXPORT+"")&&T(t,n),l[0]&128&&$(r,"loading",a[7])},d(a){a&&(v(e),v(r)),i=!1,o()}}}function W(s){let e,r=G(s[9]),n=[];for(let t=0;t<r.length;t+=1)n[t]=Z(J(s,r,t));return{c(){e=b("tr");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,i){y(t,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(t,i){if(i[0]&461410){r=G(t[9]);let o;for(o=0;o<r.length;o+=1){const a=J(t,r,o);n[o]?n[o].p(a,i):(n[o]=Z(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&v(e),_(n,t)}}}function Y(s){let e,r=s[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=b("span"),n=O(r)},m(t,i){y(t,e,i),k(e,n)},p(t,i){i[0]&2&&r!==(r=t[1].direction==="asc"?"\u2191":"\u2193")&&T(n,r)},d(t){t&&v(e)}}}function Z(s){var e;let r,n,t=s[30].label+"",i,o,a,l;function d(...C){return s[21](s[30],...C)}let u=((e=s[1])==null?void 0:e.key)===s[30].key&&Y(s);function I(){return s[22](s[30])}return{c(){r=b("th"),n=b("span"),i=F(),u&&u.c(),o=F(),f(n,"draggable","true"),f(r,"data-index",s[29]),f(r,"class","svelte-spmq5a"),$(r,"sortable",s[30].sortable),$(r,"sticky-first",s[29]===0&&s[5]),$(r,"sticky-last",s[29]===s[9].length-1&&s[6])},m(C,q){y(C,r,q),k(r,n),n.innerHTML=t,k(r,i),u&&u.m(r,null),k(r,o),a||(l=[N(n,"dragstart",d),N(r,"click",I),N(r,"drop",s[18]),N(r,"dragover",s[17])],a=!0)},p(C,q){var R;s=C,q[0]&512&&t!==(t=s[30].label+"")&&(n.innerHTML=t),((R=s[1])==null?void 0:R.key)===s[30].key?u?u.p(s,q):(u=Y(s),u.c(),u.m(r,o)):u&&(u.d(1),u=null),q[0]&512&&$(r,"sortable",s[30].sortable),q[0]&32&&$(r,"sticky-first",s[29]===0&&s[5]),q[0]&576&&$(r,"sticky-last",s[29]===s[9].length-1&&s[6])},d(C){C&&v(r),u&&u.d(),a=!1,we(l)}}}function ee(s){let e,r=G(s[0]),n=[];for(let t=0;t<r.length;t+=1)n[t]=ne(U(s,r,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=D()},m(t,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,i);y(t,e,i)},p(t,i){if(i[0]&5729){r=G(t[0]);let o;for(o=0;o<r.length;o+=1){const a=U(t,r,o);n[o]?n[o].p(a,i):(n[o]=ne(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&v(e),_(n,t)}}}function qe(s){return{c:E,m:E,p:E,d:E}}function Ae(s){let e,r=s[32]+"";return{c(){e=b("span"),f(e,"class","cell svelte-spmq5a")},m(n,t){y(n,e,t),e.innerHTML=r},p(n,t){t[0]&513&&r!==(r=n[32]+"")&&(e.innerHTML=r)},d(n){n&&v(e)}}}function Ee(s){return{c:E,m:E,p:E,d:E}}function te(s){let e,r,n,t,i={ctx:s,current:null,token:null,hasCatch:!1,pending:Ee,then:Ae,catch:qe,value:32};P(r=s[10](s[30],s[27],s[29]),i);function o(...a){return s[23](s[27],s[29],s[30],...a)}return{c(){e=b("td"),i.block.c(),f(e,"class","svelte-spmq5a"),$(e,"sticky-first",s[29]===0&&s[5]),$(e,"sticky-last",s[29]===s[9].length-1&&s[6])},m(a,l){y(a,e,l),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,n||(t=N(e,"click",o),n=!0)},p(a,l){s=a,i.ctx=s,l[0]&513&&r!==(r=s[10](s[30],s[27],s[29]))&&P(r,i)||ke(i,s,l),l[0]&32&&$(e,"sticky-first",s[29]===0&&s[5]),l[0]&576&&$(e,"sticky-last",s[29]===s[9].length-1&&s[6])},d(a){a&&v(e),i.block.d(),i.token=null,i=null,n=!1,t()}}}function ne(s){let e,r,n=G(s[9]),t=[];for(let i=0;i<n.length;i+=1)t[i]=te(X(s,n,i));return{c(){e=b("tr");for(let i=0;i<t.length;i+=1)t[i].c();r=F()},m(i,o){y(i,e,o);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);k(e,r)},p(i,o){if(o[0]&5729){n=G(i[9]);let a;for(a=0;a<n.length;a+=1){const l=X(i,n,a);t[a]?t[a].p(l,o):(t[a]=te(l),t[a].c(),t[a].m(e,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(i){i&&v(e),_(t,i)}}}function Le(s){let e,r,n,t,i,o=(s[4]||s[3])&&K(s),a=s[9]&&W(s),l=s[0]&&ee(s);return{c(){e=b("div"),o&&o.c(),r=F(),n=b("div"),t=b("table"),a&&a.c(),i=F(),l&&l.c(),f(t,"class","svelte-spmq5a"),f(n,"class","table-container svelte-spmq5a"),f(e,"class","table-card svelte-spmq5a")},m(d,u){y(d,e,u),o&&o.m(e,null),k(e,r),k(e,n),k(n,t),a&&a.m(t,null),k(t,i),l&&l.m(t,null)},p(d,u){d[4]||d[3]?o?o.p(d,u):(o=K(d),o.c(),o.m(e,r)):o&&(o.d(1),o=null),d[9]?a?a.p(d,u):(a=W(d),a.c(),a.m(t,i)):a&&(a.d(1),a=null),d[0]?l?l.p(d,u):(l=ee(d),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:E,o:E,d(d){d&&v(e),o&&o.d(),a&&a.d(),l&&l.d()}}}function Ne(s,e,r){let{wording:n={EXPORT:"Export",ARRANGE_COLUMNS:"Arrange columns",FINISH_ARRANGING:"Finish Arranging"}}=e,{headers:t=[]}=e,{rows:i=[]}=e,{sort:o}=e,{service:a}=e,l=!1,{showExport:d=!0}=e,u=[],{showArrangingColumns:I=!0}=e,{freezeFirstColumn:C=!1}=e,{freezeLastColumn:q=!1}=e,R=!1;const se=ve();async function H(c,h,w){const{key:m,fallback:g,pipes:x}=c;let p;try{p=j(h,m)}catch{return g||""}if(!x)return p;for(const A of x)p=await A(p,h,w);return p}function M(c){const{sortable:h,sortMethod:w}=c;if(!h)return;const m=o?.key===c.key&&o.direction==="asc"?"desc":"asc";if(w){r(0,i=[...i.sort((g,x)=>w(m,g,x))]);return}r(0,i=[...i.sort((g,x)=>{let p,A;try{p=j(g,c.key)}catch{return m==="asc"?1:-1}try{A=j(x,c.key)}catch{return m==="asc"?-1:1}if(p===A)return 0;switch(typeof p){case"number":return m==="asc"?p-A:A-p;case"string":return m==="asc"?p.localeCompare(A):A.localeCompare(p);default:return 0}})]),r(1,o={key:c.key,direction:m})}function S(c,h,w,m){se("rowClick",{row:c,index:h,header:w,originalEvent:m})}async function oe(){r(7,l=!0);const c=await a.export(),h=await Promise.all(c.map(async(g,x)=>(await Promise.all(z.map(p=>H(p,g,x)))).map(p=>`"${p||""}"`).join(","))),w=new Blob([[z.map(g=>g.label).map(g=>`"${g}"`).join(","),...h].join(`
`)],{type:"text/csv"}),m=document.createElement("a");m.href=URL.createObjectURL(w),m.download="export.csv",m.click(),r(7,l=!1)}let z=[];function ie(){r(8,R=!0),u=z.map(c=>c.key)}function ae(){r(8,R=!1)}function B(c,h){c.dataTransfer.setData("text/plain",h.key)}function ce(c){c.preventDefault()}function le(c){var h;c.preventDefault();const w=c.dataTransfer.getData("text/plain"),m=u.indexOf(w),g=(h=c.target)==null?void 0:h.dataset.index;m!==-1&&g&&(u.splice(m,1),u.splice(Number(g),0,w),r(9,z=t.filter(x=>!x.disabled).sort((x,p)=>{const A=u.indexOf(x.key),pe=u.indexOf(p.key);return A-pe})))}const ue=(c,h)=>B(h,c),de=c=>M(c),me=(c,h,w,m)=>S(c,h,w,m);return s.$$set=c=>{"wording"in c&&r(2,n=c.wording),"headers"in c&&r(19,t=c.headers),"rows"in c&&r(0,i=c.rows),"sort"in c&&r(1,o=c.sort),"service"in c&&r(20,a=c.service),"showExport"in c&&r(3,d=c.showExport),"showArrangingColumns"in c&&r(4,I=c.showArrangingColumns),"freezeFirstColumn"in c&&r(5,C=c.freezeFirstColumn),"freezeLastColumn"in c&&r(6,q=c.freezeLastColumn)},s.$$.update=()=>{s.$$.dirty[0]&524288&&r(9,z=t.filter(c=>!c.disabled))},[i,o,n,d,I,C,q,l,R,z,H,M,S,oe,ie,ae,B,ce,le,t,a,ue,de,me]}class re extends fe{constructor(e){super(),ge(this,e,Ne,Le,be,{wording:2,headers:19,rows:0,sort:1,service:20,showExport:3,showArrangingColumns:4,freezeFirstColumn:5,freezeLastColumn:6},xe,[-1,-1])}get wording(){return this.$$.ctx[2]}set wording(e){this.$$set({wording:e}),L()}get headers(){return this.$$.ctx[19]}set headers(e){this.$$set({headers:e}),L()}get rows(){return this.$$.ctx[0]}set rows(e){this.$$set({rows:e}),L()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),L()}get service(){return this.$$.ctx[20]}set service(e){this.$$set({service:e}),L()}get showExport(){return this.$$.ctx[3]}set showExport(e){this.$$set({showExport:e}),L()}get showArrangingColumns(){return this.$$.ctx[4]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),L()}get freezeFirstColumn(){return this.$$.ctx[5]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),L()}get freezeLastColumn(){return this.$$.ctx[6]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),L()}}try{customElements.define("jp-table",he(re,{wording:{},headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"}},[],[],!1));}catch{};export{re as default};
//# sourceMappingURL=table.wc.js.map
