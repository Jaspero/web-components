import{c as ge,S as pe,i as he,f as E,s as be,a as ke,e as b,m as F,d as p,g as k,r as x,z as A,l as w,w as we,C as P,A as O,p as q,v as N,B as I,M as T,N as M,E as ye,R as U,T as xe}from"./svelte.js";import"./index2.js";import{g as _}from"./json-pointer.js";function ve(o){ke(o,"svelte-1qoq9oo",".table-card.svelte-1qoq9oo{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-1qoq9oo{overflow-x:auto;width:100%}table.svelte-1qoq9oo{width:100%}th.svelte-1qoq9oo,td.svelte-1qoq9oo{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-1qoq9oo{opacity:0.75}.cell.svelte-1qoq9oo{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-header.svelte-1qoq9oo{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-1qoq9oo{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-1qoq9oo{background-color:var(--background-secondary);color:var(--text-on-secondary)}@-webkit-keyframes svelte-1qoq9oo-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-1qoq9oo-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-1qoq9oo-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-1qoq9oo-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.sticky-first.svelte-1qoq9oo{position:sticky;left:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-first.svelte-1qoq9oo:after{content:'';position:absolute;top:0;right:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}.sticky-last.svelte-1qoq9oo{position:sticky;right:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-last.svelte-1qoq9oo:before{content:'';position:absolute;top:0;left:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}")}function D(o,e,n){const r=o.slice();return r[27]=e[n],r[29]=n,r}function X(o,e,n){const r=o.slice();return r[30]=e[n],r[29]=n,r}function J(o,e,n){const r=o.slice();return r[30]=e[n],r[29]=n,r}function K(o){let e,n,r=o[4]&&Q(o),t=o[3]&&V(o);return{c(){e=b("div"),r&&r.c(),n=F(),t&&t.c(),p(e,"class","table-header svelte-1qoq9oo")},m(l,s){k(l,e,s),r&&r.m(e,null),x(e,n),t&&t.m(e,null)},p(l,s){l[4]?r?r.p(l,s):(r=Q(l),r.c(),r.m(e,n)):r&&(r.d(1),r=null),l[3]?t?t.p(l,s):(t=V(l),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(l){l&&w(e),r&&r.d(),t&&t.d()}}}function Q(o){let e;function n(l,s){return l[8]?qe:$e}let r=n(o),t=r(o);return{c(){t.c(),e=P()},m(l,s){t.m(l,s),k(l,e,s)},p(l,s){r===(r=n(l))&&t?t.p(l,s):(t.d(1),t=r(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){l&&w(e),t.d(l)}}}function qe(o){let e,n=o[2].FINISH_ARRANGING+"",r,t,l;return{c(){e=b("button"),r=O(n),p(e,"type","button"),p(e,"class","table-button settings-button svelte-1qoq9oo")},m(s,i){k(s,e,i),x(e,r),t||(l=N(e,"click",o[15]),t=!0)},p(s,i){i[0]&4&&n!==(n=s[2].FINISH_ARRANGING+"")&&I(r,n)},d(s){s&&w(e),t=!1,l()}}}function $e(o){let e,n=o[2].ARRANGE_COLUMNS+"",r,t,l;return{c(){e=b("button"),r=O(n),p(e,"type","button"),p(e,"class","table-button settings-button svelte-1qoq9oo")},m(s,i){k(s,e,i),x(e,r),t||(l=N(e,"click",o[14]),t=!0)},p(s,i){i[0]&4&&n!==(n=s[2].ARRANGE_COLUMNS+"")&&I(r,n)},d(s){s&&w(e),t=!1,l()}}}function V(o){let e,n,r=o[2].EXPORT+"",t,l,s;return{c(){e=O(`\xA0
        `),n=b("button"),t=O(r),p(n,"type","button"),p(n,"class","table-button settings-button svelte-1qoq9oo"),q(n,"loading",o[7])},m(i,c){k(i,e,c),k(i,n,c),x(n,t),l||(s=N(n,"click",o[13]),l=!0)},p(i,c){c[0]&4&&r!==(r=i[2].EXPORT+"")&&I(t,r),c[0]&128&&q(n,"loading",i[7])},d(i){i&&(w(e),w(n)),l=!1,s()}}}function W(o){let e,n=T(o[9]),r=[];for(let t=0;t<n.length;t+=1)r[t]=Z(J(o,n,t));return{c(){e=b("tr");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,l){k(t,e,l);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(t,l){if(l[0]&461410){n=T(t[9]);let s;for(s=0;s<n.length;s+=1){const i=J(t,n,s);r[s]?r[s].p(i,l):(r[s]=Z(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&w(e),M(r,t)}}}function Y(o){let e,n=o[1].direction==="asc"?"\u2191":"\u2193",r;return{c(){e=b("span"),r=O(n)},m(t,l){k(t,e,l),x(e,r)},p(t,l){l[0]&2&&n!==(n=t[1].direction==="asc"?"\u2191":"\u2193")&&I(r,n)},d(t){t&&w(e)}}}function Z(o){var e;let n,r,t=o[30].label+"",l,s,i,c;function d(...$){return o[21](o[30],...$)}let u=((e=o[1])==null?void 0:e.key)===o[30].key&&Y(o);function G(){return o[22](o[30])}return{c(){n=b("th"),r=b("span"),l=F(),u&&u.c(),s=F(),p(r,"draggable","true"),p(n,"data-index",o[29]),p(n,"class","svelte-1qoq9oo"),q(n,"sortable",o[30].sortable),q(n,"sticky-first",o[29]===0&&o[5]),q(n,"sticky-last",o[29]===o[9].length-1&&o[6])},m($,z){k($,n,z),x(n,r),r.innerHTML=t,x(n,l),u&&u.m(n,null),x(n,s),i||(c=[N(r,"dragstart",d),N(n,"click",G),N(n,"drop",o[18]),N(n,"dragover",o[17])],i=!0)},p($,z){var R;o=$,z[0]&512&&t!==(t=o[30].label+"")&&(r.innerHTML=t),((R=o[1])==null?void 0:R.key)===o[30].key?u?u.p(o,z):(u=Y(o),u.c(),u.m(n,s)):u&&(u.d(1),u=null),z[0]&512&&q(n,"sortable",o[30].sortable),z[0]&32&&q(n,"sticky-first",o[29]===0&&o[5]),z[0]&576&&q(n,"sticky-last",o[29]===o[9].length-1&&o[6])},d($){$&&w(n),u&&u.d(),i=!1,ye(c)}}}function ee(o){let e,n=T(o[0]),r=[];for(let t=0;t<n.length;t+=1)r[t]=re(D(o,n,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=P()},m(t,l){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(t,l);k(t,e,l)},p(t,l){if(l[0]&5729){n=T(t[0]);let s;for(s=0;s<n.length;s+=1){const i=D(t,n,s);r[s]?r[s].p(i,l):(r[s]=re(i),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&w(e),M(r,t)}}}function ze(o){return{c:A,m:A,p:A,d:A}}function Ce(o){let e,n=o[32]+"";return{c(){e=b("span"),p(e,"class","cell svelte-1qoq9oo")},m(r,t){k(r,e,t),e.innerHTML=n},p(r,t){t[0]&513&&n!==(n=r[32]+"")&&(e.innerHTML=n)},d(r){r&&w(e)}}}function Ae(o){return{c:A,m:A,p:A,d:A}}function te(o){let e,n,r,t,l={ctx:o,current:null,token:null,hasCatch:!1,pending:Ae,then:Ce,catch:ze,value:32};U(n=o[10](o[30],o[27],o[29]),l);function s(...i){return o[23](o[27],o[29],o[30],...i)}return{c(){e=b("td"),l.block.c(),p(e,"class","svelte-1qoq9oo"),q(e,"sticky-first",o[29]===0&&o[5]),q(e,"sticky-last",o[29]===o[9].length-1&&o[6])},m(i,c){k(i,e,c),l.block.m(e,l.anchor=null),l.mount=()=>e,l.anchor=null,r||(t=N(e,"click",s),r=!0)},p(i,c){o=i,l.ctx=o,c[0]&513&&n!==(n=o[10](o[30],o[27],o[29]))&&U(n,l)||xe(l,o,c),c[0]&32&&q(e,"sticky-first",o[29]===0&&o[5]),c[0]&576&&q(e,"sticky-last",o[29]===o[9].length-1&&o[6])},d(i){i&&w(e),l.block.d(),l.token=null,l=null,r=!1,t()}}}function re(o){let e,n,r=T(o[9]),t=[];for(let l=0;l<r.length;l+=1)t[l]=te(X(o,r,l));return{c(){e=b("tr");for(let l=0;l<t.length;l+=1)t[l].c();n=F()},m(l,s){k(l,e,s);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null);x(e,n)},p(l,s){if(s[0]&5729){r=T(l[9]);let i;for(i=0;i<r.length;i+=1){const c=X(l,r,i);t[i]?t[i].p(c,s):(t[i]=te(c),t[i].c(),t[i].m(e,n))}for(;i<t.length;i+=1)t[i].d(1);t.length=r.length}},d(l){l&&w(e),M(t,l)}}}function Ee(o){let e,n,r,t,l,s=(o[4]||o[3])&&K(o),i=o[9]&&W(o),c=o[0]&&ee(o);return{c(){e=b("div"),s&&s.c(),n=F(),r=b("div"),t=b("table"),i&&i.c(),l=F(),c&&c.c(),p(t,"class","svelte-1qoq9oo"),p(r,"class","table-container svelte-1qoq9oo"),p(e,"class","table-card svelte-1qoq9oo")},m(d,u){k(d,e,u),s&&s.m(e,null),x(e,n),x(e,r),x(r,t),i&&i.m(t,null),x(t,l),c&&c.m(t,null)},p(d,u){d[4]||d[3]?s?s.p(d,u):(s=K(d),s.c(),s.m(e,n)):s&&(s.d(1),s=null),d[9]?i?i.p(d,u):(i=W(d),i.c(),i.m(t,l)):i&&(i.d(1),i=null),d[0]?c?c.p(d,u):(c=ee(d),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:A,o:A,d(d){d&&w(e),s&&s.d(),i&&i.d(),c&&c.d()}}}function Ne(o,e,n){let{wording:r={EXPORT:"Export",ARRANGE_COLUMNS:"Arrange columns",FINISH_ARRANGING:"Finish Arranging"}}=e,{headers:t=[]}=e,{rows:l=[]}=e,{sort:s}=e,{service:i}=e,c=!1,{showExport:d=!0}=e,u=[],{showArrangingColumns:G=!0}=e,{freezeFirstColumn:$=!1}=e,{freezeLastColumn:z=!1}=e,R=!1;const oe=we();async function j(a,g,y){const{key:m,fallback:h,pipes:v}=a;let f;try{f=_(g,m)}catch{return h||""}if(!v)return f;for(const C of v)f=await C(f,g,y);return f}function H(a){const{sortable:g,sortMethod:y}=a;if(!g)return;const m=s?.key===a.key&&s.direction==="asc"?"desc":"asc";if(y){n(0,l=[...l.sort((h,v)=>y(m,h,v))]);return}n(0,l=[...l.sort((h,v)=>{let f,C;try{f=_(h,a.key)}catch{return m==="asc"?1:-1}try{C=_(v,a.key)}catch{return m==="asc"?-1:1}if(f===C)return 0;switch(typeof f){case"number":return m==="asc"?f-C:C-f;case"string":return m==="asc"?f.localeCompare(C):C.localeCompare(f);default:return 0}})]),n(1,s={key:a.key,direction:m})}function S(a,g,y,m){oe("rowClick",{row:a,index:g,header:y,originalEvent:m})}async function se(){n(7,c=!0);const a=await i.export(),g=await Promise.all(a.map(async(h,v)=>(await Promise.all(L.map(f=>j(f,h,v)))).map(f=>`"${f||""}"`).join(","))),y=new Blob([[L.map(h=>h.label).map(h=>`"${h}"`).join(","),...g].join(`
`)],{type:"text/csv"}),m=document.createElement("a");m.href=URL.createObjectURL(y),m.download="export.csv",m.click(),n(7,c=!1)}let L=[];function le(){n(8,R=!0),u=L.map(a=>a.key)}function ie(){n(8,R=!1)}function B(a,g){a.dataTransfer.setData("text/plain",g.key)}function ae(a){a.preventDefault()}function ce(a){var g;a.preventDefault();const y=a.dataTransfer.getData("text/plain"),m=u.indexOf(y),h=(g=a.target)==null?void 0:g.dataset.index;m!==-1&&h&&(u.splice(m,1),u.splice(Number(h),0,y),n(9,L=t.filter(v=>!v.disabled).sort((v,f)=>{const C=u.indexOf(v.key),fe=u.indexOf(f.key);return C-fe})))}const ue=(a,g)=>B(g,a),de=a=>H(a),me=(a,g,y,m)=>S(a,g,y,m);return o.$$set=a=>{"wording"in a&&n(2,r=a.wording),"headers"in a&&n(19,t=a.headers),"rows"in a&&n(0,l=a.rows),"sort"in a&&n(1,s=a.sort),"service"in a&&n(20,i=a.service),"showExport"in a&&n(3,d=a.showExport),"showArrangingColumns"in a&&n(4,G=a.showArrangingColumns),"freezeFirstColumn"in a&&n(5,$=a.freezeFirstColumn),"freezeLastColumn"in a&&n(6,z=a.freezeLastColumn)},o.$$.update=()=>{o.$$.dirty[0]&524288&&n(9,L=t.filter(a=>!a.disabled))},[l,s,r,d,G,$,z,c,R,L,j,H,S,se,le,ie,B,ae,ce,t,i,ue,de,me]}class ne extends pe{constructor(e){super(),he(this,e,Ne,Ee,be,{wording:2,headers:19,rows:0,sort:1,service:20,showExport:3,showArrangingColumns:4,freezeFirstColumn:5,freezeLastColumn:6},ve,[-1,-1])}get wording(){return this.$$.ctx[2]}set wording(e){this.$$set({wording:e}),E()}get headers(){return this.$$.ctx[19]}set headers(e){this.$$set({headers:e}),E()}get rows(){return this.$$.ctx[0]}set rows(e){this.$$set({rows:e}),E()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),E()}get service(){return this.$$.ctx[20]}set service(e){this.$$set({service:e}),E()}get showExport(){return this.$$.ctx[3]}set showExport(e){this.$$set({showExport:e}),E()}get showArrangingColumns(){return this.$$.ctx[4]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),E()}get freezeFirstColumn(){return this.$$.ctx[5]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),E()}get freezeLastColumn(){return this.$$.ctx[6]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),E()}}try{customElements.define("jp-table",ge(ne,{wording:{},headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"}},[],[],!1));}catch{};export{ne as default};
