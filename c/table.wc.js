import{c as ue,S as de,i as me,f as L,s as ge,a as fe,e as b,b as M,d as p,g as z,h as $,n as k,j as x,k as pe,l as U,t as q,m as O,o as E,p as T,q as B,r as he,u as be,v as F,w as ze}from"./svelte.js";import"./index2.js";import{g as N}from"./json-pointer.js";function xe(a){fe(a,"svelte-4zgzc5",".table-card.svelte-4zgzc5{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-4zgzc5{overflow-x:auto;width:100%}table.svelte-4zgzc5{width:100%}th.svelte-4zgzc5,td.svelte-4zgzc5{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-4zgzc5{opacity:0.75}.cell.svelte-4zgzc5{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-header.svelte-4zgzc5{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-4zgzc5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-4zgzc5{background-color:var(--background-secondary);color:var(--text-on-secondary)}@-webkit-keyframes svelte-4zgzc5-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-4zgzc5-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-4zgzc5-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-4zgzc5-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}function S(a,t,r){const n=a.slice();return n[24]=t[r],n[26]=r,n}function _(a,t,r){const n=a.slice();return n[27]=t[r],n}function G(a,t,r){const n=a.slice();return n[27]=t[r],n[26]=r,n}function I(a){let t,r,n=a[3]&&J(a),e=a[2]&&K(a);return{c(){t=b("div"),n&&n.c(),r=M(),e&&e.c(),p(t,"class","table-header svelte-4zgzc5")},m(s,o){z(s,t,o),n&&n.m(t,null),$(t,r),e&&e.m(t,null)},p(s,o){s[3]?n?n.p(s,o):(n=J(s),n.c(),n.m(t,r)):n&&(n.d(1),n=null),s[2]?e?e.p(s,o):(e=K(s),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},d(s){s&&x(t),n&&n.d(),e&&e.d()}}}function J(a){let t;function r(s,o){return s[5]?we:ve}let n=r(a),e=n(a);return{c(){e.c(),t=U()},m(s,o){e.m(s,o),z(s,t,o)},p(s,o){n===(n=r(s))&&e?e.p(s,o):(e.d(1),e=n(s),e&&(e.c(),e.m(t.parentNode,t)))},d(s){s&&x(t),e.d(s)}}}function we(a){let t,r,n;return{c(){t=b("button"),t.textContent="Finish Arranging",p(t,"type","button"),p(t,"class","table-button settings-button svelte-4zgzc5")},m(e,s){z(e,t,s),r||(n=E(t,"click",a[12]),r=!0)},p:k,d(e){e&&x(t),r=!1,n()}}}function ve(a){let t,r,n;return{c(){t=b("button"),t.textContent="Arrange Columns",p(t,"type","button"),p(t,"class","table-button settings-button svelte-4zgzc5")},m(e,s){z(e,t,s),r||(n=E(t,"click",a[11]),r=!0)},p:k,d(e){e&&x(t),r=!1,n()}}}function K(a){let t,r,n,e;return{c(){t=q(`\xA0
        `),r=b("button"),r.textContent="Export",p(r,"type","button"),p(r,"class","table-button settings-button svelte-4zgzc5"),O(r,"loading",a[4])},m(s,o){z(s,t,o),z(s,r,o),n||(e=E(r,"click",a[10]),n=!0)},p(s,o){o[0]&16&&O(r,"loading",s[4])},d(s){s&&(x(t),x(r)),n=!1,e()}}}function Q(a){let t,r=T(a[6]),n=[];for(let e=0;e<r.length;e+=1)n[e]=W(G(a,r,e));return{c(){t=b("tr");for(let e=0;e<n.length;e+=1)n[e].c()},m(e,s){z(e,t,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,null)},p(e,s){if(s[0]&57666){r=T(e[6]);let o;for(o=0;o<r.length;o+=1){const l=G(e,r,o);n[o]?n[o].p(l,s):(n[o]=W(l),n[o].c(),n[o].m(t,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(e){e&&x(t),B(n,e)}}}function V(a){let t,r=a[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){t=b("span"),n=q(r)},m(e,s){z(e,t,s),$(t,n)},p(e,s){s[0]&2&&r!==(r=e[1].direction==="asc"?"\u2191":"\u2193")&&be(n,r)},d(e){e&&x(t)}}}function W(a){var t;let r,n,e=a[27].label+"",s,o,l,i;function u(...C){return a[18](a[27],...C)}let d=((t=a[1])==null?void 0:t.key)===a[27].key&&V(a);function D(){return a[19](a[27])}return{c(){r=b("th"),n=b("span"),s=M(),d&&d.c(),o=M(),p(n,"draggable","true"),p(r,"data-index",a[26]),p(r,"class","svelte-4zgzc5"),O(r,"sortable",a[27].sortable)},m(C,A){z(C,r,A),$(r,n),n.innerHTML=e,$(r,s),d&&d.m(r,null),$(r,o),l||(i=[E(n,"dragstart",u),E(r,"click",D),E(r,"drop",a[15]),E(r,"dragover",a[14])],l=!0)},p(C,A){var H;a=C,A[0]&64&&e!==(e=a[27].label+"")&&(n.innerHTML=e),((H=a[1])==null?void 0:H.key)===a[27].key?d?d.p(a,A):(d=V(a),d.c(),d.m(r,o)):d&&(d.d(1),d=null),A[0]&64&&O(r,"sortable",a[27].sortable)},d(C){C&&x(r),d&&d.d(),l=!1,he(i)}}}function X(a){let t,r=T(a[0]),n=[];for(let e=0;e<r.length;e+=1)n[e]=Z(S(a,r,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=U()},m(e,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,s);z(e,t,s)},p(e,s){if(s[0]&705){r=T(e[0]);let o;for(o=0;o<r.length;o+=1){const l=S(e,r,o);n[o]?n[o].p(l,s):(n[o]=Z(l),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(e){e&&x(t),B(n,e)}}}function ke(a){return{c:k,m:k,p:k,d:k}}function ye(a){let t,r=a[30]+"";return{c(){t=b("span"),p(t,"class","cell svelte-4zgzc5")},m(n,e){z(n,t,e),t.innerHTML=r},p(n,e){e[0]&65&&r!==(r=n[30]+"")&&(t.innerHTML=r)},d(n){n&&x(t)}}}function $e(a){return{c:k,m:k,p:k,d:k}}function Y(a){let t,r,n,e,s={ctx:a,current:null,token:null,hasCatch:!1,pending:$e,then:ye,catch:ke,value:30};F(r=a[7](a[27],a[24],a[26]),s);function o(...l){return a[20](a[24],a[26],a[27],...l)}return{c(){t=b("td"),s.block.c(),p(t,"class","svelte-4zgzc5")},m(l,i){z(l,t,i),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,n||(e=E(t,"click",o),n=!0)},p(l,i){a=l,s.ctx=a,i[0]&65&&r!==(r=a[7](a[27],a[24],a[26]))&&F(r,s)||ze(s,a,i)},d(l){l&&x(t),s.block.d(),s.token=null,s=null,n=!1,e()}}}function Z(a){let t,r,n=T(a[6]),e=[];for(let s=0;s<n.length;s+=1)e[s]=Y(_(a,n,s));return{c(){t=b("tr");for(let s=0;s<e.length;s+=1)e[s].c();r=M()},m(s,o){z(s,t,o);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null);$(t,r)},p(s,o){if(o[0]&705){n=T(s[6]);let l;for(l=0;l<n.length;l+=1){const i=_(s,n,l);e[l]?e[l].p(i,o):(e[l]=Y(i),e[l].c(),e[l].m(t,r))}for(;l<e.length;l+=1)e[l].d(1);e.length=n.length}},d(s){s&&x(t),B(e,s)}}}function Ce(a){let t,r,n,e,s,o=(a[3]||a[2])&&I(a),l=a[6]&&Q(a),i=a[0]&&X(a);return{c(){t=b("div"),o&&o.c(),r=M(),n=b("div"),e=b("table"),l&&l.c(),s=M(),i&&i.c(),p(e,"class","svelte-4zgzc5"),p(n,"class","table-container svelte-4zgzc5"),p(t,"class","table-card svelte-4zgzc5")},m(u,d){z(u,t,d),o&&o.m(t,null),$(t,r),$(t,n),$(n,e),l&&l.m(e,null),$(e,s),i&&i.m(e,null)},p(u,d){u[3]||u[2]?o?o.p(u,d):(o=I(u),o.c(),o.m(t,r)):o&&(o.d(1),o=null),u[6]?l?l.p(u,d):(l=Q(u),l.c(),l.m(e,s)):l&&(l.d(1),l=null),u[0]?i?i.p(u,d):(i=X(u),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:k,o:k,d(u){u&&x(t),o&&o.d(),l&&l.d(),i&&i.d()}}}function Ae(a,t,r){let{headers:n=[]}=t,{rows:e=[]}=t,{sort:s}=t,{service:o}=t,l=!1,{showExport:i=!0}=t,u=[],{showArrangingColumns:d=!0}=t,D=!1;const C=pe();async function A(c,f,w){const{key:m,fallback:h,pipes:v}=c;let g;try{g=N(f,m)}catch{return h||""}if(!v)return g;for(const y of v)g=await y(g,f,w);return g}function H(c){const{sortable:f,sortMethod:w}=c;if(!f)return;const m=s?.key===c.key&&s.direction==="asc"?"desc":"asc";if(w){r(0,e=[...e.sort((h,v)=>w(m,h,v))]);return}r(0,e=[...e.sort((h,v)=>{let g,y;try{g=N(h,c.key)}catch{return m==="asc"?1:-1}try{y=N(v,c.key)}catch{return m==="asc"?-1:1}if(g===y)return 0;switch(typeof g){case"number":return m==="asc"?g-y:y-g;case"string":return m==="asc"?g.localeCompare(y):y.localeCompare(g);default:return 0}})]),r(1,s={key:c.key,direction:m})}function P(c,f,w,m){C("rowClick",{row:c,index:f,header:w,originalEvent:m})}async function te(){r(4,l=!0);const c=await o.export(),f=await Promise.all(c.map(async(h,v)=>(await Promise.all(j.map(g=>A(g,h,v)))).map(g=>`"${g||""}"`).join(","))),w=new Blob([[j.map(h=>h.label).map(h=>`"${h}"`).join(","),...f].join(`
`)],{type:"text/csv"}),m=document.createElement("a");m.href=URL.createObjectURL(w),m.download="export.csv",m.click(),r(4,l=!1)}let j=[];function ne(){r(5,D=!0),u=j.map(c=>c.key)}function re(){r(5,D=!1)}function R(c,f){c.dataTransfer.setData("text/plain",f.key)}function se(c){c.preventDefault()}function ae(c){var f;c.preventDefault();const w=c.dataTransfer.getData("text/plain"),m=u.indexOf(w),h=(f=c.target)==null?void 0:f.dataset.index;m!==-1&&h&&(u.splice(m,1),u.splice(Number(h),0,w),r(6,j=n.filter(v=>!v.disabled).sort((v,g)=>{const y=u.indexOf(v.key),ie=u.indexOf(g.key);return y-ie})))}const oe=(c,f)=>R(f,c),le=c=>H(c),ce=(c,f,w,m)=>P(c,f,w,m);return a.$$set=c=>{"headers"in c&&r(16,n=c.headers),"rows"in c&&r(0,e=c.rows),"sort"in c&&r(1,s=c.sort),"service"in c&&r(17,o=c.service),"showExport"in c&&r(2,i=c.showExport),"showArrangingColumns"in c&&r(3,d=c.showArrangingColumns)},a.$$.update=()=>{a.$$.dirty[0]&65536&&r(6,j=n.filter(c=>!c.disabled))},[e,s,i,d,l,D,j,A,H,P,te,ne,re,R,se,ae,n,o,oe,le,ce]}class ee extends de{constructor(t){super(),me(this,t,Ae,Ce,ge,{headers:16,rows:0,sort:1,service:17,showExport:2,showArrangingColumns:3},xe,[-1,-1])}get headers(){return this.$$.ctx[16]}set headers(t){this.$$set({headers:t}),L()}get rows(){return this.$$.ctx[0]}set rows(t){this.$$set({rows:t}),L()}get sort(){return this.$$.ctx[1]}set sort(t){this.$$set({sort:t}),L()}get service(){return this.$$.ctx[17]}set service(t){this.$$set({service:t}),L()}get showExport(){return this.$$.ctx[2]}set showExport(t){this.$$set({showExport:t}),L()}get showArrangingColumns(){return this.$$.ctx[3]}set showArrangingColumns(t){this.$$set({showArrangingColumns:t}),L()}}try{customElements.define("jp-table",ue(ee,{headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"}},[],[],!1));}catch{};export{ee as default};
