import{c as ge,S as me,i as fe,f as R,s as pe,a as he,e as b,b as L,d as p,g as w,h as v,n as A,j as z,k as be,l as D,t as j,m as I,o as E,p as _,q as O,r as M,u as we,v as F,w as ze}from"./svelte.js";import"./index2.js";import{g as H}from"./json-pointer.js";function xe(l){he(l,"svelte-4zgzc5",".table-card.svelte-4zgzc5{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-4zgzc5{overflow-x:auto;width:100%}table.svelte-4zgzc5{width:100%}th.svelte-4zgzc5,td.svelte-4zgzc5{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-4zgzc5{opacity:0.75}.cell.svelte-4zgzc5{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-header.svelte-4zgzc5{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-4zgzc5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-4zgzc5{background-color:var(--background-secondary);color:var(--text-on-secondary)}@-webkit-keyframes svelte-4zgzc5-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes svelte-4zgzc5-spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes svelte-4zgzc5-spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-4zgzc5-spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}function B(l,t,r){const n=l.slice();return n[25]=t[r],n[27]=r,n}function X(l,t,r){const n=l.slice();return n[28]=t[r],n}function q(l,t,r){const n=l.slice();return n[28]=t[r],n[27]=r,n}function J(l){let t,r,n=l[4]&&K(l),e=l[3]&&Q(l);return{c(){t=b("div"),n&&n.c(),r=L(),e&&e.c(),p(t,"class","table-header svelte-4zgzc5")},m(a,o){w(a,t,o),n&&n.m(t,null),v(t,r),e&&e.m(t,null)},p(a,o){a[4]?n?n.p(a,o):(n=K(a),n.c(),n.m(t,r)):n&&(n.d(1),n=null),a[3]?e?e.p(a,o):(e=Q(a),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},d(a){a&&z(t),n&&n.d(),e&&e.d()}}}function K(l){let t;function r(a,o){return a[6]?ve:ke}let n=r(l),e=n(l);return{c(){e.c(),t=D()},m(a,o){e.m(a,o),w(a,t,o)},p(a,o){n===(n=r(a))&&e?e.p(a,o):(e.d(1),e=n(a),e&&(e.c(),e.m(t.parentNode,t)))},d(a){a&&z(t),e.d(a)}}}function ve(l){let t,r=l[2].FINISH_ARRANGING+"",n,e,a;return{c(){t=b("button"),n=j(r),p(t,"type","button"),p(t,"class","table-button settings-button svelte-4zgzc5")},m(o,s){w(o,t,s),v(t,n),e||(a=E(t,"click",l[13]),e=!0)},p(o,s){s[0]&4&&r!==(r=o[2].FINISH_ARRANGING+"")&&_(n,r)},d(o){o&&z(t),e=!1,a()}}}function ke(l){let t,r=l[2].ARRANGE_COLUMNS+"",n,e,a;return{c(){t=b("button"),n=j(r),p(t,"type","button"),p(t,"class","table-button settings-button svelte-4zgzc5")},m(o,s){w(o,t,s),v(t,n),e||(a=E(t,"click",l[12]),e=!0)},p(o,s){s[0]&4&&r!==(r=o[2].ARRANGE_COLUMNS+"")&&_(n,r)},d(o){o&&z(t),e=!1,a()}}}function Q(l){let t,r,n=l[2].EXPORT+"",e,a,o;return{c(){t=j(`\xA0
        `),r=b("button"),e=j(n),p(r,"type","button"),p(r,"class","table-button settings-button svelte-4zgzc5"),I(r,"loading",l[5])},m(s,i){w(s,t,i),w(s,r,i),v(r,e),a||(o=E(r,"click",l[11]),a=!0)},p(s,i){i[0]&4&&n!==(n=s[2].EXPORT+"")&&_(e,n),i[0]&32&&I(r,"loading",s[5])},d(s){s&&(z(t),z(r)),a=!1,o()}}}function V(l){let t,r=O(l[7]),n=[];for(let e=0;e<r.length;e+=1)n[e]=Y(q(l,r,e));return{c(){t=b("tr");for(let e=0;e<n.length;e+=1)n[e].c()},m(e,a){w(e,t,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,null)},p(e,a){if(a[0]&115330){r=O(e[7]);let o;for(o=0;o<r.length;o+=1){const s=q(e,r,o);n[o]?n[o].p(s,a):(n[o]=Y(s),n[o].c(),n[o].m(t,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(e){e&&z(t),M(n,e)}}}function W(l){let t,r=l[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){t=b("span"),n=j(r)},m(e,a){w(e,t,a),v(t,n)},p(e,a){a[0]&2&&r!==(r=e[1].direction==="asc"?"\u2191":"\u2193")&&_(n,r)},d(e){e&&z(t)}}}function Y(l){var t;let r,n,e=l[28].label+"",a,o,s,i;function u(...y){return l[19](l[28],...y)}let d=((t=l[1])==null?void 0:t.key)===l[28].key&&W(l);function G(){return l[20](l[28])}return{c(){r=b("th"),n=b("span"),a=L(),d&&d.c(),o=L(),p(n,"draggable","true"),p(r,"data-index",l[27]),p(r,"class","svelte-4zgzc5"),I(r,"sortable",l[28].sortable)},m(y,N){w(y,r,N),v(r,n),n.innerHTML=e,v(r,a),d&&d.m(r,null),v(r,o),s||(i=[E(n,"dragstart",u),E(r,"click",G),E(r,"drop",l[16]),E(r,"dragover",l[15])],s=!0)},p(y,N){var T;l=y,N[0]&128&&e!==(e=l[28].label+"")&&(n.innerHTML=e),((T=l[1])==null?void 0:T.key)===l[28].key?d?d.p(l,N):(d=W(l),d.c(),d.m(r,o)):d&&(d.d(1),d=null),N[0]&128&&I(r,"sortable",l[28].sortable)},d(y){y&&z(r),d&&d.d(),s=!1,we(i)}}}function Z(l){let t,r=O(l[0]),n=[];for(let e=0;e<r.length;e+=1)n[e]=te(B(l,r,e));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=D()},m(e,a){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,a);w(e,t,a)},p(e,a){if(a[0]&1409){r=O(e[0]);let o;for(o=0;o<r.length;o+=1){const s=B(e,r,o);n[o]?n[o].p(s,a):(n[o]=te(s),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(e){e&&z(t),M(n,e)}}}function ye(l){return{c:A,m:A,p:A,d:A}}function $e(l){let t,r=l[31]+"";return{c(){t=b("span"),p(t,"class","cell svelte-4zgzc5")},m(n,e){w(n,t,e),t.innerHTML=r},p(n,e){e[0]&129&&r!==(r=n[31]+"")&&(t.innerHTML=r)},d(n){n&&z(t)}}}function Ae(l){return{c:A,m:A,p:A,d:A}}function ee(l){let t,r,n,e,a={ctx:l,current:null,token:null,hasCatch:!1,pending:Ae,then:$e,catch:ye,value:31};F(r=l[8](l[28],l[25],l[27]),a);function o(...s){return l[21](l[25],l[27],l[28],...s)}return{c(){t=b("td"),a.block.c(),p(t,"class","svelte-4zgzc5")},m(s,i){w(s,t,i),a.block.m(t,a.anchor=null),a.mount=()=>t,a.anchor=null,n||(e=E(t,"click",o),n=!0)},p(s,i){l=s,a.ctx=l,i[0]&129&&r!==(r=l[8](l[28],l[25],l[27]))&&F(r,a)||ze(a,l,i)},d(s){s&&z(t),a.block.d(),a.token=null,a=null,n=!1,e()}}}function te(l){let t,r,n=O(l[7]),e=[];for(let a=0;a<n.length;a+=1)e[a]=ee(X(l,n,a));return{c(){t=b("tr");for(let a=0;a<e.length;a+=1)e[a].c();r=L()},m(a,o){w(a,t,o);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null);v(t,r)},p(a,o){if(o[0]&1409){n=O(a[7]);let s;for(s=0;s<n.length;s+=1){const i=X(a,n,s);e[s]?e[s].p(i,o):(e[s]=ee(i),e[s].c(),e[s].m(t,r))}for(;s<e.length;s+=1)e[s].d(1);e.length=n.length}},d(a){a&&z(t),M(e,a)}}}function Ee(l){let t,r,n,e,a,o=(l[4]||l[3])&&J(l),s=l[7]&&V(l),i=l[0]&&Z(l);return{c(){t=b("div"),o&&o.c(),r=L(),n=b("div"),e=b("table"),s&&s.c(),a=L(),i&&i.c(),p(e,"class","svelte-4zgzc5"),p(n,"class","table-container svelte-4zgzc5"),p(t,"class","table-card svelte-4zgzc5")},m(u,d){w(u,t,d),o&&o.m(t,null),v(t,r),v(t,n),v(n,e),s&&s.m(e,null),v(e,a),i&&i.m(e,null)},p(u,d){u[4]||u[3]?o?o.p(u,d):(o=J(u),o.c(),o.m(t,r)):o&&(o.d(1),o=null),u[7]?s?s.p(u,d):(s=V(u),s.c(),s.m(e,a)):s&&(s.d(1),s=null),u[0]?i?i.p(u,d):(i=Z(u),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:A,o:A,d(u){u&&z(t),o&&o.d(),s&&s.d(),i&&i.d()}}}function Ne(l,t,r){let{wording:n={EXPORT:"Export",ARRANGE_COLUMNS:"Arrange columns",FINISH_ARRANGING:"Finish Arranging"}}=t,{headers:e=[]}=t,{rows:a=[]}=t,{sort:o}=t,{service:s}=t,i=!1,{showExport:u=!0}=t,d=[],{showArrangingColumns:G=!0}=t,y=!1;const N=be();async function T(c,f,x){const{key:g,fallback:h,pipes:k}=c;let m;try{m=H(f,g)}catch{return h||""}if(!k)return m;for(const $ of k)m=await $(m,f,x);return m}function S(c){const{sortable:f,sortMethod:x}=c;if(!f)return;const g=o?.key===c.key&&o.direction==="asc"?"desc":"asc";if(x){r(0,a=[...a.sort((h,k)=>x(g,h,k))]);return}r(0,a=[...a.sort((h,k)=>{let m,$;try{m=H(h,c.key)}catch{return g==="asc"?1:-1}try{$=H(k,c.key)}catch{return g==="asc"?-1:1}if(m===$)return 0;switch(typeof m){case"number":return g==="asc"?m-$:$-m;case"string":return g==="asc"?m.localeCompare($):$.localeCompare(m);default:return 0}})]),r(1,o={key:c.key,direction:g})}function P(c,f,x,g){N("rowClick",{row:c,index:f,header:x,originalEvent:g})}async function re(){r(5,i=!0);const c=await s.export(),f=await Promise.all(c.map(async(h,k)=>(await Promise.all(C.map(m=>T(m,h,k)))).map(m=>`"${m||""}"`).join(","))),x=new Blob([[C.map(h=>h.label).map(h=>`"${h}"`).join(","),...f].join(`
`)],{type:"text/csv"}),g=document.createElement("a");g.href=URL.createObjectURL(x),g.download="export.csv",g.click(),r(5,i=!1)}let C=[];function oe(){r(6,y=!0),d=C.map(c=>c.key)}function ae(){r(6,y=!1)}function U(c,f){c.dataTransfer.setData("text/plain",f.key)}function le(c){c.preventDefault()}function se(c){var f;c.preventDefault();const x=c.dataTransfer.getData("text/plain"),g=d.indexOf(x),h=(f=c.target)==null?void 0:f.dataset.index;g!==-1&&h&&(d.splice(g,1),d.splice(Number(h),0,x),r(7,C=e.filter(k=>!k.disabled).sort((k,m)=>{const $=d.indexOf(k.key),ue=d.indexOf(m.key);return $-ue})))}const ce=(c,f)=>U(f,c),ie=c=>S(c),de=(c,f,x,g)=>P(c,f,x,g);return l.$$set=c=>{"wording"in c&&r(2,n=c.wording),"headers"in c&&r(17,e=c.headers),"rows"in c&&r(0,a=c.rows),"sort"in c&&r(1,o=c.sort),"service"in c&&r(18,s=c.service),"showExport"in c&&r(3,u=c.showExport),"showArrangingColumns"in c&&r(4,G=c.showArrangingColumns)},l.$$.update=()=>{l.$$.dirty[0]&131072&&r(7,C=e.filter(c=>!c.disabled))},[a,o,n,u,G,i,y,C,T,S,P,re,oe,ae,U,le,se,e,s,ce,ie,de]}class ne extends me{constructor(t){super(),fe(this,t,Ne,Ee,pe,{wording:2,headers:17,rows:0,sort:1,service:18,showExport:3,showArrangingColumns:4},xe,[-1,-1])}get wording(){return this.$$.ctx[2]}set wording(t){this.$$set({wording:t}),R()}get headers(){return this.$$.ctx[17]}set headers(t){this.$$set({headers:t}),R()}get rows(){return this.$$.ctx[0]}set rows(t){this.$$set({rows:t}),R()}get sort(){return this.$$.ctx[1]}set sort(t){this.$$set({sort:t}),R()}get service(){return this.$$.ctx[18]}set service(t){this.$$set({service:t}),R()}get showExport(){return this.$$.ctx[3]}set showExport(t){this.$$set({showExport:t}),R()}get showArrangingColumns(){return this.$$.ctx[4]}set showArrangingColumns(t){this.$$set({showArrangingColumns:t}),R()}}try{customElements.define("jp-table",ge(ne,{wording:{},headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"}},[],[],!1));}catch{};export{ne as default};
