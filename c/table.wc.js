import{c as he,S as fe,i as ge,o as N,s as me,a as ve,e as m,l as F,d as f,f as v,p as k,w as E,k as y,x as ye,y as P,z as T,A as j,m as z,B as I,C as O,D as M,r as we,E as U,F as ke}from"./svelte.js";import"./index.js";import{get as H}from"./json-pointer.js";function xe(o){ve(o,"svelte-1vd8bni",".jp-table-card.svelte-1vd8bni{background-color:var(--background-primary);border-radius:0.25rem;box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.jp-table-container.svelte-1vd8bni{overflow-x:auto;width:100%}.jp-table-table.svelte-1vd8bni{width:100%}.jp-table-header-content.svelte-1vd8bni,.jp-table-cell-content.svelte-1vd8bni{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}.jp-table-header.svelte-1vd8bni{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.jp-table-header-content.svelte-1vd8bni{opacity:0.75}.jp-table-cell.svelte-1vd8bni{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.jp-table-button.svelte-1vd8bni{display:flex;justify-content:center;align-items:center;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.jp-table-settings-button.svelte-1vd8bni{background-color:var(--background-secondary);color:var(--text-on-secondary)}.jp-table-sticky-first.svelte-1vd8bni{position:sticky;left:0;opacity:1;background-color:var(--background-primary);z-index:1}.jp-table-sticky-first.svelte-1vd8bni:after{content:'';position:absolute;top:0;right:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}.jp-table-sticky-last.svelte-1vd8bni{position:sticky;right:0;opacity:1;background-color:var(--background-primary);z-index:1}.jp-table-sticky-last.svelte-1vd8bni:before{content:'';position:absolute;top:0;left:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}")}function X(o,e,r){const n=o.slice();return n[27]=e[r],n[29]=r,n}function q(o,e,r){const n=o.slice();return n[30]=e[r],n[29]=r,n}function J(o,e,r){const n=o.slice();return n[30]=e[r],n[29]=r,n}function K(o){let e,r,n=o[4]&&Q(o),t=o[3]&&V(o);return{c(){e=m("div"),n&&n.c(),r=F(),t&&t.c(),f(e,"class","jp-table-header svelte-1vd8bni")},m(i,s){v(i,e,s),n&&n.m(e,null),k(e,r),t&&t.m(e,null)},p(i,s){i[4]?n?n.p(i,s):(n=Q(i),n.c(),n.m(e,r)):n&&(n.d(1),n=null),i[3]?t?t.p(i,s):(t=V(i),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(i){i&&y(e),n&&n.d(),t&&t.d()}}}function Q(o){let e;function r(i,s){return i[8]?je:$e}let n=r(o),t=n(o);return{c(){t.c(),e=P()},m(i,s){t.m(i,s),v(i,e,s)},p(i,s){n===(n=r(i))&&t?t.p(i,s):(t.d(1),t=n(i),t&&(t.c(),t.m(e.parentNode,e)))},d(i){i&&y(e),t.d(i)}}}function je(o){let e,r=o[2].FINISH_ARRANGING+"",n,t,i;return{c(){e=m("button"),n=T(r),f(e,"type","button"),f(e,"class","jp-table-button jp-table-settings-button svelte-1vd8bni")},m(s,l){v(s,e,l),k(e,n),t||(i=z(e,"click",o[15]),t=!0)},p(s,l){l[0]&4&&r!==(r=s[2].FINISH_ARRANGING+"")&&I(n,r)},d(s){s&&y(e),t=!1,i()}}}function $e(o){let e,r=o[2].ARRANGE_COLUMNS+"",n,t,i;return{c(){e=m("button"),n=T(r),f(e,"type","button"),f(e,"class","jp-table-button jp-table-settings-button svelte-1vd8bni")},m(s,l){v(s,e,l),k(e,n),t||(i=z(e,"click",o[14]),t=!0)},p(s,l){l[0]&4&&r!==(r=s[2].ARRANGE_COLUMNS+"")&&I(n,r)},d(s){s&&y(e),t=!1,i()}}}function V(o){let e,r,n=o[2].EXPORT+"",t,i,s;return{c(){e=T(`\xA0
        `),r=m("button"),t=T(n),f(r,"type","button"),f(r,"class","jp-table-button jp-table-settings-button svelte-1vd8bni"),j(r,"loading",o[7])},m(l,c){v(l,e,c),v(l,r,c),k(r,t),i||(s=z(r,"click",o[13]),i=!0)},p(l,c){c[0]&4&&n!==(n=l[2].EXPORT+"")&&I(t,n),c[0]&128&&j(r,"loading",l[7])},d(l){l&&(y(e),y(r)),i=!1,s()}}}function W(o){let e,r=O(o[9]),n=[];for(let t=0;t<r.length;t+=1)n[t]=Z(J(o,r,t));return{c(){e=m("tr");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,i){v(t,e,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(t,i){if(i[0]&461410){r=O(t[9]);let s;for(s=0;s<r.length;s+=1){const l=J(t,r,s);n[s]?n[s].p(l,i):(n[s]=Z(l),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(t){t&&y(e),M(n,t)}}}function Y(o){let e,r=o[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=m("span"),n=T(r)},m(t,i){v(t,e,i),k(e,n)},p(t,i){i[0]&2&&r!==(r=t[1].direction==="asc"?"\u2191":"\u2193")&&I(n,r)},d(t){t&&y(e)}}}function Z(o){var e;let r,n,t=o[30].label+"",i,s,l,c;function d(...$){return o[21](o[30],...$)}let u=((e=o[1])==null?void 0:e.key)===o[30].key&&Y(o);function G(){return o[22](o[30])}return{c(){r=m("th"),n=m("span"),i=F(),u&&u.c(),s=F(),f(n,"draggable","true"),f(r,"class","jp-table-header-content svelte-1vd8bni"),f(r,"data-index",o[29]),j(r,"jp-table-sortable",o[30].sortable),j(r,"jp-table-sticky-first",o[29]===0&&o[5]),j(r,"jp-table-sticky-last",o[29]===o[9].length-1&&o[6])},m($,C){v($,r,C),k(r,n),n.innerHTML=t,k(r,i),u&&u.m(r,null),k(r,s),l||(c=[z(n,"dragstart",d),z(r,"click",G),z(r,"drop",o[18]),z(r,"dragover",o[17])],l=!0)},p($,C){var L;o=$,C[0]&512&&t!==(t=o[30].label+"")&&(n.innerHTML=t),((L=o[1])==null?void 0:L.key)===o[30].key?u?u.p(o,C):(u=Y(o),u.c(),u.m(r,s)):u&&(u.d(1),u=null),C[0]&512&&j(r,"jp-table-sortable",o[30].sortable),C[0]&32&&j(r,"jp-table-sticky-first",o[29]===0&&o[5]),C[0]&576&&j(r,"jp-table-sticky-last",o[29]===o[9].length-1&&o[6])},d($){$&&y(r),u&&u.d(),l=!1,we(c)}}}function ee(o){let e,r=O(o[0]),n=[];for(let t=0;t<r.length;t+=1)n[t]=ne(X(o,r,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=P()},m(t,i){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,i);v(t,e,i)},p(t,i){if(i[0]&5729){r=O(t[0]);let s;for(s=0;s<r.length;s+=1){const l=X(t,r,s);n[s]?n[s].p(l,i):(n[s]=ne(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(t){t&&y(e),M(n,t)}}}function Ce(o){return{c:E,m:E,p:E,d:E}}function Ae(o){let e,r=o[32]+"";return{c(){e=m("span"),f(e,"class","jp-table-cell svelte-1vd8bni")},m(n,t){v(n,e,t),e.innerHTML=r},p(n,t){t[0]&513&&r!==(r=n[32]+"")&&(e.innerHTML=r)},d(n){n&&y(e)}}}function Ee(o){return{c:E,m:E,p:E,d:E}}function te(o){let e,r,n,t,i={ctx:o,current:null,token:null,hasCatch:!1,pending:Ee,then:Ae,catch:Ce,value:32};U(r=o[10](o[30],o[27],o[29]),i);function s(...l){return o[23](o[27],o[29],o[30],...l)}return{c(){e=m("td"),i.block.c(),f(e,"class","jp-table-cell-content svelte-1vd8bni"),j(e,"jp-table-sticky-first",o[29]===0&&o[5]),j(e,"jp-table-sticky-last",o[29]===o[9].length-1&&o[6])},m(l,c){v(l,e,c),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,n||(t=z(e,"click",s),n=!0)},p(l,c){o=l,i.ctx=o,c[0]&513&&r!==(r=o[10](o[30],o[27],o[29]))&&U(r,i)||ke(i,o,c),c[0]&32&&j(e,"jp-table-sticky-first",o[29]===0&&o[5]),c[0]&576&&j(e,"jp-table-sticky-last",o[29]===o[9].length-1&&o[6])},d(l){l&&y(e),i.block.d(),i.token=null,i=null,n=!1,t()}}}function ne(o){let e,r,n=O(o[9]),t=[];for(let i=0;i<n.length;i+=1)t[i]=te(q(o,n,i));return{c(){e=m("tr");for(let i=0;i<t.length;i+=1)t[i].c();r=F()},m(i,s){v(i,e,s);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null);k(e,r)},p(i,s){if(s[0]&5729){n=O(i[9]);let l;for(l=0;l<n.length;l+=1){const c=q(i,n,l);t[l]?t[l].p(c,s):(t[l]=te(c),t[l].c(),t[l].m(e,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},d(i){i&&y(e),M(t,i)}}}function Ne(o){let e,r,n,t,i,s=(o[4]||o[3])&&K(o),l=o[9]&&W(o),c=o[0]&&ee(o);return{c(){e=m("div"),s&&s.c(),r=F(),n=m("div"),t=m("table"),l&&l.c(),i=F(),c&&c.c(),f(t,"class","jp-table-table svelte-1vd8bni"),f(n,"class","jp-table-container svelte-1vd8bni"),f(e,"class","jp-table-card svelte-1vd8bni")},m(d,u){v(d,e,u),s&&s.m(e,null),k(e,r),k(e,n),k(n,t),l&&l.m(t,null),k(t,i),c&&c.m(t,null)},p(d,u){d[4]||d[3]?s?s.p(d,u):(s=K(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[9]?l?l.p(d,u):(l=W(d),l.c(),l.m(t,i)):l&&(l.d(1),l=null),d[0]?c?c.p(d,u):(c=ee(d),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:E,o:E,d(d){d&&y(e),s&&s.d(),l&&l.d(),c&&c.d()}}}function ze(o,e,r){let{wording:n={EXPORT:"Export",ARRANGE_COLUMNS:"Arrange columns",FINISH_ARRANGING:"Finish Arranging"}}=e,{headers:t=[]}=e,{rows:i=[]}=e,{sort:s}=e,{service:l}=e,c=!1,{showExport:d=!0}=e,u=[],{showArrangingColumns:G=!0}=e,{freezeFirstColumn:$=!1}=e,{freezeLastColumn:C=!1}=e,L=!1;const oe=ye();async function S(a,h,w){const{key:p,fallback:g,pipes:x}=a;let b;try{b=H(h,p)}catch{return g||""}if(!x)return b;for(const A of x)b=await A(b,h,w);return b}function _(a){const{sortable:h,sortMethod:w}=a;if(!h)return;const p=s?.key===a.key&&s.direction==="asc"?"desc":"asc";if(w){r(0,i=[...i.sort((g,x)=>w(p,g,x))]);return}r(0,i=[...i.sort((g,x)=>{let b,A;try{b=H(g,a.key)}catch{return p==="asc"?1:-1}try{A=H(x,a.key)}catch{return p==="asc"?-1:1}if(b===A)return 0;switch(typeof b){case"number":return p==="asc"?b-A:A-b;case"string":return p==="asc"?b.localeCompare(A):A.localeCompare(b);default:return 0}})]),r(1,s={key:a.key,direction:p})}function B(a,h,w,p){oe("rowClick",{row:a,index:h,header:w,originalEvent:p})}async function se(){if(r(7,c=!0),l.export===void 0)return;const a=await l.export(),h=await Promise.all(a.map(async(g,x)=>(await Promise.all(R.map(b=>S(b,g,x)))).map(b=>`"${b||""}"`).join(","))),w=new Blob([[R.map(g=>g.label).map(g=>`"${g}"`).join(","),...h].join(`
`)],{type:"text/csv"}),p=document.createElement("a");p.href=URL.createObjectURL(w),p.download="export.csv",p.click(),r(7,c=!1)}let R=[];function ie(){r(8,L=!0),u=R.map(a=>a.key)}function le(){r(8,L=!1)}function D(a,h){a.dataTransfer!==null&&a.dataTransfer.setData("text/plain",h.key)}function ae(a){a.preventDefault()}function ce(a){var h;if(a.preventDefault(),a.dataTransfer===null)return;const w=a.dataTransfer.getData("text/plain"),p=u.indexOf(w),g=(h=a.target)==null?void 0:h.dataset.index;p!==-1&&g&&(u.splice(p,1),u.splice(Number(g),0,w),r(9,R=t.filter(x=>!x.disabled).sort((x,b)=>{const A=u.indexOf(x.key),be=u.indexOf(b.key);return A-be})))}const ue=(a,h)=>D(h,a),de=a=>_(a),pe=(a,h,w,p)=>B(a,h,w,p);return o.$$set=a=>{"wording"in a&&r(2,n=a.wording),"headers"in a&&r(19,t=a.headers),"rows"in a&&r(0,i=a.rows),"sort"in a&&r(1,s=a.sort),"service"in a&&r(20,l=a.service),"showExport"in a&&r(3,d=a.showExport),"showArrangingColumns"in a&&r(4,G=a.showArrangingColumns),"freezeFirstColumn"in a&&r(5,$=a.freezeFirstColumn),"freezeLastColumn"in a&&r(6,C=a.freezeLastColumn)},o.$$.update=()=>{o.$$.dirty[0]&524288&&r(9,R=t.filter(a=>!a.disabled))},[i,s,n,d,G,$,C,c,L,R,S,_,B,se,ie,le,D,ae,ce,t,l,ue,de,pe]}class re extends fe{constructor(e){super(),ge(this,e,ze,Ne,me,{wording:2,headers:19,rows:0,sort:1,service:20,showExport:3,showArrangingColumns:4,freezeFirstColumn:5,freezeLastColumn:6},xe,[-1,-1])}get wording(){return this.$$.ctx[2]}set wording(e){this.$$set({wording:e}),N()}get headers(){return this.$$.ctx[19]}set headers(e){this.$$set({headers:e}),N()}get rows(){return this.$$.ctx[0]}set rows(e){this.$$set({rows:e}),N()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),N()}get service(){return this.$$.ctx[20]}set service(e){this.$$set({service:e}),N()}get showExport(){return this.$$.ctx[3]}set showExport(e){this.$$set({showExport:e}),N()}get showArrangingColumns(){return this.$$.ctx[4]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),N()}get freezeFirstColumn(){return this.$$.ctx[5]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),N()}get freezeLastColumn(){return this.$$.ctx[6]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),N()}}try{customElements.define("jp-table",he(re,{wording:{},headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"}},[],[],!1));}catch{};export{re as default};
//# sourceMappingURL=table.wc.js.map
