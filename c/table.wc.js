import{c as pe,S as ge,i as fe,f as N,s as be,a as ke,e as b,b as G,g,h as k,j as y,J as L,o as w,D as we,H as P,F as O,t as $,l as R,G as T,B as I,C as _,r as xe,K as U,L as ye}from"./svelte.js";import"./index.js";import{get as H}from"./json-pointer.js";function ve(s){ke(s,"svelte-14ha2ra",".table-card.svelte-14ha2ra{background-color:var(--background-primary);-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;-webkit-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);-moz-box-shadow:0 3px 12px rgba(0, 0, 0, 0.16);box-shadow:0 3px 12px rgba(0, 0, 0, 0.16)}.table-container.svelte-14ha2ra{overflow-x:auto;width:100%}table.svelte-14ha2ra{width:100%}th.svelte-14ha2ra,td.svelte-14ha2ra{text-align:left;white-space:nowrap;font-size:0.75rem;font-weight:normal;padding:0.5rem;border-bottom:1px solid rgba(0, 0, 0, 0.16)}th.svelte-14ha2ra{opacity:0.75}.cell.svelte-14ha2ra{display:block;max-width:64ch;overflow:hidden;text-overflow:ellipsis}.table-header.svelte-14ha2ra{padding:1rem;min-height:68px;display:flex;justify-content:flex-end}.table-button.svelte-14ha2ra{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:0.25rem;-moz-border-radius:0.25rem;border-radius:0.25rem;min-width:4rem;height:2.25rem;padding:0 1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.settings-button.svelte-14ha2ra{background-color:var(--background-secondary);color:var(--text-on-secondary)}.sticky-first.svelte-14ha2ra{position:sticky;left:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-first.svelte-14ha2ra:after{content:'';position:absolute;top:0;right:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}.sticky-last.svelte-14ha2ra{position:sticky;right:0;opacity:1;background-color:var(--background-primary);z-index:1}.sticky-last.svelte-14ha2ra:before{content:'';position:absolute;top:0;left:0;bottom:0;width:0.5px;height:100%;background-color:rgba(0, 0, 0, 0.16)}")}function X(s,e,r){const n=s.slice();return n[27]=e[r],n[29]=r,n}function J(s,e,r){const n=s.slice();return n[30]=e[r],n[29]=r,n}function K(s,e,r){const n=s.slice();return n[30]=e[r],n[29]=r,n}function q(s){let e,r,n=s[4]&&Q(s),t=s[3]&&V(s);return{c(){e=b("div"),n&&n.c(),r=G(),t&&t.c(),g(e,"class","table-header svelte-14ha2ra")},m(a,o){k(a,e,o),n&&n.m(e,null),y(e,r),t&&t.m(e,null)},p(a,o){a[4]?n?n.p(a,o):(n=Q(a),n.c(),n.m(e,r)):n&&(n.d(1),n=null),a[3]?t?t.p(a,o):(t=V(a),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(a){a&&w(e),n&&n.d(),t&&t.d()}}}function Q(s){let e;function r(a,o){return a[8]?$e:Ce}let n=r(s),t=n(s);return{c(){t.c(),e=P()},m(a,o){t.m(a,o),k(a,e,o)},p(a,o){n===(n=r(a))&&t?t.p(a,o):(t.d(1),t=n(a),t&&(t.c(),t.m(e.parentNode,e)))},d(a){a&&w(e),t.d(a)}}}function $e(s){let e,r=s[2].FINISH_ARRANGING+"",n,t,a;return{c(){e=b("button"),n=O(r),g(e,"type","button"),g(e,"class","table-button settings-button svelte-14ha2ra")},m(o,i){k(o,e,i),y(e,n),t||(a=R(e,"click",s[15]),t=!0)},p(o,i){i[0]&4&&r!==(r=o[2].FINISH_ARRANGING+"")&&T(n,r)},d(o){o&&w(e),t=!1,a()}}}function Ce(s){let e,r=s[2].ARRANGE_COLUMNS+"",n,t,a;return{c(){e=b("button"),n=O(r),g(e,"type","button"),g(e,"class","table-button settings-button svelte-14ha2ra")},m(o,i){k(o,e,i),y(e,n),t||(a=R(e,"click",s[14]),t=!0)},p(o,i){i[0]&4&&r!==(r=o[2].ARRANGE_COLUMNS+"")&&T(n,r)},d(o){o&&w(e),t=!1,a()}}}function V(s){let e,r,n=s[2].EXPORT+"",t,a,o;return{c(){e=O(`\xA0
        `),r=b("button"),t=O(n),g(r,"type","button"),g(r,"class","table-button settings-button svelte-14ha2ra"),$(r,"loading",s[7])},m(i,l){k(i,e,l),k(i,r,l),y(r,t),a||(o=R(r,"click",s[13]),a=!0)},p(i,l){l[0]&4&&n!==(n=i[2].EXPORT+"")&&T(t,n),l[0]&128&&$(r,"loading",i[7])},d(i){i&&(w(e),w(r)),a=!1,o()}}}function W(s){let e,r=I(s[9]),n=[];for(let t=0;t<r.length;t+=1)n[t]=Z(K(s,r,t));return{c(){e=b("tr");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,a){k(t,e,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(t,a){if(a[0]&461410){r=I(t[9]);let o;for(o=0;o<r.length;o+=1){const i=K(t,r,o);n[o]?n[o].p(i,a):(n[o]=Z(i),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&w(e),_(n,t)}}}function Y(s){let e,r=s[1].direction==="asc"?"\u2191":"\u2193",n;return{c(){e=b("span"),n=O(r)},m(t,a){k(t,e,a),y(e,n)},p(t,a){a[0]&2&&r!==(r=t[1].direction==="asc"?"\u2191":"\u2193")&&T(n,r)},d(t){t&&w(e)}}}function Z(s){var e;let r,n,t=s[30].label+"",a,o,i,l;function d(...C){return s[21](s[30],...C)}let u=((e=s[1])==null?void 0:e.key)===s[30].key&&Y(s);function j(){return s[22](s[30])}return{c(){r=b("th"),n=b("span"),a=G(),u&&u.c(),o=G(),g(n,"draggable","true"),g(r,"data-index",s[29]),g(r,"class","svelte-14ha2ra"),$(r,"sortable",s[30].sortable),$(r,"sticky-first",s[29]===0&&s[5]),$(r,"sticky-last",s[29]===s[9].length-1&&s[6])},m(C,z){k(C,r,z),y(r,n),n.innerHTML=t,y(r,a),u&&u.m(r,null),y(r,o),i||(l=[R(n,"dragstart",d),R(r,"click",j),R(r,"drop",s[18]),R(r,"dragover",s[17])],i=!0)},p(C,z){var E;s=C,z[0]&512&&t!==(t=s[30].label+"")&&(n.innerHTML=t),((E=s[1])==null?void 0:E.key)===s[30].key?u?u.p(s,z):(u=Y(s),u.c(),u.m(r,o)):u&&(u.d(1),u=null),z[0]&512&&$(r,"sortable",s[30].sortable),z[0]&32&&$(r,"sticky-first",s[29]===0&&s[5]),z[0]&576&&$(r,"sticky-last",s[29]===s[9].length-1&&s[6])},d(C){C&&w(r),u&&u.d(),i=!1,xe(l)}}}function ee(s){let e,r=I(s[0]),n=[];for(let t=0;t<r.length;t+=1)n[t]=ne(X(s,r,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=P()},m(t,a){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,a);k(t,e,a)},p(t,a){if(a[0]&5729){r=I(t[0]);let o;for(o=0;o<r.length;o+=1){const i=X(t,r,o);n[o]?n[o].p(i,a):(n[o]=ne(i),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&w(e),_(n,t)}}}function ze(s){return{c:L,m:L,p:L,d:L}}function Ae(s){let e,r=s[32]+"";return{c(){e=b("span"),g(e,"class","cell svelte-14ha2ra")},m(n,t){k(n,e,t),e.innerHTML=r},p(n,t){t[0]&513&&r!==(r=n[32]+"")&&(e.innerHTML=r)},d(n){n&&w(e)}}}function Le(s){return{c:L,m:L,p:L,d:L}}function te(s){let e,r,n,t,a={ctx:s,current:null,token:null,hasCatch:!1,pending:Le,then:Ae,catch:ze,value:32};U(r=s[10](s[30],s[27],s[29]),a);function o(...i){return s[23](s[27],s[29],s[30],...i)}return{c(){e=b("td"),a.block.c(),g(e,"class","svelte-14ha2ra"),$(e,"sticky-first",s[29]===0&&s[5]),$(e,"sticky-last",s[29]===s[9].length-1&&s[6])},m(i,l){k(i,e,l),a.block.m(e,a.anchor=null),a.mount=()=>e,a.anchor=null,n||(t=R(e,"click",o),n=!0)},p(i,l){s=i,a.ctx=s,l[0]&513&&r!==(r=s[10](s[30],s[27],s[29]))&&U(r,a)||ye(a,s,l),l[0]&32&&$(e,"sticky-first",s[29]===0&&s[5]),l[0]&576&&$(e,"sticky-last",s[29]===s[9].length-1&&s[6])},d(i){i&&w(e),a.block.d(),a.token=null,a=null,n=!1,t()}}}function ne(s){let e,r,n=I(s[9]),t=[];for(let a=0;a<n.length;a+=1)t[a]=te(J(s,n,a));return{c(){e=b("tr");for(let a=0;a<t.length;a+=1)t[a].c();r=G()},m(a,o){k(a,e,o);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null);y(e,r)},p(a,o){if(o[0]&5729){n=I(a[9]);let i;for(i=0;i<n.length;i+=1){const l=J(a,n,i);t[i]?t[i].p(l,o):(t[i]=te(l),t[i].c(),t[i].m(e,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=n.length}},d(a){a&&w(e),_(t,a)}}}function Ne(s){let e,r,n,t,a,o=(s[4]||s[3])&&q(s),i=s[9]&&W(s),l=s[0]&&ee(s);return{c(){e=b("div"),o&&o.c(),r=G(),n=b("div"),t=b("table"),i&&i.c(),a=G(),l&&l.c(),g(t,"class","svelte-14ha2ra"),g(n,"class","table-container svelte-14ha2ra"),g(e,"class","table-card svelte-14ha2ra")},m(d,u){k(d,e,u),o&&o.m(e,null),y(e,r),y(e,n),y(n,t),i&&i.m(t,null),y(t,a),l&&l.m(t,null)},p(d,u){d[4]||d[3]?o?o.p(d,u):(o=q(d),o.c(),o.m(e,r)):o&&(o.d(1),o=null),d[9]?i?i.p(d,u):(i=W(d),i.c(),i.m(t,a)):i&&(i.d(1),i=null),d[0]?l?l.p(d,u):(l=ee(d),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:L,o:L,d(d){d&&w(e),o&&o.d(),i&&i.d(),l&&l.d()}}}function Re(s,e,r){let{wording:n={EXPORT:"Export",ARRANGE_COLUMNS:"Arrange columns",FINISH_ARRANGING:"Finish Arranging"}}=e,{headers:t=[]}=e,{rows:a=[]}=e,{sort:o}=e,{service:i}=e,l=!1,{showExport:d=!0}=e,u=[],{showArrangingColumns:j=!0}=e,{freezeFirstColumn:C=!1}=e,{freezeLastColumn:z=!1}=e,E=!1;const se=we();async function M(c,p,x){const{key:h,fallback:f,pipes:v}=c;let m;try{m=H(p,h)}catch{return f||""}if(!v)return m;for(const A of v)m=await A(m,p,x);return m}function S(c){const{sortable:p,sortMethod:x}=c;if(!p)return;const h=o?.key===c.key&&o.direction==="asc"?"desc":"asc";if(x){r(0,a=[...a.sort((f,v)=>x(h,f,v))]);return}r(0,a=[...a.sort((f,v)=>{let m,A;try{m=H(f,c.key)}catch{return h==="asc"?1:-1}try{A=H(v,c.key)}catch{return h==="asc"?-1:1}if(m===A)return 0;switch(typeof m){case"number":return h==="asc"?m-A:A-m;case"string":return h==="asc"?m.localeCompare(A):A.localeCompare(m);default:return 0}})]),r(1,o={key:c.key,direction:h})}function B(c,p,x,h){se("rowClick",{row:c,index:p,header:x,originalEvent:h})}async function oe(){r(7,l=!0);const c=await i.export(),p=await Promise.all(c.map(async(f,v)=>(await Promise.all(F.map(m=>M(m,f,v)))).map(m=>`"${m||""}"`).join(","))),x=new Blob([[F.map(f=>f.label).map(f=>`"${f}"`).join(","),...p].join(`
`)],{type:"text/csv"}),h=document.createElement("a");h.href=URL.createObjectURL(x),h.download="export.csv",h.click(),r(7,l=!1)}let F=[];function ae(){r(8,E=!0),u=F.map(c=>c.key)}function ie(){r(8,E=!1)}function D(c,p){c.dataTransfer.setData("text/plain",p.key)}function ce(c){c.preventDefault()}function le(c){var p;c.preventDefault();const x=c.dataTransfer.getData("text/plain"),h=u.indexOf(x),f=(p=c.target)==null?void 0:p.dataset.index;h!==-1&&f&&(u.splice(h,1),u.splice(Number(f),0,x),r(9,F=t.filter(v=>!v.disabled).sort((v,m)=>{const A=u.indexOf(v.key),me=u.indexOf(m.key);return A-me})))}const ue=(c,p)=>D(p,c),de=c=>S(c),he=(c,p,x,h)=>B(c,p,x,h);return s.$$set=c=>{"wording"in c&&r(2,n=c.wording),"headers"in c&&r(19,t=c.headers),"rows"in c&&r(0,a=c.rows),"sort"in c&&r(1,o=c.sort),"service"in c&&r(20,i=c.service),"showExport"in c&&r(3,d=c.showExport),"showArrangingColumns"in c&&r(4,j=c.showArrangingColumns),"freezeFirstColumn"in c&&r(5,C=c.freezeFirstColumn),"freezeLastColumn"in c&&r(6,z=c.freezeLastColumn)},s.$$.update=()=>{s.$$.dirty[0]&524288&&r(9,F=t.filter(c=>!c.disabled))},[a,o,n,d,j,C,z,l,E,F,M,S,B,oe,ae,ie,D,ce,le,t,i,ue,de,he]}class re extends ge{constructor(e){super(),fe(this,e,Re,Ne,be,{wording:2,headers:19,rows:0,sort:1,service:20,showExport:3,showArrangingColumns:4,freezeFirstColumn:5,freezeLastColumn:6},ve,[-1,-1])}get wording(){return this.$$.ctx[2]}set wording(e){this.$$set({wording:e}),N()}get headers(){return this.$$.ctx[19]}set headers(e){this.$$set({headers:e}),N()}get rows(){return this.$$.ctx[0]}set rows(e){this.$$set({rows:e}),N()}get sort(){return this.$$.ctx[1]}set sort(e){this.$$set({sort:e}),N()}get service(){return this.$$.ctx[20]}set service(e){this.$$set({service:e}),N()}get showExport(){return this.$$.ctx[3]}set showExport(e){this.$$set({showExport:e}),N()}get showArrangingColumns(){return this.$$.ctx[4]}set showArrangingColumns(e){this.$$set({showArrangingColumns:e}),N()}get freezeFirstColumn(){return this.$$.ctx[5]}set freezeFirstColumn(e){this.$$set({freezeFirstColumn:e}),N()}get freezeLastColumn(){return this.$$.ctx[6]}set freezeLastColumn(e){this.$$set({freezeLastColumn:e}),N()}}try{customElements.define("jp-table",pe(re,{wording:{},headers:{},rows:{},sort:{},service:{},showExport:{type:"Boolean"},showArrangingColumns:{type:"Boolean"},freezeFirstColumn:{type:"Boolean"},freezeLastColumn:{type:"Boolean"}},[],[],!1));}catch{};export{re as default};
//# sourceMappingURL=table.wc.js.map
