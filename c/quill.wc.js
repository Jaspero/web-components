var T=Object.defineProperty,z=(s,e,a)=>e in s?T(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,D=(s,e,a)=>(z(s,typeof e!="symbol"?e+"":e,a),a);import{c as N,S as O,i as Q,f as m,s as U,b as I,e as w,d as y,g,L as k,o as C,n as A,j as f,k as G,x as J,t as K,h as W,u as X,I as Y}from"./svelte.js";import"./index2.js";function V(s){let e,a;return{c(){e=w("span"),a=K(s[2])},m(r,n){g(r,e,n),W(e,a)},p(r,n){n&4&&X(a,r[2])},d(r){r&&f(e)}}}function Z(s){let e,a,r,n,d,b,i=s[2]&&V(s);return{c(){i&&i.c(),e=I(),a=w("div"),r=I(),n=w("textarea"),y(n,"id",s[0]),y(n,"name",s[1]),n.hidden=!0},m(l,c){i&&i.m(l,c),g(l,e,c),g(l,a,c),s[12](a),g(l,r,c),g(l,n,c),k(n,s[3]),d||(b=C(n,"input",s[13]),d=!0)},p(l,[c]){l[2]?i?i.p(l,c):(i=V(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c&1&&y(n,"id",l[0]),c&2&&y(n,"name",l[1]),c&8&&k(n,l[3])},i:A,o:A,d(l){l&&(f(e),f(a),f(r),f(n)),i&&i.d(l),s[12](null),d=!1,b()}}}function _(){return window.Quill}function B(s,e,a){let{attachedInternals:r}=e,{service:n}=e,{value:d=""}=e,{id:b=null}=e,{name:i=null}=e,{label:l=""}=e,{options:c={modules:{toolbar:[["bold","italic","underline"],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],["image"],[{align:[]}],["clean"]]},theme:"snow"}}=e,h,$;const S=()=>$,j=G();let x,o;async function q(t){await Promise.allSettled([...o.root.querySelectorAll("img")].map(async u=>{const v=await E(u.src),p=await n.uploadFile(v,t);u.src=p}))}const E=t=>fetch(t).then(u=>u.blob()),L=t=>new Promise((u,v)=>{const p=new FileReader;p.readAsDataURL(t),p.onload=()=>u(p.result),p.onerror=R=>v(R)});function P(){h=document.createElement("input"),h.setAttribute("type","file"),h.setAttribute("accept",n.acceptedFiles),h.setAttribute("style","visibility:hidden"),h.onchange=async()=>{const t=h.files[0],u=await L(t),v=o.getSelection();o.insertEmbed(v.index,"image",u)},h.click()}J(()=>{let t=_();a(11,o=new t(x,c)),n&&o.getModule("toolbar").addHandler("image",()=>{P()}),o.on("text-change",()=>{a(3,$=o.root.innerHTML)})});function H(t){Y[t?"unshift":"push"](()=>{x=t,a(4,x)})}function M(){$=this.value,a(3,$)}return s.$$set=t=>{"attachedInternals"in t&&a(5,r=t.attachedInternals),"service"in t&&a(6,n=t.service),"value"in t&&a(7,d=t.value),"id"in t&&a(0,b=t.id),"name"in t&&a(1,i=t.name),"label"in t&&a(2,l=t.label),"options"in t&&a(8,c=t.options)},s.$$.update=()=>{s.$$.dirty&40&&(r.checkValidity(),r.setFormValue($),j("value",{internalValue:$})),s.$$.dirty&2176&&o&&o.setText(d)},[b,i,l,$,x,r,n,d,c,S,q,o,H,M]}class F extends O{constructor(e){super(),Q(this,e,B,Z,U,{attachedInternals:5,service:6,value:7,id:0,name:1,label:2,options:8,getValue:9,save:10})}get attachedInternals(){return this.$$.ctx[5]}set attachedInternals(e){this.$$set({attachedInternals:e}),m()}get service(){return this.$$.ctx[6]}set service(e){this.$$set({service:e}),m()}get value(){return this.$$.ctx[7]}set value(e){this.$$set({value:e}),m()}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),m()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),m()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),m()}get options(){return this.$$.ctx[8]}set options(e){this.$$set({options:e}),m()}get getValue(){return this.$$.ctx[9]}get save(){return this.$$.ctx[10]}}try{customElements.define("jp-quill",N(F,{attachedInternals:{},service:{},value:{},id:{},name:{},label:{},options:{}},[],["getValue","save"],!1,s=>{var e;return e=class extends s{constructor(){super(),this.attachedInternals=this.attachInternals()}},D(e,"formAssociated",!0),e}));}catch{};export{F as default};
