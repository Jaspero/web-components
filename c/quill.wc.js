var Y=Object.defineProperty,Z=(a,e,r)=>e in a?Y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,_=(a,e,r)=>(Z(a,typeof e!="symbol"?e+"":e,r),r);import{c as X,S as ee,i as te,f as c,s as re,a as ae,m as H,e as w,d as m,g as f,r as L,L as F,v as ie,z as E,l as x,w as se,o as ne,A as le,B as oe,x as B}from"./svelte.js";import"./index2.js";function de(a){ae(a,"svelte-1l7er5k",".label.svelte-1l7er5k{margin-top:0.5rem;margin-bottom:0.125rem;font-size:0.875rem}textarea.svelte-1l7er5k{width:100%;height:0;opacity:0;position:absolute}")}function P(a){let e,r;return{c(){e=w("div"),r=le(a[2]),m(e,"class","label svelte-1l7er5k")},m(l,u){f(l,e,u),L(e,r)},p(l,u){u&4&&oe(r,l[2])},d(l){l&&x(e)}}}function ue(a){let e,r,l,u,s,y,S,n=a[2]&&P(a);return{c(){n&&n.c(),e=H(),r=w("div"),l=w("div"),u=H(),s=w("textarea"),m(s,"id",a[0]),m(s,"name",a[1]),s.required=a[3],m(s,"tabindex","-1"),m(s,"class","svelte-1l7er5k")},m(i,o){n&&n.m(i,o),f(i,e,o),f(i,r,o),L(r,l),a[20](l),a[21](r),f(i,u,o),f(i,s,o),F(s,a[4]),a[23](s),y||(S=ie(s,"input",a[22]),y=!0)},p(i,[o]){i[2]?n?n.p(i,o):(n=P(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),o&1&&m(s,"id",i[0]),o&2&&m(s,"name",i[1]),o&8&&(s.required=i[3]),o&16&&F(s,i[4])},i:E,o:E,d(i){i&&(x(e),x(r),x(u),x(s)),n&&n.d(i),a[20](null),a[21](null),a[23](null),y=!1,S()}}}function ce(){return window.Quill}function be(a,e,r){let{attachedInternals:l}=e,{service:u}=e,{value:s=""}=e,{id:y=null}=e,{name:S=null}=e,{label:n=""}=e,{options:i}=e,{toolbarStyle:o="border-color:var(--border-primary)!important;border-top-left-radius:.25rem;border-top-right-radius:.25rem;"}=e,{containerStyle:V="border-color: var(--border-primary)!important;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;"}=e,{editorStyle:k="max-height: 500px;"}=e,{required:A=!1}=e,{validationMessages:I={}}=e,{requiredValidationMessage:T}=e,$,b="";const z=()=>b||"",R=se();let v,M,d,p;async function C(t){return await Promise.all([...d.root.querySelectorAll("img")].map(async h=>{try{const g=await D(h.src),q=await u.uploadFile(g,t);h.src=q}catch(g){console.error(g)}})),r(8,s=d.root.innerHTML),r(4,b=d.root.innerHTML||""),b}const D=t=>fetch(t).then(h=>h.blob()),N=t=>new Promise((h,g)=>{const q=new FileReader;q.readAsDataURL(t),q.onload=()=>h(q.result),q.onerror=W=>g(W)});function O(){$=document.createElement("input"),$.setAttribute("type","file"),$.setAttribute("accept",u.acceptedFiles),$.setAttribute("style","visibility:hidden"),$.onchange=async()=>{const t=$.files[0],h=await N(t),g=d.getSelection();d.insertEmbed(g.index,"image",h)},$.click()}function Q(){v.querySelector(".ql-toolbar").setAttribute("style",o),v.querySelector(".ql-container").setAttribute("style",V),v.querySelector(".ql-editor").setAttribute("style",k)}ne(()=>{let t=ce();i||(window.quillBetterTable&&t.register({"modules/better-table":window.quillBetterTable},!0),r(9,i={modules:{table:!1,toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["table","blockquote","code-block"],["image","link"],[{color:[]},{background:[]}],[{align:[]}],["clean"]],...window.quillBetterTable&&{"better-table":{operationMenu:{items:{unmergeCells:{text:"Another unmerge cells name"}}}},keyboard:{bindings:window.quillBetterTable.keyboardBindings}}},theme:"snow"})),r(19,d=new t(M,i)),window.quillBetterTable&&d.getModule("toolbar").addHandler("table",()=>{d.getModule("better-table").insertTable(3,3)}),u&&d.getModule("toolbar").addHandler("image",()=>{O()}),d.on("text-change",()=>{r(4,b=d.root.innerHTML||"")}),Q()});function U(t){B[t?"unshift":"push"](()=>{M=t,r(7,M)})}function G(t){B[t?"unshift":"push"](()=>{v=t,r(6,v)})}function J(){b=this.value,r(4,b)}function K(t){B[t?"unshift":"push"](()=>{p=t,r(5,p)})}return a.$$set=t=>{"attachedInternals"in t&&r(10,l=t.attachedInternals),"service"in t&&r(11,u=t.service),"value"in t&&r(8,s=t.value),"id"in t&&r(0,y=t.id),"name"in t&&r(1,S=t.name),"label"in t&&r(2,n=t.label),"options"in t&&r(9,i=t.options),"toolbarStyle"in t&&r(12,o=t.toolbarStyle),"containerStyle"in t&&r(13,V=t.containerStyle),"editorStyle"in t&&r(14,k=t.editorStyle),"required"in t&&r(3,A=t.required),"validationMessages"in t&&r(15,I=t.validationMessages),"requiredValidationMessage"in t&&r(16,T=t.requiredValidationMessage)},a.$$.update=()=>{a.$$.dirty&99384&&(l.checkValidity(),p&&(!b&&A?l.setValidity({valueMissing:!0},T||I.required||p.validationMessage,p):l.setValidity({})),l.setFormValue(b||""),R("value",b||"")),a.$$.dirty&524544&&d&&r(19,d.root.innerHTML=s,d)},[y,S,n,A,b,p,v,M,s,i,l,u,o,V,k,I,T,z,C,d,U,G,J,K]}class j extends ee{constructor(e){super(),te(this,e,be,ue,re,{attachedInternals:10,service:11,value:8,id:0,name:1,label:2,options:9,toolbarStyle:12,containerStyle:13,editorStyle:14,required:3,validationMessages:15,requiredValidationMessage:16,getValue:17,save:18},de)}get attachedInternals(){return this.$$.ctx[10]}set attachedInternals(e){this.$$set({attachedInternals:e}),c()}get service(){return this.$$.ctx[11]}set service(e){this.$$set({service:e}),c()}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),c()}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),c()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),c()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),c()}get options(){return this.$$.ctx[9]}set options(e){this.$$set({options:e}),c()}get toolbarStyle(){return this.$$.ctx[12]}set toolbarStyle(e){this.$$set({toolbarStyle:e}),c()}get containerStyle(){return this.$$.ctx[13]}set containerStyle(e){this.$$set({containerStyle:e}),c()}get editorStyle(){return this.$$.ctx[14]}set editorStyle(e){this.$$set({editorStyle:e}),c()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),c()}get validationMessages(){return this.$$.ctx[15]}set validationMessages(e){this.$$set({validationMessages:e}),c()}get requiredValidationMessage(){return this.$$.ctx[16]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),c()}get getValue(){return this.$$.ctx[17]}get save(){return this.$$.ctx[18]}}try{customElements.define("jp-quill",X(j,{attachedInternals:{},service:{},value:{},id:{},name:{},label:{},options:{},toolbarStyle:{},containerStyle:{},editorStyle:{},required:{type:"Boolean"},validationMessages:{},requiredValidationMessage:{}},[],["getValue","save"],!1,a=>{var e;return e=class extends a{constructor(){super(),this.attachedInternals=this.attachInternals()}},_(e,"formAssociated",!0),e}));}catch{};export{j as default};
