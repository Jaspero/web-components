var Y=Object.defineProperty,Z=(a,e,r)=>e in a?Y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,_=(a,e,r)=>Z(a,typeof e!="symbol"?e+"":e,r);import{c as W,S as ee,i as te,o as d,s as re,l as L,e as V,d as y,f as M,p as ae,X as j,m as ie,w as F,k as x,x as ne,G as se,n as B}from"./svelte.js";import"./index.js";function E(a){let e;return{c(){e=V("div"),y(e,"class","jp-quill-label")},m(r,u){M(r,e,u),e.innerHTML=a[8]},p(r,u){u&256&&(e.innerHTML=r[8])},d(r){r&&x(e)}}}function le(a){let e,r,u,c,i,$,S,s=a[2]&&E(a);return{c(){s&&s.c(),e=L(),r=V("div"),u=V("div"),c=L(),i=V("textarea"),y(i,"class","jp-quill-textarea"),y(i,"id",a[0]),y(i,"name",a[1]),i.required=a[3],y(i,"tabindex","-1")},m(n,l){s&&s.m(n,l),M(n,e,l),M(n,r,l),ae(r,u),a[21](u),a[22](r),M(n,c,l),M(n,i,l),j(i,a[4]),a[24](i),$||(S=ie(i,"input",a[23]),$=!0)},p(n,[l]){n[2]?s?s.p(n,l):(s=E(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),l&1&&y(i,"id",n[0]),l&2&&y(i,"name",n[1]),l&8&&(i.required=n[3]),l&16&&j(i,n[4])},i:F,o:F,d(n){n&&(x(e),x(r),x(c),x(i)),s&&s.d(n),a[21](null),a[22](null),a[24](null),$=!1,S()}}}function oe(){return window.Quill}function de(a,e,r){let u,{attachedInternals:c}=e,{service:i}=e,{value:$=""}=e,{id:S=null}=e,{name:s=null}=e,{label:n=""}=e,{options:l}=e,{toolbarStyle:T="border-color:var(--border-primary)!important;border-top-left-radius:.25rem;border-top-right-radius:.25rem;"}=e,{containerStyle:k="border-color: var(--border-primary)!important;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;"}=e,{editorStyle:A="max-height: 500px;"}=e,{required:f=!1}=e,{validationMessages:I={}}=e,{requiredValidationMessage:H}=e,g,b="";const R=()=>b||"",C=ne();let p,w,o,v;async function D(t){return await Promise.all([...o.root.querySelectorAll("img")].map(async h=>{try{const m=await G(h.src),q=await i.uploadFile(m,t);h.src=q}catch(m){console.error(m)}})),r(9,$=o.root.innerHTML),r(4,b=o.root.innerHTML||""),b}const G=t=>fetch(t).then(h=>h.blob()),N=t=>new Promise((h,m)=>{const q=new FileReader;q.readAsDataURL(t),q.onload=()=>h(q.result),q.onerror=K=>m(K)});function O(){g=document.createElement("input"),g.setAttribute("type","file"),g.setAttribute("accept",i.acceptedFiles),g.setAttribute("style","visibility:hidden"),g.onchange=async()=>{const t=g.files[0],h=await N(t),m=o.getSelection();o.insertEmbed(m.index,"image",h)},g.click()}function Q(){p.querySelector(".ql-toolbar").setAttribute("style",T),p.querySelector(".ql-container").setAttribute("style",k),p.querySelector(".ql-editor").setAttribute("style",A)}se(()=>{let t=oe();l||(window.quillBetterTable&&t.register({"modules/better-table":window.quillBetterTable},!0),r(10,l={modules:{table:!1,toolbar:[["bold","italic","underline","strike"],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],["table","blockquote","code-block"],["image","link"],[{color:[]},{background:[]}],[{align:[]}],["clean"]],...window.quillBetterTable&&{"better-table":{operationMenu:{items:{unmergeCells:{text:"Another unmerge cells name"}}}},keyboard:{bindings:window.quillBetterTable.keyboardBindings}}},theme:"snow"})),r(20,o=new t(w,l)),window.quillBetterTable&&o.getModule("toolbar").addHandler("table",()=>{o.getModule("better-table").insertTable(3,3)}),i&&o.getModule("toolbar").addHandler("image",()=>{O()}),o.on("text-change",()=>{r(4,b=o.root.innerHTML||"")}),Q()});function U(t){B[t?"unshift":"push"](()=>{w=t,r(7,w)})}function X(t){B[t?"unshift":"push"](()=>{p=t,r(6,p)})}function z(){b=this.value,r(4,b)}function J(t){B[t?"unshift":"push"](()=>{v=t,r(5,v)})}return a.$$set=t=>{"attachedInternals"in t&&r(11,c=t.attachedInternals),"service"in t&&r(12,i=t.service),"value"in t&&r(9,$=t.value),"id"in t&&r(0,S=t.id),"name"in t&&r(1,s=t.name),"label"in t&&r(2,n=t.label),"options"in t&&r(10,l=t.options),"toolbarStyle"in t&&r(13,T=t.toolbarStyle),"containerStyle"in t&&r(14,k=t.containerStyle),"editorStyle"in t&&r(15,A=t.editorStyle),"required"in t&&r(3,f=t.required),"validationMessages"in t&&r(16,I=t.validationMessages),"requiredValidationMessage"in t&&r(17,H=t.requiredValidationMessage)},a.$$.update=()=>{a.$$.dirty&198712&&(c.checkValidity(),v&&(!b&&f?c.setValidity({valueMissing:!0},H||I.required||v.validationMessage,v):c.setValidity({})),c.setFormValue(b||""),C("value",b||"")),a.$$.dirty&1049088&&o&&r(20,o.root.innerHTML=$,o),a.$$.dirty&12&&r(8,u=f?`${n} *`:n)},[S,s,n,f,b,v,p,w,u,$,l,c,i,T,k,A,I,H,R,D,o,U,X,z,J]}class P extends ee{constructor(e){super(),te(this,e,de,le,re,{attachedInternals:11,service:12,value:9,id:0,name:1,label:2,options:10,toolbarStyle:13,containerStyle:14,editorStyle:15,required:3,validationMessages:16,requiredValidationMessage:17,getValue:18,save:19})}get attachedInternals(){return this.$$.ctx[11]}set attachedInternals(e){this.$$set({attachedInternals:e}),d()}get service(){return this.$$.ctx[12]}set service(e){this.$$set({service:e}),d()}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),d()}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),d()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),d()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),d()}get options(){return this.$$.ctx[10]}set options(e){this.$$set({options:e}),d()}get toolbarStyle(){return this.$$.ctx[13]}set toolbarStyle(e){this.$$set({toolbarStyle:e}),d()}get containerStyle(){return this.$$.ctx[14]}set containerStyle(e){this.$$set({containerStyle:e}),d()}get editorStyle(){return this.$$.ctx[15]}set editorStyle(e){this.$$set({editorStyle:e}),d()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),d()}get validationMessages(){return this.$$.ctx[16]}set validationMessages(e){this.$$set({validationMessages:e}),d()}get requiredValidationMessage(){return this.$$.ctx[17]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),d()}get getValue(){return this.$$.ctx[18]}get save(){return this.$$.ctx[19]}}try{customElements.define("jp-quill",W(P,{attachedInternals:{},service:{},value:{},id:{},name:{},label:{},options:{},toolbarStyle:{},containerStyle:{},editorStyle:{},required:{type:"Boolean"},validationMessages:{},requiredValidationMessage:{}},[],["getValue","save"],!1,a=>{var e;return e=class extends a{constructor(){super(),this.attachedInternals=this.attachInternals()}},_(e,"formAssociated",!0),e}));}catch{};export{P as default};
//# sourceMappingURL=quill.wc.js.map
