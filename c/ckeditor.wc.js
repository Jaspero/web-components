var W=Object.defineProperty,G=(s,e,t)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Q=(s,e,t)=>(G(s,typeof e!="symbol"?e+"":e,t),t);import{c as _,S as J,i as U,f as h,s as X,a as Y,m as P,e as M,d as m,g as b,r as Z,L as H,v as ee,z as L,l as f,w as te,o as ae,V as se,x as V}from"./svelte.js";import"./index2.js";function ie(s){Y(s,"svelte-12tw2ic",".label.svelte-12tw2ic{margin-top:0.5rem;margin-bottom:0.125rem;font-size:0.875rem}textarea.svelte-12tw2ic{width:100%;height:0;opacity:0;position:absolute}")}function F(s){let e;return{c(){e=M("div"),m(e,"class","label svelte-12tw2ic")},m(t,d){b(t,e,d),e.innerHTML=s[8]},p(t,d){d&256&&(e.innerHTML=t[8])},d(t){t&&f(e)}}}function ne(s){let e,t,d,u,n,c,p,r=s[2]&&F(s);return{c(){r&&r.c(),e=P(),t=M("div"),d=M("div"),u=P(),n=M("textarea"),m(n,"id",s[0]),m(n,"name",s[1]),n.required=s[3],m(n,"tabindex","-1"),m(n,"class","svelte-12tw2ic")},m(i,l){r&&r.m(i,l),b(i,e,l),b(i,t,l),Z(t,d),s[17](d),s[18](t),b(i,u,l),b(i,n,l),H(n,s[4]),s[20](n),c||(p=ee(n,"input",s[19]),c=!0)},p(i,[l]){i[2]?r?r.p(i,l):(r=F(i),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),l&1&&m(n,"id",i[0]),l&2&&m(n,"name",i[1]),l&8&&(n.required=i[3]),l&16&&H(n,i[4])},i:L,o:L,d(i){i&&(f(e),f(t),f(u),f(n)),r&&r.d(i),s[17](null),s[18](null),s[20](null),c=!1,p()}}}function re(){var s;return(s=window.CKEDITOR)==null?void 0:s.ClassicEditor}function le(s,e,t){let d,{attachedInternals:u}=e,{service:n}=e,{value:c=""}=e,{id:p=null}=e,{name:r=null}=e,{label:i=""}=e,{options:l={toolbar:{items:["findAndReplace","selectAll","|","heading","|","bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","undo","redo","-","fontSize","fontColor","fontBackgroundColor","highlight","|","alignment","|","link","uploadImage","blockQuote","insertTable","mediaEmbed","codeBlock","htmlEmbed","|","specialCharacters","horizontalLine","|","sourceEditing"],shouldNotGroupWhenFull:!0},mediaEmbed:{previewsInData:!0},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},heading:{options:[{model:"paragraph",title:"Paragraph"},{model:"heading2",view:"h2",title:"Heading 2"},{model:"heading3",view:"h3",title:"Heading 3"},{model:"heading4",view:"h4",title:"Heading 4"},{model:"heading5",view:"h5",title:"Heading 5"},{model:"heading6",view:"h6",title:"Heading 6"}]},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}]},htmlEmbed:{showPreviews:!0},link:{decorators:{openInNewTab:{mode:"manual",label:"Open in a new tab",attributes:{target:"_blank",rel:"noopener noreferrer"}},defaultProtocol:"https://",toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},removePlugins:["AIAssistant","CKBox","CKFinder","EasyImage","RealTimeCollaborativeComments","RealTimeCollaborativeTrackChanges","RealTimeCollaborativeRevisionHistory","PresenceList","Comments","TrackChanges","TrackChangesData","RevisionHistory","Pagination","WProofreader","MathType","SlashCommand","Template","DocumentOutline","FormatPainter","TableOfContents","PasteFromOfficeEnhanced","CaseChange"]}}=e,{required:w=!1}=e,{validationMessages:C={}}=e,{requiredValidationMessage:q}=e,o="";const A=()=>o||"",T=te(),D=a=>fetch(a).then($=>$.blob());let y,x,g,v;async function O(a){const $=/src="data:(.*?)"/g,N=/(^src=")|("$)/g,k=[...o.match($)||[]];return k.length&&(await Promise.all([...k].map(async E=>{try{const I=await D(E.replace(N,"")),j=await n.uploadFile(I,a);t(4,o=o.replace(E,`src="${j}"`))}catch(I){console.error(I)}})),t(9,c=o),T("value",o||"")),o}ae(()=>{t(4,o=c);const a=re();if(!a){console.warn("CKEditor not found");return}a.create(x,l).then($=>{g=$,c&&g.setData(c),g.model.document.on("change:data",()=>{t(4,o=g.getData()),u.checkValidity(),v&&(!o&&w?u.setValidity({valueMissing:!0},q||C.required||v.validationMessage,v):u.setValidity({})),u.setFormValue(o||""),T("value",o||"")})}).catch(console.error)}),se(()=>{g&&g.destroy().catch(console.error)});function z(a){V[a?"unshift":"push"](()=>{x=a,t(6,x)})}function S(a){V[a?"unshift":"push"](()=>{y=a,t(5,y)})}function B(){o=this.value,t(4,o)}function K(a){V[a?"unshift":"push"](()=>{v=a,t(7,v)})}return s.$$set=a=>{"attachedInternals"in a&&t(10,u=a.attachedInternals),"service"in a&&t(11,n=a.service),"value"in a&&t(9,c=a.value),"id"in a&&t(0,p=a.id),"name"in a&&t(1,r=a.name),"label"in a&&t(2,i=a.label),"options"in a&&t(12,l=a.options),"required"in a&&t(3,w=a.required),"validationMessages"in a&&t(13,C=a.validationMessages),"requiredValidationMessage"in a&&t(14,q=a.requiredValidationMessage)},s.$$.update=()=>{s.$$.dirty&12&&t(8,d=w?`${i} *`:i)},[p,r,i,w,o,y,x,v,d,c,u,n,l,C,q,A,O,z,S,B,K]}class R extends J{constructor(e){super(),U(this,e,le,ne,X,{attachedInternals:10,service:11,value:9,id:0,name:1,label:2,options:12,required:3,validationMessages:13,requiredValidationMessage:14,getValue:15,save:16},ie)}get attachedInternals(){return this.$$.ctx[10]}set attachedInternals(e){this.$$set({attachedInternals:e}),h()}get service(){return this.$$.ctx[11]}set service(e){this.$$set({service:e}),h()}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),h()}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),h()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),h()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),h()}get options(){return this.$$.ctx[12]}set options(e){this.$$set({options:e}),h()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),h()}get validationMessages(){return this.$$.ctx[13]}set validationMessages(e){this.$$set({validationMessages:e}),h()}get requiredValidationMessage(){return this.$$.ctx[14]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),h()}get getValue(){return this.$$.ctx[15]}get save(){return this.$$.ctx[16]}}try{customElements.define("jp-ckeditor",_(R,{attachedInternals:{},service:{},value:{},id:{},name:{},label:{},options:{},required:{type:"Boolean"},validationMessages:{},requiredValidationMessage:{}},[],["getValue","save"],!1,s=>{var e;return e=class extends s{constructor(){super(),this.attachedInternals=this.attachInternals()}},Q(e,"formAssociated",!0),e}));}catch{};export{R as default};
