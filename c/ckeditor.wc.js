var G=Object.defineProperty,J=(i,e,a)=>e in i?G(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a,Q=(i,e,a)=>J(i,typeof e!="symbol"?e+"":e,a);import{c as _,S as U,i as X,f as d,s as Y,b as H,e as q,g as v,h as b,j as Z,V as F,l as ee,J as L,o as f,D as te,E as ae,M as ie,y as k}from"./svelte.js";import"./index.js";function A(i){let e;return{c(){e=q("div"),v(e,"class","jp-ckeditor-label")},m(a,u){b(a,e,u),e.innerHTML=i[8]},p(a,u){u&256&&(e.innerHTML=a[8])},d(a){a&&f(e)}}}function se(i){let e,a,u,c,n,h,$,r=i[2]&&A(i);return{c(){r&&r.c(),e=H(),a=q("div"),u=q("div"),c=H(),n=q("textarea"),v(n,"class","jp-ckeditor-textarea"),v(n,"id",i[0]),v(n,"name",i[1]),n.required=i[3]},m(s,l){r&&r.m(s,l),b(s,e,l),b(s,a,l),Z(a,u),i[19](u),i[20](a),b(s,c,l),b(s,n,l),F(n,i[4]),i[22](n),h||($=ee(n,"input",i[21]),h=!0)},p(s,[l]){s[2]?r?r.p(s,l):(r=A(s),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),l&1&&v(n,"id",s[0]),l&2&&v(n,"name",s[1]),l&8&&(n.required=s[3]),l&16&&F(n,s[4])},i:L,o:L,d(s){s&&(f(e),f(a),f(c),f(n)),r&&r.d(s),i[19](null),i[20](null),i[22](null),h=!1,$()}}}function ne(){var i;return(i=window.CKEDITOR)==null?void 0:i.ClassicEditor}function re(i,e,a){let u,{attachedInternals:c}=e,{service:n}=e,{value:h=""}=e,{id:$=null}=e,{name:r=null}=e,{height:s=null}=e,{label:l=""}=e,{options:x={toolbar:{items:["findAndReplace","selectAll","|","heading","|","bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","undo","redo","-","fontSize","fontColor","fontBackgroundColor","highlight","|","alignment","|","link","uploadImage","blockQuote","insertTable","mediaEmbed","codeBlock","htmlEmbed","|","specialCharacters","horizontalLine","|","sourceEditing"],shouldNotGroupWhenFull:!0},mediaEmbed:{previewsInData:!0},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},heading:{options:[{model:"paragraph",title:"Paragraph"},{model:"heading2",view:"h2",title:"Heading 2"},{model:"heading3",view:"h3",title:"Heading 3"},{model:"heading4",view:"h4",title:"Heading 4"},{model:"heading5",view:"h5",title:"Heading 5"},{model:"heading6",view:"h6",title:"Heading 6"}]},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}]},htmlEmbed:{showPreviews:!0},link:{decorators:{openInNewTab:{mode:"manual",label:"Open in a new tab",attributes:{target:"_blank",rel:"noopener noreferrer"}},defaultProtocol:"https://",toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},removePlugins:["AIAssistant","CKBox","CKFinder","EasyImage","RealTimeCollaborativeComments","RealTimeCollaborativeTrackChanges","RealTimeCollaborativeRevisionHistory","PresenceList","Comments","TrackChanges","TrackChangesData","RevisionHistory","Pagination","WProofreader","MathType","SlashCommand","Template","DocumentOutline","FormatPainter","TableOfContents","PasteFromOfficeEnhanced","CaseChange"]}}=e,{required:w=!1}=e,{validationMessages:C={}}=e,{requiredValidationMessage:I}=e,o="";const R=()=>o||"",E=te(),S=t=>fetch(t).then(p=>p.blob());let V,M,g,m;async function j(t){const p=/src="data:(.*?)"/g,y=/(^src=")|("$)/g,P=[...o.match(p)||[]];return P.length&&(await Promise.all([...P].map(async D=>{try{const T=await S(D.replace(y,"")),W=await n.uploadFile(T,t);a(4,o=o.replace(D,`src="${W}"`))}catch(T){console.error(T)}})),a(9,h=o),E("value",o||"")),o}ae(()=>{a(4,o=h);const t=ne();if(!t){console.warn("CKEditor not found");return}t.create(M,x).then(p=>{a(18,g=p),h&&g.setData(h),g.model.document.on("change:data",()=>{if(a(4,o=g.getData()),c.checkValidity(),m)if(!o&&w){const y=I||C.required||m.validationMessage;y&&c.setValidity({valueMissing:!0},y,m)}else c.setValidity({});c.setFormValue(o||""),E("value",o||"")})}).catch(console.error)}),ie(()=>{g&&g.destroy().catch(console.error)});function B(t){k[t?"unshift":"push"](()=>{M=t,a(6,M)})}function K(t){k[t?"unshift":"push"](()=>{V=t,a(5,V)})}function z(){o=this.value,a(4,o)}function N(t){k[t?"unshift":"push"](()=>{m=t,a(7,m)})}return i.$$set=t=>{"attachedInternals"in t&&a(10,c=t.attachedInternals),"service"in t&&a(11,n=t.service),"value"in t&&a(9,h=t.value),"id"in t&&a(0,$=t.id),"name"in t&&a(1,r=t.name),"height"in t&&a(12,s=t.height),"label"in t&&a(2,l=t.label),"options"in t&&a(13,x=t.options),"required"in t&&a(3,w=t.required),"validationMessages"in t&&a(14,C=t.validationMessages),"requiredValidationMessage"in t&&a(15,I=t.requiredValidationMessage)},i.$$.update=()=>{i.$$.dirty&266240&&s&&g&&g.editing.view.change(t=>{t.setStyle("height",s,g.editing.view.document.getRoot())}),i.$$.dirty&12&&a(8,u=w?`${l} *`:l)},[$,r,l,w,o,V,M,m,u,h,c,n,s,x,C,I,R,j,g,B,K,z,N]}class O extends U{constructor(e){super(),X(this,e,re,se,Y,{attachedInternals:10,service:11,value:9,id:0,name:1,height:12,label:2,options:13,required:3,validationMessages:14,requiredValidationMessage:15,getValue:16,save:17})}get attachedInternals(){return this.$$.ctx[10]}set attachedInternals(e){this.$$set({attachedInternals:e}),d()}get service(){return this.$$.ctx[11]}set service(e){this.$$set({service:e}),d()}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),d()}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),d()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),d()}get height(){return this.$$.ctx[12]}set height(e){this.$$set({height:e}),d()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),d()}get options(){return this.$$.ctx[13]}set options(e){this.$$set({options:e}),d()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),d()}get validationMessages(){return this.$$.ctx[14]}set validationMessages(e){this.$$set({validationMessages:e}),d()}get requiredValidationMessage(){return this.$$.ctx[15]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),d()}get getValue(){return this.$$.ctx[16]}get save(){return this.$$.ctx[17]}}try{customElements.define("jp-ckeditor",_(O,{attachedInternals:{},service:{},value:{},id:{},name:{},height:{},label:{},options:{},required:{type:"Boolean"},validationMessages:{},requiredValidationMessage:{}},[],["getValue","save"],!1,i=>{var e;return e=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},Q(e,"formAssociated",!0),e}));}catch{};export{O as default};
//# sourceMappingURL=ckeditor.wc.js.map
