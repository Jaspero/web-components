var Q=Object.defineProperty,_=(i,e,a)=>e in i?Q(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a,J=(i,e,a)=>_(i,typeof e!="symbol"?e+"":e,a);import{c as U,S as X,i as Y,o as u,s as Z,l as R,e as C,d as $,f as b,p as ee,E as S,m as te,x as F,k as f,G as ae,K as ie,L as se,n as E}from"./svelte.js";import"./index.js";function A(i){let e;return{c(){e=C("div"),$(e,"class","jp-ckeditor-label")},m(a,h){b(a,e,h),e.innerHTML=i[8]},p(a,h){h&256&&(e.innerHTML=a[8])},d(a){a&&f(e)}}}function ne(i){let e,a,h,c,n,g,p,r=i[2]&&A(i);return{c(){r&&r.c(),e=R(),a=C("div"),h=C("div"),c=R(),n=C("textarea"),$(a,"class","jp-ckeditor"),$(n,"class","jp-ckeditor-textarea"),$(n,"id",i[0]),$(n,"name",i[1]),n.required=i[3]},m(s,l){r&&r.m(s,l),b(s,e,l),b(s,a,l),ee(a,h),i[20](h),i[21](a),b(s,c,l),b(s,n,l),S(n,i[4]),i[23](n),g||(p=te(n,"input",i[22]),g=!0)},p(s,[l]){s[2]?r?r.p(s,l):(r=A(s),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),l&1&&$(n,"id",s[0]),l&2&&$(n,"name",s[1]),l&8&&(n.required=s[3]),l&16&&S(n,s[4])},i:F,o:F,d(s){s&&(f(e),f(a),f(c),f(n)),r&&r.d(s),i[20](null),i[21](null),i[23](null),g=!1,p()}}}function re(){var i;return(i=window.CKEDITOR)==null?void 0:i.ClassicEditor}function le(i,e,a){let h,{attachedInternals:c}=e,{service:n}=e,{value:g=""}=e,{id:p=null}=e,{name:r=null}=e,{height:s=null}=e,{width:l=null}=e,{label:w=""}=e,{options:q={toolbar:{items:["findAndReplace","selectAll","|","heading","|","bold","italic","strikethrough","underline","code","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","outdent","indent","|","undo","redo","-","fontSize","fontColor","fontBackgroundColor","highlight","|","alignment","|","link","uploadImage","blockQuote","insertTable","mediaEmbed","codeBlock","htmlEmbed","|","specialCharacters","horizontalLine","|","sourceEditing"],shouldNotGroupWhenFull:!0},mediaEmbed:{previewsInData:!0},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},heading:{options:[{model:"paragraph",title:"Paragraph"},{model:"heading2",view:"h2",title:"Heading 2"},{model:"heading3",view:"h3",title:"Heading 3"},{model:"heading4",view:"h4",title:"Heading 4"},{model:"heading5",view:"h5",title:"Heading 5"},{model:"heading6",view:"h6",title:"Heading 6"}]},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}]},htmlEmbed:{showPreviews:!0},link:{decorators:{openInNewTab:{mode:"manual",label:"Open in a new tab",attributes:{target:"_blank",rel:"noopener noreferrer"}},defaultProtocol:"https://",toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},removePlugins:["AIAssistant","CKBox","CKFinder","EasyImage","RealTimeCollaborativeComments","RealTimeCollaborativeTrackChanges","RealTimeCollaborativeRevisionHistory","PresenceList","Comments","TrackChanges","TrackChangesData","RevisionHistory","Pagination","WProofreader","MathType","SlashCommand","Template","DocumentOutline","FormatPainter","TableOfContents","PasteFromOfficeEnhanced","CaseChange"]}}=e,{required:x=!1}=e,{validationMessages:I={}}=e,{requiredValidationMessage:k}=e,o="";const O=()=>o||"",P=ae(),j=t=>fetch(t).then(m=>m.blob());let V,y,d,v;async function z(t){const m=/src="data:(.*?)"/g,M=/(^src=")|("$)/g,H=[...o.match(m)||[]];return H.length&&(await Promise.all([...H].map(async D=>{try{const T=await j(D.replace(M,"")),W=await n.uploadFile(T,t);a(4,o=o.replace(D,`src="${W}"`))}catch(T){console.error(T)}})),a(9,g=o),P("value",o||"")),o}ie(()=>{a(4,o=g);const t=re();if(!t){console.warn("CKEditor not found");return}t.create(y,q).then(m=>{a(19,d=m),g&&d.setData(g),d.model.document.on("change:data",()=>{if(a(4,o=d.getData()),c.checkValidity(),v)if(!o&&x){const M=k||I.required||v.validationMessage;M&&c.setValidity({valueMissing:!0},M,v)}else c.setValidity({});c.setFormValue(o||""),P("value",o||"")})}).catch(console.error)}),se(()=>{d&&d.destroy().catch(console.error)});function K(t){E[t?"unshift":"push"](()=>{y=t,a(6,y)})}function B(t){E[t?"unshift":"push"](()=>{V=t,a(5,V)})}function N(){o=this.value,a(4,o)}function G(t){E[t?"unshift":"push"](()=>{v=t,a(7,v)})}return i.$$set=t=>{"attachedInternals"in t&&a(10,c=t.attachedInternals),"service"in t&&a(11,n=t.service),"value"in t&&a(9,g=t.value),"id"in t&&a(0,p=t.id),"name"in t&&a(1,r=t.name),"height"in t&&a(12,s=t.height),"width"in t&&a(13,l=t.width),"label"in t&&a(2,w=t.label),"options"in t&&a(14,q=t.options),"required"in t&&a(3,x=t.required),"validationMessages"in t&&a(15,I=t.validationMessages),"requiredValidationMessage"in t&&a(16,k=t.requiredValidationMessage)},i.$$.update=()=>{if(i.$$.dirty&528384&&s&&d&&d.editing.view.change(t=>{t.setStyle("height",s,d.editing.view.document.getRoot())}),i.$$.dirty&532480&&l&&d){const t=d.ui.view.toolbar.element,m=d.ui.view.editable.element;t.style.width=`${l}`,t.style.boxSizing="border-box",m.style.width=`${l}`,m.style.boxSizing="border-box"}i.$$.dirty&12&&a(8,h=x?`${w} *`:w)},[p,r,w,x,o,V,y,v,h,g,c,n,s,l,q,I,k,O,z,d,K,B,N,G]}class L extends X{constructor(e){super(),Y(this,e,le,ne,Z,{attachedInternals:10,service:11,value:9,id:0,name:1,height:12,width:13,label:2,options:14,required:3,validationMessages:15,requiredValidationMessage:16,getValue:17,save:18})}get attachedInternals(){return this.$$.ctx[10]}set attachedInternals(e){this.$$set({attachedInternals:e}),u()}get service(){return this.$$.ctx[11]}set service(e){this.$$set({service:e}),u()}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),u()}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),u()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),u()}get height(){return this.$$.ctx[12]}set height(e){this.$$set({height:e}),u()}get width(){return this.$$.ctx[13]}set width(e){this.$$set({width:e}),u()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),u()}get options(){return this.$$.ctx[14]}set options(e){this.$$set({options:e}),u()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),u()}get validationMessages(){return this.$$.ctx[15]}set validationMessages(e){this.$$set({validationMessages:e}),u()}get requiredValidationMessage(){return this.$$.ctx[16]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),u()}get getValue(){return this.$$.ctx[17]}get save(){return this.$$.ctx[18]}}try{customElements.define("jp-ckeditor",U(L,{attachedInternals:{},service:{},value:{},id:{},name:{},height:{},width:{},label:{},options:{},required:{type:"Boolean"},validationMessages:{},requiredValidationMessage:{}},[],["getValue","save"],!1,i=>{var e;return e=class extends i{constructor(){super(),this.attachedInternals=this.attachInternals()}},J(e,"formAssociated",!0),e}));}catch{};export{L as default};
//# sourceMappingURL=ckeditor.wc.js.map
