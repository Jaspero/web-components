var Z=Object.defineProperty,W=(a,e,t)=>e in a?Z(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,X=(a,e,t)=>(W(a,typeof e!="symbol"?e+"":e,t),t);import{c as ee,S as ae,i as te,f as k,s as ie,a as se,e as u,b as I,E,d as i,t as M,g as P,h as o,I as R,o as j,J as U,n as Y,j as _,K as D,k as ne,L as J,M as le}from"./svelte.js";import"./index2.js";import{c as re}from"./clickOutside.js";function oe(a){se(a,"svelte-1jqaznb",".field.svelte-1jqaznb.svelte-1jqaznb{position:relative;display:flex;align-items:center;text-align:left;width:100%;height:3rem;padding-right:.75rem;-webkit-user-select:none;-moz-user-select:none;user-select:none;gap:.75rem;background-color:var(--background-primary);border:1px solid var(--border-primary);border-radius:.25rem}.field.svelte-1jqaznb.svelte-1jqaznb:focus-within{border-color:var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-1jqaznb.svelte-1jqaznb{position:absolute;top:50%;left:.75rem;transform:translateY(-50%);font-size:1rem;transition:transform .3s, top .3s, font-size .3s}.field-label.move.svelte-1jqaznb.svelte-1jqaznb{top:.25rem;transform:translateY(0);font-size:.75rem}.field-input.svelte-1jqaznb.svelte-1jqaznb{flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;text-overflow:ellipsis;padding:1rem 0 0 0;border:none;outline:none;border-radius:0}.field-upload.svelte-1jqaznb.svelte-1jqaznb{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0;opacity:0}.field-upload-container.svelte-1jqaznb.svelte-1jqaznb{position:relative;display:flex;padding:0 .75rem;height:100%;overflow:hidden;flex:1}.field-icons.svelte-1jqaznb.svelte-1jqaznb{display:flex;align-items:center;gap:.375rem}.field-icon.svelte-1jqaznb.svelte-1jqaznb{display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;border-radius:50%;cursor:pointer}.field-icon.svelte-1jqaznb.svelte-1jqaznb:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-1jqaznb.svelte-1jqaznb{display:none}.field-icon-upload.svelte-1jqaznb.svelte-1jqaznb{position:relative}.field-icon.svelte-1jqaznb button.svelte-1jqaznb{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.preview-button.svelte-1jqaznb.svelte-1jqaznb{position:relative}.preview.svelte-1jqaznb.svelte-1jqaznb{position:absolute;bottom:100%;right:0;max-width:400px;width:auto;background-color:var(--background-primary);border-radius:.5rem;box-shadow:0 3px 12px 3px rgba(0,0,0,.16)}")}function K(a){let e,t,b,h,l;return{c(){e=u("img"),i(e,"class","preview svelte-1jqaznb"),J(e.src,t=a[6]?a[7]:a[0])||i(e,"src",t),i(e,"alt","preview"),e.hidden=b=!a[0]&&!a[7]},m(s,g){P(s,e,g),h||(l=[le(re.call(null,e)),j(e,"click_outside",a[21])],h=!0)},p(s,g){g&193&&!J(e.src,t=s[6]?s[7]:s[0])&&i(e,"src",t),g&129&&b!==(b=!s[0]&&!s[7])&&(e.hidden=b)},d(s){s&&_(e),h=!1,D(l)}}}function ce(a){let e,t,b,h,l,s,g,p,m,c,q,$,z,F,L,f,w,V,C,x,y,H,T,d=a[8]&&K(a);return{c(){e=u("div"),t=u("div"),b=u("span"),h=I(),l=u("span"),s=u("input"),g=I(),p=u("div"),m=u("div"),c=u("input"),$=I(),z=E("svg"),F=E("path"),L=I(),f=u("div"),w=u("button"),w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',V=I(),d&&d.c(),C=I(),x=u("div"),y=u("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',i(b,"class","field-label svelte-1jqaznb"),M(b,"move",a[5]||a[0]),i(s,"class","field-input svelte-1jqaznb"),i(s,"type","text"),i(s,"name",a[3]),i(s,"id",a[2]),s.disabled=a[6],i(l,"class","field-upload-container svelte-1jqaznb"),i(c,"type","file"),i(c,"class","field-upload svelte-1jqaznb"),i(c,"accept",q=a[4].acceptedFiles?a[4].acceptedFiles:"image/png, image/jpeg"),i(c,"id",a[2]),i(c,"name",a[3]),i(F,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),i(z,"xmlns","http://www.w3.org/2000/svg"),i(z,"height","1em"),i(z,"viewBox","0 0 512 512"),i(m,"class","field-icon field-icon-upload svelte-1jqaznb"),i(w,"class","svelte-1jqaznb"),i(f,"class","field-icon preview-button svelte-1jqaznb"),M(f,"hidden",!a[6]),i(y,"class","svelte-1jqaznb"),i(x,"class","field-icon svelte-1jqaznb"),M(x,"hidden",!a[6]),i(p,"class","field-icons svelte-1jqaznb"),i(t,"class","field svelte-1jqaznb")},m(n,v){P(n,e,v),o(e,t),o(t,b),b.innerHTML=a[1],o(t,h),o(t,l),o(l,s),R(s,a[0]),o(t,g),o(t,p),o(p,m),o(m,c),o(m,$),o(m,z),o(z,F),o(p,L),o(p,f),o(f,w),o(f,V),d&&d.m(f,null),o(p,C),o(p,x),o(x,y),H||(T=[j(s,"focus",a[13]),j(s,"blur",a[14]),j(s,"input",a[15]),j(c,"change",a[16]),j(c,"change",a[17]),j(c,"focus",a[18]),j(c,"blur",a[19]),j(w,"click",U(a[20])),j(y,"click",U(a[22]))],H=!0)},p(n,[v]){v&2&&(b.innerHTML=n[1]),v&33&&M(b,"move",n[5]||n[0]),v&8&&i(s,"name",n[3]),v&4&&i(s,"id",n[2]),v&64&&(s.disabled=n[6]),v&1&&s.value!==n[0]&&R(s,n[0]),v&16&&q!==(q=n[4].acceptedFiles?n[4].acceptedFiles:"image/png, image/jpeg")&&i(c,"accept",q),v&4&&i(c,"id",n[2]),v&8&&i(c,"name",n[3]),n[8]?d?d.p(n,v):(d=K(n),d.c(),d.m(f,null)):d&&(d.d(1),d=null),v&64&&M(f,"hidden",!n[6]),v&64&&M(x,"hidden",!n[6])},i:Y,o:Y,d(n){n&&_(e),d&&d.d(),H=!1,D(T)}}}function de(a,e,t){let{label:b="Upload a file"}=e,{attachedInternals:h}=e,{value:l=""}=e,{id:s=""}=e,{name:g=""}=e,p=!1,m=!1,c="",q=null,$=!1,{service:z}=e;const F=()=>l,L=ne();async function f(){if(m)try{t(0,l=await z.uploadFile(q))}catch(r){console.log(r)}return l}async function w(r){t(6,m=!0),t(0,l=r.target.value),q=r.target.files[0];const A=await V(q);t(7,c=A)}const V=r=>new Promise((A,N)=>{const B=new FileReader;B.readAsDataURL(r),B.onload=()=>A(B.result),B.onerror=Q=>N(Q)}),C=()=>t(5,p=!0),x=()=>t(5,p=!1);function y(){l=this.value,t(0,l)}function H(){l=this.value,t(0,l)}const T=r=>{w(r)},d=()=>t(5,p=!0),n=()=>t(5,p=!1),v=()=>t(8,$=!$),S=()=>t(8,$=!1),G=()=>{t(6,m=!1),t(7,c=""),t(0,l="")};return a.$$set=r=>{"label"in r&&t(1,b=r.label),"attachedInternals"in r&&t(10,h=r.attachedInternals),"value"in r&&t(0,l=r.value),"id"in r&&t(2,s=r.id),"name"in r&&t(3,g=r.name),"service"in r&&t(4,z=r.service)},a.$$.update=()=>{a.$$.dirty&1025&&(h.checkValidity(),h.setFormValue(l),L("value",{value:l}))},[l,b,s,g,z,p,m,c,$,w,h,F,f,C,x,y,H,T,d,n,v,S,G]}class O extends ae{constructor(e){super(),te(this,e,de,ce,ie,{label:1,attachedInternals:10,value:0,id:2,name:3,service:4,getValue:11,save:12},oe)}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),k()}get attachedInternals(){return this.$$.ctx[10]}set attachedInternals(e){this.$$set({attachedInternals:e}),k()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),k()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),k()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),k()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),k()}get getValue(){return this.$$.ctx[11]}get save(){return this.$$.ctx[12]}}customElements.define("jp-image-upload",ee(O,{label:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,a=>{var e;return e=class extends a{constructor(){super(),this.attachedInternals=this.attachInternals()}},X(e,"formAssociated",!0),e}));export{O as default};
