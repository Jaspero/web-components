var te=Object.defineProperty,ae=(t,e,a)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,se=(t,e,a)=>(ae(t,typeof e!="symbol"?e+"":e,a),a);import{c as ie,S as le,i as re,f as C,s as ne,a as de,e as g,b as V,E as _,d as s,t as E,g as S,h as v,I as D,o as w,J as G,n as U,j as Y,K as J,k as oe,L as K,M as ce,G as ve}from"./svelte.js";import"./index2.js";import{c as ue}from"./clickOutside.js";function pe(t){de(t,"svelte-1djav24",`.field.svelte-1djav24.svelte-1djav24{position:relative;display:flex;flex-direction:row-reverse;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;user-select:none;gap:0.75rem;background-color:var(--background-primary);border:1px solid var(--border-primary);border-radius:0.25rem}.field.svelte-1djav24.svelte-1djav24:focus-within{border-color:var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-1djav24.svelte-1djav24{position:absolute;top:50%;left:0.75rem;transform:translateY(-50%);font-size:1rem;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s}.field-label.move.svelte-1djav24.svelte-1djav24{top:0.25rem;transform:translateY(0);font-size:0.75rem}.field-input.svelte-1djav24.svelte-1djav24{flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;text-overflow:ellipsis;padding:1rem 0 0 0;border:none;outline:none;border-radius:0}.field-upload.svelte-1djav24.svelte-1djav24{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0;opacity:0;cursor:pointer}.field-upload-container.svelte-1djav24.svelte-1djav24{position:relative;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;flex:1}.field-icons.svelte-1djav24.svelte-1djav24{z-index:1;position:relative;display:flex;align-items:center;gap:0.375rem}.field-icon.svelte-1djav24.svelte-1djav24{display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;border-radius:50%;cursor:pointer}.field-icon.svelte-1djav24.svelte-1djav24:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-1djav24.svelte-1djav24{display:none}.field-icon-upload.svelte-1djav24.svelte-1djav24{position:relative;cursor:pointer}.field-icon.svelte-1djav24 button.svelte-1djav24{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.preview-button.svelte-1djav24.svelte-1djav24{position:relative}.preview.svelte-1djav24.svelte-1djav24{z-index:1;position:absolute;bottom:100%;right:0;max-width:300px;max-height:300px;width:auto;height:auto;background-color:var(--background-primary);border-radius:0.5rem;box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}`)}function O(t){let e,a,o,f,l;return{c(){e=g("img"),s(e,"class","preview svelte-1djav24"),s(e,"style",t[5]),K(e.src,a=t[8]?t[9]:t[0])||s(e,"src",a),s(e,"alt","preview"),e.hidden=o=!t[0]&&!t[9]},m(n,d){S(n,e,d),f||(l=[ce(ue.call(null,e)),w(e,"click_outside",t[20])],f=!0)},p(n,d){d&32&&s(e,"style",n[5]),d&769&&!K(e.src,a=n[8]?n[9]:n[0])&&s(e,"src",a),d&513&&o!==(o=!n[0]&&!n[9])&&(e.hidden=o)},d(n){n&&Y(e),f=!1,J(l)}}}function q(t){let e,a,o,f;return{c(){e=g("div"),a=g("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',s(a,"class","svelte-1djav24"),s(e,"class","field-icon svelte-1djav24")},m(l,n){S(l,e,n),v(e,a),o||(f=w(a,"click",G(t[21])),o=!0)},p:U,d(l){l&&Y(e),o=!1,f()}}}function me(t){let e,a,o,f,l,n,d,z,j,x,b,k,$,I,h,M,B,R,F,H,c,T,A,u=t[10]&&O(t),p=(t[9]||t[0]||t[8])&&q(t);return{c(){e=g("div"),a=g("div"),o=g("span"),f=V(),l=g("div"),n=g("label"),d=g("input"),x=V(),b=_("svg"),k=_("path"),I=V(),h=g("div"),M=g("button"),M.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',B=V(),u&&u.c(),R=V(),p&&p.c(),F=V(),H=g("span"),c=g("input"),s(o,"class","field-label svelte-1djav24"),E(o,"move",t[7]||t[0]),s(d,"type","file"),s(d,"id",z=`${t[3]}`),s(d,"class","field-upload svelte-1djav24"),s(d,"accept",j=t[4]&&t[4].acceptedFiles||"image/png, image/jpeg"),s(k,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),s(b,"xmlns","http://www.w3.org/2000/svg"),s(b,"height","1rem"),s(b,"viewBox","0 0 512 512"),s(n,"for",$=`${t[3]}`),s(n,"class","field-icon field-icon-upload svelte-1djav24"),s(M,"class","svelte-1djav24"),s(h,"class","field-icon preview-button svelte-1djav24"),E(h,"hidden",!t[8]&&!t[0]),s(l,"class","field-icons svelte-1djav24"),s(c,"class","field-input svelte-1djav24"),s(c,"type","text"),s(c,"name",t[3]),s(c,"id",t[2]),c.disabled=t[8],s(H,"class","field-upload-container svelte-1djav24"),s(a,"class","field svelte-1djav24")},m(r,m){S(r,e,m),v(e,a),v(a,o),o.innerHTML=t[1],v(a,f),v(a,l),v(l,n),v(n,d),v(n,x),v(n,b),v(b,k),v(l,I),v(l,h),v(h,M),v(h,B),u&&u.m(h,null),v(l,R),p&&p.m(l,null),v(a,F),v(a,H),v(H,c),D(c,t[0]),t[25](a),T||(A=[w(d,"change",t[16]),w(d,"focus",t[17]),w(d,"blur",t[18]),w(M,"click",G(t[19])),w(c,"focus",t[22]),w(c,"blur",t[23]),w(c,"input",t[24])],T=!0)},p(r,[m]){m&2&&(o.innerHTML=r[1]),m&129&&E(o,"move",r[7]||r[0]),m&8&&z!==(z=`${r[3]}`)&&s(d,"id",z),m&16&&j!==(j=r[4]&&r[4].acceptedFiles||"image/png, image/jpeg")&&s(d,"accept",j),m&8&&$!==($=`${r[3]}`)&&s(n,"for",$),r[10]?u?u.p(r,m):(u=O(r),u.c(),u.m(h,null)):u&&(u.d(1),u=null),m&257&&E(h,"hidden",!r[8]&&!r[0]),r[9]||r[0]||r[8]?p?p.p(r,m):(p=q(r),p.c(),p.m(l,null)):p&&(p.d(1),p=null),m&8&&s(c,"name",r[3]),m&4&&s(c,"id",r[2]),m&256&&(c.disabled=r[8]),m&1&&c.value!==r[0]&&D(c,r[0])},i:U,o:U,d(r){r&&Y(e),u&&u.d(),p&&p.d(),t[25](null),T=!1,J(A)}}}function fe(t,e,a){let{label:o="Upload a file"}=e,{attachedInternals:f}=e,{value:l=""}=e,{id:n=""}=e,{name:d=""}=e,z,j,x=!1,b=!1,k="",$=null,I=!1,{service:h}=e;const M=()=>l,B=oe();async function R(i){if(b)try{a(0,l=await h.uploadFile($,i))}catch(L){console.log(L)}return l}async function F(i){a(8,b=!0),a(0,l=i.target.value),$=i.target.files[0];const L=await c($);a(9,k=L)}function H(){const i=j.getBoundingClientRect(),L=window.innerHeight-i.bottom,P=300;let y="";L<P?y=`
            bottom: ${window.innerHeight-i.top}px;
            right: ${i.left}px;
        `:y=`
            top: ${i.bottom}px;
            right: ${i.left}px;
        `,a(5,z=y),a(10,I=!I)}const c=i=>new Promise((L,P)=>{const y=new FileReader;y.readAsDataURL(i),y.onload=()=>L(y.result),y.onerror=ee=>P(ee)}),T=i=>{F(i)},A=()=>a(7,x=!0),u=()=>a(7,x=!1),p=()=>H(),r=()=>a(10,I=!1),m=()=>{a(8,b=!1),a(9,k=""),a(0,l="")},Q=()=>a(7,x=!0),W=()=>a(7,x=!1);function X(){l=this.value,a(0,l)}function Z(i){ve[i?"unshift":"push"](()=>{j=i,a(6,j)})}return t.$$set=i=>{"label"in i&&a(1,o=i.label),"attachedInternals"in i&&a(13,f=i.attachedInternals),"value"in i&&a(0,l=i.value),"id"in i&&a(2,n=i.id),"name"in i&&a(3,d=i.name),"service"in i&&a(4,h=i.service)},t.$$.update=()=>{t.$$.dirty&8193&&(f.checkValidity(),f.setFormValue(l),B("value",{value:l}))},[l,o,n,d,h,z,j,x,b,k,I,F,H,f,M,R,T,A,u,p,r,m,Q,W,X,Z]}class N extends le{constructor(e){super(),re(this,e,fe,me,ne,{label:1,attachedInternals:13,value:0,id:2,name:3,service:4,getValue:14,save:15},pe)}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),C()}get attachedInternals(){return this.$$.ctx[13]}set attachedInternals(e){this.$$set({attachedInternals:e}),C()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),C()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),C()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),C()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),C()}get getValue(){return this.$$.ctx[14]}get save(){return this.$$.ctx[15]}}try{customElements.define("jp-image-upload",ie(N,{label:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,t=>{var e;return e=class extends t{constructor(){super(),this.attachedInternals=this.attachInternals()}},se(e,"formAssociated",!0),e}));}catch{};export{N as default};
