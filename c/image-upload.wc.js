var X=Object.defineProperty,Z=(t,e,a)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Q=(t,e,a)=>(Z(t,typeof e!="symbol"?e+"":e,a),a);import{c as W,S as ee,i as te,f as k,s as ae,a as se,e as p,b as I,E,d as n,t as M,g as P,h as o,I as R,o as j,J as U,n as Y,j as _,K as D,k as ne,L as J,M as le}from"./svelte.js";import"./index2.js";import{c as ie}from"./clickOutside.js";function re(t){se(t,"svelte-1jqaznb",".field.svelte-1jqaznb.svelte-1jqaznb{position:relative;display:flex;align-items:center;text-align:left;width:100%;height:3rem;padding-right:.75rem;-webkit-user-select:none;-moz-user-select:none;user-select:none;gap:.75rem;background-color:var(--background-primary);border:1px solid var(--border-primary);border-radius:.25rem}.field.svelte-1jqaznb.svelte-1jqaznb:focus-within{border-color:var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-1jqaznb.svelte-1jqaznb{position:absolute;top:50%;left:.75rem;transform:translateY(-50%);font-size:1rem;transition:transform .3s, top .3s, font-size .3s}.field-label.move.svelte-1jqaznb.svelte-1jqaznb{top:.25rem;transform:translateY(0);font-size:.75rem}.field-input.svelte-1jqaznb.svelte-1jqaznb{flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;text-overflow:ellipsis;padding:1rem 0 0 0;border:none;outline:none;border-radius:0}.field-upload.svelte-1jqaznb.svelte-1jqaznb{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0;opacity:0}.field-upload-container.svelte-1jqaznb.svelte-1jqaznb{position:relative;display:flex;padding:0 .75rem;height:100%;overflow:hidden;flex:1}.field-icons.svelte-1jqaznb.svelte-1jqaznb{display:flex;align-items:center;gap:.375rem}.field-icon.svelte-1jqaznb.svelte-1jqaznb{display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;border-radius:50%;cursor:pointer}.field-icon.svelte-1jqaznb.svelte-1jqaznb:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-1jqaznb.svelte-1jqaznb{display:none}.field-icon-upload.svelte-1jqaznb.svelte-1jqaznb{position:relative}.field-icon.svelte-1jqaznb button.svelte-1jqaznb{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.preview-button.svelte-1jqaznb.svelte-1jqaznb{position:relative}.preview.svelte-1jqaznb.svelte-1jqaznb{position:absolute;bottom:100%;right:0;max-width:400px;width:auto;background-color:var(--background-primary);border-radius:.5rem;box-shadow:0 3px 12px 3px rgba(0,0,0,.16)}")}function K(t){let e,a,d,h,r;return{c(){e=p("img"),n(e,"class","preview svelte-1jqaznb"),J(e.src,a=t[6]?t[7]:t[0])||n(e,"src",a),n(e,"alt","preview"),e.hidden=d=!t[0]&&!t[7]},m(s,f){P(s,e,f),h||(r=[le(ie.call(null,e)),j(e,"click_outside",t[20])],h=!0)},p(s,f){f&193&&!J(e.src,a=s[6]?s[7]:s[0])&&n(e,"src",a),f&129&&d!==(d=!s[0]&&!s[7])&&(e.hidden=d)},d(s){s&&_(e),h=!1,D(r)}}}function oe(t){let e,a,d,h,r,s,f,v,m,b,q,$,z,F,L,g,w,V,C,x,y,H,T,c=t[8]&&K(t);return{c(){e=p("div"),a=p("div"),d=p("span"),h=I(),r=p("span"),s=p("input"),f=I(),v=p("div"),m=p("div"),b=p("input"),$=I(),z=E("svg"),F=E("path"),L=I(),g=p("div"),w=p("button"),w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',V=I(),c&&c.c(),C=I(),x=p("div"),y=p("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',n(d,"class","field-label svelte-1jqaznb"),M(d,"move",t[5]||t[0]),n(s,"class","field-input svelte-1jqaznb"),n(s,"type","text"),n(s,"name",t[3]),n(s,"id",t[2]),s.disabled=t[6],n(r,"class","field-upload-container svelte-1jqaznb"),n(b,"type","file"),n(b,"class","field-upload svelte-1jqaznb"),n(b,"accept",q=t[4].acceptedFiles?t[4].acceptedFiles:"image/png, image/jpeg"),n(F,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),n(z,"xmlns","http://www.w3.org/2000/svg"),n(z,"height","1em"),n(z,"viewBox","0 0 512 512"),n(m,"class","field-icon field-icon-upload svelte-1jqaznb"),n(w,"class","svelte-1jqaznb"),n(g,"class","field-icon preview-button svelte-1jqaznb"),M(g,"hidden",!t[6]),n(y,"class","svelte-1jqaznb"),n(x,"class","field-icon svelte-1jqaznb"),M(x,"hidden",!t[6]),n(v,"class","field-icons svelte-1jqaznb"),n(a,"class","field svelte-1jqaznb")},m(l,u){P(l,e,u),o(e,a),o(a,d),d.innerHTML=t[1],o(a,h),o(a,r),o(r,s),R(s,t[0]),o(a,f),o(a,v),o(v,m),o(m,b),o(m,$),o(m,z),o(z,F),o(v,L),o(v,g),o(g,w),o(g,V),c&&c.m(g,null),o(v,C),o(v,x),o(x,y),H||(T=[j(s,"focus",t[13]),j(s,"blur",t[14]),j(s,"input",t[15]),j(b,"change",t[16]),j(b,"focus",t[17]),j(b,"blur",t[18]),j(w,"click",U(t[19])),j(y,"click",U(t[21]))],H=!0)},p(l,[u]){u&2&&(d.innerHTML=l[1]),u&33&&M(d,"move",l[5]||l[0]),u&8&&n(s,"name",l[3]),u&4&&n(s,"id",l[2]),u&64&&(s.disabled=l[6]),u&1&&s.value!==l[0]&&R(s,l[0]),u&16&&q!==(q=l[4].acceptedFiles?l[4].acceptedFiles:"image/png, image/jpeg")&&n(b,"accept",q),l[8]?c?c.p(l,u):(c=K(l),c.c(),c.m(g,null)):c&&(c.d(1),c=null),u&64&&M(g,"hidden",!l[6]),u&64&&M(x,"hidden",!l[6])},i:Y,o:Y,d(l){l&&_(e),c&&c.d(),H=!1,D(T)}}}function ce(t,e,a){let{label:d="Upload a file"}=e,{attachedInternals:h}=e,{value:r=""}=e,{id:s=""}=e,{name:f=""}=e,v=!1,m=!1,b="",q=null,$=!1,{service:z}=e;const F=()=>r,L=ne();async function g(){if(m)try{a(0,r=await z.uploadFile(q))}catch(i){console.log(i)}return r}async function w(i){a(6,m=!0),a(0,r=i.target.value),q=i.target.files[0];const A=await V(q);a(7,b=A)}const V=i=>new Promise((A,G)=>{const B=new FileReader;B.readAsDataURL(i),B.onload=()=>A(B.result),B.onerror=N=>G(N)}),C=()=>a(5,v=!0),x=()=>a(5,v=!1);function y(){r=this.value,a(0,r)}const H=i=>{w(i)},T=()=>a(5,v=!0),c=()=>a(5,v=!1),l=()=>a(8,$=!$),u=()=>a(8,$=!1),S=()=>{a(6,m=!1),a(7,b=""),a(0,r="")};return t.$$set=i=>{"label"in i&&a(1,d=i.label),"attachedInternals"in i&&a(10,h=i.attachedInternals),"value"in i&&a(0,r=i.value),"id"in i&&a(2,s=i.id),"name"in i&&a(3,f=i.name),"service"in i&&a(4,z=i.service)},t.$$.update=()=>{t.$$.dirty&1025&&(h.checkValidity(),h.setFormValue(r),L("value",{value:r}))},[r,d,s,f,z,v,m,b,$,w,h,F,g,C,x,y,H,T,c,l,u,S]}class O extends ee{constructor(e){super(),te(this,e,ce,oe,ae,{label:1,attachedInternals:10,value:0,id:2,name:3,service:4,getValue:11,save:12},re)}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),k()}get attachedInternals(){return this.$$.ctx[10]}set attachedInternals(e){this.$$set({attachedInternals:e}),k()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),k()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),k()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),k()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),k()}get getValue(){return this.$$.ctx[11]}get save(){return this.$$.ctx[12]}}customElements.define("jp-image-upload",W(O,{label:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,t=>{var e;return e=class extends t{constructor(){super(),this.attachedInternals=this.attachInternals()}},Q(e,"formAssociated",!0),e}));export{O as default};
