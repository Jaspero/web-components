var X=Object.defineProperty,Z=(t,e,s)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,N=(t,e,s)=>(Z(t,typeof e!="symbol"?e+"":e,s),s);import{c as Q,S as ee,i as te,f as M,s as se,a as ie,e as u,b as j,E as P,d as l,t as E,g as R,h as n,I as U,o as w,J as Y,n as _,j as D,K as J,k as le,L as K,M as ae}from"./svelte.js";import"./index2.js";import{c as ce}from"./clickOutside.js";function re(t){ie(t,"svelte-45fxcp",`.field.svelte-45fxcp.svelte-45fxcp{position:relative;display:flex;align-items:center;text-align:left;width:100%;height:3rem;padding-right:0.75rem;-webkit-user-select:none;-moz-user-select:none;user-select:none;gap:0.75rem;background-color:var(--background-primary);border:1px solid var(--border-primary);border-radius:0.25rem}.field.svelte-45fxcp.svelte-45fxcp:focus-within{border-color:var(--primary-color);box-shadow:inset 0 0 0 1px var(--primary-color)}.field-label.svelte-45fxcp.svelte-45fxcp{position:absolute;top:50%;left:0.75rem;transform:translateY(-50%);font-size:1rem;transition:transform 0.3s,
      top 0.3s,
      font-size 0.3s}.field-label.move.svelte-45fxcp.svelte-45fxcp{top:0.25rem;transform:translateY(0);font-size:0.75rem}.field-input.svelte-45fxcp.svelte-45fxcp{flex:auto;width:10rem;height:100%;font-size:1rem;white-space:nowrap;background:transparent;overflow:hidden;text-overflow:ellipsis;padding:1rem 0 0 0;border:none;outline:none;border-radius:0}.field-upload.svelte-45fxcp.svelte-45fxcp{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0;opacity:0}.field-upload-container.svelte-45fxcp.svelte-45fxcp{position:relative;display:flex;padding:0 0.75rem;height:100%;overflow:hidden;flex:1}.field-icons.svelte-45fxcp.svelte-45fxcp{display:flex;align-items:center;gap:0.375rem}.field-icon.svelte-45fxcp.svelte-45fxcp{display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;border-radius:50%;cursor:pointer}.field-icon.svelte-45fxcp.svelte-45fxcp:hover{background:var(--background-tertiary)}.field-icon.hidden.svelte-45fxcp.svelte-45fxcp{display:none}.field-icon-upload.svelte-45fxcp.svelte-45fxcp{position:relative}.field-icon.svelte-45fxcp button.svelte-45fxcp{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.preview-button.svelte-45fxcp.svelte-45fxcp{position:relative}.preview.svelte-45fxcp.svelte-45fxcp{position:absolute;bottom:100%;right:0;max-width:400px;width:auto;background-color:var(--background-primary);border-radius:0.5rem;box-shadow:0 3px 12px 3px rgba(0, 0, 0, 0.16)}`)}function O(t){let e,s,d,h,r;return{c(){e=u("img"),l(e,"class","preview svelte-45fxcp"),K(e.src,s=t[6]?t[7]:t[0])||l(e,"src",s),l(e,"alt","preview"),e.hidden=d=!t[0]&&!t[7]},m(i,g){R(i,e,g),h||(r=[ae(ce.call(null,e)),w(e,"click_outside",t[20])],h=!0)},p(i,g){g&193&&!K(e.src,s=i[6]?i[7]:i[0])&&l(e,"src",s),g&129&&d!==(d=!i[0]&&!i[7])&&(e.hidden=d)},d(i){i&&D(e),h=!1,J(r)}}}function ne(t){let e,s,d,h,r,i,g,p,x,f,$,k,b,F,V,m,y,C,T,I,z,H,B,o=t[8]&&O(t);return{c(){e=u("div"),s=u("div"),d=u("span"),h=j(),r=u("span"),i=u("input"),g=j(),p=u("div"),x=u("div"),f=u("input"),k=j(),b=P("svg"),F=P("path"),V=j(),m=u("div"),y=u("button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"></path></svg>',C=j(),o&&o.c(),T=j(),I=u("div"),z=u("button"),z.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"></path></svg>',l(d,"class","field-label svelte-45fxcp"),E(d,"move",t[5]||t[0]),l(i,"class","field-input svelte-45fxcp"),l(i,"type","text"),l(i,"name",t[3]),l(i,"id",t[2]),i.disabled=t[6],l(r,"class","field-upload-container svelte-45fxcp"),l(f,"type","file"),l(f,"class","field-upload svelte-45fxcp"),l(f,"accept",$=t[4].acceptedFiles?t[4].acceptedFiles:"image/png, image/jpeg"),l(F,"d","M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"),l(b,"xmlns","http://www.w3.org/2000/svg"),l(b,"height","1em"),l(b,"viewBox","0 0 512 512"),l(x,"class","field-icon field-icon-upload svelte-45fxcp"),l(y,"class","svelte-45fxcp"),l(m,"class","field-icon preview-button svelte-45fxcp"),E(m,"hidden",!t[6]&&!t[0]),l(z,"class","svelte-45fxcp"),l(I,"class","field-icon svelte-45fxcp"),l(p,"class","field-icons svelte-45fxcp"),l(s,"class","field svelte-45fxcp")},m(a,v){R(a,e,v),n(e,s),n(s,d),d.innerHTML=t[1],n(s,h),n(s,r),n(r,i),U(i,t[0]),n(s,g),n(s,p),n(p,x),n(x,f),n(x,k),n(x,b),n(b,F),n(p,V),n(p,m),n(m,y),n(m,C),o&&o.m(m,null),n(p,T),n(p,I),n(I,z),H||(B=[w(i,"focus",t[13]),w(i,"blur",t[14]),w(i,"input",t[15]),w(f,"change",t[16]),w(f,"focus",t[17]),w(f,"blur",t[18]),w(y,"click",Y(t[19])),w(z,"click",Y(t[21]))],H=!0)},p(a,[v]){v&2&&(d.innerHTML=a[1]),v&33&&E(d,"move",a[5]||a[0]),v&8&&l(i,"name",a[3]),v&4&&l(i,"id",a[2]),v&64&&(i.disabled=a[6]),v&1&&i.value!==a[0]&&U(i,a[0]),v&16&&$!==($=a[4].acceptedFiles?a[4].acceptedFiles:"image/png, image/jpeg")&&l(f,"accept",$),a[8]?o?o.p(a,v):(o=O(a),o.c(),o.m(m,null)):o&&(o.d(1),o=null),v&65&&E(m,"hidden",!a[6]&&!a[0])},i:_,o:_,d(a){a&&D(e),o&&o.d(),H=!1,J(B)}}}function oe(t,e,s){let{label:d="Upload a file"}=e,{attachedInternals:h}=e,{value:r=""}=e,{id:i=""}=e,{name:g=""}=e,p=!1,x=!1,f="",$=null,k=!1,{service:b}=e;const F=()=>r,V=le();async function m(c){if(x)try{s(0,r=await b.uploadFile($,c))}catch(L){console.log(L)}return r}async function y(c){s(6,x=!0),s(0,r=c.target.value),$=c.target.files[0];const L=await C($);s(7,f=L)}const C=c=>new Promise((L,G)=>{const A=new FileReader;A.readAsDataURL(c),A.onload=()=>L(A.result),A.onerror=W=>G(W)}),T=()=>s(5,p=!0),I=()=>s(5,p=!1);function z(){r=this.value,s(0,r)}const H=c=>{y(c)},B=()=>s(5,p=!0),o=()=>s(5,p=!1),a=()=>s(8,k=!k),v=()=>s(8,k=!1),q=()=>{s(6,x=!1),s(7,f=""),s(0,r="")};return t.$$set=c=>{"label"in c&&s(1,d=c.label),"attachedInternals"in c&&s(10,h=c.attachedInternals),"value"in c&&s(0,r=c.value),"id"in c&&s(2,i=c.id),"name"in c&&s(3,g=c.name),"service"in c&&s(4,b=c.service)},t.$$.update=()=>{t.$$.dirty&1025&&(h.checkValidity(),h.setFormValue(r),V("value",{value:r}))},[r,d,i,g,b,p,x,f,k,y,h,F,m,T,I,z,H,B,o,a,v,q]}class S extends ee{constructor(e){super(),te(this,e,oe,ne,se,{label:1,attachedInternals:10,value:0,id:2,name:3,service:4,getValue:11,save:12},re)}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),M()}get attachedInternals(){return this.$$.ctx[10]}set attachedInternals(e){this.$$set({attachedInternals:e}),M()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),M()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),M()}get name(){return this.$$.ctx[3]}set name(e){this.$$set({name:e}),M()}get service(){return this.$$.ctx[4]}set service(e){this.$$set({service:e}),M()}get getValue(){return this.$$.ctx[11]}get save(){return this.$$.ctx[12]}}customElements.define("jp-image-upload",Q(S,{label:{},attachedInternals:{},value:{},id:{},name:{},service:{}},[],["getValue","save"],!1,t=>{var e;return e=class extends t{constructor(){super(),this.attachedInternals=this.attachInternals()}},N(e,"formAssociated",!0),e}));export{S as default};
