var Se=Object.defineProperty,Ie=(l,e,t)=>e in l?Se(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Te=(l,e,t)=>Ie(l,typeof e!="symbol"?e+"":e,t);import{c as Ae,S as Oe,i as Ee,o as V,s as Ce,l as L,e as A,z as ee,T as He,d as h,A as w,f as B,p as k,Y as te,U as Le,m as z,N as se,B as le,t as Be,j as De,k as D,V as Ke,r as ie,x as Ne,G as Ue,w as Ye,C as ae,q as ze,$ as Ge,a0 as Je,n as ne,y as Pe,O as _e}from"./svelte.js";import"./index.js";import{clickOutside as Re}from"./click-outside.js";import{c as We}from"./clear.js";import{A as Fe,c as Qe}from"./checkmark.js";function re(l,e,t){const n=l.slice();return n[42]=e[t],n[43]=e,n[44]=t,n}function ce(l){let e;return{c(){e=A("div"),h(e,"class","label")},m(t,n){B(t,e,n),e.innerHTML=l[8]},p(t,n){n[0]&256&&(e.innerHTML=t[8])},d(t){t&&D(e)}}}function ue(l){let e,t,n;return{c(){e=A("button"),h(e,"class","jp-multiselect-clear")},m(r,b){B(r,e,b),e.innerHTML=We,t||(n=z(e,"click",l[18]),t=!0)},p:Ye,d(r){r&&D(e),t=!1,n()}}}function de(l){let e;return{c(){e=A("span"),h(e,"class","jp-multiselect-select-label"),w(e,"jp-multiselect-select-label-move",l[1]||l[11])},m(t,n){B(t,e,n),e.innerHTML=l[8]},p(t,n){n[0]&256&&(e.innerHTML=t[8]),n[0]&2050&&w(e,"jp-multiselect-select-label-move",t[1]||t[11])},d(t){t&&D(e)}}}function oe(l){let e;return{c(){e=A("span"),h(e,"class","jp-multiselect-select-hint")},m(t,n){B(t,e,n),e.innerHTML=l[4]},p(t,n){n[0]&16&&(e.innerHTML=t[4])},d(t){t&&D(e)}}}function me(l){let e,t,n=[],r=new Map,b,j,i=ae(l[0]);const q=d=>d[42];for(let d=0;d<i.length;d+=1){let p=re(l,i,d),f=q(p);r.set(f,n[d]=$e(f,p))}return{c(){e=A("div"),t=A("div");for(let d=0;d<n.length;d+=1)n[d].c();h(t,"class","jp-multiselect-menu"),h(t,"style",l[13]),h(e,"class","jp-multiselect-overlay")},m(d,p){B(d,e,p),k(e,t);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);b||(j=[ze(Re.call(null,t)),z(t,"click_outside",l[35]),z(t,"keydown",l[20])],b=!0)},p(d,p){p[0]&81921&&(i=ae(d[0]),n=Ge(n,p,q,1,d,i,r,t,Je,$e,null,re)),p[0]&8192&&h(t,"style",d[13])},d(d){d&&D(e);for(let p=0;p<n.length;p+=1)n[p].d();b=!1,ie(j)}}}function pe(l){let e,t;return{c(){e=new _e(!1),t=Pe(),e.a=t},m(n,r){e.m(Qe,n,r),B(n,t,r)},d(n){n&&(D(t),e.d())}}}function $e(l,e){let t,n,r=(e[42].label?e[42].label:e[42].value)+"",b,j,i,q,d=e[44],p,f,$=e[42].selected&&pe();const K=()=>e[33](t,d),S=()=>e[33](null,d);function Y(){return e[34](e[42],e[43],e[44])}return{key:l,first:null,c(){t=A("button"),n=A("span"),b=ee(r),j=L(),$&&$.c(),i=L(),h(t,"type","button"),h(t,"class","jp-multiselect-menu-button"),t.disabled=q=e[42].disabled,w(t,"jp-multiselect-menu-button-selected",e[42].selected),w(t,"jp-multiselect-menu-button-disabled",e[42].disabled),this.first=t},m(I,m){B(I,t,m),k(t,n),k(n,b),k(t,j),$&&$.m(t,null),k(t,i),K(),p||(f=z(t,"click",se(Y)),p=!0)},p(I,m){e=I,m[0]&1&&r!==(r=(e[42].label?e[42].label:e[42].value)+"")&&le(b,r),e[42].selected?$||($=pe(),$.c(),$.m(t,i)):$&&($.d(1),$=null),m[0]&1&&q!==(q=e[42].disabled)&&(t.disabled=q),d!==e[44]&&(S(),d=e[44],K()),m[0]&1&&w(t,"jp-multiselect-menu-button-selected",e[42].selected),m[0]&1&&w(t,"jp-multiselect-menu-button-disabled",e[42].disabled)},d(I){I&&D(t),$&&$.d(),S(),p=!1,f()}}}function Xe(l){let e,t,n,r,b,j,i,q,d,p=(l[15]||"")+"",f,$,K,S,Y,I,m,G,R,g=l[8]&&l[9]=="outside"&&ce(l),x=l[10]&&l[17]&&ue(l),y=l[8]&&l[9]=="inside"&&de(l);S=new Fe({props:{open:l[11]}});let v=l[4]&&oe(l),M=l[11]&&me(l);return{c(){g&&g.c(),e=L(),t=A("div"),x&&x.c(),n=L(),r=A("input"),j=L(),i=A("button"),y&&y.c(),q=L(),d=A("span"),f=ee(p),K=L(),He(S.$$.fragment),Y=L(),v&&v.c(),I=L(),M&&M.c(),h(r,"class","jp-multiselect-input"),h(r,"tabindex","-1"),r.required=l[3],h(r,"id",l[5]),h(r,"name",l[6]),h(r,"autocomplete",b=l[7]||l[6]),w(r,"jp-multiselect-input-required",l[3]),h(d,"class",$=`jp-multiselect-select-option ${l[9]=="outside"||!l[8]?"":"jp-multiselect-select-option-padding"}`),w(d,"has-clear",l[10]),h(i,"type","button"),h(i,"class","jp-multiselect-select"),i.disabled=l[2],w(i,"jp-multiselect-select-toggled",l[11]),w(i,"jp-multiselect-select-disabled",l[2]),h(t,"class","jp-multiselect-wrapper"),w(t,"jp-multiselect-has-hint",l[4])},m(a,c){g&&g.m(a,c),B(a,e,c),B(a,t,c),x&&x.m(t,null),k(t,n),k(t,r),te(r,l[1]),k(t,j),k(t,i),y&&y.m(i,null),k(i,q),k(i,d),k(d,f),k(i,K),Le(S,i,null),l[32](i),k(t,Y),v&&v.m(t,null),k(t,I),M&&M.m(t,null),m=!0,G||(R=[z(r,"input",l[31]),z(i,"click",se(l[19])),z(i,"keydown",l[20])],G=!0)},p(a,c){a[8]&&a[9]=="outside"?g?g.p(a,c):(g=ce(a),g.c(),g.m(e.parentNode,e)):g&&(g.d(1),g=null),a[10]&&a[17]?x?x.p(a,c):(x=ue(a),x.c(),x.m(t,n)):x&&(x.d(1),x=null),(!m||c[0]&8)&&(r.required=a[3]),(!m||c[0]&32)&&h(r,"id",a[5]),(!m||c[0]&64)&&h(r,"name",a[6]),(!m||c[0]&192&&b!==(b=a[7]||a[6]))&&h(r,"autocomplete",b),c[0]&2&&r.value!==a[1]&&te(r,a[1]),(!m||c[0]&8)&&w(r,"jp-multiselect-input-required",a[3]),a[8]&&a[9]=="inside"?y?y.p(a,c):(y=de(a),y.c(),y.m(i,q)):y&&(y.d(1),y=null),(!m||c[0]&32768)&&p!==(p=(a[15]||"")+"")&&le(f,p),(!m||c[0]&768&&$!==($=`jp-multiselect-select-option ${a[9]=="outside"||!a[8]?"":"jp-multiselect-select-option-padding"}`))&&h(d,"class",$),(!m||c[0]&1792)&&w(d,"has-clear",a[10]);const J={};c[0]&2048&&(J.open=a[11]),S.$set(J),(!m||c[0]&4)&&(i.disabled=a[2]),(!m||c[0]&2048)&&w(i,"jp-multiselect-select-toggled",a[11]),(!m||c[0]&4)&&w(i,"jp-multiselect-select-disabled",a[2]),a[4]?v?v.p(a,c):(v=oe(a),v.c(),v.m(t,I)):v&&(v.d(1),v=null),a[11]?M?M.p(a,c):(M=me(a),M.c(),M.m(t,null)):M&&(M.d(1),M=null),(!m||c[0]&16)&&w(t,"jp-multiselect-has-hint",a[4])},i(a){m||(Be(S.$$.fragment,a),m=!0)},o(a){De(S.$$.fragment,a),m=!1},d(a){a&&(D(e),D(t)),g&&g.d(a),x&&x.d(),y&&y.d(),Ke(S),l[32](null),v&&v.d(),M&&M.d(),G=!1,ie(R)}}}function Ze(l,e,t){let n,{attachedInternals:r}=e,{minSelects:b=0}=e,{maxSelects:j=null}=e,{options:i=[]}=e,{disabled:q=!1}=e,{required:d=!1}=e,{hint:p=""}=e,{value:f}=e,{internalValue:$=""}=e,{id:K=""}=e,{name:S=""}=e,{autocomplete:Y=""}=e,{label:I=""}=e,{labelType:m="inside"}=e,{showClear:G=!1}=e;const R=()=>i.filter(s=>s.selected).sort((s,o)=>s.selectedOrder-o.selectedOrder).map(s=>s.value);let{validationMessages:g={}}=e,{requiredValidationMessage:x}=e,{minselectsValidationMessage:y}=e,{maxselectsValidationMessage:v}=e,M=!1,a=!1,c,J,C=[],Q="",Z,X,P=0;const fe=Ne(),ge=()=>{r.reportValidity()};function be(){t(15,X=null),Array.isArray(i)&&t(0,i=i.map(s=>({...s,selected:!1,selectedOrder:null})))}function xe(){if(t(0,i=i.map(s=>({...s,selected:!1,selectedOrder:null}))),typeof f=="string"){const s=f.split(",");s.forEach((o,u)=>{const O=i[i.findIndex(N=>N.value==o)];O.selected=!0,O.selectedOrder=u}),t(16,P=s.length)}else f.forEach((s,o)=>{const u=i[i.findIndex(O=>O.value==s)];u.selected=!0,u.selectedOrder=o}),t(16,P=f.length)}function W(s){if(s&&s.target&&s.target.closest(".menu"))return;const o=c.getBoundingClientRect(),u=window.innerHeight-o.bottom,O=300;let N="";u<O?N=`
        width: ${o.width}px;
        bottom: ${window.innerHeight-o.top}px;
        left: ${o.left}px;
      `:N=`
        width: ${o.width}px;
        top: ${o.bottom}px;
        left: ${o.left}px;
      `,t(13,J=N),t(11,a=!a),setTimeout(a?()=>{var T;const E=i.findIndex(_=>!_.disabled);E!==-1&&((T=C[E])==null||T.focus())}:()=>{var T;M?(T=c.nextElementSibling)==null||T.focus():c?.focus()},10)}function F(s,o){if(o==="next"){for(let u=s+1;u<i.length;u++)if(!i[u].disabled)return u}else if(o==="previous"){for(let u=s-1;u>=0;u--)if(!i[u].disabled)return u}return s}function ye(s){var o,u,O,N;const T=C.findIndex(_=>_===document.activeElement);let E;if(a){if(s.key==="Escape"){W(),c.focus();return}const _=s.key==="Home"||s.key==="ArrowUp"&&s.metaKey,ke=s.key==="End"||s.key==="ArrowDown"&&s.metaKey;if(_){s.preventDefault();const U=i.findIndex(H=>!H.disabled);U!==-1&&((o=C[U])==null||o.focus());return}if(ke){s.preventDefault();const U=i.slice().reverse().findIndex(qe=>!qe.disabled),H=U!==-1?i.length-1-U:-1;H!==-1&&((u=C[H])==null||u.focus());return}if(["ArrowDown","ArrowUp"].includes(s.key)&&(s.preventDefault(),s.key==="ArrowUp"?E=F(T,"previous"):E=F(T,"next"),(O=C[E])==null||O.focus()),s.key==="Tab"){if(s.preventDefault(),M=!0,s.shiftKey){if(E=F(T,"previous"),T===E){W(),c?.focus();return}}else if(E=F(T,"next"),T===E){W(),c?.focus();return}(N=C[E])==null||N.focus()}if(/^[a-z\d]$/i.test(s.key)){clearTimeout(Z),Q+=s.key;const U=i.map(H=>H.label?H.label:H.value).findIndex(H=>H.toLowerCase().includes(Q.toLowerCase()));U!==-1&&C[U].focus(),Z=setTimeout(()=>{Q=""},500)}}}Ue(()=>{typeof i=="string"&&t(0,i=JSON.parse(i)),j||t(21,j=i.length),t(0,i=i.map(s=>(s.selected==null&&(s.selected=!1),s.selectedOrder=null,s)))});function ve(){$=this.value,t(1,$),t(0,i),t(3,d),t(22,r),t(27,x),t(26,g),t(12,c),t(23,b),t(28,y),t(21,j),t(29,v)}function Ve(s){ne[s?"unshift":"push"](()=>{c=s,t(12,c)})}function Me(s,o){ne[s?"unshift":"push"](()=>{C[o]=s,t(14,C)})}const we=(s,o,u)=>{t(0,o[u].selected=!s.selected,i),s.selected?t(0,o[u].selectedOrder=t(16,P++,P),i):t(0,o[u].selectedOrder=null,i)},je=()=>t(11,a=!1);return l.$$set=s=>{"attachedInternals"in s&&t(22,r=s.attachedInternals),"minSelects"in s&&t(23,b=s.minSelects),"maxSelects"in s&&t(21,j=s.maxSelects),"options"in s&&t(0,i=s.options),"disabled"in s&&t(2,q=s.disabled),"required"in s&&t(3,d=s.required),"hint"in s&&t(4,p=s.hint),"value"in s&&t(24,f=s.value),"internalValue"in s&&t(1,$=s.internalValue),"id"in s&&t(5,K=s.id),"name"in s&&t(6,S=s.name),"autocomplete"in s&&t(7,Y=s.autocomplete),"label"in s&&t(8,I=s.label),"labelType"in s&&t(9,m=s.labelType),"showClear"in s&&t(10,G=s.showClear),"validationMessages"in s&&t(26,g=s.validationMessages),"requiredValidationMessage"in s&&t(27,x=s.requiredValidationMessage),"minselectsValidationMessage"in s&&t(28,y=s.minselectsValidationMessage),"maxselectsValidationMessage"in s&&t(29,v=s.maxselectsValidationMessage)},l.$$.update=()=>{if(l.$$.dirty[0]&2048&&(a?document.documentElement.style.overflowY="hidden":document.documentElement.style.overflowY=""),l.$$.dirty[0]&1021317129&&Array.isArray(i)){const s=i.filter(u=>u.selected).length;s==0&&d?r.setValidity({customError:!0},x||g.required||"At least one item needs to be checked.",c):s<b?r.setValidity({customError:!0},y||g.minselects||"Below limit checks.",c):s>j?r.setValidity({customError:!0},v||g.maxselects||"Above limit checks.",c):r.setValidity({}),r.checkValidity();const o=i.filter(u=>u.selected).sort((u,O)=>u.selectedOrder-O.selectedOrder);t(1,$=o.map(u=>u.value).join(",")),t(15,X=o.map(u=>u.label?u.label:u.value)),fe("value",o.map(u=>u.value))}l.$$.dirty[0]&1&&t(17,n=Array.isArray(i)&&i.some(s=>s.selected)),l.$$.dirty[0]&16777216&&f&&xe()},[i,$,q,d,p,K,S,Y,I,m,G,a,c,J,C,X,P,n,be,W,ye,j,r,b,f,R,g,x,y,v,ge,ve,Ve,Me,we,je]}class he extends Oe{constructor(e){super(),Ee(this,e,Ze,Xe,Ce,{attachedInternals:22,minSelects:23,maxSelects:21,options:0,disabled:2,required:3,hint:4,value:24,internalValue:1,id:5,name:6,autocomplete:7,label:8,labelType:9,showClear:10,getValue:25,validationMessages:26,requiredValidationMessage:27,minselectsValidationMessage:28,maxselectsValidationMessage:29,reportValidity:30},null,[-1,-1])}get attachedInternals(){return this.$$.ctx[22]}set attachedInternals(e){this.$$set({attachedInternals:e}),V()}get minSelects(){return this.$$.ctx[23]}set minSelects(e){this.$$set({minSelects:e}),V()}get maxSelects(){return this.$$.ctx[21]}set maxSelects(e){this.$$set({maxSelects:e}),V()}get options(){return this.$$.ctx[0]}set options(e){this.$$set({options:e}),V()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),V()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),V()}get hint(){return this.$$.ctx[4]}set hint(e){this.$$set({hint:e}),V()}get value(){return this.$$.ctx[24]}set value(e){this.$$set({value:e}),V()}get internalValue(){return this.$$.ctx[1]}set internalValue(e){this.$$set({internalValue:e}),V()}get id(){return this.$$.ctx[5]}set id(e){this.$$set({id:e}),V()}get name(){return this.$$.ctx[6]}set name(e){this.$$set({name:e}),V()}get autocomplete(){return this.$$.ctx[7]}set autocomplete(e){this.$$set({autocomplete:e}),V()}get label(){return this.$$.ctx[8]}set label(e){this.$$set({label:e}),V()}get labelType(){return this.$$.ctx[9]}set labelType(e){this.$$set({labelType:e}),V()}get showClear(){return this.$$.ctx[10]}set showClear(e){this.$$set({showClear:e}),V()}get getValue(){return this.$$.ctx[25]}get validationMessages(){return this.$$.ctx[26]}set validationMessages(e){this.$$set({validationMessages:e}),V()}get requiredValidationMessage(){return this.$$.ctx[27]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),V()}get minselectsValidationMessage(){return this.$$.ctx[28]}set minselectsValidationMessage(e){this.$$set({minselectsValidationMessage:e}),V()}get maxselectsValidationMessage(){return this.$$.ctx[29]}set maxselectsValidationMessage(e){this.$$set({maxselectsValidationMessage:e}),V()}get reportValidity(){return this.$$.ctx[30]}}try{customElements.define("jp-multiselect",Ae(he,{attachedInternals:{},minSelects:{},maxSelects:{},options:{},disabled:{type:"Boolean"},required:{type:"Boolean"},hint:{},value:{},internalValue:{},id:{},name:{},autocomplete:{},label:{},labelType:{},showClear:{type:"Boolean"},validationMessages:{},requiredValidationMessage:{},minselectsValidationMessage:{},maxselectsValidationMessage:{}},[],["getValue","reportValidity"],!1,l=>{var e;return e=class extends l{constructor(){super(),this.attachedInternals=this.attachInternals()}},Te(e,"formAssociated",!0),e}));}catch{};export{he as default};
//# sourceMappingURL=multiselect.wc.js.map
