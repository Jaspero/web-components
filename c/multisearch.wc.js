var Ye=Object.defineProperty,Ke=(n,e,t)=>e in n?Ye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pe=(n,e,t)=>Ke(n,typeof e!="symbol"?e+"":e,t);import{c as ze,S as We,i as _e,o as S,s as Fe,l as G,e as V,D as X,W as Re,d as h,H as U,f as E,p as v,E as J,X as Xe,m as O,T as ie,F as Q,t as Je,j as Qe,k as D,Y as Ze,r as re,G as et,z as fe,q as tt,a2 as lt,a3 as at,v as ce,n as ue,w as nt,O as st,x as it,a0 as rt}from"./svelte.js";import"./index.js";import{clickOutside as ct}from"./click-outside.js";import{A as ut,c as dt}from"./checkmark.js";function ge(n,e,t){const l=n.slice();return l[58]=e[t],l[59]=e,l[60]=t,l}function $e(n){let e;return{c(){e=V("div"),h(e,"class","jp-multisearch-label")},m(t,l){E(t,e,l),e.innerHTML=n[7]},p(t,l){l[0]&128&&(e.innerHTML=t[7])},d(t){t&&D(e)}}}function ot(n){let e;return{c(){e=V("span"),h(e,"class","jp-multisearch-select-label"),U(e,"jp-multisearch-select-label-move",n[0]||n[13])},m(t,l){E(t,e,l),e.innerHTML=n[7]},p(t,l){l[0]&128&&(e.innerHTML=t[7]),l[0]&8193&&U(e,"jp-multisearch-select-label-move",t[0]||t[13])},d(t){t&&D(e)}}}function mt(n){let e,t=n[1].LOADING+"",l;return{c(){e=V("span"),l=X(t),h(e,"class","jp-multisearch-select-label")},m(s,i){E(s,e,i),v(e,l)},p(s,i){i[0]&2&&t!==(t=s[1].LOADING+"")&&Q(l,t)},d(s){s&&D(e)}}}function ve(n){let e;return{c(){e=V("span"),h(e,"class","jp-multisearch-select-hint")},m(t,l){E(t,e,l),e.innerHTML=n[4]},p(t,l){l[0]&16&&(e.innerHTML=t[4])},d(t){t&&D(e)}}}function xe(n){let e,t,l,s,i=[],f=new Map,m,M,x,T,o=n[9].search&&be(n),k=fe(n[12]);const I=c=>c[58];for(let c=0;c<k.length;c+=1){let y=ge(n,k,c),H=I(y);f.set(H,i[c]=we(H,y))}let b=n[17]&&Se(),p=n[9].loadMore&&!n[17]&&Me(n);return{c(){e=V("div"),t=V("div"),o&&o.c(),l=G(),s=V("div");for(let c=0;c<i.length;c+=1)i[c].c();m=G(),b&&b.c(),M=G(),p&&p.c(),h(s,"class","jp-multisearch-menu-buttons"),h(t,"class","jp-multisearch-menu"),h(t,"style",n[19]),h(t,"role","dialog"),h(e,"class","jp-multisearch-overlay")},m(c,y){E(c,e,y),v(e,t),o&&o.m(t,null),v(t,l),v(t,s);for(let H=0;H<i.length;H+=1)i[H]&&i[H].m(s,null);v(s,m),b&&b.m(s,null),v(t,M),p&&p.m(t,null),x||(T=[tt(ct.call(null,t)),O(t,"click_outside",n[50]),O(t,"keydown",n[27])],x=!0)},p(c,y){c[9].search?o?o.p(c,y):(o=be(c),o.c(),o.m(t,l)):o&&(o.d(1),o=null),y[0]&1061888&&(k=fe(c[12]),i=lt(i,y,I,1,c,k,f,s,at,we,m,ge)),c[17]?b||(b=Se(),b.c(),b.m(s,null)):b&&(b.d(1),b=null),c[9].loadMore&&!c[17]?p?p.p(c,y):(p=Me(c),p.c(),p.m(t,null)):p&&(p.d(1),p=null),y[0]&524288&&h(t,"style",c[19])},d(c){c&&D(e),o&&o.d();for(let y=0;y<i.length;y+=1)i[y].d();b&&b.d(),p&&p.d(),x=!1,re(T)}}}function be(n){let e,t,l,s,i,f;return{c(){e=V("div"),t=V("span"),t.textContent="Search",l=G(),s=V("input"),h(t,"class","jp-multisearch-search-label"),U(t,"jp-multisearch-search-label-move",n[22]||n[18]),h(s,"name","search"),h(s,"type","text"),h(s,"class","jp-multisearch-search-input"),h(e,"class","jp-multisearch-search-field")},m(m,M){E(m,e,M),v(e,t),v(e,l),v(e,s),J(s,n[18]),i||(f=[O(s,"input",n[43]),O(s,"input",n[44]),O(s,"focus",n[45]),O(s,"blur",n[46])],i=!0)},p(m,M){M[0]&4456448&&U(t,"jp-multisearch-search-label-move",m[22]||m[18]),M[0]&262144&&s.value!==m[18]&&J(s,m[18])},d(m){m&&D(e),i=!1,re(f)}}}function ye(n){let e,t;return{c(){e=new rt(!1),t=nt(),e.a=t},m(l,s){e.m(dt,l,s),E(l,t,s)},d(l){l&&(D(t),e.d())}}}function we(n,e){let t,l,s=(e[58].label||e[58].value)+"",i,f,m,M=e[60],x,T,o=e[58].selected&&ye();const k=()=>e[47](t,M),I=()=>e[47](null,M);function b(){return e[48](e[58],e[59],e[60])}return{key:n,first:null,c(){t=V("button"),l=V("span"),i=X(s),f=G(),o&&o.c(),h(t,"type","button"),h(t,"class","jp-multisearch-menu-button"),t.disabled=m=e[58].disabled,U(t,"jp-multisearch-menu-button-selected",e[58].selected),this.first=t},m(p,c){E(p,t,c),v(t,l),v(l,i),v(t,f),o&&o.m(t,null),k(),x||(T=O(t,"click",ie(b)),x=!0)},p(p,c){e=p,c[0]&4096&&s!==(s=(e[58].label||e[58].value)+"")&&Q(i,s),e[58].selected?o||(o=ye(),o.c(),o.m(t,null)):o&&(o.d(1),o=null),c[0]&4096&&m!==(m=e[58].disabled)&&(t.disabled=m),M!==e[60]&&(I(),M=e[60],k()),c[0]&4096&&U(t,"jp-multisearch-menu-button-selected",e[58].selected)},d(p){p&&D(t),o&&o.d(),I(),x=!1,T()}}}function Se(n){let e;return{c(){e=V("span"),e.textContent="Loading...",ce(e,"display","block"),ce(e,"padding","0.75rem"),ce(e,"text-align","center")},m(t,l){E(t,e,l)},d(t){t&&D(e)}}}function Me(n){let e;function t(i,f){return i[16]?ht:pt}let l=t(n),s=l(n);return{c(){e=V("div"),s.c(),h(e,"class","jp-multisearch-loadmore")},m(i,f){E(i,e,f),s.m(e,null)},p(i,f){l===(l=t(i))&&s?s.p(i,f):(s.d(1),s=l(i),s&&(s.c(),s.m(e,null)))},d(i){i&&D(e),s.d()}}}function ht(n){let e,t=n[1].LOADING+"",l;return{c(){e=V("button"),l=X(t),h(e,"type","button"),e.disabled=!0},m(s,i){E(s,e,i),v(e,l)},p(s,i){i[0]&2&&t!==(t=s[1].LOADING+"")&&Q(l,t)},d(s){s&&D(e)}}}function pt(n){let e,t,l;return{c(){e=V("button"),e.textContent="Load more",h(e,"type","button")},m(s,i){E(s,e,i),t||(l=O(e,"click",st(ie(n[49]))),t=!0)},p:it,d(s){s&&D(e),t=!1,l()}}}function ft(n){let e,t,l,s,i,f,m,M=(n[21]||"")+"",x,T,o,k,I,b,p,c,y,H,q=n[7]&&n[8]=="outside"&&$e(n);function z(u,g){if(u[15])return mt;if(u[7]&&u[8]=="inside")return ot}let K=z(n),$=K&&K(n);k=new ut({props:{open:n[13]}});let w=n[4]&&ve(n),j=n[13]&&xe(n);return{c(){q&&q.c(),e=G(),t=V("div"),l=V("input"),s=G(),i=V("button"),$&&$.c(),f=G(),m=V("span"),x=X(M),o=G(),Re(k.$$.fragment),b=G(),w&&w.c(),p=G(),j&&j.c(),h(l,"class","jp-multisearch-hidden-input"),h(l,"tabindex","-1"),h(l,"id",n[5]),h(l,"name",n[6]),l.required=n[3],h(m,"class",T=`jp-multisearch-select-option ${n[8]=="outside"||!n[7]?"":"jp-multisearch-select-option-padding"}`),h(i,"type","button"),h(i,"class","jp-multisearch-select"),i.disabled=I=n[2]||n[15],U(i,"jp-multisearch-select-toggled",n[13]),h(t,"class","jp-multisearch-wrapper"),U(t,"jp-multisearch-has-hint",n[4])},m(u,g){q&&q.m(u,g),E(u,e,g),E(u,t,g),v(t,l),n[39](l),J(l,n[0]),v(t,s),v(t,i),$&&$.m(i,null),v(i,f),v(i,m),v(m,x),v(i,o),Xe(k,i,null),n[41](i),v(t,b),w&&w.m(t,null),v(t,p),j&&j.m(t,null),c=!0,y||(H=[O(l,"input",n[40]),O(i,"click",ie(n[26])),O(i,"click",n[42]),O(i,"keydown",n[27])],y=!0)},p(u,g){u[7]&&u[8]=="outside"?q?q.p(u,g):(q=$e(u),q.c(),q.m(e.parentNode,e)):q&&(q.d(1),q=null),(!c||g[0]&32)&&h(l,"id",u[5]),(!c||g[0]&64)&&h(l,"name",u[6]),(!c||g[0]&8)&&(l.required=u[3]),g[0]&1&&l.value!==u[0]&&J(l,u[0]),K===(K=z(u))&&$?$.p(u,g):($&&$.d(1),$=K&&K(u),$&&($.c(),$.m(i,f))),(!c||g[0]&2097152)&&M!==(M=(u[21]||"")+"")&&Q(x,M),(!c||g[0]&384&&T!==(T=`jp-multisearch-select-option ${u[8]=="outside"||!u[7]?"":"jp-multisearch-select-option-padding"}`))&&h(m,"class",T);const Y={};g[0]&8192&&(Y.open=u[13]),k.$set(Y),(!c||g[0]&32772&&I!==(I=u[2]||u[15]))&&(i.disabled=I),(!c||g[0]&8192)&&U(i,"jp-multisearch-select-toggled",u[13]),u[4]?w?w.p(u,g):(w=ve(u),w.c(),w.m(t,p)):w&&(w.d(1),w=null),u[13]?j?j.p(u,g):(j=xe(u),j.c(),j.m(t,null)):j&&(j.d(1),j=null),(!c||g[0]&16)&&U(t,"jp-multisearch-has-hint",u[4])},i(u){c||(Je(k.$$.fragment,u),c=!0)},o(u){Qe(k.$$.fragment,u),c=!1},d(u){u&&(D(e),D(t)),q&&q.d(u),n[39](null),$&&$.d(),Ze(k),n[41](null),w&&w.d(),j&&j.d(),y=!1,re(H)}}}function gt(n,e,t){let l=[],s=!1,i=!1,f=!1,m="",{wording:M={LOADING:"Loading..."}}=e,{attachedInternals:x}=e,{minSelects:T=0}=e,{maxSelects:o=null}=e,{disabled:k=!1}=e,{required:I=!1}=e,{hint:b=""}=e,{value:p=""}=e,{internalValue:c=""}=e,{id:y=""}=e,{name:H=""}=e,{label:q=""}=e,{labelType:z="inside"}=e;const K=()=>{var a;return Y?(a=l.find(d=>d.selected))==null?void 0:a.value:l.filter(d=>d.selected).map(d=>d.value)};let{service:$}=e,{validationMessages:w={}}=e,{requiredValidationMessage:j}=e,{minselectsValidationMessage:u}=e,{maxselectsValidationMessage:g}=e,{singleSelect:Y=!1}=e,{defaultSearch:W=!1}=e,{defaultShow:Z=5}=e,ee=0,de=!1,P=!1,L,oe,C=[],te="",me,he,_=!1,le;const je=et(),ke=()=>{x.reportValidity()};async function pe(){t(12,l=l.filter(d=>d.selected)),t(17,f=!0);const a=await $.search(m);t(12,l=[...l,...a.map(d=>(d.selected=!1,d))]),t(17,f=!1)}async function ae(){t(12,l=l.filter(d=>d.selected)),ee=l.length,t(17,f=!0);const a=await $.search("");t(12,l=[...l,...a.map(d=>(d.selected=!1,d))]),t(12,l=l.slice(0,ee+Math.max(0,Z-ee))),t(17,f=!1)}function F(a){var d;if((d=a?.target)!=null&&d.closest(".menu"))return;const r=L.getBoundingClientRect(),A=window.innerHeight-r.bottom,ne=300;let N="";A<ne?N=`
        width: ${r.width}px;
        bottom: ${window.innerHeight-r.top}px;
        left: ${r.left}px;
      `:N=`
        width: ${r.width}px;
        top: ${r.bottom}px;
        left: ${r.left}px;
      `,t(19,oe=N),t(13,P=!P),setTimeout(P?()=>{const B=l.findIndex(se=>!se.disabled);B!==-1&&C[B].focus()}:()=>{de&&L.nextElementSibling instanceof HTMLButtonElement?L.nextElementSibling.focus():L.focus()},10)}function R(a,d){if(d==="next"){for(let r=a+1;r<l.length;r++)if(!l[r].disabled)return r}else if(d==="previous"){for(let r=a-1;r>=0;r--)if(!l[r].disabled)return r}return a}function qe(a){if(_)return;const d=C.findIndex(A=>A===document.activeElement);let r;if(P){if(a.key==="Escape"){F(),L.focus();return}const A=a.key==="Home"||a.key==="ArrowUp"&&a.metaKey,ne=a.key==="End"||a.key==="ArrowDown"&&a.metaKey;if(A){a.preventDefault();const N=l.findIndex(B=>!B.disabled);N!==-1&&C[N].focus();return}if(ne){a.preventDefault();const N=l.slice().reverse().findIndex(se=>!se.disabled),B=N!==-1?l.length-1-N:-1;B!==-1&&C[B].focus();return}if(["ArrowDown","ArrowUp"].includes(a.key)&&(a.preventDefault(),a.key==="ArrowUp"?r=R(d,"previous"):r=R(d,"next"),C[r].focus()),a.key==="Tab"){if(a.preventDefault(),de=!0,a.shiftKey){if(r=R(d,"previous"),d===r){F(),L.focus();return}}else if(r=R(d,"next"),d===r){F(),L.focus();return}C[r].focus()}if(/^[a-z\d]$/i.test(a.key)){clearTimeout(me),te+=a.key;const N=l.map(B=>B.label?B.label:B.value).findIndex(B=>B.toLowerCase().includes(te.toLowerCase()));N!==-1&&C[N].focus(),me=setTimeout(()=>{te=""},500)}}}async function Te(a){t(15,s=!0);const d=Array.isArray(a)?a:a.split(",");await Promise.all(d.map(async r=>{let A;$.getSingle?await $.getSingle(r)?(A=await $.getSingle(r),A.selected=!0):A={value:r,selected:!0}:A={value:r,selected:!0},t(12,l=[...l,A])})),t(15,s=!1)}function Ie(a){ue[a?"unshift":"push"](()=>{le=a,t(23,le)})}function Ae(){c=this.value,t(0,c),t(12,l),t(3,I),t(28,x),t(34,j),t(33,w),t(14,L),t(29,T),t(35,u),t(30,o),t(36,g),t(10,Y),t(31,p)}function Le(a){ue[a?"unshift":"push"](()=>{L=a,t(14,L)})}const Ee=()=>{W&&!f&&ae()};function De(){m=this.value,t(18,m)}const He=()=>{!f&&(m!=""||!W)&&pe(),!f&&m==""&&W&&ae()},Be=()=>t(22,_=!0),Ne=()=>t(22,_=!1);function Oe(a,d){ue[a?"unshift":"push"](()=>{C[d]=a,t(20,C)})}const Ge=(a,d,r)=>{Y?(t(12,l=l.map(A=>(A.selected=A===a,A))),t(13,P=!1)):t(12,d[r].selected=!a.selected,l)},Ce=async()=>{t(16,i=!0),t(12,l=l.concat(await $.loadMore(m))),t(16,i=!1)},Ue=()=>t(13,P=!1);return n.$$set=a=>{"wording"in a&&t(1,M=a.wording),"attachedInternals"in a&&t(28,x=a.attachedInternals),"minSelects"in a&&t(29,T=a.minSelects),"maxSelects"in a&&t(30,o=a.maxSelects),"disabled"in a&&t(2,k=a.disabled),"required"in a&&t(3,I=a.required),"hint"in a&&t(4,b=a.hint),"value"in a&&t(31,p=a.value),"internalValue"in a&&t(0,c=a.internalValue),"id"in a&&t(5,y=a.id),"name"in a&&t(6,H=a.name),"label"in a&&t(7,q=a.label),"labelType"in a&&t(8,z=a.labelType),"service"in a&&t(9,$=a.service),"validationMessages"in a&&t(33,w=a.validationMessages),"requiredValidationMessage"in a&&t(34,j=a.requiredValidationMessage),"minselectsValidationMessage"in a&&t(35,u=a.minselectsValidationMessage),"maxselectsValidationMessage"in a&&t(36,g=a.maxselectsValidationMessage),"singleSelect"in a&&t(10,Y=a.singleSelect),"defaultSearch"in a&&t(11,W=a.defaultSearch),"defaultShow"in a&&t(37,Z=a.defaultShow)},n.$$.update=()=>{var a;if(n.$$.dirty[0]&8192&&(P?document.documentElement.style.overflowY="hidden":document.documentElement.style.overflowY=""),n.$$.dirty[0]&1879069704|n.$$.dirty[1]&60){t(12,l=l.filter(r=>r.selected).concat(l.filter(r=>!r.selected)));const d=l.filter(r=>r.selected).length;d==0&&I?x.setValidity({customError:!0},j||w.required||"At least one item needs to be checked.",L):d<T?x.setValidity({customError:!0},u||w.minselects||"Below limit checks.",L):o!==null&&d>o?x.setValidity({customError:!0},g||w.maxselects||"Above limit checks.",L):x.setValidity({}),x.checkValidity(),t(0,c=l.filter(r=>r.selected).map(r=>r.value).join(",")),t(21,he=l.filter(r=>r.selected).map(r=>r.label?r.label:r.value)),je("value",Y?(a=l.find(r=>r.selected))==null?void 0:a.value:l.filter(r=>r.selected).map(r=>r.value))}n.$$.dirty[1]&1&&(p?Te(p):t(12,l=[]))},[c,M,k,I,b,y,H,q,z,$,Y,W,l,P,L,s,i,f,m,oe,C,he,_,le,pe,ae,F,qe,x,T,o,p,K,w,j,u,g,Z,ke,Ie,Ae,Le,Ee,De,He,Be,Ne,Oe,Ge,Ce,Ue]}class Ve extends We{constructor(e){super(),_e(this,e,gt,ft,Fe,{wording:1,attachedInternals:28,minSelects:29,maxSelects:30,disabled:2,required:3,hint:4,value:31,internalValue:0,id:5,name:6,label:7,labelType:8,getValue:32,service:9,validationMessages:33,requiredValidationMessage:34,minselectsValidationMessage:35,maxselectsValidationMessage:36,singleSelect:10,defaultSearch:11,defaultShow:37,reportValidity:38},null,[-1,-1])}get wording(){return this.$$.ctx[1]}set wording(e){this.$$set({wording:e}),S()}get attachedInternals(){return this.$$.ctx[28]}set attachedInternals(e){this.$$set({attachedInternals:e}),S()}get minSelects(){return this.$$.ctx[29]}set minSelects(e){this.$$set({minSelects:e}),S()}get maxSelects(){return this.$$.ctx[30]}set maxSelects(e){this.$$set({maxSelects:e}),S()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),S()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),S()}get hint(){return this.$$.ctx[4]}set hint(e){this.$$set({hint:e}),S()}get value(){return this.$$.ctx[31]}set value(e){this.$$set({value:e}),S()}get internalValue(){return this.$$.ctx[0]}set internalValue(e){this.$$set({internalValue:e}),S()}get id(){return this.$$.ctx[5]}set id(e){this.$$set({id:e}),S()}get name(){return this.$$.ctx[6]}set name(e){this.$$set({name:e}),S()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),S()}get labelType(){return this.$$.ctx[8]}set labelType(e){this.$$set({labelType:e}),S()}get getValue(){return this.$$.ctx[32]}get service(){return this.$$.ctx[9]}set service(e){this.$$set({service:e}),S()}get validationMessages(){return this.$$.ctx[33]}set validationMessages(e){this.$$set({validationMessages:e}),S()}get requiredValidationMessage(){return this.$$.ctx[34]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),S()}get minselectsValidationMessage(){return this.$$.ctx[35]}set minselectsValidationMessage(e){this.$$set({minselectsValidationMessage:e}),S()}get maxselectsValidationMessage(){return this.$$.ctx[36]}set maxselectsValidationMessage(e){this.$$set({maxselectsValidationMessage:e}),S()}get singleSelect(){return this.$$.ctx[10]}set singleSelect(e){this.$$set({singleSelect:e}),S()}get defaultSearch(){return this.$$.ctx[11]}set defaultSearch(e){this.$$set({defaultSearch:e}),S()}get defaultShow(){return this.$$.ctx[37]}set defaultShow(e){this.$$set({defaultShow:e}),S()}get reportValidity(){return this.$$.ctx[38]}}try{customElements.define("jp-multisearch",ze(Ve,{wording:{},attachedInternals:{},minSelects:{},maxSelects:{},disabled:{type:"Boolean"},required:{type:"Boolean"},hint:{},value:{},internalValue:{},id:{},name:{},label:{},labelType:{},service:{},validationMessages:{},requiredValidationMessage:{},minselectsValidationMessage:{},maxselectsValidationMessage:{},singleSelect:{type:"Boolean"},defaultSearch:{type:"Boolean"},defaultShow:{}},[],["getValue","reportValidity"],!1,n=>{var e;return e=class extends n{constructor(){super(),this.attachedInternals=this.attachInternals()}},Pe(e,"formAssociated",!0),e}));}catch{};export{Ve as default};
//# sourceMappingURL=multisearch.wc.js.map
