var Ue=Object.defineProperty,ze=(a,e,t)=>e in a?Ue(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Pe=(a,e,t)=>ze(a,typeof e!="symbol"?e+"":e,t);import{c as Re,S as Xe,i as Ye,o as S,s as _e,l as O,e as V,z as Z,R as Fe,d as h,A as K,f as E,p as v,X as J,T as Ze,m as N,N as ie,B as Q,t as Je,j as Qe,k as B,U as We,r as re,x as et,C as fe,q as tt,$ as lt,a0 as nt,v as ce,n as ue,y as at,K as st,w as it,Z as rt}from"./svelte.js";import"./index.js";import{clickOutside as ct}from"./click-outside.js";import{A as ut,c as dt}from"./checkmark.js";function $e(a,e,t){const l=a.slice();return l[58]=e[t],l[59]=e,l[60]=t,l}function ge(a){let e;return{c(){e=V("div"),h(e,"class","jp-multisearch-label")},m(t,l){E(t,e,l),e.innerHTML=a[7]},p(t,l){l[0]&128&&(e.innerHTML=t[7])},d(t){t&&B(e)}}}function ot(a){let e;return{c(){e=V("span"),h(e,"class","jp-multisearch-select-label"),K(e,"jp-multisearch-select-label-move",a[0]||a[13])},m(t,l){E(t,e,l),e.innerHTML=a[7]},p(t,l){l[0]&128&&(e.innerHTML=t[7]),l[0]&8193&&K(e,"jp-multisearch-select-label-move",t[0]||t[13])},d(t){t&&B(e)}}}function mt(a){let e,t=a[1].LOADING+"",l;return{c(){e=V("span"),l=Z(t),h(e,"class","jp-multisearch-select-label")},m(s,i){E(s,e,i),v(e,l)},p(s,i){i[0]&2&&t!==(t=s[1].LOADING+"")&&Q(l,t)},d(s){s&&B(e)}}}function ve(a){let e;return{c(){e=V("span"),h(e,"class","jp-multisearch-select-hint")},m(t,l){E(t,e,l),e.innerHTML=a[4]},p(t,l){l[0]&16&&(e.innerHTML=t[4])},d(t){t&&B(e)}}}function xe(a){let e,t,l,s,i=[],f=new Map,m,M,x,T,o=a[9].search&&ye(a),k=fe(a[12]);const I=c=>c[58];for(let c=0;c<k.length;c+=1){let b=$e(a,k,c),D=I(b);f.set(D,i[c]=we(D,b))}let y=a[17]&&Se(),p=a[9].loadMore&&!a[17]&&Me(a);return{c(){e=V("div"),t=V("div"),o&&o.c(),l=O(),s=V("div");for(let c=0;c<i.length;c+=1)i[c].c();m=O(),y&&y.c(),M=O(),p&&p.c(),h(s,"class","jp-multisearch-menu-buttons"),h(t,"class","jp-multisearch-menu"),h(t,"style",a[19]),h(t,"role","dialog"),h(e,"class","jp-multisearch-overlay")},m(c,b){E(c,e,b),v(e,t),o&&o.m(t,null),v(t,l),v(t,s);for(let D=0;D<i.length;D+=1)i[D]&&i[D].m(s,null);v(s,m),y&&y.m(s,null),v(t,M),p&&p.m(t,null),x||(T=[tt(ct.call(null,t)),N(t,"click_outside",a[50]),N(t,"keydown",a[27])],x=!0)},p(c,b){c[9].search?o?o.p(c,b):(o=ye(c),o.c(),o.m(t,l)):o&&(o.d(1),o=null),b[0]&1061888&&(k=fe(c[12]),i=lt(i,b,I,1,c,k,f,s,nt,we,m,$e)),c[17]?y||(y=Se(),y.c(),y.m(s,null)):y&&(y.d(1),y=null),c[9].loadMore&&!c[17]?p?p.p(c,b):(p=Me(c),p.c(),p.m(t,null)):p&&(p.d(1),p=null),b[0]&524288&&h(t,"style",c[19])},d(c){c&&B(e),o&&o.d();for(let b=0;b<i.length;b+=1)i[b].d();y&&y.d(),p&&p.d(),x=!1,re(T)}}}function ye(a){let e,t,l,s,i,f;return{c(){e=V("div"),t=V("span"),t.textContent="Search",l=O(),s=V("input"),h(t,"class","jp-multisearch-search-label"),K(t,"jp-multisearch-search-label-move",a[22]||a[18]),h(s,"name","search"),h(s,"type","text"),h(s,"class","jp-multisearch-search-input"),h(e,"class","jp-multisearch-search-field")},m(m,M){E(m,e,M),v(e,t),v(e,l),v(e,s),J(s,a[18]),i||(f=[N(s,"input",a[43]),N(s,"input",a[44]),N(s,"focus",a[45]),N(s,"blur",a[46])],i=!0)},p(m,M){M[0]&4456448&&K(t,"jp-multisearch-search-label-move",m[22]||m[18]),M[0]&262144&&s.value!==m[18]&&J(s,m[18])},d(m){m&&B(e),i=!1,re(f)}}}function be(a){let e,t;return{c(){e=new rt(!1),t=at(),e.a=t},m(l,s){e.m(dt,l,s),E(l,t,s)},d(l){l&&(B(t),e.d())}}}function we(a,e){let t,l,s=(e[58].label||e[58].value)+"",i,f,m,M=e[60],x,T,o=e[58].selected&&be();const k=()=>e[47](t,M),I=()=>e[47](null,M);function y(){return e[48](e[58],e[59],e[60])}return{key:a,first:null,c(){t=V("button"),l=V("span"),i=Z(s),f=O(),o&&o.c(),h(t,"type","button"),h(t,"class","jp-multisearch-menu-button"),t.disabled=m=e[58].disabled,K(t,"jp-multisearch-menu-button-selected",e[58].selected),this.first=t},m(p,c){E(p,t,c),v(t,l),v(l,i),v(t,f),o&&o.m(t,null),k(),x||(T=N(t,"click",ie(y)),x=!0)},p(p,c){e=p,c[0]&4096&&s!==(s=(e[58].label||e[58].value)+"")&&Q(i,s),e[58].selected?o||(o=be(),o.c(),o.m(t,null)):o&&(o.d(1),o=null),c[0]&4096&&m!==(m=e[58].disabled)&&(t.disabled=m),M!==e[60]&&(I(),M=e[60],k()),c[0]&4096&&K(t,"jp-multisearch-menu-button-selected",e[58].selected)},d(p){p&&B(t),o&&o.d(),I(),x=!1,T()}}}function Se(a){let e;return{c(){e=V("span"),e.textContent="Loading...",ce(e,"display","block"),ce(e,"padding","0.75rem"),ce(e,"text-align","center")},m(t,l){E(t,e,l)},d(t){t&&B(e)}}}function Me(a){let e;function t(i,f){return i[16]?ht:pt}let l=t(a),s=l(a);return{c(){e=V("div"),s.c(),h(e,"class","jp-multisearch-loadmore")},m(i,f){E(i,e,f),s.m(e,null)},p(i,f){l===(l=t(i))&&s?s.p(i,f):(s.d(1),s=l(i),s&&(s.c(),s.m(e,null)))},d(i){i&&B(e),s.d()}}}function ht(a){let e,t=a[1].LOADING+"",l;return{c(){e=V("button"),l=Z(t),h(e,"type","button"),e.disabled=!0},m(s,i){E(s,e,i),v(e,l)},p(s,i){i[0]&2&&t!==(t=s[1].LOADING+"")&&Q(l,t)},d(s){s&&B(e)}}}function pt(a){let e,t,l;return{c(){e=V("button"),e.textContent="Load more",h(e,"type","button")},m(s,i){E(s,e,i),t||(l=N(e,"click",st(ie(a[49]))),t=!0)},p:it,d(s){s&&B(e),t=!1,l()}}}function ft(a){let e,t,l,s,i,f,m,M=(a[21]||"")+"",x,T,o,k,I,y,p,c,b,D,q=a[7]&&a[8]=="outside"&&ge(a);function R(u,$){if(u[15])return mt;if(u[7]&&u[8]=="inside")return ot}let z=R(a),g=z&&z(a);k=new ut({props:{open:a[13]}});let w=a[4]&&ve(a),j=a[13]&&xe(a);return{c(){q&&q.c(),e=O(),t=V("div"),l=V("input"),s=O(),i=V("button"),g&&g.c(),f=O(),m=V("span"),x=Z(M),o=O(),Fe(k.$$.fragment),y=O(),w&&w.c(),p=O(),j&&j.c(),h(l,"class","jp-multisearch-hidden-input"),h(l,"tabindex","-1"),h(l,"id",a[5]),h(l,"name",a[6]),l.required=a[3],h(m,"class",T=`jp-multisearch-select-option ${a[8]=="outside"||!a[7]?"":"jp-multisearch-select-option-padding"}`),h(i,"type","button"),h(i,"class","jp-multisearch-select"),i.disabled=I=a[2]||a[15],K(i,"jp-multisearch-select-toggled",a[13]),h(t,"class","jp-multisearch-wrapper"),K(t,"jp-multisearch-has-hint",a[4])},m(u,$){q&&q.m(u,$),E(u,e,$),E(u,t,$),v(t,l),a[39](l),J(l,a[0]),v(t,s),v(t,i),g&&g.m(i,null),v(i,f),v(i,m),v(m,x),v(i,o),Ze(k,i,null),a[41](i),v(t,y),w&&w.m(t,null),v(t,p),j&&j.m(t,null),c=!0,b||(D=[N(l,"input",a[40]),N(i,"click",ie(a[26])),N(i,"click",a[42]),N(i,"keydown",a[27])],b=!0)},p(u,$){u[7]&&u[8]=="outside"?q?q.p(u,$):(q=ge(u),q.c(),q.m(e.parentNode,e)):q&&(q.d(1),q=null),(!c||$[0]&32)&&h(l,"id",u[5]),(!c||$[0]&64)&&h(l,"name",u[6]),(!c||$[0]&8)&&(l.required=u[3]),$[0]&1&&l.value!==u[0]&&J(l,u[0]),z===(z=R(u))&&g?g.p(u,$):(g&&g.d(1),g=z&&z(u),g&&(g.c(),g.m(i,f))),(!c||$[0]&2097152)&&M!==(M=(u[21]||"")+"")&&Q(x,M),(!c||$[0]&384&&T!==(T=`jp-multisearch-select-option ${u[8]=="outside"||!u[7]?"":"jp-multisearch-select-option-padding"}`))&&h(m,"class",T);const U={};$[0]&8192&&(U.open=u[13]),k.$set(U),(!c||$[0]&32772&&I!==(I=u[2]||u[15]))&&(i.disabled=I),(!c||$[0]&8192)&&K(i,"jp-multisearch-select-toggled",u[13]),u[4]?w?w.p(u,$):(w=ve(u),w.c(),w.m(t,p)):w&&(w.d(1),w=null),u[13]?j?j.p(u,$):(j=xe(u),j.c(),j.m(t,null)):j&&(j.d(1),j=null),(!c||$[0]&16)&&K(t,"jp-multisearch-has-hint",u[4])},i(u){c||(Je(k.$$.fragment,u),c=!0)},o(u){Qe(k.$$.fragment,u),c=!1},d(u){u&&(B(e),B(t)),q&&q.d(u),a[39](null),g&&g.d(),We(k),a[41](null),w&&w.d(),j&&j.d(),b=!1,re(D)}}}function $t(a,e,t){let l=[],s=!1,i=!1,f=!1,m="",{wording:M={LOADING:"Loading..."}}=e,{attachedInternals:x}=e,{minSelects:T=0}=e,{maxSelects:o=null}=e,{disabled:k=!1}=e,{required:I=!1}=e,{hint:y=""}=e,{value:p=""}=e,{internalValue:c=""}=e,{id:b=""}=e,{name:D=""}=e,{label:q=""}=e,{labelType:R="inside"}=e;const z=()=>{var n;return U?(n=l.find(d=>d.selected))==null?void 0:n.value:l.filter(d=>d.selected).map(d=>d.value)};let{service:g}=e,{validationMessages:w={}}=e,{requiredValidationMessage:j}=e,{minselectsValidationMessage:u}=e,{maxselectsValidationMessage:$}=e,{singleSelect:U=!1}=e,{defaultSearch:X=!1}=e,{defaultShow:W=5}=e,ee=0,de=!1,P=!1,L,oe,C=[],te="",me,he,Y=!1,le;const je=et(),ke=()=>{x.reportValidity()};async function pe(){t(12,l=l.filter(d=>d.selected)),t(17,f=!0);const n=await g.search(m);t(12,l=[...l,...n.map(d=>(d.selected=!1,d))]),t(17,f=!1)}async function ne(){t(12,l=l.filter(d=>d.selected)),ee=l.length,t(17,f=!0);const n=await g.search("");t(12,l=[...l,...n.map(d=>(d.selected=!1,d))]),t(12,l=l.slice(0,ee+Math.max(0,W-ee))),t(17,f=!1)}function _(n){var d;if((d=n?.target)!=null&&d.closest(".menu"))return;const r=L.getBoundingClientRect(),A=window.innerHeight-r.bottom,ae=300;let G="";A<ae?G=`
        width: ${r.width}px;
        bottom: ${window.innerHeight-r.top}px;
        left: ${r.left}px;
      `:G=`
        width: ${r.width}px;
        top: ${r.bottom}px;
        left: ${r.left}px;
      `,t(19,oe=G),t(13,P=!P),setTimeout(P?()=>{const H=l.findIndex(se=>!se.disabled);H!==-1&&C[H].focus()}:()=>{de&&L.nextElementSibling instanceof HTMLButtonElement?L.nextElementSibling.focus():L.focus()},10)}function F(n,d){if(d==="next"){for(let r=n+1;r<l.length;r++)if(!l[r].disabled)return r}else if(d==="previous"){for(let r=n-1;r>=0;r--)if(!l[r].disabled)return r}return n}function qe(n){if(Y)return;const d=C.findIndex(A=>A===document.activeElement);let r;if(P){if(n.key==="Escape"){_(),L.focus();return}const A=n.key==="Home"||n.key==="ArrowUp"&&n.metaKey,ae=n.key==="End"||n.key==="ArrowDown"&&n.metaKey;if(A){n.preventDefault();const G=l.findIndex(H=>!H.disabled);G!==-1&&C[G].focus();return}if(ae){n.preventDefault();const G=l.slice().reverse().findIndex(se=>!se.disabled),H=G!==-1?l.length-1-G:-1;H!==-1&&C[H].focus();return}if(["ArrowDown","ArrowUp"].includes(n.key)&&(n.preventDefault(),n.key==="ArrowUp"?r=F(d,"previous"):r=F(d,"next"),C[r].focus()),n.key==="Tab"){if(n.preventDefault(),de=!0,n.shiftKey){if(r=F(d,"previous"),d===r){_(),L.focus();return}}else if(r=F(d,"next"),d===r){_(),L.focus();return}C[r].focus()}if(/^[a-z\d]$/i.test(n.key)){clearTimeout(me),te+=n.key;const G=l.map(H=>H.label?H.label:H.value).findIndex(H=>H.toLowerCase().includes(te.toLowerCase()));G!==-1&&C[G].focus(),me=setTimeout(()=>{te=""},500)}}}async function Te(n){t(15,s=!0);const d=Array.isArray(n)?n:n.split(",");await Promise.all(d.map(async r=>{let A;g.getSingle?await g.getSingle(r)?(A=await g.getSingle(r),A.selected=!0):A={value:r,selected:!0}:A={value:r,selected:!0},t(12,l=[...l,A])})),t(15,s=!1)}function Ie(n){ue[n?"unshift":"push"](()=>{le=n,t(23,le)})}function Ae(){c=this.value,t(0,c),t(12,l),t(3,I),t(28,x),t(34,j),t(33,w),t(14,L),t(29,T),t(35,u),t(30,o),t(36,$),t(10,U),t(31,p)}function Le(n){ue[n?"unshift":"push"](()=>{L=n,t(14,L)})}const Ee=()=>{X&&!f&&ne()};function Be(){m=this.value,t(18,m)}const De=()=>{!f&&(m!=""||!X)&&pe(),!f&&m==""&&X&&ne()},He=()=>t(22,Y=!0),Ge=()=>t(22,Y=!1);function Ne(n,d){ue[n?"unshift":"push"](()=>{C[d]=n,t(20,C)})}const Oe=(n,d,r)=>{U?(t(12,l=l.map(A=>(A.selected=A===n,A))),t(13,P=!1)):t(12,d[r].selected=!n.selected,l)},Ce=async()=>{t(16,i=!0),t(12,l=l.concat(await g.loadMore(m))),t(16,i=!1)},Ke=()=>t(13,P=!1);return a.$$set=n=>{"wording"in n&&t(1,M=n.wording),"attachedInternals"in n&&t(28,x=n.attachedInternals),"minSelects"in n&&t(29,T=n.minSelects),"maxSelects"in n&&t(30,o=n.maxSelects),"disabled"in n&&t(2,k=n.disabled),"required"in n&&t(3,I=n.required),"hint"in n&&t(4,y=n.hint),"value"in n&&t(31,p=n.value),"internalValue"in n&&t(0,c=n.internalValue),"id"in n&&t(5,b=n.id),"name"in n&&t(6,D=n.name),"label"in n&&t(7,q=n.label),"labelType"in n&&t(8,R=n.labelType),"service"in n&&t(9,g=n.service),"validationMessages"in n&&t(33,w=n.validationMessages),"requiredValidationMessage"in n&&t(34,j=n.requiredValidationMessage),"minselectsValidationMessage"in n&&t(35,u=n.minselectsValidationMessage),"maxselectsValidationMessage"in n&&t(36,$=n.maxselectsValidationMessage),"singleSelect"in n&&t(10,U=n.singleSelect),"defaultSearch"in n&&t(11,X=n.defaultSearch),"defaultShow"in n&&t(37,W=n.defaultShow)},a.$$.update=()=>{var n;if(a.$$.dirty[0]&8192&&(P?document.documentElement.style.overflowY="hidden":document.documentElement.style.overflowY=""),a.$$.dirty[0]&1879069704|a.$$.dirty[1]&60){t(12,l=l.filter(r=>r.selected).concat(l.filter(r=>!r.selected)));const d=l.filter(r=>r.selected).length;d==0&&I?x.setValidity({customError:!0},j||w.required||"At least one item needs to be checked.",L):d<T?x.setValidity({customError:!0},u||w.minselects||"Below limit checks.",L):o!==null&&d>o?x.setValidity({customError:!0},$||w.maxselects||"Above limit checks.",L):x.setValidity({}),x.checkValidity(),t(0,c=l.filter(r=>r.selected).map(r=>r.value).join(",")),t(21,he=l.filter(r=>r.selected).map(r=>r.label?r.label:r.value)),je("value",U?(n=l.find(r=>r.selected))==null?void 0:n.value:l.filter(r=>r.selected).map(r=>r.value))}a.$$.dirty[1]&1&&(p?Te(p):t(12,l=[]))},[c,M,k,I,y,b,D,q,R,g,U,X,l,P,L,s,i,f,m,oe,C,he,Y,le,pe,ne,_,qe,x,T,o,p,z,w,j,u,$,W,ke,Ie,Ae,Le,Ee,Be,De,He,Ge,Ne,Oe,Ce,Ke]}class Ve extends Xe{constructor(e){super(),Ye(this,e,$t,ft,_e,{wording:1,attachedInternals:28,minSelects:29,maxSelects:30,disabled:2,required:3,hint:4,value:31,internalValue:0,id:5,name:6,label:7,labelType:8,getValue:32,service:9,validationMessages:33,requiredValidationMessage:34,minselectsValidationMessage:35,maxselectsValidationMessage:36,singleSelect:10,defaultSearch:11,defaultShow:37,reportValidity:38},null,[-1,-1])}get wording(){return this.$$.ctx[1]}set wording(e){this.$$set({wording:e}),S()}get attachedInternals(){return this.$$.ctx[28]}set attachedInternals(e){this.$$set({attachedInternals:e}),S()}get minSelects(){return this.$$.ctx[29]}set minSelects(e){this.$$set({minSelects:e}),S()}get maxSelects(){return this.$$.ctx[30]}set maxSelects(e){this.$$set({maxSelects:e}),S()}get disabled(){return this.$$.ctx[2]}set disabled(e){this.$$set({disabled:e}),S()}get required(){return this.$$.ctx[3]}set required(e){this.$$set({required:e}),S()}get hint(){return this.$$.ctx[4]}set hint(e){this.$$set({hint:e}),S()}get value(){return this.$$.ctx[31]}set value(e){this.$$set({value:e}),S()}get internalValue(){return this.$$.ctx[0]}set internalValue(e){this.$$set({internalValue:e}),S()}get id(){return this.$$.ctx[5]}set id(e){this.$$set({id:e}),S()}get name(){return this.$$.ctx[6]}set name(e){this.$$set({name:e}),S()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),S()}get labelType(){return this.$$.ctx[8]}set labelType(e){this.$$set({labelType:e}),S()}get getValue(){return this.$$.ctx[32]}get service(){return this.$$.ctx[9]}set service(e){this.$$set({service:e}),S()}get validationMessages(){return this.$$.ctx[33]}set validationMessages(e){this.$$set({validationMessages:e}),S()}get requiredValidationMessage(){return this.$$.ctx[34]}set requiredValidationMessage(e){this.$$set({requiredValidationMessage:e}),S()}get minselectsValidationMessage(){return this.$$.ctx[35]}set minselectsValidationMessage(e){this.$$set({minselectsValidationMessage:e}),S()}get maxselectsValidationMessage(){return this.$$.ctx[36]}set maxselectsValidationMessage(e){this.$$set({maxselectsValidationMessage:e}),S()}get singleSelect(){return this.$$.ctx[10]}set singleSelect(e){this.$$set({singleSelect:e}),S()}get defaultSearch(){return this.$$.ctx[11]}set defaultSearch(e){this.$$set({defaultSearch:e}),S()}get defaultShow(){return this.$$.ctx[37]}set defaultShow(e){this.$$set({defaultShow:e}),S()}get reportValidity(){return this.$$.ctx[38]}}try{customElements.define("jp-multisearch",Re(Ve,{wording:{},attachedInternals:{},minSelects:{},maxSelects:{},disabled:{type:"Boolean"},required:{type:"Boolean"},hint:{},value:{},internalValue:{},id:{},name:{},label:{},labelType:{},service:{},validationMessages:{},requiredValidationMessage:{},minselectsValidationMessage:{},maxselectsValidationMessage:{},singleSelect:{type:"Boolean"},defaultSearch:{type:"Boolean"},defaultShow:{}},[],["getValue","reportValidity"],!1,a=>{var e;return e=class extends a{constructor(){super(),this.attachedInternals=this.attachInternals()}},Pe(e,"formAssociated",!0),e}));}catch{};export{Ve as default};
//# sourceMappingURL=multisearch.wc.js.map
